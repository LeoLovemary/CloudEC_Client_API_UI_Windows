webpackJsonp([22],{104:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwHttpSdk=void 0;var a=r(121),o=n(a),s=r(4),u=n(s),i=r(2156),p=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t.default=e,t}(i),d=r(1106),c=n(d);t.HwHttpSdk=function e(){(0,u.default)(this,e),(0,o.default)(this,p),this.hwTupHttpTransSdk=c.default}},1106:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r(131),o=n(a),s=r(67),u=n(s),i=r(1),p=n(i),d=r(121),c=n(d),l=r(2),f=n(l),h=r(3),_=n(h),y=r(4),m=n(y),v=r(5),w=n(v),x=window.Logger("tup")("httptrans"),P=coreCommon.getTupProtocolClass(),g=function(){function e(t){var r=this;return(0,m.default)(this,e),new _.default(function(){var e=(0,f.default)(p.default.mark(function e(n,a){var o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={key:constant.TupModuleKey.httptrans,moduleName:"tup_httptrans_service_protocol",webSocketUri:""},(0,c.default)(o,t),e.next=4,new P(o);case 4:r.tupProtocol=e.sent,n(r);case 6:case"end":return e.stop()}},e,r)}));return function(t,r){return e.apply(this,arguments)}}())}return(0,w.default)(e,[{key:"sendMessage",value:function(e){var t=this,r=Sno();return(0,c.default)(e,{sno:r}),new _.default(function(r,n){var a={resolve:r,data:e,timeoutTime:3e4};t.tupProtocol.setRspFuncsAndSendMessage(a)})}},{key:"setNotifyFunc",value:function(e,t){this.tupProtocol.setNotifyFunc(e,t)}},{key:"httpReleaseHandle",value:function(e){x.info("start tup_http_release_handle");var t={description:"tup_http_release_handle",cmd:1376261,param:{handle:e}};return this.sendMessage(t)}},{key:"httpForceUninit",value:function(e){x.info("start tup_http_forced_uninit");var t={description:"tup_http_forced_uninit",cmd:1376264};return this.sendMessage(t)}},{key:"httpUploadFile",value:function(e){var t=e.url,r=e.username,n=void 0===r?"":r,a=e.password,o=void 0===a?"":a,s=e.header,i=void 0===s?{}:s,p=e.tlsParam,d=void 0===p?{}:p,c=e.filePath,l=e.content,f=e.proxyInfo,h=e.auth_mode,_=void 0===h?0:h,y=e.req_type,m=void 0===y?0:y,v=e.is_cwmp,w=void 0===v?0:v;x.info("start tup_http_upload_file");var P={description:"tup_http_upload_file",cmd:1376260,param:{url:t,header:i,req_type:m,config_param:{proxy_param:{ip:f.proxyAddress,port:parseInt(f.proxyPort),auth_info:{username:f.proxyAccount,password:f.proxyPassword}}},file_path:c}};isNullOrEmpty(d)||(P.param.tls_param=d),1===_&&(P.param.auth_info={mode:_,username:n,password:o},w&&(P.param.mult_part={key:"Account",content:(0,u.default)(l)}));var g=$getState().myInfo.account;return-1!==c.indexOf(g)&&(c=c.replace(g,"***")),x.info("tup_http_upload_file_params, url=",t),x.info("tup_http_upload_file_params, filePath=",c),this.sendMessage(P)}},{key:"sendSyncRequest",value:function(e){var t=e.url,r=e.type,n=e.body,a=e.header,o=void 0===a?{}:a,s=e.proxyInfo,u=e.tlsParam,i=e.cipherlist;return this.sendRequest({url:t,type:r,body:n,header:o,proxyInfo:s,tlsParam:u,cipherlist:i,sync:!0})}},{key:"sendAsyncRequest",value:function(e){var t=e.url,r=e.type,n=e.body,a=e.header,o=void 0===a?{}:a,s=e.proxyInfo,u=e.tlsParam,i=e.cipherlist;return this.sendRequest({url:t,type:r,body:n,header:o,proxyInfo:s,tlsParam:u,cipherlist:i,sync:!1})}},{key:"sendRequest",value:function(e){var t=e.url,r=e.type,n=e.body,a=e.header,s=void 0===a?{}:a,u=e.proxyInfo,i=e.tlsParam,p=e.cipherlist,d=e.sync,c=void 0!==d&&d,l={description:c?"tup_http_syn_send":"tup_http_asyn_send",cmd:c?1376263:1376259,param:{req_param:{url:t,type:r,body:n,header:(0,o.default)(s).map(function(e){return{name:e,value:s[e]}}),auth_info:{mode:0,username:"",password:""}},config_param:{proxy_param:{ip:u.proxyAddress,port:parseInt(u.proxyPort)||0,auth_info:{username:u.proxyAccount,password:u.proxyPassword}},tls_param:{ca_cert_path:i.caCertPath,client_cert_path:"",client_key_path:"",tls_mode:i.tlsMode,vertfy_server_mode:0},cipherlist:p,tcp_timeout:5,req_timeout:30}}};return this.sendMessage(l)}},{key:"httpDownloadFile",value:function(e){var t=e.url,r=e.filePath,n=e.body,a=e.header,s=e.auth_mode,u=void 0===s?1:s,i=e.userName,p=e.password,d=e.proxyInfo;x.info("start tup_http_download_file");var c={description:"tup_http_download_file",cmd:1376265,param:{url:t,body:n,header:(0,o.default)(a).map(function(e){return{name:e,value:a[e]}}),config_param:{proxy_param:{ip:d.proxyAddress,port:parseInt(d.proxyPort),auth_info:{username:d.proxyAccount,password:d.proxyPassword}},tls_param:{ca_cert_path:"",client_cert_path:"",client_key_path:"",tls_mode:0,vertfy_server_mode:0},cipherlist:[50331695,50331701,50331708,50331709],tcp_timeout:5,req_timeout:5},keep_download:2,file_path:r}};return 1===u&&(c.param.auth_info={mode:u,username:i,password:p}),this.sendMessage(c)}}]),e}();t.default=g},116:function(e,t,r){e.exports=r(0)(0)},121:function(e,t,r){e.exports=r(0)(563)},131:function(e,t,r){e.exports={default:r(175),__esModule:!0}},132:function(e,t,r){e.exports=r(0)(238)},136:function(e,t,r){var n=r(10),a=r(8),o=r(137);e.exports=function(e,t){var r=(a.Object||{})[e]||Object[e],s={};s[e]=t(r),n(n.S+n.F*o(function(){r(1)}),"Object",s)}},137:function(e,t,r){e.exports=r(0)(59)},164:function(e,t,r){e.exports=r(0)(80)},175:function(e,t,r){r(176),e.exports=r(8).Object.keys},176:function(e,t,r){var n=r(132),a=r(164);r(136)("keys",function(){return function(e){return a(n(e))}})},2156:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleUploadChrFile=t.initHttpTrans=t.forceUninitHttp=t.httpFileTransProgress=t.httpAsyncResponse=void 0;var a=r(1),o=n(a),s=r(67),u=n(s),i=r(2),p=n(i),d=r(116),c=(n(d),r(1106)),l=n(c),f=window.Logger("logic")("httptrans"),h=null,_=t.httpAsyncResponse=function(){function e(e,t){r[e]=t}function t(e){if(e.hasOwnProperty("param")&&e.param.hasOwnProperty("handle")){if(!(r.hasOwnProperty(e.param.handle)&&r[e.param.handle]instanceof Function))return null;r[e.param.handle](e)}}var r={};return{addHandle:e,parseNotify:t}}(),y=t.httpFileTransProgress=function(){function e(e,t){r[e]=t}function t(e){if(e.hasOwnProperty("param")&&e.param.hasOwnProperty("handle")){if(!(r.hasOwnProperty(e.param.handle)&&r[e.param.handle]instanceof Function))return null;r[e.param.handle](e)}}var r={};return{addHandle:e,parseNotify:t}}();t.forceUninitHttp=function(){var e=(0,p.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("ios"!==window.CLIENTCONFIG.PLATFORM||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=8;break}return e.next=3,new l.default;case 3:return h=e.sent,e.next=6,h.httpForceUninit();case 6:t=e.sent,0!==t.result?f.info("force uninit tup http trans failed for ios, res=",(0,u.default)(t)):f.info("force uninit tup http trans success for ios");case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initHttpTrans=function(){var e=(0,p.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:h=e.sent,h.setNotifyFunc(1376289,_.parseNotify),h.setNotifyFunc(1376290,y.parseNotify);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleUploadChrFile=function(){var e=(0,p.default)(o.default.mark(function e(t){var r,n,a,s,u,i,p,d,c,_,y,m,v,w,x,P,g,N,C,O,A,k,b;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.CLIENTCONFIG["Device.ComCfg.CHR.CHRAddress"],n=window.CLIENTCONFIG["Device.ComCfg.CHR.CHRName"],e.next=4,coreSecurity.PasswordManager.getPassword("CHRPassword");case 4:if(a=e.sent,s=t.path,u=isNullOrEmpty(s),i=isNullOrEmpty(r),p=isNullOrEmpty(n),d=isNullOrEmpty(a),!(u||i||p||d)){e.next=13;break}return f.info("CHR basci info is null, address=",i+", userName=",p+", [psd]=",d),e.abrupt("return");case 13:if(c="TRUE"===window.CLIENTCONFIG["Device.ComCfg.CHR.enableCHR"]?1:0,0!==(_=coreSetting.getChrEnableValue(c))){e.next=18;break}return f.info("CHR file upload is closed, server data is:"+c),e.abrupt("return");case 18:return y="/chrFile/",m=window.APP_DATA_PATH+y+s,window.fs&&(m=window.path.join(window.APP_DATA_PATH,y,s)),v=void 0,w=$getState(),x=w.login,P=x.account,g=x.real_user_account,isNullOrEmpty(g)?v=P:(v=g,f.info("use real_user_account")),N={Account:v},C={proxyAddress:"",proxyPort:0,proxyAccount:"",proxyPassword:""},O=$getState().login,e.next=29,coreSecurity.PasswordManager.getPassword("proxyPassword");case 29:return A=e.sent,O.isSupportProxy&&(C.proxyAddress=O.proxyAddress,C.proxyPort=O.proxyPort,C.proxyAccount=O.proxyAccount,C.proxyPassword=A),e.next=33,new l.default;case 33:return h=e.sent,e.next=36,h.httpUploadFile({url:r,auth_mode:1,username:n,password:a,filePath:m,content:N,proxyInfo:C,is_cwmp:!0});case 36:k=e.sent,0!==k.result?f.info("set tup upload file chr failed, result=",k.result):f.info("set tup upload chr file success"),b=function(e){var t=e.param.rsp_body.rsp_code;200!==t?f.info("tup upload chr files to server failed, rsp_code=",t):f.info("tup upload chr files to server success, rsp_code=",t)},coreHttp.httpAsyncResponse.addHandle(k.handle,b);case 40:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},67:function(e,t,r){e.exports={default:r(68),__esModule:!0}},68:function(e,t,r){var n=r(8),a=n.JSON||(n.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}}});