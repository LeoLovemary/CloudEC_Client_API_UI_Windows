webpackJsonp([27],{1096:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwCwmpSdk=void 0;var i=n(123),a=r(i),o=n(4),s=r(o),c=n(1097);t.HwCwmpSdk=function e(){(0,s.default)(this,e),this.getCwmpApi=c.getCwmpApi,(0,a.default)(this,(0,c.getCwmpApi)().getApiList())}},1097:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.CwmpImpl=t.getCwmpApi=void 0;var a=n(1),o=i(a),s=n(2),c=i(s),u=n(119),f=i(u),d=n(4),l=i(d),p=n(120),g=i(p),w=n(121),h=i(w),C=n(691),v=r(C),m=n(878),S=r(m),_=n(692),E=r(_),I=coreLogger.getLogger("cwmp")("CwmpImpl"),T=void 0,P=(t.getCwmpApi=function(){return isNullOrEmpty(T)&&(T=new P),T},t.CwmpImpl=function(e){function t(){var e=this;(0,l.default)(this,t);var n=(0,g.default)(this,(t.__proto__||(0,f.default)(t)).call(this));return n.stopCwmpServerAndUnInit=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("stopCwmpServerAndUnInit"),e.abrupt("return",S.stopCwmpServerAndUnInit());case 2:case"end":return e.stop()}},t,e)})),n.dealWithUICfgParam=function(){var t=(0,c.default)(o.default.mark(function t(n){var r=n.paramName,i=n.paramValue;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("dealWithUICfgParam"),v.dealWithUICfgParam(r,i);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.cwmpConfigToken=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("cwmpConfigToken"),e.abrupt("return",S.cwmpConfigToken());case 2:case"end":return e.stop()}},t,e)})),n.checkUpdateConfig=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("checkUpdateConfig"),v.checkUpdateConfig();case 2:case"end":return e.stop()}},t,e)})),n.restartUpgrade=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("restartUpgrade"),E.restartUpgrade();case 2:case"end":return e.stop()}},t,e)})),n.setUploadSuccessFunc=function(){var t=(0,c.default)(o.default.mark(function t(n){var r=n.func;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setUploadSuccessFunc"),v.setUploadSuccessFunc(r);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.setUploadFailedFunc=function(){var t=(0,c.default)(o.default.mark(function t(n){var r=n.func;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("setUploadFailedFunc"),v.setUploadFailedFunc(r);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.dealZipLogSuccess=function(){var t=(0,c.default)(o.default.mark(function t(n){var r=n.logPath;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("dealZipLogSuccess"),v.dealZipLogSuccess(r);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.hideProgressBarModal=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("hideProgressBarModal"),E.hideProgressBarModal();case 2:case"end":return e.stop()}},t,e)})),n.clickRequestVersionCheck=function(){var t=(0,c.default)(o.default.mark(function t(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{version:""},r=n.version;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("clickRequestVersionCheck version=",r),E.clickRequestVersionCheck(r);case 2:case"end":return e.stop()}},t,e)}));return function(){return t.apply(this,arguments)}}(),n.sendMobileLogZipFiles=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("sendMobileLogZipFiles"),v.sendMobileLogZipFiles();case 2:case"end":return e.stop()}},t,e)})),n.dealUpdateVersionClick=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("dealUpdateVersionClick"),E.dealUpdateVersionClick();case 2:case"end":return e.stop()}},t,e)})),n.clearBarPageSet=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("clearBarPageSet"),E.clearBarPageSet();case 2:case"end":return e.stop()}},t,e)})),n.requestVersionUpdateCheck=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("requestVersionUpdateCheck"),E.requestVersionUpdateCheck();case 2:case"end":return e.stop()}},t,e)})),n.getInCallingState=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("getInCallingState"),e.abrupt("return",E.getInCallingState());case 2:case"end":return e.stop()}},t,e)})),n.clearBarPageSet=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:I.info("clearBarPageSet"),E.clearBarPageSet();case 2:case"end":return e.stop()}},t,e)})),n.getComPressFileSize=function(){var t=(0,c.default)(o.default.mark(function t(n){var r=n.filePath;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("getComPressFileSize"),e.abrupt("return",v.getComPressFileSize(r));case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),n.initESightService=(0,c.default)(o.default.mark(function t(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("initESightService"),e.abrupt("return",S.initESightService());case 2:case"end":return e.stop()}},t,e)})),n}return(0,h.default)(t,e),t}(coreLazyLoad.CwmpApi))},1098:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.isServerCollecting=function(e){return $dispatch(coreUi.isServerCollecting(e))}},1099:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.syncCertificate=void 0;var i=n(135),a=r(i),o=n(3),s=r(o),c=n(1),u=r(c),f=n(2),d=r(f),l=coreLogger.getLogger("logic")("syncCertificate"),p="",g="",w="",h="",C="",v="",m="",S="",_=function(){var e=(0,d.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:p=window.EXEC_PATH,g=window.EXEC_PATH+"/BfcpTLS",w=window.EXEC_PATH+"/BfcpTLS/server.pem",h=window.EXEC_PATH+"/BfcpTLS/server_key.pem",C=window.EXEC_PATH+"/kmc/p4bfcp.txt",window.fs&&(p=window.path.join(window.EXEC_PATH),g=window.path.join(window.EXEC_PATH,"BfcpTLS"),w=window.path.join(window.EXEC_PATH,"BfcpTLS","server.pem"),h=window.path.join(window.EXEC_PATH,"BfcpTLS","server_key.pem"),C=window.path.join(window.APP_DATA_PATH,"p4bfcp.txt")),"mac"===window.CLIENTCONFIG.PLATFORM&&(p=window.path.join(window.EXEC_PATH)),"win"===window.CLIENTCONFIG.PLATFORM&&(C=window.path.join(window.EXEC_PATH,"BfcpTLS","p4bfcp.txt")),v=window.APP_DATA_PATH+"/deviceCertificate_cacert.pem",m=window.APP_DATA_PATH+"/deviceCertificate.tar.gz",S=window.APP_DATA_PATH+"/deviceCertificate",window.fs&&(v=window.path.join(window.APP_DATA_PATH,"deviceCertificate_cacert.pem"),m=window.path.join(window.APP_DATA_PATH,"deviceCertificate.tar.gz"),S=window.path.join(window.APP_DATA_PATH,"deviceCertificate"));case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=7;break}if(fs.existsSync(t)){e.next=4;break}return l.info("failed to Read file: "+t),e.abrupt("return","");case 4:return e.abrupt("return",fs.readFileSync(t).toString());case 7:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=14;break}if(window.webView.isFileExist(t)){e.next=11;break}return l.info("failed to Read file: "+t),e.abrupt("return","");case 11:return e.abrupt("return",window.webView.readP4BFCP(t));case 14:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=22;break}return n=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var n=function(t){e(t)},r=function(){e("")};window.cordova.exec(n,r,"OCJSBridge","readFile",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=18,n(t);case 18:return r=e.sent,e.abrupt("return",r);case 22:l.info("Unown Platform.");case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),I=function(){var t=(0,d.default)(u.default.mark(function t(n){var r,i;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!window.fs){t.next=6;break}if(!fs.existsSync(n)){t.next=4;break}return r=fs.readFileSync(n),t.abrupt("return",new e(r).toString("base64"));case 4:t.next=19;break;case 6:if("android"!==window.CLIENTCONFIG.PLATFORM){t.next=10;break}return t.abrupt("return",window.webView.readBytesToBase64(n));case 10:if("ios"!==window.CLIENTCONFIG.PLATFORM){t.next=17;break}return i=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var n=function(t){e(t)},r=function(){e("")};window.cordova.exec(n,r,"OCJSBridge","readBytesToBase64",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.next=14,i(n);case 14:return t.abrupt("return",t.sent);case 17:return l.info("Unown PlatForm."),t.abrupt("return","");case 19:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}(),T=function(){var e=(0,d.default)(u.default.mark(function e(t,n){var r,i,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=4;break}try{fs.writeFileSync(t,n)}catch(e){l.error("failed to write file: "+t)}e.next=20;break;case 4:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.abrupt("return",window.webView.writeStringToFile(t,n));case 8:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=18;break}return r=t.lastIndexOf("/"),i=t.slice(0,r),a=t.slice(r+1),o=function(){var e=(0,d.default)(u.default.mark(function e(t,n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var i=function(t){e(t)},a=function(){e("")};window.cordova.exec(i,a,"OCJSBridge","writeFile",[t,n,r])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),e.next=15,o(i,a,n);case 15:return e.abrupt("return",e.sent);case 18:return l.info("Unown Platform."),e.abrupt("return",null);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,d.default)(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.t1=n,e.next=4,E(t);case 4:return e.t2=e.sent,e.next=7,(0,e.t0)(e.t1,e.t2);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),y=function(){var e=(0,d.default)(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=T,e.t1=n,e.next=4,E(t);case 4:return e.t2=e.sent,e.next=7,(0,e.t0)(e.t1,e.t2);case 7:return e.next=9,A(t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),N=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,o,c,f,p,g,w,h;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=28;break}if(!fs.existsSync(t)){e.next=27;break}if(!fs.lstatSync(t).isDirectory()){e.next=26;break}for(n=fs.readdirSync(t),r=!0,i=!1,o=void 0,e.prev=7,c=(0,a.default)(n);!(r=(f=c.next()).done);r=!0)p=f.value,g=window.path.join(t,p),fs.unlinkSync(g);e.next=15;break;case 11:e.prev=11,e.t0=e.catch(7),i=!0,o=e.t0;case 15:e.prev=15,e.prev=16,!r&&c.return&&c.return();case 18:if(e.prev=18,!i){e.next=21;break}throw o;case 21:return e.finish(18);case 22:return e.finish(15);case 23:fs.rmdirSync(t),e.next=27;break;case 26:fs.unlinkSync(t);case 27:fs.mkdirSync(S);case 28:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=32;break}window.webView.makeNewDir(S),e.next=40;break;case 32:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=40;break}return w=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var n=function(t){e(t)},r=function(){e([])};window.cordova.exec(n,r,"OCJSBridge","makeNewDir",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=36,w(S);case 36:if(h=e.sent){e.next=40;break}return l.info("failed to create directory."),e.abrupt("return");case 40:case"end":return e.stop()}},e,void 0,[[7,11,15,23],[16,,18,22]])}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=4;break}fs.existsSync(t)&&(fs.lstatSync(t).isDirectory()?fs.rmdirSync(t):fs.unlinkSync(t)),e.next=17;break;case 4:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.abrupt("return",window.webView.deleteFile(t));case 8:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=16;break}return n=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var n=function(t){e(t)},r=function(){e("")};window.cordova.exec(n,r,"OCJSBridge","deleteFile",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=12,n(t);case 12:return r=e.sent,e.abrupt("return",r);case 16:l.info("Unown Platform.");case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),x=function(){var e=(0,d.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.fs){e.next=9;break}if(!fs.existsSync(t)){e.next=7;break}if(!fs.lstatSync(t).isDirectory()){e.next=6;break}return e.next=5,fs.readdirSync(t);case 5:return e.abrupt("return",e.sent);case 6:return e.abrupt("return",null);case 7:e.next=18;break;case 9:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=13;break}return e.abrupt("return",JSON.parse(window.webView.getFileList(t)));case 13:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=18;break}return n=function(){var e=(0,d.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new s.default(function(e){var n=function(t){e(t)},r=function(){e([])};window.cordova.exec(n,r,"OCJSBridge","getFileList",[t])}));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),e.next=17,n(t);case 17:return e.abrupt("return",e.sent);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),k=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,a,o,s,c,f,d,l,p,g,w,h,C,v,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},r=t.length,i=0,a=512,o=a,s=100,c=8,f=8,d=8,l=12,p=4;case 11:if(!(i+p<r)){e.next=25;break}if(t.substr(i,p).replaceAll("\0","")){e.next=14;break}return e.abrupt("break",25);case 14:g=i,w=i+s+c+f+d,h=t.substr(g,s).replaceAll("\0",""),C=parseInt(t.substr(w,l),8),v=i+o,m=t.substr(v,+C),i=v+C,C%a&&(i+=a-C%a),n[h]=m,e.next=11;break;case 25:return e.abrupt("return",n);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=function(){var e=(0,d.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:l.info("Begin refreshBFCPP"),"ios"===window.CLIENTCONFIG.PLATFORM?window.readBfcpp(window.KMC_PATH+"/p4bfcp.txt"):"android"===window.CLIENTCONFIG.PLATFORM?window.bfcpp=window.webView.readP4BFCP(window.KMC_PATH+"/p4bfcp.txt"):(t=window.path.join(window.KMC_PATH,"p4bfcp.txt"),"win"===window.CLIENTCONFIG.PLATFORM&&(t=window.path.join(window.EXEC_PATH,"BfcpTLS","p4bfcp.txt")),fs.existsSync(t)?window.bfcpp=fs.readFileSync(t).toString():window.bfcpp=fs.readFileSync(window.path.join(window.EXEC_PATH,"p4bfcp.txt")).toString()),l.info("refreshBFCPP: succeed.");case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),b=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("Begin refreshBFCPForTLS"),t=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),n=!1,t!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&t!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(n=!0),l.info("refreshBFCPForTLS: "+n),e.next=7,O();case 7:return e.next=9,coreAccount.configBFCPForTLS({bForceTLSMode:n});case 9:return r=e.sent,e.next=12,coreTup.getCallInstance().configBFCPTLSParam(r);case 12:l.info("refreshBFCPForTLS succeed.");case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,o,s,c,f,d,_,E,I,T,N,k,O,U;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("Begin refreshDeviceCertificate"),t="password.txt",n="private"+$getState().login.account.toUpperCase()+".pem",r=$getState().login.account.toUpperCase()+".pem",i=S+"/"+r,o=S+"/"+n,s=S+"/"+t,window.fs&&(i=window.path.join(S,r),o=window.path.join(S,n),s=window.path.join(S,t)),"mac"!==window.CLIENTCONFIG.PLATFORM){e.next=17;break}return e.next=11,y(i,window.path.join(S,"server.pem"));case 11:return e.next=13,y(o,window.path.join(S,"server_key.pem"));case 13:return e.next=15,y(s,window.path.join(S,"p4bfcp.txt"));case 15:e.next=23;break;case 17:return e.next=19,y(i,w);case 19:return e.next=21,y(o,h);case 21:return e.next=23,y(s,C);case 23:return c=[],c="mac"===window.CLIENTCONFIG.PLATFORM?["server.pem","server_key.pem","p4bfcp.txt"]:[t,n,r],e.next=27,x(S);case 27:f=e.sent,d=!0,_=!1,E=void 0,e.prev=31,I=(0,a.default)(f);case 33:if(d=(T=I.next()).done){e.next=47;break}if(N=T.value,-1!==c.indexOf(N)){e.next=44;break}return k=window.fs?window.path.join(S,N):S+"/"+N,O=window.fs?window.path.join(p,N):p+"/"+N,U=window.fs?window.path.join(g,N):g+"/"+N,e.next=41,P(k,O);case 41:if("mac"===window.CLIENTCONFIG.PLATFORM){e.next=44;break}return e.next=44,y(k,U);case 44:d=!0,e.next=33;break;case 47:e.next=53;break;case 49:e.prev=49,e.t0=e.catch(31),_=!0,E=e.t0;case 53:e.prev=53,e.prev=54,!d&&I.return&&I.return();case 56:if(e.prev=56,!_){e.next=59;break}throw E;case 59:return e.finish(56);case 60:return e.finish(53);case 61:if("mac"===window.CLIENTCONFIG.PLATFORM){e.next=64;break}return e.next=64,A(S);case 64:return e.next=66,A(v);case 66:return e.next=68,A(m);case 68:return e.next=70,b();case 70:l.info("refreshDeviceCertificate: Refresh Device Certificate Succeed.");case 71:case"end":return e.stop()}},e,void 0,[[31,49,53,61],[54,,56,60]])}));return function(){return e.apply(this,arguments)}}(),L=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=S+"/private"+$getState().login.account.toUpperCase()+".pem",window.fs&&(t=window.path.join(S,"private"+$getState().login.account.toUpperCase()+".pem")),e.next=4,coreSecurity.getHWTupSupport();case 4:return n=e.sent,e.next=7,n.isPlainPrivatePem({privatePemPath:t});case 7:return r=e.sent,e.abrupt("return",r.param.isplaintext);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),M=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin isValidPrivateKey"),t=S+"/private"+$getState().login.account.toUpperCase()+".pem",n=S+"password.txt",window.fs&&(t=window.path.join(S,"private"+$getState().login.account.toUpperCase()+".pem"),n=window.path.join(S,"password.txt")),e.next=6,E(n);case 6:return r=e.sent,e.next=9,coreSecurity.getHWTupSupport();case 9:return i=e.sent,e.next=12,i.getinstance().isCipherValid({privatePemPath:t,password:r});case 12:return a=e.sent,e.abrupt("return",a.param.passwordvalid);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),D=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,a,o,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin encryptPrivatePemFile"),t="private"+$getState().login.account.toUpperCase()+".pem",n=S+"/"+t,r=S+"/password.txt",window.fs&&(n=window.path.join(S,t),r=window.path.join(S,"password.txt")),e.next=7,E(r);case 7:if(i=e.sent){e.next=13;break}return a=16,e.next=12,coreSecurity.getRealRandom(a);case 12:i=e.sent;case 13:return e.next=15,coreSecurity.getHWTupSupport();case 15:return o=e.sent,e.next=18,o.getinstance().encryptPrivateKey({privatePemPath:n,password:i,privateEncryptPemPath:n});case 18:if(s=e.sent,0===s.result){e.next=22;break}return l.info("failed to encrypt pem file."),e.abrupt("return");case 22:return e.next=24,coreSecurity.encryptKMC(i);case 24:return c=e.sent,f=c.param.CiperText,e.next=28,T(r,f);case 28:return e.next=30,U();case 30:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("before encryptPrivatePem"),e.next=3,L();case 3:if(!(t=e.sent)){e.next=9;break}l.info("isPlainPem: true"),D(),e.next=31;break;case 9:return l.info("isPlainPem: false"),e.next=12,M();case 12:if(!(n=e.sent)){e.next=29;break}return l.info("isValid: true"),r=S+"/password.txt",window.fs&&(r=window.path.join(S,"password.txt")),e.next=19,E(r);case 19:return i=e.sent,e.next=22,coreSecurity.encryptKMC(i);case 22:return a=e.sent,o=a.param.CiperText,e.next=26,T(r,o);case 26:U(),e.next=31;break;case 29:return l.info("isValid: false"),e.abrupt("return");case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),F=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin unArchiveDeviceCertificate"),e.next=3,I(m);case 3:return t=e.sent,n=coreCommon.unZip(t),e.next=7,k(n);case 7:if(r=e.sent){e.next=11;break}return l.info("failed to resolve certificate package."),e.abrupt("return");case 11:return e.next=13,N(S);case 13:e.t0=u.default.keys(r);case 14:if((e.t1=e.t0()).done){e.next=20;break}return i=e.t1.value,e.next=18,T(S+"/"+i,r[i]);case 18:e.next=14;break;case 20:l.info("unArchiveDeviceCertificate: Done!"),R();case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),V=function(){var e=(0,d.default)(u.default.mark(function e(t,n,r,i){var a,o,s,c,f,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin syncDeviceCertificate"),a="https://"+t+":"+n+"/capf/equcertificate/"+$getState().login.account+".tar.gz",o=m,e.next=5,E(v);case 5:if(s=e.sent){e.next=9;break}return l.info("failed to read ca certificate file information."),e.abrupt("return");case 9:return s=s.replace(/\n/g,"").replace(/^.*-----BEGIN CERTIFICATE-----/,"").replace(/-----END CERTIFICATE-----$/,""),c="<root><sn>"+$getState().login.account+"</sn><factorycertificate>"+s+"</factorycertificate></root>",f={"Content-Type":"text/xml;"},d=function(e){0===e.param.ret&&200===e.param.rsp_body.rsp_code?(l.info("syncDeviceCertificate: succeed."),F()):0!==e.param.ret?l.info("syncDeviceCertificate failed(tup): "+e.param.ret):l.info("syncDeviceCertificate failed(http): "+e.param.rsp_body.rsp_code)},e.next=15,coreHttp.downloadFile({params:{url:a,filePath:o,body:c,header:f,userName:r,password:i},resultCallback:d});case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,i){return e.apply(this,arguments)}}(),B=function(){var e=(0,d.default)(u.default.mark(function e(t,n,r,i){var a,o,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("begin syncCACertificate"),e.next=3,_();case 3:return a="https://"+t+":"+n+"/capf/rootcertificate/root.pem",o=v,s=null,c={},f=function(e){0===e.param.ret&&200===e.param.rsp_body.rsp_code?(l.info("syncCACertificate: succeed."),V(t,n,r,i)):0!==e.param.ret?l.info("syncCACertificate failed(tup): "+e.param.ret):l.info("syncCACertificate failed(http): "+e.param.rsp_body.rsp_code)},e.next=10,coreHttp.downloadFile({params:{url:a,filePath:o,body:s,header:c,userName:r,password:i},resultCallback:f});case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,i){return e.apply(this,arguments)}}();t.syncCertificate=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,a,o,s,c,f,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.some(function(e){return"Device.UICfg.cert.autoSyncCert"===e["ParameterValueStruct.Name"]&&("1"===e["ParameterValueStruct.Value"]?(l.info("begin syncCertificate"),!0):(l.info("No Need To Sync Certificate!"),!1))})){e.next=3;break}return e.abrupt("return");case 3:if(r=t.filter(function(e){return"Device.UICfg.cert.syncAddress"===e["ParameterValueStruct.Name"]}),i=r.length>0?r[0]["ParameterValueStruct.Value"]:"",a=t.filter(function(e){return"Device.UICfg.cert.syncPort"===e["ParameterValueStruct.Name"]}),o=a.length>0?a[0]["ParameterValueStruct.Value"]:0,s=t.filter(function(e){return"Device.UICfg.cert.syncName"===e["ParameterValueStruct.Name"]}),c=s.length>0?s[0]["ParameterValueStruct.Value"]:"",f=t.filter(function(e){return"Device.UICfg.cert.syncCode"===e["ParameterValueStruct.Name"]}),d=f.length>0?f[0]["ParameterValueStruct.Value"]:"",!(i&&o&&c&&d)){e.next=16;break}return e.next=14,B(i,o,c,d);case 14:e.next=17;break;case 16:l.info("syncCertificate: Invalid Sync Information!");case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()}).call(t,n(131).Buffer)},118:function(e,t,n){e.exports=n(0)(0)},123:function(e,t,n){e.exports=n(0)(562)},131:function(e,t,n){"use strict";(function(e){function r(){return a.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function i(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return a.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=a.prototype):(null===e&&(e=new a(t)),e.length=t),e}function a(e,t,n){if(!(a.TYPED_ARRAY_SUPPORT||this instanceof a))return new a(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return o(this,e,t,n)}function o(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?l(e,t,n,r):"string"==typeof t?f(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return s(t),t<=0?i(e,t):void 0!==n?"string"==typeof r?i(e,t).fill(n,r):i(e,t).fill(n):i(e,t)}function u(e,t){if(s(t),e=i(e,t<0?0:0|g(t)),!a.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!a.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|h(t,n);e=i(e,r);var o=e.write(t,n);return o!==r&&(e=e.slice(0,o)),e}function d(e,t){var n=t.length<0?0:0|g(t.length);e=i(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function l(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),a.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=a.prototype):e=d(e,t),e}function p(e,t){if(a.isBuffer(t)){var n=0|g(t.length);return e=i(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||z(t.length)?i(e,0):d(e,t);if("Buffer"===t.type&&Z(t.data))return d(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function g(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function w(e){return+e!=e&&(e=0),a.alloc(+e)}function h(e,t){if(a.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return W(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return q(e).length;default:if(r)return W(e).length;t=(""+t).toLowerCase(),r=!0}}function C(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return b(this,t,n);case"utf8":case"utf-8":return A(this,t,n);case"ascii":return k(this,t,n);case"latin1":case"binary":return O(this,t,n);case"base64":return N(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return U(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function m(e,t,n,r,i){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=i?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(i)return-1;n=e.length-1}else if(n<0){if(!i)return-1;n=0}if("string"==typeof t&&(t=a.from(t,r)),a.isBuffer(t))return 0===t.length?-1:S(e,t,n,r,i);if("number"==typeof t)return t&=255,a.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):S(e,[t],n,r,i);throw new TypeError("val must be string, number or Buffer")}function S(e,t,n,r,i){function a(e,t){return 1===o?e[t]:e.readUInt16BE(t*o)}var o=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;o=2,s/=2,c/=2,n/=2}var u;if(i){var f=-1;for(u=n;u<s;u++)if(a(e,u)===a(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*o}else-1!==f&&(u-=u-f),f=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var d=!0,l=0;l<c;l++)if(a(e,u+l)!==a(t,l)){d=!1;break}if(d)return u}return-1}function _(e,t,n,r){n=Number(n)||0;var i=e.length-n;r?(r=Number(r))>i&&(r=i):r=i;var a=t.length;if(a%2!=0)throw new TypeError("Invalid hex string");r>a/2&&(r=a/2);for(var o=0;o<r;++o){var s=parseInt(t.substr(2*o,2),16);if(isNaN(s))return o;e[n+o]=s}return o}function E(e,t,n,r){return j(W(t,e.length-n),e,n,r)}function I(e,t,n,r){return j(K(t),e,n,r)}function T(e,t,n,r){return I(e,t,n,r)}function P(e,t,n,r){return j(q(t),e,n,r)}function y(e,t,n,r){return j(Y(t,e.length-n),e,n,r)}function N(e,t,n){return 0===t&&n===e.length?X.fromByteArray(e):X.fromByteArray(e.slice(t,n))}function A(e,t,n){n=Math.min(e.length,n);for(var r=[],i=t;i<n;){var a=e[i],o=null,s=a>239?4:a>223?3:a>191?2:1;if(i+s<=n){var c,u,f,d;switch(s){case 1:a<128&&(o=a);break;case 2:c=e[i+1],128==(192&c)&&(d=(31&a)<<6|63&c)>127&&(o=d);break;case 3:c=e[i+1],u=e[i+2],128==(192&c)&&128==(192&u)&&(d=(15&a)<<12|(63&c)<<6|63&u)>2047&&(d<55296||d>57343)&&(o=d);break;case 4:c=e[i+1],u=e[i+2],f=e[i+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(d=(15&a)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&d<1114112&&(o=d)}}null===o?(o=65533,s=1):o>65535&&(o-=65536,r.push(o>>>10&1023|55296),o=56320|1023&o),r.push(o),i+=s}return x(r)}function x(e){var t=e.length;if(t<=J)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=J));return n}function k(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(127&e[i]);return r}function O(e,t,n){var r="";n=Math.min(e.length,n);for(var i=t;i<n;++i)r+=String.fromCharCode(e[i]);return r}function b(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var i="",a=t;a<n;++a)i+=$(e[a]);return i}function U(e,t,n){for(var r=e.slice(t,n),i="",a=0;a<r.length;a+=2)i+=String.fromCharCode(r[a]+256*r[a+1]);return i}function L(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function M(e,t,n,r,i,o){if(!a.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var i=0,a=Math.min(e.length-n,2);i<a;++i)e[n+i]=(t&255<<8*(r?i:1-i))>>>8*(r?i:1-i)}function R(e,t,n,r){t<0&&(t=4294967295+t+1);for(var i=0,a=Math.min(e.length-n,4);i<a;++i)e[n+i]=t>>>8*(r?i:3-i)&255}function F(e,t,n,r,i,a){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function V(e,t,n,r,i){return i||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),Q.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,i){return i||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),Q.write(e,t,n,r,52,8),n+8}function G(e){if(e=H(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function H(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function $(e){return e<16?"0"+e.toString(16):e.toString(16)}function W(e,t){t=t||1/0;for(var n,r=e.length,i=null,a=[],o=0;o<r;++o){if((n=e.charCodeAt(o))>55295&&n<57344){if(!i){if(n>56319){(t-=3)>-1&&a.push(239,191,189);continue}if(o+1===r){(t-=3)>-1&&a.push(239,191,189);continue}i=n;continue}if(n<56320){(t-=3)>-1&&a.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(t-=3)>-1&&a.push(239,191,189);if(i=null,n<128){if((t-=1)<0)break;a.push(n)}else if(n<2048){if((t-=2)<0)break;a.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;a.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;a.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return a}function K(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function Y(e,t){for(var n,r,i,a=[],o=0;o<e.length&&!((t-=2)<0);++o)n=e.charCodeAt(o),r=n>>8,i=n%256,a.push(i),a.push(r);return a}function q(e){return X.toByteArray(G(e))}function j(e,t,n,r){for(var i=0;i<r&&!(i+n>=t.length||i>=e.length);++i)t[i+n]=e[i];return i}function z(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var X=n(224),Q=n(225),Z=n(210);t.Buffer=a,t.SlowBuffer=w,t.INSPECT_MAX_BYTES=50,a.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),a.poolSize=8192,a._augment=function(e){return e.__proto__=a.prototype,e},a.from=function(e,t,n){return o(null,e,t,n)},a.TYPED_ARRAY_SUPPORT&&(a.prototype.__proto__=Uint8Array.prototype,a.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&a[Symbol.species]===a&&Object.defineProperty(a,Symbol.species,{value:null,configurable:!0})),a.alloc=function(e,t,n){return c(null,e,t,n)},a.allocUnsafe=function(e){return u(null,e)},a.allocUnsafeSlow=function(e){return u(null,e)},a.isBuffer=function(e){return!(null==e||!e._isBuffer)},a.compare=function(e,t){if(!a.isBuffer(e)||!a.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,i=0,o=Math.min(n,r);i<o;++i)if(e[i]!==t[i]){n=e[i],r=t[i];break}return n<r?-1:r<n?1:0},a.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},a.concat=function(e,t){if(!Z(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return a.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=a.allocUnsafe(t),i=0;for(n=0;n<e.length;++n){var o=e[n];if(!a.isBuffer(o))throw new TypeError('"list" argument must be an Array of Buffers');o.copy(r,i),i+=o.length}return r},a.byteLength=h,a.prototype._isBuffer=!0,a.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},a.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},a.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},a.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?A(this,0,e):C.apply(this,arguments)},a.prototype.equals=function(e){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===a.compare(this,e)},a.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},a.prototype.compare=function(e,t,n,r,i){if(!a.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===i&&(i=this.length),t<0||n>e.length||r<0||i>this.length)throw new RangeError("out of range index");if(r>=i&&t>=n)return 0;if(r>=i)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,i>>>=0,this===e)return 0;for(var o=i-r,s=n-t,c=Math.min(o,s),u=this.slice(r,i),f=e.slice(t,n),d=0;d<c;++d)if(u[d]!==f[d]){o=u[d],s=f[d];break}return o<s?-1:s<o?1:0},a.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},a.prototype.indexOf=function(e,t,n){return m(this,e,t,n,!0)},a.prototype.lastIndexOf=function(e,t,n){return m(this,e,t,n,!1)},a.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var i=this.length-t;if((void 0===n||n>i)&&(n=i),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var a=!1;;)switch(r){case"hex":return _(this,e,t,n);case"utf8":case"utf-8":return E(this,e,t,n);case"ascii":return I(this,e,t,n);case"latin1":case"binary":return T(this,e,t,n);case"base64":return P(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return y(this,e,t,n);default:if(a)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),a=!0}},a.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;a.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(a.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=a.prototype;else{var i=t-e;r=new a(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},a.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return r},a.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e+--t],i=1;t>0&&(i*=256);)r+=this[e+--t]*i;return r},a.prototype.readUInt8=function(e,t){return t||L(e,1,this.length),this[e]},a.prototype.readUInt16LE=function(e,t){return t||L(e,2,this.length),this[e]|this[e+1]<<8},a.prototype.readUInt16BE=function(e,t){return t||L(e,2,this.length),this[e]<<8|this[e+1]},a.prototype.readUInt32LE=function(e,t){return t||L(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},a.prototype.readUInt32BE=function(e,t){return t||L(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},a.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=this[e],i=1,a=0;++a<t&&(i*=256);)r+=this[e+a]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*t)),r},a.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||L(e,t,this.length);for(var r=t,i=1,a=this[e+--r];r>0&&(i*=256);)a+=this[e+--r]*i;return i*=128,a>=i&&(a-=Math.pow(2,8*t)),a},a.prototype.readInt8=function(e,t){return t||L(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},a.prototype.readInt16LE=function(e,t){t||L(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt16BE=function(e,t){t||L(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},a.prototype.readInt32LE=function(e,t){return t||L(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},a.prototype.readInt32BE=function(e,t){return t||L(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},a.prototype.readFloatLE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!0,23,4)},a.prototype.readFloatBE=function(e,t){return t||L(e,4,this.length),Q.read(this,e,!1,23,4)},a.prototype.readDoubleLE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!0,52,8)},a.prototype.readDoubleBE=function(e,t){return t||L(e,8,this.length),Q.read(this,e,!1,52,8)},a.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=1,a=0;for(this[t]=255&e;++a<n&&(i*=256);)this[t+a]=e/i&255;return t+n},a.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){M(this,e,t,n,Math.pow(2,8*n)-1,0)}var i=n-1,a=1;for(this[t+i]=255&e;--i>=0&&(a*=256);)this[t+i]=e/a&255;return t+n},a.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,255,0),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},a.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},a.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,65535,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},a.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):R(this,e,t,!0),t+4},a.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,4294967295,0),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},a.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=0,o=1,s=0;for(this[t]=255&e;++a<n&&(o*=256);)e<0&&0===s&&0!==this[t+a-1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},a.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var i=Math.pow(2,8*n-1);M(this,e,t,n,i-1,-i)}var a=n-1,o=1,s=0;for(this[t+a]=255&e;--a>=0&&(o*=256);)e<0&&0===s&&0!==this[t+a+1]&&(s=1),this[t+a]=(e/o>>0)-s&255;return t+n},a.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,1,127,-128),a.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},a.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},a.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,2,32767,-32768),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},a.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),a.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):R(this,e,t,!0),t+4},a.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||M(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),a.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):R(this,e,t,!1),t+4},a.prototype.writeFloatLE=function(e,t,n){return V(this,e,t,!0,n)},a.prototype.writeFloatBE=function(e,t,n){return V(this,e,t,!1,n)},a.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},a.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},a.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var i,o=r-n;if(this===e&&n<t&&t<r)for(i=o-1;i>=0;--i)e[i+t]=this[i+n];else if(o<1e3||!a.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+o),t);return o},a.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!a.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var o;if("number"==typeof e)for(o=t;o<n;++o)this[o]=e;else{var s=a.isBuffer(e)?e:W(new a(e,r).toString()),c=s.length;for(o=0;o<n-t;++o)this[o+t]=s[o%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(139))},135:function(e,t,n){e.exports={default:n(150),__esModule:!0}},136:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.resetMyInfo=t.getMyInfo=t.UErrorCode=t.LoginInfo=t.LoginError=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.EAErrorCode=t.registerLoginEvent=void 0;var i=n(164),a=r(i),o=n(272),s=r(o);t.registerLoginEvent=a.UErrorCode,t.EAErrorCode=a.EAErrorCode,t.ErrorType=a.ErrorType,t.getLoginModel=a.getLoginModel,t.getSyncLoginModel=a.getSyncLoginModel,t.resetLoginModel=a.resetLoginModel,t.LoginError=a.LoginError,t.LoginInfo=a.LoginInfo,t.UErrorCode=a.UErrorCode,t.getMyInfo=s.getMyInfo,t.resetMyInfo=s.resetMyInfo},139:function(e,t,n){e.exports=n(0)(86)},150:function(e,t,n){n(23),n(22),e.exports=n(151)},151:function(e,t,n){var r=n(9),i=n(26);e.exports=n(8).getIterator=function(e){var t=i(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},164:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function i(e){return h.default.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginInfo=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.ErrorCode=t.EAErrorCode=t.UErrorCode=void 0;var a=n(119),o=r(a),s=n(4),c=r(s),u=n(5),f=r(u),d=n(120),l=r(d),p=n(121),g=r(p),w=n(3),h=r(w),C=n(1),v=r(C),m=n(2),S=r(m);t.LoginError=i;var _=(t.UErrorCode=constant.UPORTAL_LOGIN_ERROR,t.EAErrorCode=constant.EADDR_LOGIN_ERROR,t.ErrorCode=constant.LOGIN_COMMON_ERROR,t.ErrorType=constant.LOGIN_ERROR_TYPE,coreLogger.getLogger("logic")("login/model/login")),E=void 0,I=(t.getLoginModel=function(){var e=(0,S.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E||(E=new T(I)),e.abrupt("return",E);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getSyncLoginModel=function(){return E||(E=new T(I)),E},t.resetLoginModel=function(){E=null,_.info("<account_login>12_reset_loginmodel")},{shouldExitApp:"true",displayAccount:"",account:"",tenantid:"",verificationNumber:"",verificationCode:"",loadPwd:!1,folder:!0,showPwd:!1,showLangSet:!1,isSaveLangChange:!1,oldLangCode:"",isSaveAddress:!1,middleEndAddress:"",serverAddress:"",serverPort:"",_serverUportalAddress:"",_serverUportalPort:"",uportalLoginState:0,sipRegisterState:0,authToken:"",isRememberPassword:window.CLIENTCONFIG.ISMOBILE,isAutoLogin:!1,loginHistoryList:[],loginRecordList:[],isLoading:!1,loginDisable:!1,logoutDisable:!1,isCapslock:!1,isOffline:!1,passwordType:"",eabUri:"",groupServer:"",sipUri:"",svnUri:"",currentNum:0,mainSiteSum:0,httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,isFreeUser:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerLocal:"",sipServerPortLocal:0,eServerAddressAll:"",eServerAddress:"",eServerPort:0,socketMode:0,isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1,maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",shouldBuildStg:!1,isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,appstate:constant.APP_STATE.DISCONNECTED,funcType:0,deployMode:0,lastDeployMode:0,tmsServer:"",tmsAccount:"",tmsPwd:"",sipLoginOnly:!1,sipLoginissiptls:0,sipLoginissrtp:1,pushgwUri:"",sipOnlyType:0,isMultiDeviceLogined:!1,switchAccount:{},tempsipinfo:{},tempConfInfo:{},tempsipserverAddress:"",tempsipserverPort:"",tempMediaxAddress:"",tempMediaxPort:"",tempNoNameMediaxAddress:"",tempNoNameMediaxPort:"",tempSipAccount:"",tempSipNick:"",tempsipPassword:"",tempsipGetState:0,sipOnlyurlInfo:{},isSupportCACertCheck:!0,isShowShareRecommendationCircle:!0,sipTransMode:0,sipWhiteList:null,srtpMode:0,smcUri:"",certificateUrl:"",keysUrl:"",certificateName:"",selectCertificate:!0,mProveUrl:"",mkeysUrl:"",mProveName:"",mSelectProve:!0,mZipUrl:"",isIwb:!1,maxhubLoginError:{},euaServer:"",whetherInLoginRecordList:!1,showPullRecordList:!1,isCloudec:!1,isOAuth:!1,OAuthUrl:"",OAuthAccountUrl:"",changeItPasswordUrl:"",FrogetPwdUrl:"",FrogetPwdUrlPort:0,isFrogetRedriect:!1,forgetPwdAccount:"",sysProxyAddress:"",sysProxyPort:0,isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:"",real_user_account:"",itOAuthUrl:"",itSignedUrl:"",itUploadHeadImgUrl:"",isPortalUpgrade:!1,isWaitUpgrade:!1,isPortalAfterCallUpgrade:!1,progressPercent:-1,isUpdateError:!1,whatsNewCHN:"",whatsNewENG:"",showContentType:0,isForceUpdate:!1,downloadVersion:"",downloadUrl:"",isReqAddrChanged:!1,isSupportAS:!1,show_account:"",curPortalState:0,manMachineCode:{},isUserClickUploadComplaints:!1,canRecordConf:!1,ctdServerUri:"",confctrlUri:"",ssoLoginTypeCheckedValue:0,authType:0}),T=t.LoginInfo=function(e){function t(e){var n=this;(0,c.default)(this,t);var r=(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e));return r.hasLoginCanceled=!1,r.useSip=!0,r.useEsight=!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,r.checkSipState=(0,S.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:return t=r,_.info("checkSipState: sip is not registered."),r.prepareSipForCallOrConf=!0,e.abrupt("return",new h.default(function(e){var n=5,r=setInterval(function(){(n<1||t.isSipRegSuc())&&(t.prepareSipForCallOrConf=!1,clearInterval(r),e()),n-=1,_.info("checkSipState: retry: "+(5-n))},1e3)}));case 6:case"end":return e.stop()}},e,n)})),r}return(0,g.default)(t,e),(0,f.default)(t,[{key:"notifyChanged",value:function(e){coreCommon.dispatchModuleEvent("login_model",e)}},{key:"isSipRegSuc",value:function(){return this.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED}},{key:"setLoginStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];_.info("[ setLoginStatus ] flag:",e,", result:",t,", isResume:",this.isResume);var n=void 0;e?n=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECTING:!0===t?n=constant.APP_STATE.ONLINE:!1===t&&(n=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECT_FAILED),this.set({loginDisable:e,appstate:n})}},{key:"setAppState",value:function(e){_.info("[ appstate ]",e),this.appstate=e}},{key:"getstate",value:function(e){return e?$getState().login[e]:$getState().login}},{key:"clearInLoginState",value:function(){this.set({isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1})}},{key:"update",value:function(e){this.dispatch(e)}},{key:"clearPassword",value:function(){this.password="",this.proxyPassword="",this.sipPassword=""}},{key:"serverUportalAddress",get:function(){return this._serverUportalAddress||this.serverAddress},set:function(e){this._serverUportalAddress=e}},{key:"serverUportalPort",get:function(){return this._serverUportalPort||this.serverPort},set:function(e){this._serverUportalPort=e}},{key:"loginType",get:function(){return window.SERVERCONFIG.HWUC},set:function(e){window.SERVERCONFIG.HWUC=e}},{key:"isMobile",get:function(){return window.CLIENTCONFIG.ISMOBILE},set:function(e){window.CLIENTCONFIG.ISMOBILE=e}},{key:"isHWUC",get:function(){return window.SERVERCONFIG.HWUC===constant.LOGIN_TYPE.HWUC},set:function(e){}},{key:"useIM",get:function(){return!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&window.CLIENTCONFIG.USE_IM},set:function(e){window.CLIENTCONFIG.USE_IM=e}},{key:"useMetting",get:function(){return window.CLIENTCONFIG.USE_MEETING},set:function(e){window.CLIENTCONFIG.USE_MEETING=e}},{key:"useEab",get:function(){return window.SERVERCONFIG.HWUC!==constant.LOGIN_TYPE.HWUC&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&!this.sipLoginOnly},set:function(e){}},{key:"asAddress",get:function(){return $getState().conf.asAddress}},{key:"OAuthClinetID",get:function(){return window.CLIENTCONFIG.IT_WELINK_CLIENT_ID},set:function(e){window.CLIENTCONFIG.IT_WELINK_CLIENT_ID=e}},{key:"defaultRoute",get:function(){if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)return"callMain";var e="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME;return $getState().menu.menuList&&$getState().menu.menuList instanceof Array&&$getState().menu.menuList[0]?!e&&$getState().menu.menuList.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+$getState().menu.menuList[0]:window.CLIENTCONFIG.MOBILE_MENU_LIST&&window.CLIENTCONFIG.MOBILE_MENU_LIST instanceof Array&&window.CLIENTCONFIG.MOBILE_MENU_LIST[0]?!e&&window.CLIENTCONFIG.MOBILE_MENU_LIST.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+window.CLIENTCONFIG.MOBILE_MENU_LIST[0]:e?"main/"+window.navMobileConfiglist[0].route:"main/"+window.navMobileConfiglist[1].route},set:function(e){}}]),t}(coreCommon.ModuleCache)},210:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},224:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function i(e){var t=r(e),n=t[0],i=t[1];return 3*(n+i)/4-i}function a(e,t,n){return 3*(t+n)/4-n}function o(e){for(var t,n=r(e),i=n[0],o=n[1],s=new l(a(e,i,o)),c=0,u=o>0?i-4:i,f=0;f<u;f+=4)t=d[e.charCodeAt(f)]<<18|d[e.charCodeAt(f+1)]<<12|d[e.charCodeAt(f+2)]<<6|d[e.charCodeAt(f+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===o&&(t=d[e.charCodeAt(f)]<<2|d[e.charCodeAt(f+1)]>>4,s[c++]=255&t),1===o&&(t=d[e.charCodeAt(f)]<<10|d[e.charCodeAt(f+1)]<<4|d[e.charCodeAt(f+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function c(e,t,n){for(var r,i=[],a=t;a<n;a+=3)r=(e[a]<<16&16711680)+(e[a+1]<<8&65280)+(255&e[a+2]),i.push(s(r));return i.join("")}function u(e){for(var t,n=e.length,r=n%3,i=[],a=0,o=n-r;a<o;a+=16383)i.push(c(e,a,a+16383>o?o:a+16383));return 1===r?(t=e[n-1],i.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],i.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),i.join("")}t.byteLength=i,t.toByteArray=o,t.fromByteArray=u;for(var f=[],d=[],l="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",g=0,w=p.length;g<w;++g)f[g]=p[g],d[p.charCodeAt(g)]=g;d["-".charCodeAt(0)]=62,d["_".charCodeAt(0)]=63},225:function(e,t){t.read=function(e,t,n,r,i){var a,o,s=8*i-r-1,c=(1<<s)-1,u=c>>1,f=-7,d=n?i-1:0,l=n?-1:1,p=e[t+d];for(d+=l,a=p&(1<<-f)-1,p>>=-f,f+=s;f>0;a=256*a+e[t+d],d+=l,f-=8);for(o=a&(1<<-f)-1,a>>=-f,f+=r;f>0;o=256*o+e[t+d],d+=l,f-=8);if(0===a)a=1-u;else{if(a===c)return o?NaN:1/0*(p?-1:1);o+=Math.pow(2,r),a-=u}return(p?-1:1)*o*Math.pow(2,a-r)},t.write=function(e,t,n,r,i,a){var o,s,c,u=8*a-i-1,f=(1<<u)-1,d=f>>1,l=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:a-1,g=r?1:-1,w=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,o=f):(o=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-o))<1&&(o--,c*=2),t+=o+d>=1?l/c:l*Math.pow(2,1-d),t*c>=2&&(o++,c/=2),o+d>=f?(s=0,o=f):o+d>=1?(s=(t*c-1)*Math.pow(2,i),o+=d):(s=t*Math.pow(2,d-1)*Math.pow(2,i),o=0));i>=8;e[n+p]=255&s,p+=g,s/=256,i-=8);for(o=o<<i|s,u+=i;u>0;e[n+p]=255&o,p+=g,o/=256,u-=8);e[n+p-g]|=128*w}},272:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MyInfo=t.resetMyInfo=t.getMyInfo=void 0;var i=n(119),a=r(i),o=n(4),s=r(o),c=n(5),u=r(c),f=n(120),d=r(f),l=n(121),p=r(l),g=n(1),w=r(g),h=n(2),C=r(h),v=void 0,m=(t.getMyInfo=function(){var e=(0,C.default)(w.default.mark(function e(){return w.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v||(v=new S(m)),e.abrupt("return",v);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetMyInfo=function(){v=null},{language:"",languageCode:"",isReminder:!0,closeAppWays:"minimizeApp",isAutoCollectLogs:!0,hasAllowCollectLogs:!1,isAutoAcceptConf:!1,isAutoStart:!1,statusDesc:"",statusOptions:[],selectIndex:1,signature:"",isAutoResponseConf:!1,isOffToLine:!1,isAutoLeave:!0,account:"",address:"",age:"",bind_no:"",birthday:"",compareAccount:"",dept_id:"",dept_name_cn:"",dept_name_en:"",desc:"",email:"",espacenumber:"",etag:"",fax:"",gender:0,home_phone:"",image_id:"",image_sync_time:"",ip_phone:"",is_security:0,mobile:"",modify_time:"",name:"",native_name:"",office_phone:"",office_phone2:"",old_account:"",other_mobiles:"",other_phone:"",other_phone2:"",postcode:"",q_pin_yin:"",result_code:"",short_phone:"",staff_id:0,staff_no:"",state:"0",status:1,title:"",type:"0",uri:"",user_type:"0",voip:"",website:"",selfUserUri:"",show_account:""}),S=t.MyInfo=function(e){function t(e){return(0,s.default)(this,t),(0,d.default)(this,(t.__proto__||(0,a.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"notifyChanged",value:function(e){$dispatch(coreUi.updateMyInfo(e)),e&&e.languageCode&&coreCommon.dispatchModuleEvent("changeLanguage",e.languageCode)}}]),t}(coreCommon.ModuleCache)},69:function(e,t,n){e.exports={default:n(70),__esModule:!0}},691:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dealWithConfigNotify=t.compareVersion=t.clearCwmpParam=t.beginUploadLog=t.RequestSetEventInform=t.checkUpdateConfig=t.dealWithUICfgParam=t.dealUploadLogFailed=t.dealUploadLogSuccess=t.dealZipLogSuccess=t.sendMobileLogZipFiles=t.getComPressFileSize=t.initCwmpNotify=t.getHttpConnRandNum=t.send4ValueChange=t.getStunParam=t.getCPEParam=t.getStunEnable=t.getCPEEnable=t.clearUploadResultFunc=t.setUploadSuccessFunc=t.setUploadFailedFunc=void 0;var i=n(123),a=r(i),o=n(69),s=r(o),c=n(1),u=r(c),f=n(2),d=r(f),l=n(3),p=r(l),g=n(1098),w=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(g),n(878)),h=n(692),C=n(1099),v=n(693),m=r(v),S=n(136),_=null,E=null,I=(t.setUploadFailedFunc=function(e){T.info("log upload: setUploadFailedFunc"),_=e},t.setUploadSuccessFunc=function(e){T.info("log upload: setUploadSuccessFunc"),E=e},t.clearUploadResultFunc=function(){T.info("log upload: clearUploadResultFunc"),_=null,E=null}),T=coreLogger.getLogger("logic")("cwmp/index"),P=window.CLIENTCONFIG,y=0,N=!1,A=new Array,x="",k="",O="",b="",U="",L="",M="",D="",R="",F=null,V=null,B="",G=function(e){return new p.default(function(t,n){t(e)})},H=function(){return new p.default(function(e,t){t()})},$=(t.getCPEEnable=function(){return""!==k&&0!==y?G():H()},t.getStunEnable=function(){return N?G():H()},t.getCPEParam=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return t=e.sent,e.next=5,t.getPassword("CPEPassword");case 5:return n=e.sent,r={CPEAuthType:0,CPEUsername:k,CPEPassword:n,LocalIp:window.cwmpLocalIp?window.cwmpLocalIp:"",ListenPort:P.ACS_HTTP_CONN_LISTEN_PORT,ReqConnPath:y+""},T.info("get CPE param success"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getStunParam=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,a,o,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return t=e.sent,e.next=5,t.getPassword("StunPassword");case 5:return n=e.sent,e.next=8,t.getPassword("CPEPassword");case 8:return r=e.sent,i=$getState().login.fireWallMode,T.info("the fireWallMode is: "+i),a=parseInt(b),o=parseInt(L),s=O,c=0,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===i&&(c=1,""!==D&&""!==R&&(T.info("use stun over stg, port:",R),s=D,a=parseInt(R))),f={STUNDomain:s,STUNServerPort:a,STUNUserName:U,STUNPassWord:n,STUNListenPort:34758,STUNInterval:o,STUNSocketType:c,NatDetectedNodeName:"Device.ManagementServer.NATDetected",UdpConnAddrNodeName:"Device.ManagementServer.UDPConnectionRequestAddress",CPEUsername:k,CPEPassword:r,LocalIp:window.cwmpLocalIp?window.cwmpLocalIp:""},T.info("get STUN param success"),e.abrupt("return",f);case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.send4ValueChange=function(e){var t=window.cwmpLocalIp?window.cwmpLocalIp:"";return x="http://"+t+":"+window.CLIENTCONFIG.ACS_HTTP_CONN_LISTEN_PORT+"/"+y,e.push({ParaName:window.CLIENTCONFIG.ACS_CONNECTIONREQUESTURL_NAME,ParaValue:x}),T.info("send 4 VALUE CHANGE"),we("4 VALUE CHANGE",1,1,e,e.length)},function(e,t){return Math.floor(e+Math.random()*(t-e))}),W=(t.getHttpConnRandNum=function(){var e=0;do{e=$(1e5,999999)}while(e===y);y=e},function(e){if($getState().login.isPortalUpgrade)return void T.info("notifyNewVersionResult : now is in portal upgrade");var t=e.param,n=t.SoftwareVersion;if(T.info("notify set SoftwareVersion & what's new,version=",n),window.isHubEnv||window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv)return void T.info("maxhub, bigwin ,conf_plugin or plugin   environment, return");if(n){var r=Ce(n);T.info("get higher version, should update software"),r&&setTimeout(function(){(0,h.getWhatsNewNotify)(t)},3e3)}}),K=function(e){var t=e.param;return $getState().login.isPortalUpgrade?(T.info("notifyUpgrade : now is in portal upgrade"),void(0,h.cancelDownload)(t.Magic)):(T.info("soft update：The software version is updated, start notify upgrade, result = ",(0,s.default)(t)),window.isHubEnv||window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv?void(0,h.cancelDownload)(t.Magic):void(0,h.updateFileDownloadNotify)(t.Magic,t.FileType))},Y=function(e){if($getState().login.isPortalUpgrade)return void T.info("notifyDownloadProcessResult : now is in portal upgrade");(0,h.downloadProcessNotify)(e.param)},q=function(e){if($getState().login.isPortalUpgrade)return void T.info("notifyFinishDownload : now is in portal upgrade");T.info("soft update：notify finish download, release version check, data = "+(0,s.default)(e.param)),(0,h.downloadResultNotify)(e.param)},j=function(e){T.info("notify set param value"),ve(e.param)},z=function(e){T.info("notify save cmd[key], entry = "+(0,s.default)(e.entry)),ce(e.entry)},X=function(e){T.info("notify get param value, params = "+(0,s.default)(e.param)+", magic = "+e.magic)},Q=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,a,o,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.param.Magic,T.info("log upload: start notify upload log, magic = "+n),F&&clearTimeout(F),!$getState().cwmpInfo.isUserClickUpload){e.next=17;break}if(T.info("log upload: userClick upload flag is true"),""===B){e.next=9;break}ae(B,n),e.next=15;break;case 9:return T.info("log upload: No zip files exist, can not upload"),e.next=12,m.default.getinstance();case 12:return r=e.sent,e.next=15,r.tupSetUploadFileName("",n,0);case 15:e.next=29;break;case 17:if(!1!==(i=$getState().myInfo.isAutoCollectLogs)){e.next=28;break}return a=0,T.info("log upload: not allow the server to collect logs"),e.next=23,m.default.getinstance();case 23:return o=e.sent,e.next=26,o.tupSetUploadFileName("",n,a);case 26:e.next=29;break;case 28:window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv?(T.info("log upload: bigwin or maxhub auto allow the server to collect logs"),re(n)):(s=$getState().myInfo.hasAllowCollectLogs,s?(T.info("log upload: user has allowed the server to collect logs"),re(n)):coreCommon.confirmWindowWitTime("",""+language.ALLOW_SERVER_COLLECT_LOG,function(){re(n),coreSetting.setHasAllowCollectLogsState(!0)},(0,d.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getinstance();case 2:return t=e.sent,e.next=5,t.tupSetUploadFileName("",n,0);case 5:case"end":return e.stop()}},e,void 0)})),15e3));case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Z=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,r=n.totalsize,i=n.uploadsize,a=parseInt(i/r*100),$dispatch(coreUi.changeFeedbackProcess(a));case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),J=function(e){var t=e.param.result;T.info("log upload: log upload result param=",(0,s.default)(e.param)),$dispatch(coreUi.isServerCollecting(!1)),$getState().cwmpInfo.isUserClickUpload&&(T.info("log upload: userClick upload flag is true"),0===t?oe():se(constant.LOG_UPLOAD_RESULT.FAILED)())},ee=function(e){te()},te=(t.initCwmpNotify=function(){var e=(0,d.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getinstance();case 2:return t=e.sent,t.setNotifyFunc(884737,j),t.setNotifyFunc(884738,z),t.setNotifyFunc(884739,q),t.setNotifyFunc(884740,X),t.setNotifyFunc(884741,Q),t.setNotifyFunc(884742,K),t.setNotifyFunc(884743,ee),t.setNotifyFunc(884745,J),t.setNotifyFunc(884746,Y),t.setNotifyFunc(884747,W),t.setNotifyFunc(884748,Z),e.abrupt("return",G());case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(u.default.mark(function e(){var t,n,r,i,a,o,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],n=void 0,r=$getState(),i=r.login,a=i.account,o=i.real_user_account,n=isNullOrEmpty(o)?a:o,t.push({ParaName:"Device.LAN.IPAddress",ParaValue:window.cwmpLocalIp?window.cwmpLocalIp:""}),t.push({ParaName:"Device.DeviceInfo.SoftwareVersion",ParaValue:P.ACS_SOFTWAREVERSION_VALUE}),t.push({ParaName:"Device.DeviceInfo.UserAccountId",ParaValue:n}),t.push({ParaName:"Device.ManagementServer.ConnectionRequestURL",ParaValue:x}),e.next=10,m.default.getinstance();case 10:return s=e.sent,e.next=13,s.tupCwmpRequsetAddInformParam(t);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),ne=t.getComPressFileSize=function(e){return new p.default(function(t,n){var r="";window.fs?(r=window.fs.statSync(e).size,t({fileSize:r,filePath:e})):window.webView?(r=window.getFileSize(e),T.info("The is Android get comPress FileSize success, size="+r),t({fileSize:r,filePath:e})):window.getFileSize(e,function(n){T.info("The is IOS get comPress FileSize success, size="+n),t({fileSize:n,filePath:e})})})},re=function(e){var t=this;T.info("log upload: Start to upload log to server, magic=",e),coreAccount.recordPrivacy({oprEvent:constant.OPR_EVENT_TYPE.LOG}),$dispatch(coreUi.isServerCollecting(!0)),coreLog.collectLogs({isOpen:!1}).then(function(t){ae(t,e)},(0,d.default)(u.default.mark(function n(){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return $dispatch(coreUi.isServerCollecting(!1)),t.next=3,m.default.getinstance();case 3:return r=t.sent,t.next=6,r.tupSetUploadFileName("",e,0);case 6:T.info("log upload: Compress logs failed.");case 7:case"end":return t.stop()}},n,t)})))},ie=!1,ae=(t.sendMobileLogZipFiles=function(){if(T.info("userClick, Send logs: start to send log zip files."),window.Toast(language.LOG_COMPRESS_PROMPT),ie)return void T.info("Send logs: last send log not end, not compress again.");ie=!0,coreLog.collectLogCuts().then(function(e){if(window.webView){window.openAppListToSendFiles(language.LOG_REPORT_EMAIL_TITLE,e)?T.info("Send logs: Android open application list to send log files success."):(window.Toast(language.LOG_SEND_FAILED_PROMPT,2,!1),T.info("Send logs: Android open application list to send log files failed."))}else window.sendZipFiles(language.LOG_REPORT_EMAIL_TITLE,e,function(e){"0"!==e.toString()?"1"===e.toString()?coreCommon.showAlert(""+language.LOG_EMAIL_CONFIGURED_PROMPT):(window.Toast(language.LOG_SEND_FAILED_PROMPT,2,!1),T.info("Send logs: IOS send log files by email failed, result=",e)):T.info("Send logs: IOS send log files by email success")});ie=!1},function(){window.Toast(language.LOG_SEND_FAILED_PROMPT,2,!1),ie=!1,T.info("Send logs: compress log files failed.")})},function(e,t){var n=this;ne(e).then(function(){var e=(0,d.default)(u.default.mark(function e(r){var i,a,o,s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.default.getinstance();case 2:if(i=e.sent,a=r.fileSize,o=r.filePath,T.info("log upload: start upload, file size= "+a+"B"),!(1024*P.LOG_MAX_UPLOAD_SIZE*1024>a)){e.next=12;break}return s=1,T.info("log upload: start upload log request, magic="+t),e.next=10,i.tupSetUploadFileName(o,t,s);case 10:e.next=17;break;case 12:return T.info("log upload: file size beyond the limit, maximum file size= "+P.LOG_MAX_UPLOAD_SIZE+"M"),c=0,e.next=16,i.tupSetUploadFileName("",t,c);case 16:$getState().cwmpInfo.isUserClickUpload&&(T.info("log upload: userClick upload flag is true"),se(constant.LOG_UPLOAD_RESULT.OVER_LIMIT)());case 17:case"end":return e.stop()}},e,n)}));return function(t){return e.apply(this,arguments)}}())}),oe=(t.dealZipLogSuccess=function(e){T.info("log upload: compress log files success"),B=e,he(),F&&clearTimeout(F),F=setTimeout(se(constant.LOG_UPLOAD_RESULT.TIMEOUT),9e4)},t.dealUploadLogSuccess=function(){T.info("log upload: dealUploadLogSuccess start"),$dispatch(coreUi.IsUserClickUpload(!1)),E?(T.info("log upload: _uploadSuccessFunc start"),E(),I()):window.ToastNew(language.LOG_UPLOAD_SUCCESS_PROMPT,2)}),se=t.dealUploadLogFailed=function(e){return function(){T.info("log upload: dealUploadLogFailed start, reason=",e),$dispatch(coreUi.IsUserClickUpload(!1)),_?(T.info("log upload: _uploadFailedFunc start"),_(e),I()):window.ToastNew(language.LOG_UPLOAD_FAILED_PROMPT,2)}},ce=function(e){T.info("save cmdKey from server.");var t=(0,s.default)(e),n={key:"cmdkey",value:t};return coreDb.saveUserConfig(n)},ue=t.dealWithUICfgParam=function(e,t){if(e.indexOf("Device.UICfg.cert.sync")?T.info("set ui config, name="+e+", value=",t):T.info("set ui config, name="+e),"Device.UICfg.IM.mutiLanguage"===e)window.mutiLanguage=t;else if("Device.UICfg.IM.enableISH"===e)$dispatch(coreUi.changeSecurityHintsShow(t));else if("Device.UICfg.IM.chineseISH"===e)$dispatch(coreUi.changeSecurityHintsChinese(t));else if("Device.UICfg.IM.setFont"===e)$dispatch(coreUi.changeImSetFontEnable(t));else if("Device.UICfg.IM.stgDisableSendFile"===e)$dispatch(coreUi.changeStgDisableSendFile("1"===t));else if("Device.UICfg.IM.englishISH"===e)$dispatch(coreUi.changeSecurityHintsEnglish(t));else if("Device.UICfg.Conf.Coordination"===e)$dispatch(coreUi.changeShowPiar(parseInt(t)));else if(0===e.indexOf("Device.UICfg.Call.ConfRefreshTime"))window.confRefreshTime=t;else if(0===e.indexOf("Device.UICfg.Call.isMultiStream"))window.isMultiStream=t,T.info("dealWithUICfgParam isMultiStream: "+window.isMultiStream);else if("Device.UICfg.Conf.EnableDocShare"===e)window.enableDocShare=t;else if(0===e.indexOf("Device.UICfg.FunctionConfig.PersonalManagementPlatform")){if(!window.CLIENTCONFIG.ISMOBILE){var n=parseInt(t);$getState().displayInfo.showPersonalManagement!==n&&($dispatch(coreUi.changeShowPersonalManagement(n)),appService.initMainTray())}}else if(0===e.indexOf("Device.UICfg.FunctionConfig.ChineseHelpUrl")){var r=t;$getState().displayInfo.chineseHelpUrl!==r&&$dispatch(coreUi.changeChineseHelpUrl(r))}else if(0===e.indexOf("Device.UICfg.FunctionConfig.OtherLanguagesHelpUrl")){var i=t;$getState().displayInfo.otherLanguagesHelpUrl!==i&&$dispatch(coreUi.changeOtherLanguagesHelpUrl(i))}else if(0===e.indexOf("Device.UICfg.Conf.TransferChairman"))"1"===t?$dispatch(coreUi.toggleTransferChairman(!0)):$dispatch(coreUi.toggleTransferChairman(!1));else if(0===e.indexOf("Device.UICfg.Conf.CreateMeetingPassword"))T.info("esight config createMeetingPOption(0 NO 1 YES 2 DIS):"+t),"1"===t?($dispatch(coreUi.changeCreateMeetingPassword(!0)),$dispatch(coreUi.changeCreateMeetingPasswordDefault(!0))):"0"===t?($dispatch(coreUi.changeCreateMeetingPassword(!1)),$dispatch(coreUi.changeCreateMeetingPasswordDefault(!1))):($dispatch(coreUi.changeCreateMeetingPasswordOption(!1)),$dispatch(coreUi.changeCreateMeetingPassword(!0)),$dispatch(coreUi.changeCreateMeetingPasswordDefault(!0)));else if("Device.UICfg.PC.CTD.callback.flag"===e)(window.CLIENTCONFIG.ISWIN||"mac"===window.CLIENTCONFIG.PLATFORM)&&("1"===t?$dispatch(coreUi.changeCTDcallbackToPC(!0)):$dispatch(coreUi.changeCTDcallbackToPC(!1)));else if(0===e.indexOf("Device.UICfg.FunctionConfig.enableCHRColPro"))$dispatch(coreUi.changeShowChrCollectPrompt(parseInt(t)));else if(0===e.indexOf("Device.UICfg.Conf.BoardQRMode")){var a=parseInt(t);$getState().synergismInfo.QRMode!==a&&($dispatch(coreUi.changeQRMode(parseInt(t))),coreConf.requestPairCode())}else 0===e.indexOf("Device.UICfg.Conf.BoardQRScheme")?$dispatch(coreUi.changeQRScheme(t)):"Device.UICfg.IM.enableMDXSelfContact"===e&&$dispatch(coreUi.changeImMDXSelfContactEnable(t))},fe=function(){var e=(0,d.default)(u.default.mark(function e(t,n,r){var i,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t!==P.ACS_PERIODICINFORMINTERVAL_NAME||n===P.ACS_PERIODICINFORMINTERVAL_VALUE.toString()){e.next=9;break}return e.next=3,m.default.getinstance();case 3:return i=e.sent,e.next=6,i.tupCwmpSetPeriodic(n);case 6:T.info("get tr069 heart interval config from esight, name="+t+", value="+n),e.next=61;break;case 9:if(t!==P.ACS_CONNECTIONREQUESTUSERNAME_NAME||n===P.ACS_CONNECTIONREQUESTUSERNAME_VALUE){e.next=16;break}r.isCPEParamChanged=!0,k=n,r.paraCPE.push({ParaName:t,ParaValue:n}),T.info("get cpe config from esight, name="+t+", value length="+n.length),e.next=61;break;case 16:if(t!==P.ACS_CONNECTIONREQUESTPASSWORD_NAME||n===P.ACS_CONNECTIONREQUESTPASSWORD_VALUE){e.next=27;break}return r.isCPEParamChanged=!0,e.next=20,coreSecurity.getPasswordManager();case 20:return a=e.sent,e.next=23,a.setPassword("CPEPassword",n);case 23:r.paraCPE.push({ParaName:t,ParaValue:n}),T.info("get cpe config from esight, name="+t+", value length="+n.length),e.next=61;break;case 27:if(t!==P.ACS_CONNECTIONSTUN_ENABLE){e.next=32;break}N="1"===n,T.info("get stun config from esight, name="+t+", value="+n),e.next=61;break;case 32:if(t!==P.ACS_CONNECTIONSTUNSERVER_ADDRESS_NAME||n===P.ACS_CONNECTIONSTUNSERVER_ADDRESS_VALUE){e.next=38;break}r.isSTUNParamChanged=!0,O=n,T.info("get stun config from esight, name="+t+", value length="+n.length),e.next=61;break;case 38:if(t!==P.ACS_CONNECTIONSTUNSERVER_PORT_NAME||n===P.ACS_CONNECTIONSTUNSERVER_PORT_VALUE){e.next=44;break}r.isSTUNParamChanged=!0,b=n,T.info("get stun config from esight, name="+t+", value length="+n.length),e.next=61;break;case 44:if(t!==P.ACS_CONNECTIONSTUNUSERNAME_NAME||n===P.ACS_CONNECTIONSTUNUSERNAME_VALUE){e.next=50;break}r.isSTUNParamChanged=!0,U=n,T.info("get stun config from esight, name="+t+", value length="+n.length),e.next=61;break;case 50:if(t!==P.ACS_CONNECTIONSTUNPASSWORD_NAME||n===P.ACS_CONNECTIONSTUNPASSWORD_VALUE){e.next=60;break}return r.isSTUNParamChanged=!0,e.next=54,coreSecurity.getPasswordManager();case 54:return o=e.sent,e.next=57,o.setPassword("StunPassword",n);case 57:T.info("get stun config from esight, name="+t+", value length="+n.length),e.next=61;break;case 60:t===P.ACS_CONNECTIONSTUN_MIN_ALIVEPERIOD_NAME&&n!==P.ACS_CONNECTIONSTUN_MIN_ALIVEPERIOD_VALUE?(r.isSTUNParamChanged=!0,L=n,T.info("get stun config from esight, name="+t+", value="+n)):t===P.ACS_CONNECTIONSTUN_MAX_ALIVEPERIOD_NAME&&n!==P.ACS_CONNECTIONSTUN_MAX_ALIVEPERIOD_VALUE?(r.isSTUNParamChanged=!0,M=n,T.info("get stun config from esight, name="+t+", value="+n)):t===P.ACS_CONNECTIONSTUN_STG_SERVER_ADDRESS_NAME&&n!==P.ACS_CONNECTIONSTUN_STG_SERVER_ADDRESS_VALUE?(r.isSTUNParamChanged=!0,D=n,T.info("get stun config from esight, name="+t+", value length="+n.length)):t===P.ACS_CONNECTIONSTUN_STG_SERVER_PORT_NAME&&n!==P.ACS_CONNECTIONSTUN_STG_SERVER_PORT_VALUE&&(r.isSTUNParamChanged=!0,R=n,T.info("get stun config from esight, name="+t+", value length="+n.length));case 61:return e.abrupt("return",r);case 62:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),de=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,a,o,c,f,d,l,p,g,w,h,v,m,S,_,E,I,y,N,x,k,O,b,U,L,M,D;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("get esight setting params data length="+t.length),n=null,r={},e.next=5,coreTup.getCallInstance();case 5:i=e.sent,a={isSTUNParamChanged:!1,isCPEParamChanged:!1,paraCPE:[]},o=new Array,A.splice(0,A.length),$dispatch(coreUi.clearSvcConfEsightResolutionConfig()),c=0;case 11:if(!(c<t.length)){e.next=100;break}if(f=t[c]["ParameterValueStruct.Name"],d=t[c]["ParameterValueStruct.Value"],0!==f.indexOf("Device.ComCfg.Conf.Svc")){e.next=50;break}if(""!==d){e.next=17;break}return e.abrupt("continue",97);case 17:if(f!==P.SVC_Mobile_Conf_HdDecoder){e.next=25;break}if(window.isConfHardCode=d,T.info("get ui config from esight is hard code:"+window.isConfHardCode),!window.CLIENTCONFIG.ISMOBILE){e.next=25;break}return l=coreAccount.initVideoHardCodeParam(),e.next=24,i.configCallHardCodeParam(l);case 24:"android"===window.CLIENTCONFIG.PLATFORM&&(p=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,T.info("android hard decoder enter 0",p),window.isHardDecodeToNative(p));case 25:if(f===P.SVC_AUTOMATIC_ACCEPT_VIDEO_CONF&&T.info("bAutomaticAcceptVideoConf= ",d),f===P.SVC_START_SHARE_BFCP&&(T.info("SVC_START_SHARE_BFCP = ",d),$dispatch(coreUi.changeSwitchShareBfcp(!1))),f===P.ENABLE_HISTORY_CONF_LIST&&(T.info("ENABLE_HISTORY_CONF_LIST = ",d),"1"===d?$dispatch(coreUi.changeIsEnableHistoryConfList(!0)):$dispatch(coreUi.changeIsEnableHistoryConfList(!1))),f!==P.SVC_CONF_HME_LOG_SIZE_MB){e.next=36;break}return window.hmeLogSizeMb=parseInt(d),e.next=32,coreAccount.configHMELog();case 32:return g=e.sent,T.info("eSight set configHmeInfo=",g),e.next=36,i.setHMELog(g);case 36:f===P.SVC_DESKTOP_MAX_ENCODE&&(w=parseInt(d),$dispatch(coreUi.changeSvcDesktopMaxEncode(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[w])),h=$getState().conf.svcDesktopMaxEncode,T.info("Svc_Esight_Config get SVC_DESKTOP_MAX_ENCODE esight setting params= ",h)),f===P.SVC_DESKTOP_SPEAKER_BIG_MAX_LOOK&&(v=parseInt(d),$dispatch(coreUi.changeSvcDesktopSpeakerBigMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[v])),T.info("Svc_Esight_Config get SVC_DESKTOP_SPEAKER_BIG_MAX_LOOK esight setting params= ",$getState().conf.svcDesktopSpeakerBigMaxLook)),f===P.SVC_DESKTOP_SPEAKER_SMALL_MAX_LOOK&&(m=parseInt(d),$dispatch(coreUi.changeSvcDesktopSpeakerModeSmallMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[m])),T.info("Svc_Esight_Config get SVC_DESKTOP_SPEAKER_SMALL_MAX_LOOK esight setting params= ",$getState().conf.svcDesktopSpeakerModeSmallMaxLook)),f===P.SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_2_6&&(S=parseInt(d),$dispatch(coreUi.changeSvcDesktopDivideModeMaxLook2_6(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[S])),T.info("Svc_Esight_Config get SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_2_6vesight setting params= ",$getState().conf.svcDesktopDivideModeMaxLook2_6)),f===P.SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_7_16&&(_=parseInt(d),$dispatch(coreUi.changeSvcDesktopDivideModeMaxLook7_16(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[_])),T.info("Svc_Esight_Config get SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_7_16 esight setting params= ",$getState().conf.svcDesktopDivideModeMaxLook7_16)),f===P.SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_17_24&&(E=parseInt(d),$dispatch(coreUi.changeSvcDesktopDivideModeMaxLook17_24(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[E])),T.info("Svc_Esight_Config get SVC_DESKTOP_DIVIDEMODE_MAX_LOOK_17_24 esight setting params= ",$getState().conf.svcDesktopDivideModeMaxLook17_24)),f===P.SVC_MOBILE_SOFT_ENCODE&&(I=parseInt(d),$dispatch(coreUi.changeSvcMobileMaxSoftEncode(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[I])),T.info("Svc_Esight_Config get SVC_MOBILE_SOFT_ENCODE esight setting params= ",$getState().conf.svcMobileMaxSoftEncode)),f===P.SVC_MOBILE_HARD_ENCODE&&(y=parseInt(d),$dispatch(coreUi.changeSvcMobileMaxHardEncode(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[y])),T.info("Svc_Esight_Config get SVC_MOBILE_HARD_ENCODE esight setting params= ",$getState().conf.svcMobileMaxHardEncode)),f===P.SVC_MOBILE_SPEAKERMODE_MAX_LOOK&&(N=parseInt(d),$dispatch(coreUi.changeSvcMobileSpeakerModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[N])),T.info("Svc_Esight_Config get SVC_MOBILE_SPEAKERMODE_MAX_LOOK esight setting params= ",$getState().conf.svcMobileSpeakerModeMaxLook)),f===P.SVC_MOBILE_DIVIDEMODE_MAX_LOOK&&(x=parseInt(d),$dispatch(coreUi.changeSvcMobileDivideModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[x])),T.info("Svc_Esight_Config get SVC_MOBILE_DIVIDEMODE_MAX_LOOK esight setting params= ",$getState().conf.svcMobileDivideModeMaxLook)),f===P.SVC_HIGHPERFORMANCE_MOBILE_SPEAKERMODE_MAX_LOOK&&(k=parseInt(d),$dispatch(coreUi.changeSvcHighPerformanceMobileSpeakerModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[k])),T.info("Svc_Esight_Config get SVC_HIGHPERFORMANCE_MOBILE_SPEAKERMODE_MAX_LOOK esight setting params= ",$getState().conf.svcHighPerformanceMobileSpeakerModeMaxLook)),f===P.SVC_HIGHPERFORMANCE_MOBILE_DIVIDEMODE_MAX_LOOK&&(O=parseInt(d),$dispatch(coreUi.changeSvcHighPerformanceMobileDivideModeMaxLook(constant.SVC_ENCODE_DECODE_RESOLUTION_ESIGHT_CONFIG[O])),T.info("Svc_Esight_Config get SVC_HIGHPERFORMANCE_MOBILE_DIVIDEMODE_MAX_LOOK esight setting params= ",$getState().conf.svcHighPerformanceMobileDivideModeMaxLook)),e.next=97;break;case 50:if(0!==f.indexOf("Device.ComCfg")){e.next=68;break}if(""!==d){e.next=53;break}return e.abrupt("continue",97);case 53:if(0===f.indexOf("Device.ComCfg.CHR.CHRPas")){e.next=59;break}n={key:f,value:d},r[f]=d,A.push(n),e.next=66;break;case 59:return e.next=61,coreSecurity.getPasswordManager();case 61:return b=e.sent,e.next=64,b.setPassword("CHRPassword",d);case 64:U=e.sent,U&&U.salt&&U.cipher&&(d={salt:U.salt,cipher:U.cipher},n={key:"CHRPassword",value:(0,s.default)(d)},coreDb.saveUserConfig(n));case 66:e.next=97;break;case 68:if(0!==f.indexOf("Device.UICfg")){e.next=94;break}if(0!==f.indexOf("Device.UICfg.Conf.ExperienceConferenceID")){e.next=88;break}if(L=coreConf.getExperienceConferenceInfo(d),T.info("ExperienceConferenceID confId: ",L.confId),isNullOrEmpty(L.confPwd)){e.next=82;break}return e.next=75,coreSecurity.getPasswordManager();case 75:return M=e.sent,e.next=78,M.setPassword("experienceConfPwd",L.confPwd);case 78:D=e.sent,D&&D.salt&&D.cipher&&(d={salt:D.salt,cipher:D.cipher,confid:L.confId},n={key:"experienceConfInfo",value:(0,s.default)(d)},coreDb.saveUserConfig(n)),e.next=85;break;case 82:d={salt:"",cipher:"",confid:L.confId},n={key:"experienceConfInfo",value:(0,s.default)(d)},coreDb.saveUserConfig(n);case 85:$dispatch(coreUi.changeExperienceConfId(L.confId)),e.next=92;break;case 88:n={key:f,value:d},o.push(n),ue(f,d),window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||0===f.indexOf("Device.UICfg.FunctionConfig.enableCHRColPro")&&coreSetting.initChrUpload();case 92:e.next=97;break;case 94:return e.next=96,fe(f,d,a);case 96:a=e.sent;case 97:c++,e.next=11;break;case 100:return e.next=102,le(r);case 102:return e.next=104,pe(a.isCPEParamChanged,a.isSTUNParamChanged,a.paraCPE);case 104:if(!(o.length>0)){e.next=108;break}return T.info("save ui config to database"),e.next=108,coreDb.saveUserConfigList(o);case 108:return e.next=110,(0,C.syncCertificate)(t);case 110:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),le=function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("the configParam length is: "+A.length),!(A.length>0)){e.next=18;break}return e.next=4,(0,S.getLoginModel)();case 4:return n=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_ESIGHT_SERVER,resultParams:[1,n.isResume?1:0],isTrackTimeCosts:!0}),e.next=8,coreDb.saveUserConfigList(A);case 8:if(r=$getState().call.callStatus,!(i=!("VIDEO_CONNECTED"===r||"VIDEO_OUT"===r||"CALL_OUT"===r||"CALL_CONNECTED"===r))){e.next=15;break}return e.next=13,ge(A);case 13:e.next=17;break;case 15:T.info("start calling status."),$dispatch(coreUi.isWaitUpdateConfigTUP(!0));case 17:(0,a.default)(window.CLIENTCONFIG,t);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),pe=function(){var e=(0,d.default)(u.default.mark(function e(t,n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("isCPEParamChanged is: "+t+", isSTUNParamChanged is:"+n),!t){e.next=4;break}return(0,w.startStunAndCPEService)(r).then(function(){},function(){}),e.abrupt("return");case 4:n&&(0,w.startStunService)().then(function(){},function(){});case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),ge=(t.checkUpdateConfig=function(){var e=(0,d.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),!(n=t.cwmpInfo.isWaitUpdateConfigTUP)){e.next=7;break}return T.info("The call callEnded is start update config to tup"),$dispatch(coreUi.isWaitUpdateConfigTUP(!1)),e.next=7,ge(A);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(u.default.mark(function e(t){var n,r,i,o,c,f,d,l,p,g,w,h,C,v,m,S,_,E,I,P,y,N,A,x,k,O,b,U,L,M,D,R,F,V,B;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.isWaitUpdateConfigTUP(!1)),n=window.CLIENTCONFIG,r={media:{}},i={esightChrEnable:0,esightChrPer:300,esightChrColPer:60},o=!1,c=0,f=0,d=0,l=0,p=0,g="",w=-1,h=-1,C=-1,v=-1,m=-1,S=-1,_=-1,E=-1,I="",P="",e.next=11,coreTup.getCallInstance();case 11:y=e.sent,N=0;case 13:if(!(N<t.length)){e.next=154;break}if(0!==t[N].key.indexOf("Device.ComCfg.Media.")||""===t[N].value){e.next=150;break}if(n.hasOwnProperty(t[N].key)&&t[N].value===n[t[N].key]){e.next=148;break}if(g=t[N].value,"Device.ComCfg.Media.DataArq"!==t[N].key){e.next=21;break}y.config({media:{data_arq:parseInt(g)}}),e.next=148;break;case 21:if("Device.ComCfg.Media.DataHarq"!==t[N].key){e.next=25;break}y.config({media:{data_harq:parseInt(g)}}),e.next=148;break;case 25:if("Device.ComCfg.Media.VideoArq"!==t[N].key){e.next=29;break}y.config({media:{video_arq:parseInt(g)}}),e.next=148;break;case 29:if("Device.ComCfg.Media.VideoHarq"!==t[N].key){e.next=33;break}y.config({media:{video_harq:parseInt(g)}}),e.next=148;break;case 33:if("Device.ComCfg.Media.EcPktInRtp"!==t[N].key){e.next=37;break}y.config({media:{ec_pkt_in_rtp:parseInt(g)}}),e.next=148;break;case 37:if("Device.ComCfg.Media.VideoNetRat"!==t[N].key){e.next=41;break}y.config({media:{net_lossrate:parseInt(g)}}),e.next=148;break;case 41:if("Device.ComCfg.Media.VideoKeyFrameIntervalNetRat"!==t[N].key){e.next=45;break}y.config({media:{keyframe_interval:parseInt(g)}}),e.next=148;break;case 45:if("Device.ComCfg.Media.TmmbrControl"!==t[N].key){e.next=49;break}y.config({media:{fluid_control:parseInt(g)}}),e.next=148;break;case 49:if("Device.ComCfg.Media.VideoARS"!==t[N].key){e.next=53;break}y.config({media:{video_ars:{ars:parseInt(g)}}}),e.next=148;break;case 53:if("Device.ComCfg.Media.VideoARSFrameSize"!==t[N].key){e.next=57;break}y.config({media:{video_ars:{ars_ctrl_framesize:parseInt(g)}}}),e.next=148;break;case 57:if("Device.ComCfg.Media.VideoARSFrameRate"!==t[N].key){e.next=61;break}y.config({media:{video_ars:{ars_ctrl_framerate:parseInt(g)}}}),e.next=148;break;case 61:if("Device.ComCfg.Media.VideoARSBitRate"!==t[N].key){e.next=65;break}y.config({media:{video_ars:{ars_ctrl_bitrate:parseInt(g)}}}),e.next=148;break;case 65:if("Device.ComCfg.Media.VideoArsFec"!==t[N].key){e.next=69;break}y.config({media:{video_ars:{ars_ctrl_fec:parseInt(g)}}}),e.next=148;break;case 69:if("Device.ComCfg.Media.VideoShaping"!==t[N].key){e.next=73;break}y.config({media:{video_ars:{ars_data_shaping:parseInt(g)}}}),e.next=148;break;case 73:if("Device.ComCfg.Media.DataARS"!==t[N].key){e.next=77;break}y.config({media:{data_ars:{ars:parseInt(g)}}}),e.next=148;break;case 77:if("Device.ComCfg.Media.DataARSFrameSize"!==t[N].key){e.next=81;break}y.config({media:{data_ars:{ars_ctrl_framesize:parseInt(g)}}}),e.next=148;break;case 81:if("Device.ComCfg.Media.DataARSFrameRate"!==t[N].key){e.next=85;break}y.config({media:{data_ars:{ars_ctrl_framerate:parseInt(g)}}}),e.next=148;break;case 85:if("Device.ComCfg.Media.DataARSBitRate"!==t[N].key){e.next=89;break}y.config({media:{data_ars:{ars_ctrl_bitrate:parseInt(g)}}}),e.next=148;break;case 89:if("Device.ComCfg.Media.DataArsFec"!==t[N].key){e.next=93;break}y.config({media:{data_ars:{ars_ctrl_fec:parseInt(g)}}}),e.next=148;break;case 93:if("Device.ComCfg.Media.DataShaping"!==t[N].key){e.next=97;break}y.config({media:{data_ars:{ars_data_shaping:parseInt(g)}}}),e.next=148;break;case 97:if("Device.ComCfg.Media.BfcpKeepaliveTime"!==t[N].key){e.next=101;break}y.config({call:{bfcp_keepalive_time:parseInt(g)}}),e.next=148;break;case 101:if("Device.ComCfg.Media.TotalBandwidth"!==t[N].key){e.next=107;break}f=parseInt(g),n["Device.ComCfg.Media.TotalBandwidth"]=f+"",T.info("Device.ComCfg.Media.TotalBandwidth is",f),e.next=148;break;case 107:if("Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"!==t[N].key){e.next=113;break}p=parseInt(g),n["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"]=p+"",T.info("Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth is",p),e.next=148;break;case 113:if("Device.ComCfg.Media.Mobile.4GTotalBandwidth"!==t[N].key){e.next=119;break}l=parseInt(g),n["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]=l+"",T.info("Device.ComCfg.Media.Mobile.4GTotalBandwidth is",l),e.next=148;break;case 119:if("Device.ComCfg.Media.Mobile.3GTotalBandwidth"!==t[N].key){e.next=125;break}d=parseInt(g),n["Device.ComCfg.Media.Mobile.3GTotalBandwidth"]=d+"",T.info("Device.ComCfg.Media.Mobile.3GTotalBandwidth is",d),e.next=148;break;case 125:if("Device.ComCfg.Media.BFCPMode"!==t[N].key){e.next=138;break}return T.info("esight bfcp trans_mode: "+parseInt(g)),n["Device.ComCfg.Media.BFCPMode"]=g,A={media:{bfcp_param:{floor_ctrl:3,setup:3,trans_type:2===parseInt(g)?1:parseInt(g)}}},y.config(A),x=!1,parseInt(g)!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&parseInt(g)!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(x=!0),e.next=134,coreAccount.configBFCPForTLS({bForceTLSMode:x});case 134:k=e.sent,y.configBFCPTLSParam(k),e.next=148;break;case 138:if("Device.ComCfg.Media.priorityRtp"!==t[N].key){e.next=147;break}return n["Device.ComCfg.Media.priorityRtp"]=g,e.next=142,coreAccount.configRTP();case 142:return O=e.sent,e.next=145,y.config(O);case 145:e.next=148;break;case 147:"Device.ComCfg.Media.EncryptCalloutUseMKI"===t[N].key&&y.config({media:{srtp_mki:parseInt(g)}});case 148:e.next=151;break;case 150:0===t[N].key.indexOf("Device.ComCfg.Sip")?"Device.ComCfg.Sip.LocalPort"===t[N].key?v=parseInt(t[N].value):"Device.ComCfg.Sip.enableSessionTimer"===t[N].key?m=parseInt(t[N].value):"Device.ComCfg.Sip.SessionTime"===t[N].key?S=parseInt(t[N].value):"Device.ComCfg.Sip.sipKeepaliveTime"===t[N].key?(T.info("esight Device.ComCfg.Sip.sipKeepaliveTime = "+parseInt(t[N].value)),y.config({call:{sip_keepalive_time:parseInt(t[N].value)}})):"Device.ComCfg.Sip.RegistExpires"===t[N].key&&(T.info("esight Device.ComCfg.Sip.RegistExpires = "+parseInt(t[N].value)),y.config({call:{regist_timeout:parseInt(t[N].value)}})):0===t[N].key.indexOf("Device.ComCfg.CHR.")?(o=!0,g=t[N].value,"Device.ComCfg.CHR.enableCHR"===t[N].key?i.esightChrEnable="TRUE"===g?1:0:"Device.ComCfg.CHR.CHRPer"===t[N].key?i.esightChrPer=parseInt(g):"Device.ComCfg.CHR.CHRColPer"===t[N].key&&(i.esightChrColPer=parseInt(g))):0===t[N].key.indexOf("Device.ComCfg.Service.")&&("Device.ComCfg.Service.pointPickupActive"===t[N].key?I=t[N].value:"Device.ComCfg.Service.groupPickupActive"===t[N].key&&(P=t[N].value));case 151:N++,e.next=13;break;case 154:if(!o){e.next=159;break}return T.info("get CHR server config, esightChrConfig=",(0,s.default)(i)),b=coreSetting.packageChrConfigValue(i.esightChrEnable,i.esightChrPer,i.esightChrColPer),e.next=159,y.config(b);case 159:if(0===f&&0===d&&0===l&&0===p){e.next=172;break}return U={},e.next=163,coreAccount.initVideoSettingParam();case 163:return U.media=e.sent,e.next=166,y.config(U);case 166:return e.next=168,coreAccount.configBFCP();case 168:return L=e.sent,e.next=171,y.config(L);case 171:"android"===window.CLIENTCONFIG.PLATFORM&&(M=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,T.info("android hard decoder enter 2",M),window.isHardDecodeToNative(M));case 172:if(D={},R=0,-1!==v&&v!==parseInt(n["Device.ComCfg.Sip.LocalPort"])&&(D.hasOwnProperty("network")||(D.network={}),F={network:{local_sip_port:v}},D.network=(0,a.default)(D.network,F.network),R++),-1!==m&&m!==parseInt(n["Device.ComCfg.Sip.enableSessionTimer"])&&(D.hasOwnProperty("sip")||(D.sip={}),V={sip:{sessiontimer_enable:m}},D.sip=(0,a.default)(D.sip,V.sip),R++),-1!==S&&S!==parseInt(n["Device.ComCfg.Sip.SessionTime"])&&1===m&&(D.hasOwnProperty("sip")||(D.sip={}),B={sip:{session_time:S}},D.sip=(0,a.default)(D.sip,B.sip),R++),""===I||I===n["Device.ComCfg.Service.pointPickupActive"]){e.next=181;break}return T.info("Device.ComCfg.Service.pointPickupActive : "+n["Device.ComCfg.Service.pointPickupActive"]),e.next=181,y.config({service:{server_right:{type:7,active_accesscode:I,deactive_accesscode:"",register:0,right:0}}});case 181:if(""===P||P===n["Device.ComCfg.Service.groupPickupActive"]){e.next=185;break}return T.info("Device.ComCfg.Service.groupPickupActive : "+n["Device.ComCfg.Service.groupPickupActive"]),e.next=185,y.config({service:{server_right:{type:6,active_accesscode:P,deactive_accesscode:"",register:0,right:0}}});case 185:if(!(R>0)){e.next=189;break}return T.info("the configSipInfo is "+(0,s.default)(D)),e.next=189,y.config(D);case 189:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),we=t.RequestSetEventInform=function(e,t,n,r,i){return T.info("request event inform tup, eventCode = ",e),new p.default(function(){var a=(0,d.default)(u.default.mark(function a(o,s){var c,f,d;return u.default.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.next=2,m.default.getinstance();case 2:return c=a.sent,a.next=5,c.tupCwmpRequestSetEventInform(e,t,n,r,i);case 5:f=a.sent,d=f.result,0===d?(T.info("request event inform tup success"),o()):(T.info("request event inform tup failed, result = "+d),s());case 8:case"end":return a.stop()}},a,void 0)}));return function(e,t){return a.apply(this,arguments)}}())},he=t.beginUploadLog=function(){T.info("beginUploadLog enter.");we("X WeLink UploadLog",1,1,null,0)},Ce=(t.clearCwmpParam=function(){F&&clearTimeout(F),F=null,V&&clearTimeout(V),V=null},t.compareVersion=function(e){var t=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,n=t.split("."),r=e.split("."),i=Math.max(n.length,r.length);if(t===e)return!1;for(var a=0;a<i;a++){var o=a>=r.length?0:parseInt(r[a],10),s=a>=n.length?0:parseInt(n[a],10);if(o>s)return!0;if(o<s)return!1}return!1}),ve=t.dealWithConfigNotify=function(e){T.info("add task, get esight config notify, params length=",e.length),coreCommon.TaskQueue.getInstance("cwmpQueue").addTask(de,{},null,e)}},692:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.downloadResultNotify=t.updateFileDownloadNotify=t.getWhatsNewNotify=t.clickRequestVersionCheck=t.requestVersionUpdateCheck=t.dealUpdateVersionClick=t.clearBarPageSet=t.downloadProcessNotify=t.hideProgressBarModal=t.restartUpgrade=t.dealInstallFailed=t.dealDownloadFailed=t.startInstallNewVer=t.getInCallingState=t.cancelDownload=t.clearDownloadClick=t.setDownloadClick=t.clearAllUpdataState=t.changeUpdataState=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),c=n(123),u=r(c),f=n(69),d=r(f),l=n(118),p=r(l),g=n(691),w=n(693),h=r(w),C=coreLogger.getLogger("logic")("cwmp/upgrade"),v={clickDownload:!1,clickTimer:null,downloadResume:!1,hasFirstUpdateNotify:!1},m=t.changeUpdataState=function(e){C.info("change updata state, obj=",(0,d.default)(e)),(0,u.default)(v,e),C.info("updataState=",(0,d.default)(v))},S=(t.clearAllUpdataState=function(){v.clickTimer&&clearTimeout(v.clickTimer),v={clickDownload:!1,clickTimer:null,downloadResume:!1,hasFirstUpdateNotify:!1},C.info("clear updata state, updataState=",(0,d.default)(v))},t.setDownloadClick=function(){m({clickDownload:!0}),v.clickTimer&&clearTimeout(v.clickTimer),v.clickTimer=setTimeout(function(){C.info("wait download notify time out, show download failed"),m({clickDownload:!1}),M()},6e4)}),_=t.clearDownloadClick=function(){v.clickTimer&&clearTimeout(v.clickTimer),v.clickTimer=null,m({clickDownload:!1})},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_NAME,n=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE;""!==e&&(t="Device.DeviceInfo.RequestSoftwareVersion",n=e);var r=[];r.push({ParaName:t,ParaValue:n}),C.info("sendVersionUpdateCheck para: "+(0,d.default)(r)),(0,g.RequestSetEventInform)("X WeLink Firmware Upgrade",1,1,r,r.length)},I=t.cancelDownload=function(){var e=(0,s.default)(a.default.mark(function e(t){var n,r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("cancelDownload, magic=",t),n={Magic:t,AgreeDownload:0,DownloadTimeOut:parseInt(window.CLIENTCONFIG["Device.ComCfg.Cwmp.UpgradeDownloadTimeout"]),UpgFileTempPath:"",TcpTimeOut:3,ReqTimeOut:32,KeepDownload:1,LocalFileSize:0},e.next=4,h.default.getinstance();case 4:return r=e.sent,e.next=7,r.tupCwmpRequsetDownload(n);case 7:i=e.sent,C.info("cancelDownload, result=",i.result);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i,o,s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("confirmDownload path=",t+", magic=",n+", old file size=",s),r={Magic:n,AgreeDownload:1,DownloadTimeOut:parseInt(window.CLIENTCONFIG["Device.ComCfg.Cwmp.UpgradeDownloadTimeout"]),UpgFileTempPath:t,TcpTimeOut:3,ReqTimeOut:32,KeepDownload:1,LocalFileSize:s},e.next=4,h.default.getinstance();case 4:return i=e.sent,e.next=7,i.tupCwmpRequsetDownload(r);case 7:o=e.sent,C.info("confirmDownload, result=",o.result);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),P=function(){var e=(0,s.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().common.modalContent,isNullOrEmpty(t)||"progressbar"===t.key){e.next=7;break}if(C.info("model is not empty, [key]=",t.key),"addConf"!==t.key){e.next=7;break}return e.next=6,coreConf.toggleChangeConfAcsPas("");case 6:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN);case 7:n=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getProgressBar}),coreUi.showModal(p.default.createElement(n,{key:"progressbar"}),!0,"",!1);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),y=function(){var e=(0,s.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("userClick confirm download update version"),!window.isOffline){e.next=5;break}return C.info("offline, can not download update file"),window.Toast(language.NETWORK_IS_NOT_WORKING,2,!1),e.abrupt("return");case 5:t=$getState().cwmpInfo.downloadVersion,j(t);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),N=function(){$getState().cwmpInfo.isForceUpdate?window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:language.LOG_OUT,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?y():(C.info("userClick exit download update version"),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:language.UPDATE_LATER,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?y():C.info("userClick cancel download update version")})},A=function(){window.CLIENTCONFIG.ISMOBILE?window.webView&&(constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING===$getState().cwmpInfo.showContentType?window.goRoute("mUpdateVersionInfo"):N()):P()},x=function(e){try{if(window.fs){window.fs.readdirSync(e).forEach(function(t){var n=e+"/"+t;window.fs.statSync(n).isDirectory()||window.fs.unlinkSync(n)})}}catch(e){C.error("delete file error",e)}},k=function(e){var t=[];if(window.fs){window.fs.readdirSync(e).forEach(function(n){t.push(e+"/"+n)})}return t},O=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",n="";if(window.fs)if(t=window.path.join(window.APP_DATA_PATH,"update/").replace(/\\/g,"/"),window.fs.existsSync(t))if(e){var r=k(t);n=Array.isArray(r)&&1===r.length&&r[0]||"",C.info("this is resume download, find old update file=",n),""===n&&(C.info("not found valid file, delete all files"),x(t))}else C.info("not resume download, delete old update files"),x(t);else C.info("creat new update file"),window.fs.mkdir(t);else window.webView&&(t=window.UPGRADE_APK_PATH,e&&(n=window.getProcessFileName(t)));return{upgradeDir:t,fileNamePath:n}},b=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C.info("start update download, magic=",e,"iskeep=",t);var n=O(t),r=n.upgradeDir,i=n.fileNamePath;C.info("confirm download, set update file path=",r),""!==r&&(""!==i?(C.info("get old file path=",i),(0,g.getComPressFileSize)(i).then(function(t){var n=t.fileSize;C.info("get old update file size=",n),T(r,e,n)})):T(r,e))},U=t.getInCallingState=function(){var e=$getState().call.callStatus;return"VIDEO_CONNECTED"===e||"VIDEO_OUT"===e||"CALL_OUT"===e||"CALL_CONNECTED"===e},L=t.startInstallNewVer=function(){U()?(C.info("User is in calling, save the state and wait for the call end"),$dispatch(coreUi.bAfterCallUpgrade(!0))):(C.info("User is not calling, start install soft version now"),setTimeout(function(){window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():V()},3e3))},M=t.dealDownloadFailed=function(){$dispatch(coreUi.setIsUpdateProcessError(!0)),$dispatch(coreUi.changeShowContentType(constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING)),A()},D=t.dealInstallFailed=function(e){C.info("intsall update file error, show download again prompt"),window.exec("tskill ShowInstallTip"),B(),$dispatch(coreUi.changeShowContentType(constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS)),window.confirm(""+e,!0).then(function(e){e.ret&&(C.info("userClick to download update file again"),j())})},R=function(e){var t=window.process.env.APPDATA+"\\CloudLink\\log\\language.txt";window.fs.writeFile(t,window.langcode,"utf8",function(t){t&&window.log("writeFile quiteInstallFile error =",t),window.spawn(e,["/verysilent","/suppressmsgboxes","/norestart"]).on("error",function(e){C.info("execute update file error, err=",e),D(language.PC_FILE_DAMAGE_DOWN_AGAIN)})})},F=function(e){try{var t=window.APP_DATA_PATH;appService.writeFile(t,"configfile.ini","language = "+window.langcode.toString()+"\r\npackageversion = "+window.CLIENTCONFIG.NEW_APP_NAME).then(function(n){C.info("set update tip language success, file=",n);var r=t+"/ShowInstallTip.exe";appService.isFileExist(r).then(function(n){if(n){C.info("execute ShowInstallTip");var r=t.slice(0,2),i=r+" && cd "+t+" && ShowInstallTip.exe";window.exec(i),R(e)}else C.info("update tip file does not exit"),R(e)})},function(t){C.info("set update tip language failed, err:"+t),R(e)})}catch(e){C.error("install update file error:",e),D(language.PC_FILE_DAMAGE_DOWN_AGAIN)}},V=function(){if(window.fs){for(var e=window.path.join(window.APP_DATA_PATH,"update").replace(/\\/g,"/"),t=window.fs.readdirSync(e),n=0;n<t.length;n++){var r=t[n];if(-1!==(0,d.default)(r).indexOf(".exe")){C.info("start execute software upgrade file, upgrade file name=",r);return void F(e+"/"+r)}}C.info("software update file is not exist"),D(language.DID_NOT_FIND_THE_AVAILABLE_UPGRADE_FILE)}},B=(t.restartUpgrade=function(){var e=(0,s.default)(a.default.mark(function e(){var t,n,r;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=3;break}return C.info("[ENABLE_IT_MEETING] Plugin do not need to be updated！"),e.abrupt("return");case 3:t=$getState(),n=t.cwmpInfo.isWaitUpgrade,r=t.cwmpInfo.isAfterCallUpgrade,!0===n&&!0===r&&(C.info("Soft start to upgrade after call ended"),$dispatch(coreUi.bAfterCallUpgrade(!1)),window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():L());case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.hideProgressBarModal=function(){var e=(0,s.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().common.modalContent,isNullOrEmpty(t)||"progressbar"!==t.key?C.info("not update model, [key]=",t.key):(C.info("hide update model"),coreUi.hideModal());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),G=function(){return"login"===window.getRoute()?(C.info("offline or logout, can not update"),!1):!window.webView||!window.IsGooglePlayPkg()||(C.info("Android pkg check, the app is from google play, can not update by esight"),!1)},H=function(e){var t=e.SoftwareVersion,n=e.WhatsNewCHN,r=e.WhatsNewENG;if(C.info("getWhatIsNew, version=",t),!1!==G()){if(window.isHubEnv)return C.info("maxhub, request check version"),void E();if($dispatch(coreUi.changeWhatsNewCHN(n)),$dispatch(coreUi.changeWhatsNewENG(r)),$dispatch(coreUi.changeDownloadVersion(t)),v.hasFirstUpdateNotify)return void C.info("has show first hints, return");m({hasFirstUpdateNotify:!0}),$dispatch(coreUi.changeShowContentType(constant.UPDATE_MODEL_CONTENT_TYPE.WHATSNEWHINTS)),$dispatch(coreUi.isWaitUpgrade(!0));U()?C.info("User is in calling, not show hints"):(C.info("User is not calling, start to show update hints"),A())}},$=function(e,t){return C.info("deal with update file download notify, magic=",e+", update mode=",t),!1===G()?void I(e):window.isHubEnv?(C.info("maxhub confirm download update file"),void b(e)):v.clickDownload?(C.info("it's userClick, confirm download"),v.downloadResume?(b(e,!0),m({downloadResume:!1})):b(e),void _()):(C.info("get server update notify, cancel first and show hints"),I(e),v.hasFirstUpdateNotify?void C.info("has show first hints, return"):(m({hasFirstUpdateNotify:!0}),void setTimeout(function(){if(C.info("start to show hints"),!1!==G()){var e=!1;"X Vender FileMain UpgradeCompelled"===t&&(e=!0),$dispatch(coreUi.changeIsForceUpdate(e)),$dispatch(coreUi.changeShowContentType(constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS)),$dispatch(coreUi.isWaitUpgrade(!0));U()?C.info("user is in calling, not show hints"):A()}},3e3)))},W=(t.downloadProcessNotify=function(e){try{C.info("start set download process ",(0,d.default)(e));var t=e.totalsize,n=e.downloadsize;if(t=parseFloat(t),n=parseFloat(n),isNaN(t)||isNaN(n))return void C.error("size data error");var r=t<=0?0:parseInt(Math.round(n/t*1e4)/100);$dispatch(coreUi.setDownloadProcess(r))}catch(e){C.error("downloadProcessNotify, error:",e)}},function(){C.info("maxhub download soft upgrade file success");for(var e=window.path.join(window.APP_DATA_PATH,"update").replace(/\\/g,"/"),t=window.fs.readdirSync(e),n=0;n<t.length;n++){var r=t[n];if(-1!==(0,d.default)(r).indexOf(".exe")){C.info("maxhub find upgrade file, name=",r);var i=e+"/"+r;return void coreConf.NotifyGetUpdateFiles(0,i)}}}),K=function(e){if(C.info("get download result, params",(0,d.default)(e)),window.isHubEnv)return void(0===e.result?W():C.info("maxhub download soft upgrade file failed"));if(0===e.result)C.info("download update file success"),L();else{if(9001===e.result||9101===e.result)return void C.info("user cancel download update file, return");C.info("download update file failed, result=",e.result+", info=",e.FaultString),m(9010===e.result?{downloadResume:!0}:{downloadResume:!1}),M()}},Y=t.clearBarPageSet=function(){var e=(0,s.default)(a.default.mark(function e(){return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.setIsUpdateProcessError(!1)),$dispatch(coreUi.setDownloadProcess(-1));case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),q=function(e){C.info("start request software version check"),S(),E(e),Y(),$dispatch(coreUi.changeShowContentType(constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING)),A()},j=(t.dealUpdateVersionClick=function(){if(C.info("userClick, show soft update state btn"),!1===$getState().cwmpInfo.isWaitUpgrade)if(C.info("this is the latest software version"),window.CLIENTCONFIG.ISMOBILE)window.ToastNew(language.SOFT_UPGRADE_LATEST,2);else{var e=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getSoftVersionHint});coreUi.showModal(p.default.createElement(e,null))}else A()},t.requestVersionUpdateCheck=function(){C.info("add task, not userClick request version check"),coreCommon.TaskQueue.getInstance("updateQueue").addTask(E,{},null)},t.clickRequestVersionCheck=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";C.info("add task, userClick request version check, version=",e),coreCommon.TaskQueue.getInstance("updateQueue").addTask(q,{},null,e)});t.getWhatsNewNotify=function(e){C.info("add task, deal what's new notify, version=",e.SoftwareVersion),coreCommon.TaskQueue.getInstance("updateQueue").addTask(H,{},null,e)},t.updateFileDownloadNotify=function(e,t){C.info("add task, deal update file downloading notify, magic=",e),coreCommon.TaskQueue.getInstance("updateQueue").addTask($,{},null,e,t)},t.downloadResultNotify=function(e){C.info("add task, deal download result notify, params=",e),coreCommon.TaskQueue.getInstance("updateQueue").addTask(K,{},null,e)}},693:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=n(1),a=r(i),o=n(123),s=r(o),c=n(2),u=r(c),f=n(3),d=r(f),l=n(69),p=r(l),g=n(4),w=r(g),h=n(5),C=r(h),v=coreLogger.getLogger("tup")("cwmp"),m=coreCommon.getTupProtocolClass(),S=null,_=function(){function e(t){var n=this;return(0,w.default)(this,e),this.tupCwmpConfig=function(e){v.info("begin cwmp config");var t={cmd:851971,description:"tup_cwmp_config",param:e};return n.sendMessage(t)},this.tupCwmpConfigCPE=function(e){v.info("begin cwmp config CPE");var t={cmd:851981,description:"tup_cwmp_config_cpe",param:e};return n.sendMessage(t)},this.tupCwmpConfigStun=function(e){v.info("begin cwmp config Stun");var t={cmd:851982,description:"tup_cwmp_config_stun",param:e};return n.sendMessage(t)},this.tupCwmpStart=function(){v.info("cwmp start");var e={cmd:851973,description:"tup_cwmp_start"};return n.sendMessage(e)},this.tupCwmpStop=function(){v.info("cwmp stop");var e={cmd:851974,description:"tup_cwmp_stop"};return n.sendMessage(e)},this.tupCwmpGetParamterValues=function(e){v.info("reply param value by param name");var t={cmd:851978,description:"tup_cwmp_get_paramter_values",param:e};return n.sendMessage(t)},this.tupCwmpSetPeriodic=function(e){var t={cmd:851979,description:"tup_cwmp_set_periodic",param:{PeriodicInformEnable:1,PeriodicInformInterval:parseInt(e)}};return v.info("tupCwmpSetPeriodic data = "+(0,p.default)(t)),n.sendMessage(t)},this.tupSetUploadFileName=function(e,t,r){var i={cmd:851980,description:"tup_cwmp_set_upload_filename",param:{Magic:t,AgreeUpload:r,UploadFileName:e,TcpTimeOut:3,ReqTimeOut:80,UploadTimeOut:80}};return v.info("tupSetUploadFileName data = "+(0,p.default)(i)),n.sendMessage(i)},this.tupCwmpStartConnReqSever=function(){var e={cmd:851972,description:"tup_cwmp_start_conn_req_sever"};return n.sendMessage(e)},this.tupCwmpStopConnReqSever=function(){var e={cmd:851975,description:"tup_cwmp_stop_conn_req_sever"};return n.sendMessage(e)},this.tupCwmpStartStunSevice=function(){var e={cmd:851983,description:"tup_cwmp_start_stun_service"};return n.sendMessage(e)},this.tupCwmpStopStunSevice=function(){var e={cmd:851984,description:"tup_cwmp_stop_stun_service"};return n.sendMessage(e)},this.tupCwmpRequestSetEventInform=function(e,t,r,i,a){v.info("tupCwmpRequestSetEventInform enter, eventCode = ",e);var o={cmd:851986,description:"tup_cwmp_inform_event",param:{EventCode:e,IsNeedRetry:t,IsActiveInform:r,IsMultiple:1,ParaTotalNum:a,EventParas:i}};return n.sendMessage(o)},this.tupCwmpRequsetDownload=function(e){v.info("tupCwmpRequsetDownload enter.");var t={cmd:851985,description:"tup_cwmp_request_download",param:e};return n.sendMessage(t)},this.tupCwmpRequsetAddInformParam=function(e){var t=e.length,r={cmd:851987,description:"tup_cwmp_add_inform_paras",param:{ParaTotalNum:t,InformParas:e}};return n.sendMessage(r)},this.tupCwmpUpdateToken=function(e){v.info("tupCwmpUpdateToken enter.");var t={cmd:851989,description:"tup_cwmp_set_custom_header",param:{ACSCustomHeaderName:"X-auth-Token",ACSCustomHeaderValue:e}};return n.sendMessage(t)},new d.default(function(){var e=(0,u.default)(a.default.mark(function e(r,i){var o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o={key:constant.TupModuleKey.cwmp,moduleName:"tup_cwmp_service_protocol",webSocketUri:""},(0,s.default)(o,t),e.next=4,new m(o);case 4:n.tupProtocol=e.sent,r(n);case 6:case"end":return e.stop()}},e,n)}));return function(t,n){return e.apply(this,arguments)}}())}return(0,C.default)(e,null,[{key:"getinstance",value:function(){return!coreCommon.isMac()&&S||(S=new e),S}}]),(0,C.default)(e,[{key:"sendMessage",value:function(e){var t=this;return new d.default(function(n,r){var i={resolve:n,data:e};t.tupProtocol.setRspFuncsAndSendMessage(i)})}},{key:"setNotifyFunc",value:function(e,t){this.tupProtocol.setNotifyFunc(e,t)}}]),e}();t.default=_},70:function(e,t,n){var r=n(8),i=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return i.stringify.apply(i,arguments)}},878:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.initESightService=t.stopCwmpServerAndUnInit=t.initAndStartCwmpServer=t.startStunAndCPEService=t.startStunService=t.cwmpConfigToken=void 0;var i=n(1),a=r(i),o=n(2),s=r(o),c=n(3),u=r(c),f=n(691),d=n(692),l=n(693),p=r(l),g=coreLogger.getLogger("logic")("cwmp/init"),w=!1,h=!1,C=null,v=function(){return new u.default(function(e,t){t()})},m=function(e){return new u.default(function(){var t=(0,s.default)(a.default.mark(function t(n,r){var i,o,s;return a.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p.default.getinstance();case 2:return i=t.sent,t.next=5,i.tupCwmpConfig(e);case 5:o=t.sent,s=o.result,0===s?(g.info("cwmp config success"),n()):(g.error("cwmp config failed, result = "+s),r());case 8:case"end":return t.stop()}},t,void 0)}));return function(e,n){return t.apply(this,arguments)}}())},S=t.cwmpConfigToken=function(){return new u.default(function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=$getState().login.authToken,e.next=3,p.default.getinstance();case 3:i=e.sent,i.tupCwmpUpdateToken(r),g.info("cwmp config [token] success"),t();case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},_=function(){var e=(0,s.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getCPEParam)();case 2:return t=e.sent,n=new u.default(function(){var e=(0,s.default)(a.default.mark(function e(n,r){var i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getinstance();case 2:return i=e.sent,e.next=5,i.tupCwmpConfigCPE(t);case 5:o=e.sent,s=o.result,0===s?(g.info("cwmp config CPE success"),n()):(g.error("cwmp config CPE failed, result = "+s),r());case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,s.default)(a.default.mark(function e(){var t,n;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getStunParam)();case 2:return t=e.sent,n=new u.default(function(){var e=(0,s.default)(a.default.mark(function e(n,r){var i,o,s;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getinstance();case 2:return i=e.sent,e.next=5,i.tupCwmpConfigStun(t);case 5:o=e.sent,s=o.result,0===s?(g.info("cwmp config Stun success"),n()):(g.error("cwmp config Stun failed, result = "+s),r());case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),I=function(){return new u.default(function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getinstance();case 2:return r=e.sent,e.next=5,r.tupCwmpStart();case 5:i=e.sent,o=i.result,0===o?(g.info("cwmp start success"),t()):(g.error("cwmp start failed, result = "+o),n());case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},T=function(){var e=(0,s.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getinstance();case 2:t=e.sent,t.tupCwmpStop();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),P=function(){return new u.default(function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getinstance();case 2:return r=e.sent,e.next=5,r.tupCwmpStartStunSevice();case 5:i=e.sent,o=i.result,0===o?(g.info("cwmp Stun start success"),h=!0,t()):(g.error("cwmp Stun start failed, result = "+o),n());case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},y=function(){return new u.default(function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!h){e.next=12;break}return g.info("start stop cwmp stun service"),e.next=4,p.default.getinstance();case 4:return r=e.sent,e.next=7,r.tupCwmpStopStunSevice();case 7:i=e.sent,o=i.result,0===o?(g.info("cwmp stun stop success"),h=!1,t()):(g.error("cwmp stun stop failed, result = "+o),n()),e.next=14;break;case 12:g.info("cwmp stun service not need to stop"),t();case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},N=function(){return new u.default(function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p.default.getinstance();case 2:return r=e.sent,e.next=5,r.tupCwmpStartConnReqSever();case 5:i=e.sent,o=i.result,0===o?(g.info("cwmp http start success"),w=!0,t()):(g.error("cwmp http start failed, result = "+o),n());case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},A=function(){return new u.default(function(){var e=(0,s.default)(a.default.mark(function e(t,n){var r,i,o;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!w){e.next=12;break}return g.info("start to stop cwmp http service"),e.next=4,p.default.getinstance();case 4:return r=e.sent,e.next=7,r.tupCwmpStopConnReqSever();case 7:i=e.sent,o=i.result,0===o?(g.info("cwmp http stop success"),w=!1,t()):(g.error("cwmp http stop failed, result = "+o),n()),e.next=14;break;case 12:g.info("cwmp http service not need to stop"),t();case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},x=function(){return g.info("start initCwmpModule"),new u.default(function(e,t){(0,f.initCwmpNotify)().then(function(){$dispatch(coreUi.setCwmpInitStatus(!0)),g.info("initCwmpModule success, set init status to true"),e()},function(){g.info("initCwmpModule failed"),t()})})},k=function(){g.info("start unInitCwmpModule"),$dispatch(coreUi.setCwmpInitStatus(!1)),g.info("unInitCwmpModule success, set init status to false")},O=function(){var e=(0,s.default)(a.default.mark(function e(){var t,n,r,i,o,s,c,d,l,p,w,h,C,v,m,S;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((0,f.getHttpConnRandNum)(),t="",n="",r="win",i=$getState(),o=i.login.show_account,"android"===r?(t="WeLink Android",n="SoftClient_Android_"+o):"ios"===r?(t="WeLink Ios",n="SoftClient_Ios_"+o):"win"===r||"bigwin"===r?window.isHubEnv?(t="CloudLink IWB",n="SoftClient_IWB_"+o):(t="WeLink Win",n="SoftClient_Win_"+o):"mac"===r&&(t="WeLink Mac",n="SoftClient_Mac_"+o),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&("win"===r?t="Workplace Win":"mac"===r&&(t="Workplace Mac")),s=$getState().login,c=s.isSupportCACertCheck,d=s.tmsServer,l=s.isSupportProxy,p=s.proxyAddress,w=s.proxyPort,h=s.proxyAccount,g.info("tmsServer: "),C=null,!l){e.next=20;break}return e.next=14,coreSecurity.getPasswordManager();case 14:return v=e.sent,e.next=17,v.getPassword("proxyPassword");case 17:C=e.sent,e.next=23;break;case 20:p=null,w=null,h=null;case 23:return m=$getState().cwmpInfo.cmdKey,S=new u.default(function(e,r){e({ACSUrl:d,ProxyAddr:p,ProxyPort:parseInt(w),ProxyUserName:h,ProxyPassword:C,DeviceManufacture:window.CLIENTCONFIG.ACS_MANUFACTURER_VALUE,DeviceOUI:window.CLIENTCONFIG.ACS_MANUFACTUREROUI_VALUE,DeviceproductClass:t,DeviceSerialNumber:n,PeriodicInformEnable:parseInt(window.CLIENTCONFIG.ACS_PERIODICINFORMENABLE_VALUE),PeriodicInformInterval:parseInt(window.CLIENTCONFIG.ACS_PERIODICINFORMINTERVAL_VALUE),FirstBoot:1,MapTreePath:window.EXEC_PATH+"/map_tree.xml",RebootReason:0,DisposeStat:1,TrustCaFileDir:window.EXEC_PATH,IsCAKeyCheck:0,VerifyMode:c?1:0,cmdkey:m})}),e.abrupt("return",S);case 26:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),b=function(){return g.info("start startCwmpServer"),new u.default(function(e,t){O().then(function(e){return m(e)},function(){return v()}).then(function(){return S()},function(){return v()}).then(function(){return I()},function(){return v()}).then(function(){g.info("startCwmpServer success"),e()},function(){g.info("startCwmpServer failed"),t()})})},U=function(e){return g.info("start startCPEService"),new u.default(function(t,n){(0,f.getCPEEnable)().then(function(){return _()},function(){return g.info("CPE param is null"),v()}).then(function(){return N()},function(){return v()}).then(function(){return(0,f.send4ValueChange)(e)},function(){return v()}).then(function(){g.info("startCPEService success"),t()},function(){g.info("startCPEService failed"),n()})})},L=t.startStunService=function(){if(w){return new u.default(function(e,t){g.info("start startStunService"),(0,f.getStunEnable)().then(function(){return E()},function(){return g.info("stun is disable"),v()}).then(function(){return P()},function(){return v()}).then(function(){g.info("startStunService success"),e()},function(){g.info("startStunService failed"),t()})})}return g.info("http not start, can not start stun"),v()},M=t.startStunAndCPEService=function(e){return g.info("start startStunAndCPEService"),new u.default(function(t,n){U(e).then(function(){return L()},function(){return v()}).then(function(){$dispatch(coreUi.showLogUpload(!0)),g.info("startstunandcpeservice, enable log upload!"),t()},function(){g.info("startStunAndCPEService failed"),n()})})},D=function(){return g.info("start stopStunAndCPEService"),new u.default(function(e,t){y().then(function(){return A()},function(){return v()}).then(function(){g.info("stopStunAndCPEService success"),e()},function(){g.info("stopStunAndCPEService failed"),t()})})},R=function(){return g.info("start stopCwmpAllServer"),new u.default(function(e,t){D().then(function(){return T()},function(){return v()}).then(function(){g.info("stopCwmpAllServer success"),e()},function(){g.info("stopCwmpAllServer failed"),t()})})},F=function(){return g.info("start startCwmpAllServer"),new u.default(function(e,t){b().then(function(){return M([])},function(){return v()}).then(function(){g.info("startCwmpAllServer success"),e()},function(){g.info("startCwmpAllServer failed"),t()})})},V=t.initAndStartCwmpServer=function(){var e=(0,s.default)(a.default.mark(function e(){var t,n,r,i,o,s,c,l,p,w;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_ESIGHT_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_ESIGHT_SERVER]}),g.info("start initAndStartCwmpServer"),window.cwmpLocalIp=window.localIp,t=$getState().login.tmsServer,g.info("tmsServer: "),window.CLIENTCONFIG.ISMOBILE){e.next=30;break}if(n=t.split("/"),n[2]?(n=n[2],n=n.split(":")[0]):g.info("tmsSever format error"),r=new Array,i=/\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}/,o=i.exec(n),o&&(r={param:[{IPAddr:{IP:o[0]}}]}),!(r&&r.param&&r.param.length>0)){e.next=30;break}s=0;case 14:if(!(s<r.param.length)){e.next=30;break}if(!i.test(r.param[s].IPAddr.IP)){e.next=27;break}return e.next=18,coreTup.getToolInstance();case 18:return c=e.sent,e.next=21,c.tupToolGetLocalIp(r.param[s].IPAddr.IP,"",!1);case 21:if(l=e.sent,g.info("ret.param: ",l.param?{flag:l.param.flag,local_ip:handlePhoneNumber(l.param.local_ip),server_ip:l.param.server_ip}:null),window.cwmpLocalIp=0===l.result&&""!==l.param.local_ip?l.param.local_ip:window.localIp,0!==l.result){e.next=27;break}return g.info("cwmpServerIp: ",r.param[s].IPAddr.IP),e.abrupt("break",30);case 27:s++,e.next=14;break;case 30:return p=$getState().cwmpInfo.cwmpInitStatus,g.info("init cwmp module, status = "+p),w=new u.default(function(e,t){p?(0,f.initCwmpNotify)().then(function(){return R()},function(){return v()}).then(function(){return F()},function(){return v()}).then(function(){g.error("restart all cwmp server success"),e()},function(){g.error("restart all cwmp server failed"),t()}):x().then(function(){return b()},function(){return v()}).then(function(){window.CLIENTCONFIG.ISMOBILE||(g.info("set interval to check update"),C&&clearInterval(C),C=setInterval(function(){g.info("It is time to check version over 24 hours"),(0,d.changeUpdataState)({hasFirstUpdateNotify:!1}),(0,d.requestVersionUpdateCheck)()},864e5)),g.info("initAndStartCwmpServer success"),e()},function(){g.info("initAndStartCwmpServer failed"),t()})}),e.abrupt("return",w);case 34:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),B=function(){g.info("reInit cwmp params"),C&&clearInterval(C),C=null,(0,f.clearCwmpParam)()};t.stopCwmpServerAndUnInit=function(){return g.info("start stopCwmpServerAndUnInit"),$getState().cwmpInfo.cwmpInitStatus?new u.default(function(e,t){D().then(function(){T(),B(),(0,d.clearAllUpdataState)(),k()},function(){return v()}).then(function(){g.info("stopCwmpServerAndUnInit success"),e()},function(){g.info("stopCwmpServerAndUnInit failed"),t()})}):void g.warn("has no cwmpInitStatus, ignore!")},t.initESightService=function(){var e=(0,s.default)(a.default.mark(function e(){var t;return a.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,t.useEsight){e.next=6;break}return g.info("[ initESightService ] useEsight is false"),e.abrupt("return");case 6:g.info("[ initESightService ]",handlePhoneNumber(t.account)),g.info("<account_login><9_esight>begin"),""!==t.tmsServer&&void 0!==t.tmsServer&&V().then(function(){g.info("[ initESightService ] ok! ",handlePhoneNumber(t.account)),g.info("<account_login><9_esight>ok")});case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()}});