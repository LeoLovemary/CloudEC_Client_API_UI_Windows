webpackJsonp([26],{1102:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.HwIpcMainProcessSdk=void 0;var a=n(123),o=r(a),i=n(4),s=r(i),c=n(1103);t.HwIpcMainProcessSdk=function e(){(0,s.default)(this,e),this.getIpcMainProcessApi=c.getIpcMainProcessApi,(0,o.default)(this,(0,c.getIpcMainProcessApi)().getApiList())}},1103:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.IpcMainProcessImpl=t.getIpcMainProcessApi=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(119),f=a(u),l=n(4),d=a(l),p=n(120),h=a(p),_=n(121),g=a(_),m=n(1104),v=r(m),C=n(1110),I=r(C),w=n(1113),S=r(w),E=n(1116),N=r(E),T=void 0,b=(t.getIpcMainProcessApi=function(){return isNullOrEmpty(T)&&(T=new b),T},t.IpcMainProcessImpl=function(e){function t(){var e,n,r,a,o=this;(0,d.default)(this,t);for(var s=arguments.length,u=Array(s),l=0;l<s;l++)u[l]=arguments[l];return n=r=(0,h.default)(this,(e=t.__proto__||(0,f.default)(t)).call.apply(e,[this].concat(u))),r.initWindowToMemberList=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.initWindow());case 1:case"end":return e.stop()}},e,o)})),r.setWindowToMemberList=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.window;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.setWindow(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.initWindowToAudioSetting=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.initWindow());case 1:case"end":return e.stop()}},e,o)})),r.setWindowToAudioSetting=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.window;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.setWindow(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.initWindowToSelectBox=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.initWindow());case 1:case"end":return e.stop()}},e,o)})),r.setWindowToSelectBox=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.window;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.setWindow(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.initWindowToPickSharing=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.initWindow());case 1:case"end":return e.stop()}},e,o)})),r.setWindowToPickSharing=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.window;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",S.setWindow(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.audioSettingUpdateChildProps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.updateChildProps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListHeaderPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListHeaderPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListWarpPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListWarpPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListDataPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListDataPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListSpokePorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListSpokePorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListActionBarPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListActionBarPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListRightMenuPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListRightMenuPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListDialogPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMemberListDialogPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.initJsEventForMemberListClass=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.window;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.initJsEventForMemberListClass(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.destroyJsEventForMemberListClass=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.destroyJsEventForMemberListClass());case 1:case"end":return e.stop()}},e,o)})),r.startWindowToMemberListMove=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.startMove());case 1:case"end":return e.stop()}},e,o)})),r.endWindowToMemberListMove=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.x,r=t.y;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.endMove({x:n,y:r}));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateSelectBoxLeftPanelPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.mainIpcUpdateSelectBoxLeftPanelPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateSelectBoxRightPanelPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.mainIpcUpdateSelectBoxRightPanelPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateSelectBoxSearchPorps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.mainIpcUpdateSelectBoxSearchPorps(n));case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.pickSharingUpdateChildProps=function(){var e=(0,c.default)(i.default.mark(function e(t){var n=t.props;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.updateChildProps(n);case 1:case"end":return e.stop()}},e,o)}));return function(t){return e.apply(this,arguments)}}(),r.mainIpcUpdateMemberListMaxhubProps=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",v.mainIpcUpdateMaxhubProps());case 1:case"end":return e.stop()}},e,o)})),r.mainIpcUpdateSelectBoxMaxhubProps=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",I.mainIpcUpdateMaxhubProps());case 1:case"end":return e.stop()}},e,o)})),r.mainIpcUpdateAudioSettingMaxhubProps=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",N.mainIpcUpdateMaxhubProps());case 1:case"end":return e.stop()}},e,o)})),a=n,(0,h.default)(r,a)}return(0,g.default)(t,e),t}(coreLazyLoad.IpcMainProcessApi));window.languageChange=function(){v.mainIpcUpdateLanguageChangeProps(),I.mainIpcUpdateLanguageChangeProps(),S.mainIpcUpdateLanguageChangeProps(),N.mainIpcUpdateLanguageChangeProps()},window.isWhetherDragChange=function(e){v.mainIpcUpdateDragChangeProps(e)}},1104:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateMaxhubProps=t.mainIpcUpdateDragChangeProps=t.mainIpcUpdateLanguageChangeProps=t.mainIpcUpdateMemberListDialogPorps=t.mainIpcUpdateMemberListRightMenuPorps=t.mainIpcUpdateMemberListActionBarPorps=t.mainIpcUpdateMemberListSpokePorps=t.mainIpcUpdateMemberListDataPorps=t.mainIpcUpdateMemberListWarpPorps=t.mainIpcUpdateMemberListHeaderPorps=t.endMove=t.startMove=t.destroyJsEventForMemberListClass=t.initJsEventForMemberListClass=t.setWindow=t.initWindow=void 0;var a=n(694),o=r(a),i=n(1109),s=(r(i),n(879)),c=r(s);t.initWindow=o.initWindow,t.setWindow=o.setWindow,t.initJsEventForMemberListClass=o.initJsEventForMemberListClass,t.destroyJsEventForMemberListClass=o.destroyJsEventForMemberListClass,t.startMove=o.startMove,t.endMove=o.endMove,t.mainIpcUpdateMemberListHeaderPorps=c.mainIpcUpdateMemberListHeaderPorps,t.mainIpcUpdateMemberListWarpPorps=c.mainIpcUpdateMemberListWarpPorps,t.mainIpcUpdateMemberListDataPorps=c.mainIpcUpdateMemberListDataPorps,t.mainIpcUpdateMemberListSpokePorps=c.mainIpcUpdateMemberListSpokePorps,t.mainIpcUpdateMemberListActionBarPorps=c.mainIpcUpdateMemberListActionBarPorps,t.mainIpcUpdateMemberListRightMenuPorps=c.mainIpcUpdateMemberListRightMenuPorps,t.mainIpcUpdateMemberListDialogPorps=c.mainIpcUpdateMemberListDialogPorps,t.mainIpcUpdateLanguageChangeProps=c.mainIpcUpdateLanguageChangeProps,t.mainIpcUpdateDragChangeProps=c.mainIpcUpdateDragChangeProps,t.mainIpcUpdateMaxhubProps=c.mainIpcUpdateMaxhubProps},1105:function(e,t,n){"use strict";function r(){if(!s)return clearInterval(u),void(u=null);var e=f.getCursorScreenPoint(),t=e.x-o.x,n=e.y-o.y;return c.setPosition(fitPixel(i[0]+t),fitPixel(i[1]+n)),sleep(30).then(r)}Object.defineProperty(t,"__esModule",{value:!0}),t.endMove=t.startMove=void 0;var a=n(879),o=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(a),{x:0,y:0}),i=[0,0],s=!1,c=null,u=null,f=window.require("electron").screen;t.startMove=function(e){showDealTime("startMove"),o=f.getCursorScreenPoint(),i=e.getPosition(),s=!0,c=e,r()},t.endMove=function(e){showDealTime("endMove"),o={x:0,y:0},i=[0,0],s=!1,c.setPosition(fitPixel(e.x),fitPixel(e.y)),c=null}},1106:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(t){var n=this;(0,o.default)(this,e),this.focusFunc=function(){n.isOpenMemberList()&&!n.isVideoMeet()&&(n.pos.showInactive(),n.setLevel(!0),n.setLevel(!1),n.setDrag("normal")),""!==$getState().conf.confHandle&&(!win.isMaximized()||n.isOpenMemberList()||n.isVideoMeet()||window.isUserActiveClose||(n.showOrHideMemberList(),n.setDrag("center")))},this.minimizeFunc=function(){n.isOpenMemberList()&&!n.isVideoMeet()&&(n.showOrHideMemberList(),n.isMinimize=!0)},this.restoreFunc=function(){!n.isMinimize||n.isOpenMemberList()||n.isVideoMeet()||(win.center(),n.showOrHideMemberList(!0),n.isMinimize=!1,n.setDrag("normal"))},this.maximizeFunc=function(){n.isOpenMemberList()&&!n.isVideoMeet()&&(n.pos.center(),n.setLevel(!0),n.setDrag("center"))},this.unmaximizeFunc=function(){n.isOpenMemberList()&&!n.isVideoMeet()&&(n.setMemberListPosition(),n.setLevel(!1),n.setDrag("normal"))},this.resizeFunc=function(){if(!n.isVideoMeet()&&!win.isMaximized()&&"login"!==window.getRoute()){""!==$getState().call.callStatus&&(n.setMemberListPosition(!0),n.setLevel(!1),n.setDrag("normal"))}},this.pos=t,this.isMinimize=!1}return(0,s.default)(e,[{key:"init",value:function(){this.followDisplay(),this.minimizeDisplay(),this.restoreDisplay(),this.maximizeDisplay(),this.unmaximizeDisplay(),this.resizeDisplay()}},{key:"destroy",value:function(){win.removeListener("focus",this.focusFunc),win.removeListener("minimize",this.minimizeFunc),win.removeListener("restore",this.restoreFunc),win.removeListener("maximize",this.maximizeFunc),win.removeListener("unmaximize",this.unmaximizeFunc),win.removeListener("resize",this.resizeFunc),this.pos=null}},{key:"isOpenMemberList",value:function(){return $getState().conf.isShowMemberListNew}},{key:"isVideoMeet",value:function(){var e=$getState(),t=e.call.callStatus;return window.CLIENTCONFIG.ISWIN&&(t===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED||t===constant.CALL_VIDEO_STATUS.VIDEO_OUT)}},{key:"setLevel",value:function(e){this.pos.setAlwaysOnTop(e)}},{key:"setDrag",value:function(e){window.isWhetherDragChange({drag:e})}},{key:"showOrHideMemberList",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e=win.getBounds(),t=e.x,n=e.y,r=e.width;coreConf.handleShowMemberList({x:parseInt(t+r),y:n})}else coreConf.handleShowMemberList()}},{key:"setMemberListPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=win.getBounds(),n=t.x,r=t.y,a=t.width,o=t.height;e&&this.pos.setSize(300,fitPixel(o)),this.pos.setPosition(fitPixel(parseInt(n+a)),fitPixel(r))}},{key:"followDisplay",value:function(){win.on("focus",this.focusFunc)}},{key:"minimizeDisplay",value:function(){win.on("minimize",this.minimizeFunc)}},{key:"restoreDisplay",value:function(){win.on("restore",this.restoreFunc)}},{key:"maximizeDisplay",value:function(){win.on("maximize",this.maximizeFunc)}},{key:"unmaximizeDisplay",value:function(){win.on("unmaximize",this.unmaximizeFunc)}},{key:"resizeDisplay",value:function(){win.on("resize",this.resizeFunc)}}]),e}();t.default=c},1107:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(t){var n=this;(0,o.default)(this,e),this.focusFunc=function(){n.isOpenMemberList()&&(n.pos.showInactive(),n.setLevel(!0),n.setLevel(!1),n.setDrag("normal")),""!==$getState().conf.confHandle&&(!win.isMaximized()||n.isOpenMemberList()||window.isUserActiveClose||(n.showOrHideMemberList(),n.setDrag("center")))},this.minimizeFunc=function(){n.isOpenMemberList()&&(n.showOrHideMemberList(),n.isMinimize=!0)},this.restoreFunc=function(){n.isMinimize&&!n.isOpenMemberList()&&(win.center(),n.showOrHideMemberList(!0),n.isMinimize=!1,n.setDrag("normal"))},this.maximizeFunc=function(){n.isOpenMemberList()&&(n.pos.center(),n.setLevel(!0),n.setDrag("center"))},this.unmaximizeFunc=function(){n.isOpenMemberList()&&(n.setMemberListPosition(),n.setLevel(!1),n.setDrag("normal"))},this.resizeFunc=function(){win.isMaximized()||(n.setMemberListPosition(!0),n.setLevel(!1),n.setDrag("normal"))},this.enterFullScreenFunc=function(){n.pos.setSize(0,0),n.setLevel(!0),n.isOpenMemberList()&&(n.pos.showInactive(),n.pos.setSize(300,592),n.pos.center(),n.setLevel(!0),n.pos.setFullScreen(!1),n.setDrag("center"))},this.leaveFullScreenFunc=function(){n.pos.setSize(300,592),n.setLevel(!1),n.isOpenMemberList()&&(n.setMemberListPosition(),n.setDrag("normal"))},this.pos=t,this.isMinimize=!1}return(0,s.default)(e,[{key:"init",value:function(){this.followDisplay(),this.minimizeDisplay(),this.restoreDisplay(),this.maximizeDisplay(),this.unmaximizeDisplay(),this.resizeDisplay(),this.enterFullScreenDisplay(),this.leaveFullScreenDisplay()}},{key:"destroy",value:function(){win.removeListener("focus",this.focusFunc),win.removeListener("minimize",this.minimizeFunc),win.removeListener("restore",this.restoreFunc),win.removeListener("maximize",this.maximizeFunc),win.removeListener("unmaximize",this.unmaximizeFunc),win.removeListener("resize",this.resizeFunc),win.removeListener("enter-full-screen",this.enterFullScreenFunc),win.removeListener("leave-full-screen",this.leaveFullScreenFunc),this.pos=null}},{key:"isOpenMemberList",value:function(){return $getState().conf.isShowMemberListNew}},{key:"setLevel",value:function(e){this.pos.setAlwaysOnTop(e)}},{key:"setDrag",value:function(e){window.isWhetherDragChange({drag:e})}},{key:"showOrHideMemberList",value:function(){if(arguments.length>0&&void 0!==arguments[0]&&arguments[0]){var e=win.getBounds(),t=e.x,n=e.y,r=e.width;coreConf.handleShowMemberList({x:parseInt(t+r),y:n})}else coreConf.handleShowMemberList()}},{key:"setMemberListPosition",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=win.getBounds(),n=t.x,r=t.y,a=t.width,o=t.height;e&&this.pos.setSize(300,fitPixel(o)),this.pos.setPosition(fitPixel(parseInt(n+a)),fitPixel(r))}},{key:"followDisplay",value:function(){win.on("focus",this.focusFunc)}},{key:"minimizeDisplay",value:function(){win.on("minimize",this.minimizeFunc)}},{key:"restoreDisplay",value:function(){win.on("restore",this.restoreFunc)}},{key:"maximizeDisplay",value:function(){win.on("maximize",this.maximizeFunc)}},{key:"unmaximizeDisplay",value:function(){win.on("unmaximize",this.unmaximizeFunc)}},{key:"resizeDisplay",value:function(){win.on("resize",this.resizeFunc)}},{key:"enterFullScreenDisplay",value:function(){win.on("enter-full-screen",this.enterFullScreenFunc)}},{key:"leaveFullScreenDisplay",value:function(){win.on("leave-full-screen",this.leaveFullScreenFunc)}}]),e}();t.default=c},1108:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0});var a=n(69),o=r(a),i=n(4),s=r(i),c=n(5),u=r(c),f=coreLogger.getLogger("Ipc/logic")("NativeToJs"),l=function(){function e(t){(0,s.default)(this,e),this.pos=t,this.isMinimize=!1,this.isWinStatus="normal",this.isMove=!1,window.ipcNativetoJsWinStatus="normal"}return(0,u.default)(e,[{key:"isOpenMemberList",value:function(){return $getState().conf.isShowMemberListNew}},{key:"setLevel",value:function(e){this.pos.setAlwaysOnTop(e)}},{key:"setDrag",value:function(e){window.isWhetherDragChange({drag:e})}},{key:"showOrHideMemberList",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e?void 0===t?coreConf.handleShowMemberList(void 0,!1,!0):coreConf.handleShowMemberList({x:t.left_top_x,y:t.left_top_y,isMove:n},!1,!0):coreConf.handleShowMemberList()}},{key:"nativeFollowDisplay",value:function(e){f.info("nativeFollowDisplay",(0,o.default)(e)),this.isMinimize&&("normal"!==this.isWinStatus||this.isOpenMemberList()||(this.isMove?(this.showOrHideMemberList(!0,e,!0),this.setDrag("center"),this.isMove=!1):(this.showOrHideMemberList(!0,e),this.setDrag("normal")),this.isMinimize=!1),"fullScreen"!==this.isWinStatus||this.isOpenMemberList()||(this.pos.center(),this.showOrHideMemberList(!0,void 0),this.pos.center(),this.setLevel(!0),this.setDrag("center"),this.isMinimize=!1)),!this.isMinimize&&this.isOpenMemberList()&&(this.pos.showInactive(),this.setLevel(!0),this.setLevel(!1)),"fullScreen"===this.isWinStatus&&this.setLevel(!0)}},{key:"nativeMinimizeDisplay",value:function(e){f.info("nativeMinimizeDisplay",(0,o.default)(e)),this.isOpenMemberList()&&(this.showOrHideMemberList(),this.isMinimize=!0)}},{key:"nativeNormalimizeDisplay",value:function(e){f.info("nativeNormalimizeDisplay",(0,o.default)(e)),this.isWinStatus="normal",window.ipcNativetoJsWinStatus="normal",this.pos.setBounds({x:fitPixel(e.left_top_x),y:fitPixel(e.left_top_y),width:300,height:fitPixel(e.height)}),this.isOpenMemberList()&&(this.pos.setPosition(fitPixel(e.left_top_x),fitPixel(e.left_top_y)),this.setLevel(!1),e.move_enable?(this.setDrag("center"),this.isMove=!0):this.setDrag("normal"))}},{key:"nativeFullScreenDisplay",value:function(e){f.info("nativeFullScreenDisplay",(0,o.default)(e)),this.isWinStatus="fullScreen",window.ipcNativetoJsWinStatus="fullScreen",this.pos.setSize(300,608),this.isOpenMemberList()&&(this.pos.center(),this.setLevel(!0),this.setDrag("center"))}},{key:"nativeMaxDisplay",value:function(e){f.info("nativeMaxDisplay",(0,o.default)(e)),this.pos.setBounds({x:fitPixel(e.left_top_x),y:fitPixel(e.left_top_y),width:300,height:fitPixel(e.height)}),this.isOpenMemberList()&&(this.pos.setPosition(fitPixel(e.left_top_x),fitPixel(e.left_top_y)),this.setLevel(!1),e.move_enable?(this.setDrag("center"),this.isMove=!0):this.setDrag("normal"))}}]),e}();t.default=l},1109:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.childCloseRightMenuProps=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(694),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=n(165),l=n(194),d=coreLogger.getLogger("ipc")("mainprocess/memberlist/receive"),p=function(){"-9999px"!==$getState().menu.confRightMenuStyle.top&&coreUi.handleConfChangeRightMenuDucks();var e=$getState(),t=e.conf.isShowMemberListNew,n=e.call.callStatus,r=window.CLIENTCONFIG.ISWIN&&n!==constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED,a=window.CLIENTCONFIG.ISMAC;window.isUserActiveClose=!(!t||!r&&!a),coreConf.handleShowMemberList()},h=function(){g(!1)},_=function(){g(!0)},g=function(e){d.info("userClick ipc child to changeMuteCannotProps"),$dispatch(coreUi.showIpcCannotUnmuteTip(e))},m=function(){I(!1)},v=function(){I(!0)},C=function(e,t){var n=JSON.parse(t),r=n.isMute,a=n.isAllowUnmute;S(r,a),I(!1)},I=function(e){d.info("userClick ipc child to changeAllMuteProps"),$dispatch(coreUi.showIpcMuteAll(e))},w=function(e,t){var n=JSON.parse(t),r=n.isMute,a=n.isAllowUnmute;return d.info("ipc child to main childUpdateChangeAllMuteProps isMute",r+",ipc child to main childUpdateChangeAllMuteProps isAllowUnmute",a),S(r,a)},S=function(e,t){return d.info("ipc child to main setAllMuteStatus",e+",ipc child to main setAllMuteStatus isAllowUnmute",t),1!==$getState().conf.selfRole?void d.info("ipc child to main setAllMuteStatus not compere, return"):coreConf.actionMuteAllAttendee({isMute:e,isAllowUnmute:t})},E=function(e,t){var n=JSON.parse(t),r=n.list,a=n.selfRole,o=n.number,i=n.isSelf;return coreConf.changeMuteState(r,a,o,i)},N=function(e,t){d.info("userClick  Unmute Svg ");var n=JSON.parse(t),r=n.audioStatus,a=n.selfRole,o=n.isSelf,i=n.ismute,s=n.attendeeNumber,c=$getState().conf,u=c.isAllowUnmute,f=c.isConfAllMute,l=$getState().login.isSupportAS;if(!(1===f&&0===u&&0===a&&o&&i&&l))return coreConf.memberItemHandleClick(r,a,o,i,s);g(!0)},T=function(e,t){if(d.info("userClick  ipc right context menu "),!window.isHubEnv){var n=JSON.parse(t);$dispatch(coreUi.setSelectedItem(n.member));$getState().conf.isShowMoreCallPhone&&$dispatch(coreUi.changesShowMoreCallPhone()),coreUi.handleIpcRightMenuClick(n)}},b=function(e,t){var n=JSON.parse(t);d.info("userClick  ipc right menu item "+handlePhoneNumber(n.name));var r=$getState().conf,a=r.isAllowUnmute,o=r.selfRole,i=r.isConfAllMute,s=$getState().login.isSupportAS;if(n.name===language.APPLICATION_FOR_CHAIRMAN)O();else if(n.name===language.RELEASE_THE_CHAIRMAN)M(!0);else if(n.name===language.CALL_CONF_REMOVE_ATTENDEE)G(!0);else if(n.name===language.LANG_NATIVE_SET_CHAIRMAN){var c=$getState().menu.rightMenu_selectedItem;V(!0,c.name)}else n.name===language.LANG_NATIVE_CALL_OTHER_NUM?$dispatch(coreUi.changesShowMoreCallPhone()):1===i&&0===a&&n.name===language.LANG_NATIVE_UNMUTE&&0===o&&s?g(!0):coreConf.firstOptionClick(n)},O=function(){d.info("userClick  ipc right menu request chairman");var e=$getState(),t=e.conf.memberListInfo,n=e.login.deployMode,r=L(t);n===constant.MEETING_NET_TYPE.MEDIAX_MEETING?$dispatch(coreUi.showqusetchairman()):coreConf.actionRequestChairman("",r)},L=function(e){var t=void 0;return Array.isArray(e)&&(t=(e.find(function(e){return e.is_self})||[]).number),t},A=t.childCloseRightMenuProps=function(e,t){var n=JSON.parse(t),r=n.confRightMenuStyle,a=n.isShowMoreCallPhone;"-9999px"!==r.top&&$dispatch(coreUi.hideConfRightMenu()),a&&$dispatch(coreUi.changesShowMoreCallPhone())},y=function(){M(!1)},x=function(){M(!0)},R=function(){var e=$getState().conf.memberListInfo;coreConf.compressreleasePreservate(e),M(!1)},M=function(e){d.info("userClick ipc right menu changeCancleChairman"),$dispatch(coreUi.showIpcCanclechairman(e))},k=function(){d.info("userClick close dialog"),$dispatch(coreUi.showIpcMuteTipSharing(!1))},P=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("userClick click mutetipsharing"),f.SvcAtdManager.setMuteState(!0,!0),e.next=4,l.ToolbarManager.setValueZeroFunc();case 4:$dispatch(coreUi.showIpcMuteTipSharing(!1));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),D=function(){O()},U=function(){$dispatch(coreUi.showqusetchairman()),$getState().conf.showRepChairmanError&&$dispatch(coreUi.showRepChairmanError())},F=function(e,t){var n=$getState().conf,r=n.memberListInfo,a=n.showRepChairmanError;if(""===t)return void(a||$dispatch(coreUi.showRepChairmanError()));var o=L(r);coreConf.actionRequestChairman(t,o),a&&$dispatch(coreUi.showRepChairmanError())},G=function(e){$dispatch(coreUi.showIpcRemoveAttendee(e))},B=function(){G(!1)},W=function(){var e=$getState().menu.rightMenu_selectedItem.number;coreConf.compressRemoveAttendee(e),G(!1)},V=function(e,t){$dispatch(coreUi.showIpcTransferChairman(e,t))},H=function(){V(!1,"")},$=function(){var e=$getState().menu.rightMenu_selectedItem;coreConf.transferChairman(e.number),V(!1,"")},Y=function(e,t){return coreConf.searchMemberList(t)},q=function(e,t){var n=JSON.parse(t);coreUi.ipcMoreMenuClick(n)},j=function(){coreConf.actionExportConfmember()},K=function(){window.isHubEnv&&coreCommon.openWinKeyboard()},J=function(e,t){var n=JSON.parse(t),r=n.viewName,a=n.clickId;isNullOrEmpty(r)||isNullOrEmpty(a)||coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_USER_CLICK,params:[r,a]})};u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_UPDATE_CHANGE_ALLMUTE_PROPS,w),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SHOW_MUTE_ALL_PROPS,v),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_MUTE_ALL_PROPS,m),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OK_MUTE_ALL_PROPS,C),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SHOW_UNMUTE_TIP_PROPS,_),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_UNMUTE_TIP_PROPS,h),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_MUTE_SPEAK_MOST_PROPS,E),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SINGLE_USER_SVG_PROPS,N),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_MEMBER_LIST_WIN_PROPS,p),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_RIGHT_CONTEXT_MENU_PROPS,T),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_RIGHT_MENU_ITEM_PROPS,b),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_RIGHT_MENU_PROPS,A),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SHOW_CANCLE_REQUEST_CHAIRMAN_PROPS,x),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_CANCLE_REQUEST_CHAIRMAN_PROPS,y),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OK_CANCLE_REQUEST_CHAIRMAN_PROPS,R),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_MUTE_TIP_SHARING,k),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OK_MUTE_TIP_SHARING,P),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_REQUEST_CHAIRMAN_PROPS,U),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OK_REQUEST_CHAIRMAN_PROPS,F),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SHOW_REQUEST_CHAIRMAN_PROPS,D),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_REMOVE_ATTENDEE_PROPS,B),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OK_REMOVE_ATTENDEE_PROPS,W),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLOSE_TRANSFER_CHAIRMAN_PROPS,H),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OK_TRANSFER_CHAIRMAN_PROPS,$),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SEARCH_MEMBERLIST_PROPS,Y),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_SHOW_MORE_MENU_PROPS,q),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_EXPORT_MEMBER_PROPS,j),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_OPEN_WIN_KEYBOARD_PROPS,K),u.createIpcMainOn(ipcConstant.IPC_MEMBER_LIST_TYPE.CHILD_CLICK_UT_MEMBER_LIST_PROPS,J)},1110:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateMaxhubProps=t.mainIpcUpdateLanguageChangeProps=t.mainIpcUpdateSelectBoxSearchPorps=t.mainIpcUpdateSelectBoxRightPanelPorps=t.mainIpcUpdateSelectBoxLeftPanelPorps=t.setWindow=t.initWindow=void 0;var a=n(725),o=r(a),i=n(1111),s=(r(i),n(1112)),c=r(s);t.initWindow=o.initWindow,t.setWindow=o.setWindow,t.mainIpcUpdateSelectBoxLeftPanelPorps=c.mainIpcUpdateSelectBoxLeftPanelPorps,t.mainIpcUpdateSelectBoxRightPanelPorps=c.mainIpcUpdateSelectBoxRightPanelPorps,t.mainIpcUpdateSelectBoxSearchPorps=c.mainIpcUpdateSelectBoxSearchPorps,t.mainIpcUpdateLanguageChangeProps=c.mainIpcUpdateLanguageChangeProps,t.mainIpcUpdateMaxhubProps=c.mainIpcUpdateMaxhubProps},1111:function(e,t,n){"use strict";var r=n(725),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r),o=function(){coreUi.selectBoxCancelDataNWin()},i=function(e,t){coreUi.saveToggleChoose(t)},s=function(e,t){var n=JSON.parse(t),r=n.contactCount,a=n.moduletype;coreUi.loadMoreSelectCorporateLogic(r,a)},c=function(e,t){var n=JSON.parse(t),r=n.account,a=n.name,o=n.number,i=n.numberName;coreUi.clickAccountSelectedLogic(r,a,o,i)},u=function(e,t){var n=JSON.parse(t),r=n.account,a=n.name,o=n.moduletype;coreUi.toggleContactExpandedLogic(r,a,o)},f=function(e,t){coreUi.selectBoxSaveDataforflipwindow(t)},l=function(e,t){var n=JSON.parse(t),r=n.searchValue,a=n.searchFlag;coreUi.saveSearchText(r,a)},d=function(e,t){var n=JSON.parse(t),r=n.searchValue,a=n.type;coreUi.selectBoxSearch(r,a)},p=function(e,t){coreUi.updateDepartmentTree(t)},h=function(e,t){coreUi.updateDepartmentUserList(t)},_=function(e,t){var n=JSON.parse(t),r=n.item,a=n.parentDeptCode,o=n.callType,i=n.selectBoxInMeeting;coreUi.selectBoxSelectUser({itemData:r,parentDeptCode:a,callType:o,selectBoxInMeeting:i})},g=function(e,t){var n=JSON.parse(t),r=n.item;coreUi.selectBoxSelectDept(r)},m=function(e,t){var n=JSON.parse(t),r=n.viewName,a=n.clickId;isNullOrEmpty(r)||isNullOrEmpty(a)||coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_USER_CLICK,params:[r,a]})};a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_CLOSE_SELECT_BOX_PROPS,o),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_SAVE_TOGGLE_CHOOSE_PROPS,i),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_LOAD_MORE_CORPORATE_PROPS,s),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_CLICK_ACCOUNT_SELECT_PROPS,c),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_TOGGLE_EXPANDE_PROPS,u),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_SAVE_DATA_PROPS,f),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_SAVE_SEARCH_TEXT_PROPS,l),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_SEARCH_SELECT_BOX_PROPS,d),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_UPDATE_DEPARTMENT_TREE,p),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_UPDATE_DEPARTMENT_USER,h),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_DEPARTMENT_TREE_SELECT_DEPT,g),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_DEPARTMENT_TREE_SELECT_USER,_),a.createIpcMainOn(ipcConstant.IPC_SELECT_BOX_TYPE.CHILD_CLICK_UT_SELECT_BOX_PROPS,m)},1112:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateMaxhubProps=t.mainIpcUpdateLanguageChangeProps=t.mainIpcUpdateSelectBoxSearchPorps=t.mainIpcUpdateSelectBoxRightPanelPorps=t.mainIpcUpdateSelectBoxLeftPanelPorps=void 0;var r=n(725),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.mainIpcUpdateSelectBoxLeftPanelPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_SELECT_BOX_TYPE.UPDATE_LEFT_PANEL_PROPS,e)},t.mainIpcUpdateSelectBoxRightPanelPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_SELECT_BOX_TYPE.UPDATE_RIGHT_PANEL_PROPS,e)},t.mainIpcUpdateSelectBoxSearchPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_SELECT_BOX_TYPE.UPDATE_SEARCH_PROPS,e)},t.mainIpcUpdateLanguageChangeProps=function(){return a.createWebContentsSend(ipcConstant.IPC_SELECT_BOX_TYPE.UPDATE_LANG_PROPS)},t.mainIpcUpdateMaxhubProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_SELECT_BOX_TYPE.UPDATE_MAXHUB_PROPS,e)}},1113:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateLanguageChangeProps=t.updateChildProps=t.setWindow=t.initWindow=void 0;var a=n(726),o=r(a),i=n(1114),s=(r(i),n(1115)),c=r(s);t.initWindow=o.initWindow,t.setWindow=o.setWindow,t.updateChildProps=c.updateChildProps,t.mainIpcUpdateLanguageChangeProps=c.mainIpcUpdateLanguageChangeProps},1114:function(e,t,n){"use strict";function r(){$dispatch(coreUi.togglePickSharingWindow(!1))}function a(){coreConf.hidePickSharingWindow()}function o(e,t){coreConf.hidePickSharingWindow(),coreConf.startAppSharingWindow({index:t})}var i=n(726),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i);s.createIpcMainOn(ipcConstant.IPC_PICK_SHARING_TYPE.BEGIN_SHARING,o),s.createIpcMainOn(ipcConstant.IPC_PICK_SHARING_TYPE.CANCEL_SHARING,a),s.createIpcMainOn(ipcConstant.IPC_PICK_SHARING_TYPE.CLOSE_CHILD_WIN,r)},1115:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateLanguageChangeProps=t.updateChildProps=void 0;var r=n(726),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.updateChildProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_PICK_SHARING_TYPE.UPDATE_CHILD_PROPS,e)},t.mainIpcUpdateLanguageChangeProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_PICK_SHARING_TYPE.UPDATE_LANG_PROPS,e)}},1116:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateMaxhubProps=t.mainIpcUpdateLanguageChangeProps=t.updateChildProps=t.setWindow=t.initWindow=void 0;var a=n(727),o=r(a),i=n(1117),s=(r(i),n(1118)),c=r(s);t.initWindow=o.initWindow,t.setWindow=o.setWindow,t.updateChildProps=c.updateChildProps,t.mainIpcUpdateLanguageChangeProps=c.mainIpcUpdateLanguageChangeProps,t.mainIpcUpdateMaxhubProps=c.mainIpcUpdateMaxhubProps},1117:function(e,t,n){"use strict";function r(e,t){c.debug("dealTestPlus",t),"micListId"===t.device_id?(coreSetting.setAndSaveMicDevice(t.index),window.isOpenSpeechDetect=!0):"spkListId"===t.device_id?coreSetting.setAndSaveSpkDevice(t.index):"camListId"===t.device_id&&coreSetting.setAndSaveCamDevice(t.index)}function a(e,t){c.debug("closeChildWin",t),coreUi.closeAudioSetting()}function o(e,t){var n=JSON.parse(t),r=n.viewName,a=n.clickId;isNullOrEmpty(r)||isNullOrEmpty(a)||coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_USER_CLICK,params:[r,a]})}var i=n(727),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),c=coreLogger.getLogger("ipc")("mainprocess/memberlist/receive");s.createIpcMainOn(ipcConstant.IPC_AUDIO_SETTING_TYPE.DEAL_TEST_PLUS,r),s.createIpcMainOn(ipcConstant.IPC_AUDIO_SETTING_TYPE.CLOSE_CHILD_WIN,a),s.createIpcMainOn(ipcConstant.IPC_AUDIO_SETTING_TYPE.CLICK_UT_AUDIO_SETTING,o)},1118:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateMaxhubProps=t.mainIpcUpdateLanguageChangeProps=t.updateChildProps=void 0;var r=n(727),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.updateChildProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_AUDIO_SETTING_TYPE.UPDATE_CHILD_PROPS,e)},t.mainIpcUpdateLanguageChangeProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_AUDIO_SETTING_TYPE.UPDATE_LANG_PROPS,e)},t.mainIpcUpdateMaxhubProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_AUDIO_SETTING_TYPE.UPDATE_MAXHUB_PROPS,e)}},118:function(e,t,n){e.exports=n(0)(0)},123:function(e,t,n){e.exports=n(0)(562)},126:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreCommonComponent.Icon,a=r.iconSizeMap,o=r.iconColorMap,i=r.iconHoverMap,s=r.iconTypeMap;t.default=r,t.iconSizeMap=a,t.iconColorMap=o,t.iconHoverMap=i,t.iconTypeMap=s},127:function(e,t,n){e.exports=n(0)(57)},129:function(e,t,n){"use strict";t.__esModule=!0;var r=n(143),a=function(e){return e&&e.__esModule?e:{default:e}}(r);t.default=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return(0,a.default)(e)}},131:function(e,t,n){"use strict";(function(e){function r(){return o.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function a(e,t){if(r()<t)throw new RangeError("Invalid typed array length");return o.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t),e.__proto__=o.prototype):(null===e&&(e=new o(t)),e.length=t),e}function o(e,t,n){if(!(o.TYPED_ARRAY_SUPPORT||this instanceof o))return new o(e,t,n);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return u(this,e)}return i(this,e,t,n)}function i(e,t,n,r){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?d(e,t,n,r):"string"==typeof t?f(e,t,n):p(e,t)}function s(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function c(e,t,n,r){return s(t),t<=0?a(e,t):void 0!==n?"string"==typeof r?a(e,t).fill(n,r):a(e,t).fill(n):a(e,t)}function u(e,t){if(s(t),e=a(e,t<0?0:0|h(t)),!o.TYPED_ARRAY_SUPPORT)for(var n=0;n<t;++n)e[n]=0;return e}function f(e,t,n){if("string"==typeof n&&""!==n||(n="utf8"),!o.isEncoding(n))throw new TypeError('"encoding" must be a valid string encoding');var r=0|g(t,n);e=a(e,r);var i=e.write(t,n);return i!==r&&(e=e.slice(0,i)),e}function l(e,t){var n=t.length<0?0:0|h(t.length);e=a(e,n);for(var r=0;r<n;r+=1)e[r]=255&t[r];return e}function d(e,t,n,r){if(t.byteLength,n<0||t.byteLength<n)throw new RangeError("'offset' is out of bounds");if(t.byteLength<n+(r||0))throw new RangeError("'length' is out of bounds");return t=void 0===n&&void 0===r?new Uint8Array(t):void 0===r?new Uint8Array(t,n):new Uint8Array(t,n,r),o.TYPED_ARRAY_SUPPORT?(e=t,e.__proto__=o.prototype):e=l(e,t),e}function p(e,t){if(o.isBuffer(t)){var n=0|h(t.length);return e=a(e,n),0===e.length?e:(t.copy(e,0,0,n),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||J(t.length)?a(e,0):l(e,t);if("Buffer"===t.type&&Q(t.data))return l(e,t.data)}throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}function h(e){if(e>=r())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r().toString(16)+" bytes");return 0|e}function _(e){return+e!=e&&(e=0),o.alloc(+e)}function g(e,t){if(o.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var n=e.length;if(0===n)return 0;for(var r=!1;;)switch(t){case"ascii":case"latin1":case"binary":return n;case"utf8":case"utf-8":case void 0:return $(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*n;case"hex":return n>>>1;case"base64":return j(e).length;default:if(r)return $(e).length;t=(""+t).toLowerCase(),r=!0}}function m(e,t,n){var r=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return"";if(n>>>=0,t>>>=0,n<=t)return"";for(e||(e="utf8");;)switch(e){case"hex":return R(this,t,n);case"utf8":case"utf-8":return L(this,t,n);case"ascii":return y(this,t,n);case"latin1":case"binary":return x(this,t,n);case"base64":return O(this,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return M(this,t,n);default:if(r)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),r=!0}}function v(e,t,n){var r=e[t];e[t]=e[n],e[n]=r}function C(e,t,n,r,a){if(0===e.length)return-1;if("string"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,isNaN(n)&&(n=a?0:e.length-1),n<0&&(n=e.length+n),n>=e.length){if(a)return-1;n=e.length-1}else if(n<0){if(!a)return-1;n=0}if("string"==typeof t&&(t=o.from(t,r)),o.isBuffer(t))return 0===t.length?-1:I(e,t,n,r,a);if("number"==typeof t)return t&=255,o.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?a?Uint8Array.prototype.indexOf.call(e,t,n):Uint8Array.prototype.lastIndexOf.call(e,t,n):I(e,[t],n,r,a);throw new TypeError("val must be string, number or Buffer")}function I(e,t,n,r,a){function o(e,t){return 1===i?e[t]:e.readUInt16BE(t*i)}var i=1,s=e.length,c=t.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(e.length<2||t.length<2)return-1;i=2,s/=2,c/=2,n/=2}var u;if(a){var f=-1;for(u=n;u<s;u++)if(o(e,u)===o(t,-1===f?0:u-f)){if(-1===f&&(f=u),u-f+1===c)return f*i}else-1!==f&&(u-=u-f),f=-1}else for(n+c>s&&(n=s-c),u=n;u>=0;u--){for(var l=!0,d=0;d<c;d++)if(o(e,u+d)!==o(t,d)){l=!1;break}if(l)return u}return-1}function w(e,t,n,r){n=Number(n)||0;var a=e.length-n;r?(r=Number(r))>a&&(r=a):r=a;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");r>o/2&&(r=o/2);for(var i=0;i<r;++i){var s=parseInt(t.substr(2*i,2),16);if(isNaN(s))return i;e[n+i]=s}return i}function S(e,t,n,r){return K($(t,e.length-n),e,n,r)}function E(e,t,n,r){return K(Y(t),e,n,r)}function N(e,t,n,r){return E(e,t,n,r)}function T(e,t,n,r){return K(j(t),e,n,r)}function b(e,t,n,r){return K(q(t,e.length-n),e,n,r)}function O(e,t,n){return 0===t&&n===e.length?z.fromByteArray(e):z.fromByteArray(e.slice(t,n))}function L(e,t,n){n=Math.min(e.length,n);for(var r=[],a=t;a<n;){var o=e[a],i=null,s=o>239?4:o>223?3:o>191?2:1;if(a+s<=n){var c,u,f,l;switch(s){case 1:o<128&&(i=o);break;case 2:c=e[a+1],128==(192&c)&&(l=(31&o)<<6|63&c)>127&&(i=l);break;case 3:c=e[a+1],u=e[a+2],128==(192&c)&&128==(192&u)&&(l=(15&o)<<12|(63&c)<<6|63&u)>2047&&(l<55296||l>57343)&&(i=l);break;case 4:c=e[a+1],u=e[a+2],f=e[a+3],128==(192&c)&&128==(192&u)&&128==(192&f)&&(l=(15&o)<<18|(63&c)<<12|(63&u)<<6|63&f)>65535&&l<1114112&&(i=l)}}null===i?(i=65533,s=1):i>65535&&(i-=65536,r.push(i>>>10&1023|55296),i=56320|1023&i),r.push(i),a+=s}return A(r)}function A(e){var t=e.length;if(t<=Z)return String.fromCharCode.apply(String,e);for(var n="",r=0;r<t;)n+=String.fromCharCode.apply(String,e.slice(r,r+=Z));return n}function y(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(127&e[a]);return r}function x(e,t,n){var r="";n=Math.min(e.length,n);for(var a=t;a<n;++a)r+=String.fromCharCode(e[a]);return r}function R(e,t,n){var r=e.length;(!t||t<0)&&(t=0),(!n||n<0||n>r)&&(n=r);for(var a="",o=t;o<n;++o)a+=H(e[o]);return a}function M(e,t,n){for(var r=e.slice(t,n),a="",o=0;o<r.length;o+=2)a+=String.fromCharCode(r[o]+256*r[o+1]);return a}function k(e,t,n){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>n)throw new RangeError("Trying to access beyond buffer length")}function P(e,t,n,r,a,i){if(!o.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>a||t<i)throw new RangeError('"value" argument is out of bounds');if(n+r>e.length)throw new RangeError("Index out of range")}function D(e,t,n,r){t<0&&(t=65535+t+1);for(var a=0,o=Math.min(e.length-n,2);a<o;++a)e[n+a]=(t&255<<8*(r?a:1-a))>>>8*(r?a:1-a)}function U(e,t,n,r){t<0&&(t=4294967295+t+1);for(var a=0,o=Math.min(e.length-n,4);a<o;++a)e[n+a]=t>>>8*(r?a:3-a)&255}function F(e,t,n,r,a,o){if(n+r>e.length)throw new RangeError("Index out of range");if(n<0)throw new RangeError("Index out of range")}function G(e,t,n,r,a){return a||F(e,t,n,4,3.4028234663852886e38,-3.4028234663852886e38),X.write(e,t,n,r,23,4),n+4}function B(e,t,n,r,a){return a||F(e,t,n,8,1.7976931348623157e308,-1.7976931348623157e308),X.write(e,t,n,r,52,8),n+8}function W(e){if(e=V(e).replace(ee,""),e.length<2)return"";for(;e.length%4!=0;)e+="=";return e}function V(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}function H(e){return e<16?"0"+e.toString(16):e.toString(16)}function $(e,t){t=t||1/0;for(var n,r=e.length,a=null,o=[],i=0;i<r;++i){if((n=e.charCodeAt(i))>55295&&n<57344){if(!a){if(n>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(i+1===r){(t-=3)>-1&&o.push(239,191,189);continue}a=n;continue}if(n<56320){(t-=3)>-1&&o.push(239,191,189),a=n;continue}n=65536+(a-55296<<10|n-56320)}else a&&(t-=3)>-1&&o.push(239,191,189);if(a=null,n<128){if((t-=1)<0)break;o.push(n)}else if(n<2048){if((t-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((t-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function Y(e){for(var t=[],n=0;n<e.length;++n)t.push(255&e.charCodeAt(n));return t}function q(e,t){for(var n,r,a,o=[],i=0;i<e.length&&!((t-=2)<0);++i)n=e.charCodeAt(i),r=n>>8,a=n%256,o.push(a),o.push(r);return o}function j(e){return z.toByteArray(W(e))}function K(e,t,n,r){for(var a=0;a<r&&!(a+n>=t.length||a>=e.length);++a)t[a+n]=e[a];return a}function J(e){return e!==e}/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
var z=n(224),X=n(225),Q=n(210);t.Buffer=o,t.SlowBuffer=_,t.INSPECT_MAX_BYTES=50,o.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=r(),o.poolSize=8192,o._augment=function(e){return e.__proto__=o.prototype,e},o.from=function(e,t,n){return i(null,e,t,n)},o.TYPED_ARRAY_SUPPORT&&(o.prototype.__proto__=Uint8Array.prototype,o.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&o[Symbol.species]===o&&Object.defineProperty(o,Symbol.species,{value:null,configurable:!0})),o.alloc=function(e,t,n){return c(null,e,t,n)},o.allocUnsafe=function(e){return u(null,e)},o.allocUnsafeSlow=function(e){return u(null,e)},o.isBuffer=function(e){return!(null==e||!e._isBuffer)},o.compare=function(e,t){if(!o.isBuffer(e)||!o.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var n=e.length,r=t.length,a=0,i=Math.min(n,r);a<i;++a)if(e[a]!==t[a]){n=e[a],r=t[a];break}return n<r?-1:r<n?1:0},o.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(e,t){if(!Q(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return o.alloc(0);var n;if(void 0===t)for(t=0,n=0;n<e.length;++n)t+=e[n].length;var r=o.allocUnsafe(t),a=0;for(n=0;n<e.length;++n){var i=e[n];if(!o.isBuffer(i))throw new TypeError('"list" argument must be an Array of Buffers');i.copy(r,a),a+=i.length}return r},o.byteLength=g,o.prototype._isBuffer=!0,o.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)v(this,t,t+1);return this},o.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)v(this,t,t+3),v(this,t+1,t+2);return this},o.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)v(this,t,t+7),v(this,t+1,t+6),v(this,t+2,t+5),v(this,t+3,t+4);return this},o.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?L(this,0,e):m.apply(this,arguments)},o.prototype.equals=function(e){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===o.compare(this,e)},o.prototype.inspect=function(){var e="",n=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,n).match(/.{2}/g).join(" "),this.length>n&&(e+=" ... ")),"<Buffer "+e+">"},o.prototype.compare=function(e,t,n,r,a){if(!o.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===n&&(n=e?e.length:0),void 0===r&&(r=0),void 0===a&&(a=this.length),t<0||n>e.length||r<0||a>this.length)throw new RangeError("out of range index");if(r>=a&&t>=n)return 0;if(r>=a)return-1;if(t>=n)return 1;if(t>>>=0,n>>>=0,r>>>=0,a>>>=0,this===e)return 0;for(var i=a-r,s=n-t,c=Math.min(i,s),u=this.slice(r,a),f=e.slice(t,n),l=0;l<c;++l)if(u[l]!==f[l]){i=u[l],s=f[l];break}return i<s?-1:s<i?1:0},o.prototype.includes=function(e,t,n){return-1!==this.indexOf(e,t,n)},o.prototype.indexOf=function(e,t,n){return C(this,e,t,n,!0)},o.prototype.lastIndexOf=function(e,t,n){return C(this,e,t,n,!1)},o.prototype.write=function(e,t,n,r){if(void 0===t)r="utf8",n=this.length,t=0;else if(void 0===n&&"string"==typeof t)r=t,n=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(n)?(n|=0,void 0===r&&(r="utf8")):(r=n,n=void 0)}var a=this.length-t;if((void 0===n||n>a)&&(n=a),e.length>0&&(n<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");for(var o=!1;;)switch(r){case"hex":return w(this,e,t,n);case"utf8":case"utf-8":return S(this,e,t,n);case"ascii":return E(this,e,t,n);case"latin1":case"binary":return N(this,e,t,n);case"base64":return T(this,e,t,n);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return b(this,e,t,n);default:if(o)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),o=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var Z=4096;o.prototype.slice=function(e,t){var n=this.length;e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e);var r;if(o.TYPED_ARRAY_SUPPORT)r=this.subarray(e,t),r.__proto__=o.prototype;else{var a=t-e;r=new o(a,void 0);for(var i=0;i<a;++i)r[i]=this[i+e]}return r},o.prototype.readUIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return r},o.prototype.readUIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e+--t],a=1;t>0&&(a*=256);)r+=this[e+--t]*a;return r},o.prototype.readUInt8=function(e,t){return t||k(e,1,this.length),this[e]},o.prototype.readUInt16LE=function(e,t){return t||k(e,2,this.length),this[e]|this[e+1]<<8},o.prototype.readUInt16BE=function(e,t){return t||k(e,2,this.length),this[e]<<8|this[e+1]},o.prototype.readUInt32LE=function(e,t){return t||k(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},o.prototype.readUInt32BE=function(e,t){return t||k(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},o.prototype.readIntLE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=this[e],a=1,o=0;++o<t&&(a*=256);)r+=this[e+o]*a;return a*=128,r>=a&&(r-=Math.pow(2,8*t)),r},o.prototype.readIntBE=function(e,t,n){e|=0,t|=0,n||k(e,t,this.length);for(var r=t,a=1,o=this[e+--r];r>0&&(a*=256);)o+=this[e+--r]*a;return a*=128,o>=a&&(o-=Math.pow(2,8*t)),o},o.prototype.readInt8=function(e,t){return t||k(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},o.prototype.readInt16LE=function(e,t){t||k(e,2,this.length);var n=this[e]|this[e+1]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt16BE=function(e,t){t||k(e,2,this.length);var n=this[e+1]|this[e]<<8;return 32768&n?4294901760|n:n},o.prototype.readInt32LE=function(e,t){return t||k(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},o.prototype.readInt32BE=function(e,t){return t||k(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},o.prototype.readFloatLE=function(e,t){return t||k(e,4,this.length),X.read(this,e,!0,23,4)},o.prototype.readFloatBE=function(e,t){return t||k(e,4,this.length),X.read(this,e,!1,23,4)},o.prototype.readDoubleLE=function(e,t){return t||k(e,8,this.length),X.read(this,e,!0,52,8)},o.prototype.readDoubleBE=function(e,t){return t||k(e,8,this.length),X.read(this,e,!1,52,8)},o.prototype.writeUIntLE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=1,o=0;for(this[t]=255&e;++o<n&&(a*=256);)this[t+o]=e/a&255;return t+n},o.prototype.writeUIntBE=function(e,t,n,r){if(e=+e,t|=0,n|=0,!r){P(this,e,t,n,Math.pow(2,8*n)-1,0)}var a=n-1,o=1;for(this[t+a]=255&e;--a>=0&&(o*=256);)this[t+a]=e/o&255;return t+n},o.prototype.writeUInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,255,0),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},o.prototype.writeUInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},o.prototype.writeUInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,65535,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},o.prototype.writeUInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):U(this,e,t,!0),t+4},o.prototype.writeUInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,4294967295,0),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeIntLE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);P(this,e,t,n,a-1,-a)}var o=0,i=1,s=0;for(this[t]=255&e;++o<n&&(i*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeIntBE=function(e,t,n,r){if(e=+e,t|=0,!r){var a=Math.pow(2,8*n-1);P(this,e,t,n,a-1,-a)}var o=n-1,i=1,s=0;for(this[t+o]=255&e;--o>=0&&(i*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/i>>0)-s&255;return t+n},o.prototype.writeInt8=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,1,127,-128),o.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},o.prototype.writeInt16LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):D(this,e,t,!0),t+2},o.prototype.writeInt16BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,2,32767,-32768),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):D(this,e,t,!1),t+2},o.prototype.writeInt32LE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),o.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):U(this,e,t,!0),t+4},o.prototype.writeInt32BE=function(e,t,n){return e=+e,t|=0,n||P(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),o.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):U(this,e,t,!1),t+4},o.prototype.writeFloatLE=function(e,t,n){return G(this,e,t,!0,n)},o.prototype.writeFloatBE=function(e,t,n){return G(this,e,t,!1,n)},o.prototype.writeDoubleLE=function(e,t,n){return B(this,e,t,!0,n)},o.prototype.writeDoubleBE=function(e,t,n){return B(this,e,t,!1,n)},o.prototype.copy=function(e,t,n,r){if(n||(n=0),r||0===r||(r=this.length),t>=e.length&&(t=e.length),t||(t=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(n<0||n>=this.length)throw new RangeError("sourceStart out of bounds");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),e.length-t<r-n&&(r=e.length-t+n);var a,i=r-n;if(this===e&&n<t&&t<r)for(a=i-1;a>=0;--a)e[a+t]=this[a+n];else if(i<1e3||!o.TYPED_ARRAY_SUPPORT)for(a=0;a<i;++a)e[a+t]=this[a+n];else Uint8Array.prototype.set.call(e,this.subarray(n,n+i),t);return i},o.prototype.fill=function(e,t,n,r){if("string"==typeof e){if("string"==typeof t?(r=t,t=0,n=this.length):"string"==typeof n&&(r=n,n=this.length),1===e.length){var a=e.charCodeAt(0);a<256&&(e=a)}if(void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!o.isEncoding(r))throw new TypeError("Unknown encoding: "+r)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<n)throw new RangeError("Out of range index");if(n<=t)return this;t>>>=0,n=void 0===n?this.length:n>>>0,e||(e=0);var i;if("number"==typeof e)for(i=t;i<n;++i)this[i]=e;else{var s=o.isBuffer(e)?e:$(new o(e,r).toString()),c=s.length;for(i=0;i<n-t;++i)this[i+t]=s[i%c]}return this};var ee=/[^+\/0-9A-Za-z-_]/g}).call(t,n(139))},132:function(e,t,n){e.exports=n(0)(620)},133:function(e,t,n){e.exports={default:n(173),__esModule:!0}},135:function(e,t,n){e.exports={default:n(150),__esModule:!0}},136:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.resetMyInfo=t.getMyInfo=t.UErrorCode=t.LoginInfo=t.LoginError=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.EAErrorCode=t.registerLoginEvent=void 0;var a=n(164),o=r(a),i=n(272),s=r(i);t.registerLoginEvent=o.UErrorCode,t.EAErrorCode=o.EAErrorCode,t.ErrorType=o.ErrorType,t.getLoginModel=o.getLoginModel,t.getSyncLoginModel=o.getSyncLoginModel,t.resetLoginModel=o.resetLoginModel,t.LoginError=o.LoginError,t.LoginInfo=o.LoginInfo,t.UErrorCode=o.UErrorCode,t.getMyInfo=s.getMyInfo,t.resetMyInfo=s.resetMyInfo},139:function(e,t,n){e.exports=n(0)(86)},141:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var a=n(170),o=r(a),i=n(135),s=r(i);t.default=function(){function e(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var i,c=(0,s.default)(e);!(r=(i=c.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}return n}return function(t,n){if(Array.isArray(t))return t;if((0,o.default)(Object(t)))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}()},142:function(e,t,n){e.exports=n(0)(84)},143:function(e,t,n){e.exports={default:n(158),__esModule:!0}},149:function(e,t,n){var r=n(15);e.exports=function(e,t){if(!r(e)||e._t!==t)throw TypeError("Incompatible receiver, "+t+" required!");return e}},150:function(e,t,n){n(23),n(22),e.exports=n(151)},151:function(e,t,n){var r=n(9),a=n(26);e.exports=n(8).getIterator=function(e){var t=a(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return r(t.call(e))}},152:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.recordIsImGroupCreateConf=t.formatConfId=t.addToAllConfInfo=t.initConfctrl=t.createCancelConfEvent=t.handleCancelConf=t.cancelConf=t.createConfByTeamList=t.cloudRecordRequestFuc=t.requestChairmanFuc=t.releaseChairmanFuc=t.compressRemoveAttendee=t.compressreleasePreservate=t.unlockConfFuc=t.lockConfFuc=t.enterConfInConfList=t.oneKeyEnterConf=t.showConfInfo=t.RecordIsIntoInterval=t.recordFlagIsFirstTimeRun=t.recordConferenceOldId=t.recordConferencePasswordDetail=t.changeFlagClickJoinConfBtn=t.recoredOldPwd=t.changeStatusOfConference=t.createMaxHubMeeting=t.handleMobileBfcpStatus=t.AsErrorDeal=t.handleShowErrorMsgBox=t.setRecordStatusForNative=t.handleRecordVideoStatusChairmanIndResult=t.handleConfStateDirectBroadCastIndresult=t.handleVideoRecordResult=t.handleSetRecordVideoResult=t.actionCloudRecordRequest=t.clearRecordInfoHandle=t.getRecordStatus=t.isHasRecordPermission=t.setRecordScheduserName=t.actionActiveDirectionForMobile=t.actionActiveDirection=t.dealChangeDirectionResult=t.dealAudientResult=t.grabBfcpConfirm=t.initMobileFirstAcceptShare=t.resetFirstAcceptShareFlag=t.initMobileFirstInfoConf=t.resetFirstInfoConferenceFlag=t.dealInviteAttendeeResult=t.handlePlatformMessageBox=t.handleVideoWatchResMessageBox=t.handleVideoWatchRes=t.handleSvcConfWatchRet=t.clearPhoneContacts=t.showOrDisabledBtn=t.showJoinMeetingBtn=t.returnToConfWelPage=t.toggleShouldAutoEnterTempConf=t.toggleClearEnterTempConfInfo=t.toggleopenCamerState=t.toggleChangeCamerState=t.toggleChangeMicState=t.toggleSetCreateUseFixedConfIDState=t.toggleSetIsBookSendSMS=t.toggleSetIsBookSendEmail=t.toggleSetUseFixedConfIDState=t.toggleChangeConfAcsPas=t.toggleChangeConfAcsId=t.toggleChangeConfAcsNum=t.changeConfPage=t.gettempuserinfo=t.handleJoinTempConfNoNameWithConfId=t.enterTempConf=t.enterConfById=t.enterConfByIdOnly=t.enterConfByIdOnlyWithConfPas=t.oneKeyEnterPairConf=t.enterConfInConfInfo=t.changeBookConfSubject=t.changeHistoryAttendeeInfo=t.changeHistoryConfInfo=t.changeConfAttendeeInfo=t.changeCurrentConfInfo=t.oneJoinVMR=t.getAsInfoToDbAtomic=t.getVmrInfoToDbAtomic=t.getVRMList=t.saveTempMediaxInfo=t.handleConfInfo=t.handleConfMTnumber=t.handleConfInfostate=t.searchContactByInfo=t.getInitHistoryConfList=t.delConfRecord=t.getConfTimedec=t.handleConfList=t.saveMettingTypeValue=void 0,t.judgeCreateNewConf=t.initCreateMettingContent=t.saveConThemeName=t.createConfFromHistory=t.createTempTypeMeeting=t.createAMeetingFromHis=t.createAMeeting=t.deleteClickParticipants=t.filterDuplicateData=t.createTempMeetingOfAddMember=t.createTempMeeting=t.handleIsShowJoinButton=t.handleIsConfPwdInputShow=t.handleNotShowChairPas=t.handleNotShowGeneralPas=t.handleVMRConfResult=t.subScribeConfListAndInfoResAtomic=t.subScribeConfListAndInfoRes=t.getConfList=t.changeconfListInfo=t.actionExportConfmember=t.transferChairman=t.getConfInfo=t.p2pTransToConf=t.upgradeAudioConf2Data=t.upgrade2DataConfOrStartShare=t.handleShowEndConf=t.toggleConfOtherNumber=t.searchMemberList=t.unregisterConfEvent=t.handleSpeakerReport=t.endCallAndLogout=t.setUportalTokenRefreshTimer=t.UportalTokenErrAndLogout=t.UportalTokenErr=t.handleGetDataPostponeConf=t.handleSmcEnterDataConf=t.handleUportalTokenErr=t.handleNonChairCtrlcaps=t.checkUsersMobile=t.setMsg=t.handlepPrticipantsList=t.AutocallMobile=t.registerConfEventAtomic=t.handleBroadcaseResult=t.updateconfMsglList=t.updateconfRecallList=t.updateMemberStateInfo=t.toggleShowConfInfoCard=t.handleShowMemberList=t.cancleConfMemberlistMessage=t.toggleShowMemberList=t.diableSpeakerIcon=t.confEnded=t.actionWatchAttendee=t.actionBroadcastAttendee=t.actionLeaveConf=t.handleClosePairConfPage=t.setSmcFirstRequest=t.doClearSipForSipLoginOnly=t.acceptConf=t.rejectConf=t.confIncoming=t.actionRemoveAttendee=t.actionCallAttendee=t.actionHangupAttendee=t.actionAddAttendee=t.actionCallOtherNum=t.popupRequestChairmanInputBox=t.confEnterPwdToChairmanResultResult=t.handleReqChairmanResultRest=t.confReqChairmanResult=t.actionRequestChairman=t.confReleaseChairmanResult=t.actionReleaseChairman=t.actionReInviteAttendee=t.confBroadcastLocal=t.actionMuteAllAttendee=t.handup=t.actionMuteConf=t.lockState=t.lockResult=t.handupResult=t.attendeeMuteResult=t.actionMuteAttendee=t.handlePairJoinConf=t.confInfoNotify=t.actionEndConf=t.handleUportalTokenError=t.actionCreateConf=t.actionShareClickByDetail=t.actionShareClickByRecent=t.actionCreateConfByDetail=t.actionCreateConfByRecent=t.handleBookConfResult=t.formatDateString=t.bookMeeting=t.changeGroupId=t.changeConfSearchTxt=t.toggleMemberListSearch=void 0;var o=n(135),i=a(o),s=n(133),c=a(s),u=n(69),f=a(u),l=n(129),d=a(l),p=n(123),h=a(p),_=n(1),g=a(_),m=n(3),v=a(m),C=n(127),I=a(C),w=n(2),S=a(w),E=(t.initConfctrl=function(){var e=(0,S.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,q.info("[ confctrlInit ] start 1"),!t.useMetting){e.next=7;break}return e.next=7,coreConf.confctrlInit();case 7:q.info("[ confctrlInit ] end 2"),window.confCtrlLoaded=!0;case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(226)),N=n(207),T=n(226),b=n(286),O=n(248),L=n(165),A=n(208),y=r(A),x=n(648),R=n(287),M=n(358),k=n(194),P=n(651),D=n(652),U=n(414),F=n(356),G=r(F),B=n(709),W=r(B),V=n(723),H=r(V),$=n(724),Y=r($),q=coreLogger.getLogger("conf")("logic"),j=null,K=new RegExp("^1[3|4|5|7|8|9][0-9]{9}$"),J="",z=(t.toggleMemberListSearch=function(e){$dispatch(coreUi.changeMemberListSearch(e))},t.changeConfSearchTxt=function(e){$dispatch(coreUi.changeSearchText(e))},t.changeGroupId=function(e){$dispatch(coreUi.changeGroupId(e)),L.SvcAtdManager.setIsSupportChatNative()}),X=(t.bookMeeting=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("make an appointment for a meeting"),n=$getState(),r=void 0,a=t.start_time,r=St(n.selectBox.selectBox_saveSelectedList),o=n.common.groupName,i=n.myInfo,!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=18;break}if(!i.account){e.next=17;break}return e.next=11,window.getContactFromNet(i.account);case 11:s=e.sent,s.name&&(i.name=s.name),s.mobileCodeAll&&(c=s.mobileCodeAll.replaceAll("+86-",""),i.mobile=c),$dispatch(coreUi.updateMyInfo((0,I.default)({},i))),e.next=18;break;case 17:q.info("bookMeeting cannot have selfInfo account");case 18:if(r.push(i),u=Sn(r),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=41;break}if(window.confCtrlLoaded){e.next=41;break}return q.info("confCtrl is not loaded, please wait"),$dispatch(coreUi.changeEnterConfState(!0)),f=new v.default(function(e,t){var n=0,r=setInterval(function(){window.confCtrlLoaded?(e(0),clearInterval(r)):++n>8&&(t(-1),clearInterval(r))},500)}),l=-1,e.prev=26,e.next=29,f;case 29:l=e.sent,e.next=37;break;case 32:e.prev=32,e.t0=e.catch(26),q.error("confCtrl init timeout"),window.clickCreateWorking=!1,window.ToastNew(language.CONFERENCE_BOOK_FAILED,2);case 37:if($dispatch(coreUi.changeEnterConfState(!1)),0===l){e.next=41;break}return q.info("confCtrl init timeout"),e.abrupt("return");case 41:return X(i,u,{group_id:""},t.mediaType,t.confSubject,a,t.conf_len,t.time_zone,t.recordType,t.vmrConfId),e.next=44,coreUi.hideModal();case 44:case"end":return e.stop()}},e,void 0,[[26,32]])}));return function(t){return e.apply(this,arguments)}}(),t.formatDateString=function(e){var t=new Date(e);return t.getHours()+language.HOUR+t.getMinutes()+language.MINUTE},function(){var e=(0,S.default)(g.default.mark(function e(t,n,r,a){for(var o=arguments.length,i=Array(o>4?o-4:0),s=4;s<o;s++)i[s-4]=arguments[s];var c,u,f,l,d,p,h,_,m,v,C,I,w,S,E,N,T,b,O;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.saveCalleeInfo({})),c=$getState().conf.isCreateMeetingPassword?0:1,u={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:c,others:i},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=12;break}return e.next=6,coreUi.checkMobileMultiDevice(u);case 6:if(f=e.sent,l="bookMeeting"===window.getRoute()&&window.CLIENTCONFIG.ISMOBILE,!0!==f||l){e.next=12;break}return q.info("multi device logined, return"),window.clickCreateWorking=!1,e.abrupt("return");case 12:if(!(n.length>500)){e.next=18;break}return q.error("member number: "+n.length+"exceeds 500, can not book conf"),d=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("500"),window.clickCreateWorking=!1,alert(d),e.abrupt("return");case 18:if(!(n.length>=1)&&isNullOrEmpty(t.account)){e.next=63;break}if(q.info("book conf, member list count is "+n.length),p="",h="",_=0,m=0,v=0,C="",isNullOrEmpty(i)){e.next=50;break}if(p=i[0],h=i[1],_=i[2],m=i[3],v=i[4],C=i[5],I=constant.TIME_ZONE_FLAG[parseInt(m,10)-1],w=constant.TIME_ZONE_FLAG[getDefaultTimeZone(constant.TIME_ZONE_FLAG)-1],S=Z(getNowFormatDate(new Date),w),E=new Date(S.replace(/-/g,"/")).getTime()+36e5*I,N=new Date(h.replace(/-/g,"/")).getTime(),!(E-N>0)){e.next=42;break}return window.CLIENTCONFIG.ISMOBILE?window.alert(language.CONFERENCE_START_TIME_ERROR):alert(language.CONFERENCE_START_TIME_ERROR),window.clickCreateWorking=!1,e.abrupt("return");case 42:if(0!==_){e.next=47;break}return window.clickCreateWorking=!1,alert(language.CONFERENCE_DURATION_ERROR),window.clickCreateWorking=!1,e.abrupt("return");case 47:h=Z(h,I),e.next=52;break;case 50:window.clickCreateWorking=!1,q.error("start time is null, can not book conf");case 52:return T=coreCommon.isVideoConf(a),b=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,O={memberList:n,confSubject:p,groupUri:r?r.group_id:"",isMultiStream:T?b:0,mediaType:a,userType:2,compereNumber:t.bind_no,selfNumber:t.bind_no,start_time:h,conf_len:_,time_zone:m,noPassword:c,recordType:v,vmrConfId:C},q.info("actionBookConf isMultiStreamValue: "+b),window.CLIENTCONFIG.ENABLE_IT_MEETING||W.showLoadingPage(),e.next=59,Mt.wait();case 59:return e.next=61,coreConf.bookConf(O);case 61:e.next=65;break;case 63:window.clickCreateWorking=!1,q.error("member list is null");case 65:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}()),Q=t.handleBookConfResult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("UportalBookConfResult code=",t.param.ret),window.CLIENTCONFIG.ENABLE_IT_MEETING||W.closeLoadingPage(),0!==t.param.ret){e.next=8;break}return e.next=5,ne();case 5:return e.abrupt("return");case 8:constant.MEDIA_X_ERROR_CODE.start_time_error===t.param.ret?window.alert(language.CONFERENCE_START_TIME_ERROR):11085===t.param.ret||11136===t.param.ret||11071005===t.param.ret?window.alert(language.CONF_TIME_CONFLICT):7===t.param.ret?(q.info("book conf failed,error code=",t.param.ret),se(t.param.ret)):(q.info("book conf failed,error code=",t.param.ret),window.CLIENTCONFIG.ENABLE_IT_MEETING?window.ToastNew(language.CONFERENCE_BOOK_FAILED,2):window.confirm(language.CONFERENCE_BOOK_FAILED+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.BOOK_CONF_ERROR,language.CONFERENCE_BOOK_FAILED)}));case 9:window.clickCreateWorking=!1,n=0===t.param.ret,r=[],n?(r.push(1),a=t.param.conf_list_info.conf_id,isNullOrEmpty(a)?q.warn("bookconfid is empty!"):r.push(a)):r=[0,t.param.ret],coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BOOK,extraTrackKey:null,resultParams:r});case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Z=function(e,t){var n=e.substring(0,4),r=e.substring(5,7),a=e.substring(8,10),o=e.substring(11,13),i=e.substring(14,16),s=new Date(n,r-1,a,o,i),c=s.getTime()-60*t*60*1e3;return s.setTime(c),q.info(ee(s)),ee(s)},ee=function(e){var t=new Date(e);return t.getFullYear()+"-"+te(t.getMonth()+1)+"-"+te(t.getDate())+" "+te(t.getHours())+":"+te(t.getMinutes())},te=function(e){return e>9?e:"0"+e},ne=function(){var e=(0,S.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("dealBookConfSuc"),xt(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("main/conference"):coreConf.changeConfPage("MyConf"),window.ToastNew(language.CONFERENCE_BOOK_SUCCESS,2),coreConf.resetDefaultValue(),$dispatch(coreUi.changeBuriedMeetingName(""));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),re=(t.actionCreateConfByRecent=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.myInfo,a=n.recent.currentRecentInfo,!coreIm.isGroup(a.chat_type)){e.next=17;break}return e.next=4,coreGroup.getMemberListByGroupId({groupId:a.owner,owner:a.group.owner});case 4:return o=e.sent,e.next=7,coreAccount.getLoginModel();case 7:if(i=e.sent,i.isSupportAS){e.next=13;break}return s=o.getKeyArr("account"),e.next=12,coreContact.getContactListByAccountList(s);case 12:o=e.sent;case 13:c=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,ae(r,o,a.group,t,c),e.next=18;break;case 17:q.info("actionCreateConfByRecent 点对点会话不进行创建会议");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionCreateConfByDetail=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("actionCreateConfByDetail, bFromSlider=",n),r=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,n?(a=$getState(),o=a.myInfo,i=a.contactGroups,s=i.sliderGroupMemerInfo,c=i.sliderGroupInfo,ae(o,s,c,t,r)):(u=$getState(),f=u.myInfo,l=u.contactGroups,d=l.groupMemberInfo,p=l.groupInfoNew,ae(f,d,p,t,r));case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionShareClickByRecent=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("actionShareClick"),t=$getState(),n=t.myInfo,r=t.recent,a=r.currentGroupMemberList,o=r.currentRecentInfo,coreIm.isGroup(o.chat_type)){e.next=7;break}if(q.info("点对点会话，先判断聊天者是不是有号码存在"),""!==o.contact.bind_no||""!==o.contact.short_phone){e.next=7;break}return alert(language.THE_CONTACT_HAS_NO_NUMBER),e.abrupt("return");case 7:if(i=a||[],s=void 0,!coreIm.isGroup(o.chat_type)){e.next=14;break}q.info("actionShareClickByRecent 群组会话"),s=o.group,e.next=19;break;case 14:return q.info("actionShareClickByRecent 点对点会话，先创建群组"),i.push(o.contact),e.next=18,coreGroup.createDiscussionGroup({list:i});case 18:s=e.sent;case 19:c=(0,h.default)({},n,{isAutoStartShare:!0}),u=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,ae(c,i,s,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,u);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionShareClickByDetail=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,p,_,m;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("actionShareClickByDetail "+t),n=$getState(),r=n.myInfo,a=n.contactGroups,o=a.sliderContactInfo,i=a.sliderGroupInfo,s=a.sliderGroupMemerInfo,c=a.contactInfo,u=a.groupMemberInfo,f=a.groupInfoNew,l=void 0,p=void 0,!t){e.next=15;break}if(l=s||[],p=i,0!==l.length){e.next=13;break}if(l=[].concat((0,d.default)(l)),l.push(o),!window.CLIENTCONFIG.USE_IM){e.next=13;break}return e.next=12,coreGroup.createDiscussionGroup({list:l});case 12:p=e.sent;case 13:e.next=23;break;case 15:if(l=u||[],p=f,0!==l.length){e.next=23;break}if(l[0]=c,!window.CLIENTCONFIG.USE_IM){e.next=23;break}return e.next=22,coreGroup.createDiscussionGroup({list:l});case 22:p=e.sent;case 23:_=(0,h.default)({},r,{isAutoStartShare:!0}),m=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,ae(_,l,p,constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,m);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1],u=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.next=3,coreCall.callMultiTerminalCheck();case 3:if(n=e.sent,window.requestMultiTerminalPromise=null,!n){e.next=7;break}return e.abrupt("return",Y.CREATE_CONF_ERR.MULTI_DEVICE_LOGIN);case 7:return e.next=9,coreCall.dealSipLoginCheck();case 9:window.requestSipLoginPromise=null;case 10:if(!window.isOffline||!window.CLIENTCONFIG.USE_IM){e.next=17;break}if(isNullOrEmpty($getState().conf.confTempAcsAccount)&&!$getState().login.sipLoginOnly){e.next=14;break}e.next=17;break;case 14:return q.error("checkBeforeEnterConf offline, can not create conf"),u&&window.ToastNew(language.CALL_FAILED_OFFLINE),e.abrupt("return",Y.CREATE_CONF_ERR.OFFLINE);case 17:return e.next=19,coreAccount.getLoginModel();case 19:if(r=e.sent,a=r.isSipRegSuc()){e.next=29;break}return q.error("sip register failed, can not create conf"),(!r.isMobile||r.isMobile&&!$getState().login.isMultiDeviceLogined)&&coreAccount.sipResume({}),e.next=26,r.checkSipState();case 26:if(r.isSipRegSuc()){e.next=29;break}return window.CLIENTCONFIG.ENABLE_IT_MEETING||u&&window.confirm(language.THE_NETWORK_IS_ABNORMAL+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.SIP_NOT_REG_ERROR,language.THE_NETWORK_IS_ABNORMAL)}),e.abrupt("return",Y.CREATE_CONF_ERR.SIP_FAIL);case 29:if(!coreConf.isInConf()&&!$getState().synergismInfo.inPairConf){e.next=33;break}return q.error("already exist conference, can not create conf"),u&&alert(language.PREVENT_TWO_CONFERENCE),e.abrupt("return",Y.CREATE_CONF_ERR.EXIST_CONF);case 33:if(!(coreCall.getCallCount()>0)){e.next=37;break}return q.error("already exist call, can not create conf"),u&&alert(language.PREVENT_CONFERENCE_AFTER_CALL),e.abrupt("return",Y.CREATE_CONF_ERR.EXIST_CALL);case 37:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=42;break}return e.next=41,window.isSimCardCall();case 41:e.t0=e.sent;case 42:if(!(o=e.t0)){e.next=47;break}return q.info("now is in sim card call cannot create conf"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.itWeLinkNotifyCallEnded(0,language.PLEASE_HANG_UP_CALL):u&&window.ToastNew(language.PLEASE_HANG_UP_CALL,2),e.abrupt("return",Y.CREATE_CONF_ERR.EXIST_SIM_CALL);case 47:if(c){e.next=56;break}return e.next=50,coreCall.callPermissionCheck(t);case 50:if(i=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),q.info("isHavePerm: "+i),i){e.next=56;break}return q.info("mobile do not have permission cannnot create conf"),e.abrupt("return",Y.CREATE_CONF_ERR.PERMSSION_REJECT);case 56:if(e.t1=!c,!e.t1){e.next=61;break}return e.next=60,coreCall.Call2GNet(t);case 60:e.t1=e.sent;case 61:if(!e.t1){e.next=64;break}return q.info("The network type is 2G. not support video conf "),e.abrupt("return",Y.CREATE_CONF_ERR.NET_2G);case 64:if(s=!0,!t){e.next=70;break}if((!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.webView)&&window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=70;break}return e.next=69,coreCall.createVideoPreCheck();case 69:s=e.sent;case 70:if(s){e.next=73;break}return q.info("<video>mobile is 3G/4G,user cancel continue video conf"),e.abrupt("return",Y.CREATE_CONF_ERR.USER_CANCEL);case 73:return e.abrupt("return",Y.CREATE_CONF_ERR.SUCCESS);case 74:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),ae=t.actionCreateConf=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r,a,o){for(var i=arguments.length,s=Array(i>6?i-6:0),c=6;c<i;c++)s[c-6]=arguments[c];var u,f,l,d,p,h,_,m,v,C,I,w,S,E,N,T,b,O=!(arguments.length>5&&void 0!==arguments[5])||arguments[5];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u=coreCommon.isVideoConf(a),f={bConf:!0,selfInfo:t,memberList:n,groupInfo:r,mediaType:a,noPassword:o,bVideo:u,others:s},!(f.memberList.length>400)){e.next=11;break}return q.error("member number: "+f.memberList.length+"exceeds 100, can not create conf"),l=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400"),window.clickCreateWorking=!1,O&&alert(l),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),window.clickCreateWorking=!1,e.abrupt("return",Y.CREATE_CONF_ERR.OUT_MEMBER_LIMIT);case 11:if(!(n.length<1&&isNullOrEmpty(t.account))){e.next=16;break}return q.error("member list is null"),window.clickCreateWorking=!1,$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",Y.CREATE_CONF_ERR.MEMBER_EMPTY);case 16:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=25;break}return e.next=19,coreUi.checkMobileMultiDevice(f);case 19:if(!(d=e.sent)){e.next=25;break}return window.clickCreateWorking=!1,q.info("multi device logined actionCreateConf"),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",Y.CREATE_CONF_ERR.MULTI_DEVICE_LOGIN);case 25:return e.next=27,re(u,!1,O);case 27:if(p=e.sent,0===p.code){e.next=34;break}return $dispatch(coreUi.changeEnterConfState(!1)),window.clickCreateWorking=!1,q.info("create conf, check enter conf fail "),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),e.abrupt("return",p);case 34:return $dispatch(coreUi.saveCalleeInfo({})),q.info("create conf, member list count is "+n.length),H.createConfToRefreshRecent(r),h="",_=0,m=0,v="",isNullOrEmpty(s)||(h=s[0],_=s[1],m=s[2],v=s[3]),isNullOrEmpty(h)&&(h=t.name+language.CONFERENCE_SUBJECT_INFO),W.showConfOutPage(u,!0,h,""),C=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,I=t.bind_no,w={isCloseCameraDe:!$getState().conf.isOpenCameraDe,isMuteMicDe:!$getState().conf.isOpenMicDe},S={memberList:n,confSubject:h,groupUri:r?r.group_id:"",isMultiStream:u?C:0,mediaType:a,userType:2,compereNumber:I,selfNumber:I,isAutoScreenShare:t.isAutoStartShare,noPassword:o,recordType:m,deviceSet:w,vmrConfId:v},q.info("IS_MULTI_STREAM= "+C+",isVideoConf = "+u),oe()&&(S.mediaType=S.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),E=coreCommon.isHuaweiCloud($getState().login.serverAddress),(E||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(S.mediaType=S.mediaType|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),q.info("create conf media type: "+S.mediaType),e.next=55,coreConf.createConf(S);case 55:if(N=e.sent,T=N.errorCode,$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeIsImGroupCreateConf(!1)),0!==T){e.next=65;break}return(0,M.resetDefaultValue)(),xt(),e.abrupt("return",Y.CREATE_CONF_ERR.SUCCESS);case 65:return window.clickCreateWorking=!1,b=Y.getCreateConfFailTitle(T),W.closeConfPage(!1,!1,T,b,O),W.clearAfterConfEnd(!1,!1),7===T&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():se(T)),e.abrupt("return",{code:T,msg:b});case 71:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),oe=function(){return!0},ie=function(e){var t=$getState(),n=t.myInfo,r=t.call.userInfo;if(1===e.length&&(e[0].number===n.bind_no||e[0].number===r.bind_no))return q.info("p2p trans to conf add caller or callee, return"),coreUi.hideModal(),!1;if(coreConf.isInConf()||$getState().synergismInfo.inPairConf)return q.error("already exist conference, can not create conf"),coreUi.hideModal(),alert(language.PREVENT_TWO_CONFERENCE),!1;if(e.length>399){q.error("member number: "+e.length+"exceeds 100, can not create conf");var a=language.CONFERENCE_CREATE_EXCEED_MAXMEMBERLIMIT.format("400");return alert(a),!1}var o=$getState().call.callStatus;return o!==constant.CALL_VIDEO_STATUS.CALL_OUT&&o!==constant.CALL_VIDEO_STATUS.VIDEO_OUT||(q.error("calling out, can not create conf"),!1)},se=t.handleUportalTokenError=function(e){q.info("the erro of ute reason",e);var t={param:{result:parseInt(e)}};pt(t)},ce=(t.actionEndConf=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!$getState().synergismInfo.inPairConf){e.next=4;break}return q.info("BLE: actionEndConf, start end pair meeting"),(0,P.pairStartEndMeeting)(!0),e.abrupt("return");case 4:return t=coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE_START_END"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask(W.closeConfPage,n,null,!0,!0,0,language.END_CONFERENCE),e.next=9,coreConf.endConf();case 9:t.addTask(W.clearAfterConfEnd,n,null,!0,!0,0);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState(),t=e.login.tempConfInfo;coreConf.getIsFirstEnterConf()&&3===parseInt(t.user_role)&&cr(),coreConf.setIsFirstEnterConf(!1)}),ue=t.confInfoNotify=function(){var e=(0,S.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:W.confInfoNotify();case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),fe=function(){W.svcSeessionModify()},le=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("handleConfConnected, isCallToConf = "+t),coreCommon.dispatchModuleEvent("pluginConfStateNotify",{state:constant.CLK_PLUGIN_CONFLIFECYCLE.START}),t?(W.p2pToJoinConf(),H.confTransToConfRefreshRecent()):W.handleJoinConf();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),de=(t.handlePairJoinConf=function(e){q.info("BLE: start handlePairJoinConf, mediaType=",e);var t=$getState().call.callStatus;if("VIDEO_CONNECTED"===t||"CALL_CONNECTED"===t)return void q.info("BLE: handlePairJoinConf has entered");Ct(),window.webView&&window.webView.setKeepScreenOn();var n=coreCommon.isVideoConf(e);q.info("BLE: handlePairJoinConf, isVideoConf=",n),n?($dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),$dispatch(coreUi.changeMeetingType(!0)),$dispatch(coreUi.changeCallToolBarShowStatus(!1))):($dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),$dispatch(coreUi.changeMeetingType(!1)),$dispatch(coreUi.changeCallToolBarShowStatus(!0))),$dispatch(coreUi.clearEnterConfInfo())},t.actionMuteAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r){var a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a={isMute:t,attendee:n},e.next=3,coreConf.muteAttendeeService(a);case 3:o=e.sent,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&r&&(0,R.meetingHWmicrophoneOnOrOff)(t),o&&0===o.result?(q.info("mute attendee success: "+handlePhoneNumber(n)),(0,b.setMemberToMuteState)(n,t),r&&(t?$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE)))):q.error("mute attendee failed: "+handlePhoneNumber(n));case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),pe=t.attendeeMuteResult=function(e){if(0!==e.param.ret){var t=e.param.to_mute;if(void 0===t){var n=$getState(),r=n.conf.isConfMicMute;r===constant.MUTE_STATE.MUTE_STATE_TOMUTE?t=1:r===constant.MUTE_STATE.MUTE_STATE_TOUNMUTE&&(t=0)}(0,b.revertMemberToMuteState)(t),t?(q.info("mute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_UNMUTE))):(q.info("unmute failed"),$dispatch(coreUi.changeConfMicMute(constant.MUTE_STATE.MUTE_STATE_MUTE)),10002===e.param.ret&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.CALL_UNMUTE_FAIL_NORIGHT,2):($dispatch(coreUi.changeNotifyInfo(coreCall.setNotifyInfo(language.CALL_UNMUTE_FAIL_NORIGHT))),coreCall.showConfirmNotify(!0,3e3))))}},he=t.handupResult=function(e){var t=$getState().conf.isHandup;1===e.param.ret?(q.info("handup success"),me(1),window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("HAND_UP_SUCCESSFULLY",1):window.ToastNew(language.HAND_UP_SUCCESSFULLY,2),$dispatch(coreUi.changeAttendeeIsHandup(!t))):2===e.param.ret?(q.info("unhand up success"),ve(1),window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("HAND_DOWN_SUCCESSFULLY",1):window.ToastNew(language.HAND_DOWN_SUCCESSFULLY,2),$dispatch(coreUi.changeAttendeeIsHandup(!t))):t?(q.info("unhandup failed!!!"),ve(0),window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("HAND_DOWN_FAILURE",1):window.ToastNew(language.HAND_DOWN_FAILURE,2)):(q.info("handup failed!!!"),me(0),window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("HAND_UP_FAILURE",1):window.ToastNew(language.HAND_UP_FAILURE,2))},_e=t.lockResult=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void q.info("no need to parse lockResult: "+n);var t=e.param.lock_info.OperateType?1:0,n=null;t?e.param.ret||e.param.lock_info.Result?(n=language.LOCK_CONF_FAILURE,Ce(0)):(n=language.LOCK_CONF_SUCCESSFULLY,Ce(1),$dispatch(coreUi.changeConfIsLock(t))):e.param.ret||e.param.lock_info.Result?(n=language.UNLOCK_CONF_FAILURE,Ie(0)):(n=language.UNLOCK_CONF_SUCCESSFULLY,Ie(1),$dispatch(coreUi.changeConfIsLock(t))),q.info("lockResult: "+n),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?L.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3)},ge=t.lockState=function(e){if($getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING)return void q.info("no need to parse lockState: "+n);var t=e.param.is_lock,n=t?language.THE_MEETING_HAS_BEEN_LOCKED_DOWN:language.THE_MEETING_IS_NOT_LOCKED;t!==$getState().conf.isLock&&(q.info("lockState: "+n),we(t),$dispatch(coreUi.changeConfIsLock(t)),window.CLIENTCONFIG.ISMOBILE?window.JSToNativeToast(2e3,n):window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf?L.SvcAtdManager.alertBox(n,3):setTimeout(function(){window.Toast(n,3,!1,"pcToast","")},1e3))},me=function(e){var t=$getState().conf.videoFrameHwnd;q.info("putUpToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{put_up_hand_result:n});(0,E.notifyPutHandup)(r)},ve=function(e){var t=$getState().conf.videoFrameHwnd;q.info("putDownToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{put_down_hand_result:n});(0,E.notifyPutHandup)(r)},Ce=function(e){var t=$getState().conf.videoFrameHwnd;q.info("lockResultToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{lock_result:n});(0,E.notifyLockConfResult)(r)},Ie=function(e){var t=$getState().conf.videoFrameHwnd;q.info("unlockResultToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{unlock_result:n});(0,E.notifyLockConfResult)(r)},we=function(e){var t=$getState().conf.videoFrameHwnd;q.info("lockStateToNative",e);var n={state:e},r=(0,h.default)({frameHwnd:t},{lock_state:n});(0,E.notifyLockConfState)(r)},Se=t.actionMuteConf=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.CLIENTCONFIG.ISMOBILE&&(1===t?$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOMUTE)):$dispatch(coreUi.changeConfAllMute(constant.MUTE_STATE.MUTE_STATE_TOUNMUTE))),e.next=3,coreConf.muteConf(t,n);case 3:if(r=e.sent,a=r.errorCode,o=r.to_mute,0!==a){e.next=10;break}$dispatch(coreUi.changeConfAllMute(o)),e.next=17;break;case 10:if(q.error("mute conf failed ",o),i=o?0:1,$dispatch(coreUi.changeConfAllMute(i)),10!==a){e.next=16;break}return alert(language.VIDEO_MUTE_CONF_FAIL_WHEN_CONFPAGE_OPEN),e.abrupt("return");case 16:o?window.ToastNew(language.CONFERENCE_MUTE_ALL_FAILED,2):window.ToastNew(language.CONFERENCE_UNMUTE_ALL_FAILED,2);case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Ee=(t.handup=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={isHandup:t,attendee:n},e.next=3,coreConf.handupService(r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionMuteAllAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,r=$getState(),a=r.conf&&r.conf.isConfAllMute,o=r.conf&&r.conf.memberListInfo,!isNullOrEmpty(o)){e.next=8;break}return q.info("actionMuteAllAttendee memberList empty"),Se(t,n),e.abrupt("return");case 8:if(t!==constant.MUTE_STATE.MUTE_STATE_MUTE){e.next=16;break}if(q.info("userClick  actionMuteAllAttendee mute"),!window.isSupportiDo){e.next=13;break}return Se(constant.MUTE_STATE.MUTE_STATE_MUTE,n),e.abrupt("return");case 13:a?o.forEach(function(e){1!==e.is_self&&e.is_mute===constant.MUTE_STATE.MUTE_STATE_UNMUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&de(!0,e.number,!1)}):Se(constant.MUTE_STATE.MUTE_STATE_MUTE,n),e.next=28;break;case 16:if(t!==constant.MUTE_STATE.MUTE_STATE_UNMUTE){e.next=28;break}if(q.info("userClick  actionMuteAllAttendee unmute"),!window.isSupportiDo){e.next=21;break}return Se(constant.MUTE_STATE.MUTE_STATE_UNMUTE,n),e.abrupt("return");case 21:if(!a){e.next=26;break}return e.next=24,Se(constant.MUTE_STATE.MUTE_STATE_UNMUTE,n);case 24:e.next=28;break;case 26:return e.next=28,o.forEach(function(e){e.is_mute===constant.MUTE_STATE.MUTE_STATE_MUTE&&e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT&&de(!1,e.number,e.is_self)});case 28:e.next=33;break;case 30:e.prev=30,e.t0=e.catch(0),q.error("actionMuteAllAttendee error try catch",{error:e.t0.toJSON()});case 33:case"end":return e.stop()}},e,void 0,[[0,30]])}));return function(t,n){return e.apply(this,arguments)}}(),t.confBroadcastLocal=function(e){var t=$getState().conf.isSvcConf;if($getState().conf.isVideoConf&&!t)return window.CLIENTCONFIG.ISWIN?Ne(!!e.param.is_broadcast):($dispatch(coreUi.changeIsBroadcastLocal(!!e.param.is_broadcast)),void(window.CLIENTCONFIG.ISMOBILE&&window.JSToNativeToast(2e3,e.param.is_broadcast?language.LOCAL_BROADCASTING:language.CANCEL_BROADCASE)))}),Ne=function(e){if(e){q.info("confBroadcastLocal: show");var t=$getState().conf.videoFrameHwnd,n=y.getAvcFrameHandles();if(window.CLIENTCONFIG.ISWIN){var r={frameHwnd:0!==t?t:n,dialog_type:1,content_id:"LOCAL_BROADCASTING"};(0,T.showMessageBox)(r)}}},Te=(t.actionReInviteAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],n.push(t),!It(n)){e.next=6;break}return q.error("member number exceeds 400, can not create conf"),window.ToastNew(language.CONFERENCE_EXCEED_MAXMEMBERLIMIT.format("400"),2),e.abrupt("return");case 6:return e.next=8,coreConf.reInviteAttendee(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionReleaseChairman=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return q.error("chairmanNumber is null or undefined, can not releasechairman"),e.abrupt("return");case 3:return e.next=5,coreConf.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),be=t.confReleaseChairmanResult=function(e){if(0===e.param.ret){if(window.CLIENTCONFIG.ISMAC){var t=$getState().conf,n=t.isBigConf,r=t.svcShowPage;return n&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,null,!0),void(n&&0!==r&&O.SvcAttendanceManager.dealSvcPageSwitch(0))}$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.THE_CHAIRMAN_HAS_BEEN_RELEASED,2),window.isSupportiDo||Be()}else{if(window.CLIENTCONFIG.ISMAC)return;q.error("failed to release the chairman ",e.param.ret),window.ToastNew(language.FAILED_RELEASE_THE_CHAIR,2)}},Oe=t.actionRequestChairman=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(n)){e.next=3;break}return q.error("reqNumber is null or undefined, can not requestchairman"),e.abrupt("return");case 3:return r={chairmanPwd:t,reqNumber:n},e.next=6,coreConf.requestChairman(r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Le=t.confReqChairmanResult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("req chairman Result",t),window.isSupportiDo){e.next=4;break}return Ae(t),e.abrupt("return");case 4:if(n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS,a=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=16;break}i&&$dispatch(coreUi.showqusetchairman()),o&&(q.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 16:if(q.error("failed to request the chairman ",t.param.ret),!i){e.next=20;break}return o||(q.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Re();case 22:s=e.sent,(t.param.ret===constant.REQUEST_CHAIRMAN.CHAIR_EXITS||r)&&s?window.CLIENTCONFIG.ISMAC?window.confirm(language.CURRENT_CHAIRMAN_ALREADY):window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("NATIVE_CURRENT_CHAIRMAN_ALREADY",1):window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):t.param.ret!==constant.REQUEST_CHAIRMAN.CHAIR_PWD_ERR&&!a||s?window.CLIENTCONFIG.ISMAC?window.confirm(language.APPLICATION_FAILED):window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("NATIVE_FAILED_APPLY_THE_CHAIR",1):window.ToastNew(language.APPLICATION_FAILED,2):xe();case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ae=t.handleReqChairmanResultRest=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("enter handleReqChairmanResultRest "),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=$getState().conf.showRepChairmanError,o=$getState().conf.showqusetchairman,0!==t.param.ret){e.next=12;break}o&&$dispatch(coreUi.showqusetchairman()),a&&(q.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2),window.CLIENTCONFIG.ISMOBILE&&coreUi.setShowResetHideLogic(null),e.next=24;break;case 12:if(!r||!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=16;break}ur(),e.next=24;break;case 16:if(q.error("failed to request the chairman ",t.param.ret),!o){e.next=20;break}return a||(q.info("showRepChairmanErrorbool",a),$dispatch(coreUi.showRepChairmanError())),e.abrupt("return");case 20:return e.next=22,Re();case 22:i=e.sent,(10002===t.param.ret||r)&&i?window.ToastNew(language.CURRENT_CHAIRMAN_ALREADY,2):10002!==t.param.ret&&!r||i?window.ToastNew(language.APPLICATION_FAILED,2):window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&ke()}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(Me);case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ye=t.confEnterPwdToChairmanResultResult=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.error("smc failed to request the chairman first ",t.param),ur();case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),xe=t.popupRequestChairmanInputBox=function(){window.CLIENTCONFIG.ISMOBILE?window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD).then(function(e){if(e.ret)ke();else{var t=$getState().common.showResetfuc;t&&t()}}):window.confirm(language.FAILED_TO_CHAIRMAN_WANT_PASSWORD,!0).then(Me)},Re=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),q.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])}));return function(){return e.apply(this,arguments)}}(),Me=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,!(n=t.ret)){e.next=5;break}return e.next=5,cr();case 5:e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),q.error("againRequestPreservate:",e.t0);case 10:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(t){return e.apply(this,arguments)}}(),ke=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,cr();case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),q.error("againCompressRequest:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t){return e.apply(this,arguments)}}();t.actionCallOtherNum=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!It(t)){e.next=4;break}return q.error("member number exceeds 400, can not create conf"),window.ToastNew(language.CONFERENCE_EXCEED_MAXMEMBERLIMIT.format("400"),2),e.abrupt("return");case 4:return e.next=6,coreConf.addAttendee(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionAddAttendee=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=void 0,n=window.CLIENTCONFIG.ISMOBILE?a:t.selectBox.selectBox_tempSelectedList,!It(n)){e.next=7;break}return q.error("member number exceeds 400, can not add attendee"),window.ToastNew(language.CONFERENCE_EXCEED_MAXMEMBERLIMIT.format("400"),2),e.abrupt("return");case 7:return r=St(n),e.next=10,coreConf.addAttendee(r);case 10:coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.addAttendeeFromWelinkIT=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,_;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=t,r=""!==$getState().conf.confHandle,a=$getState(),o=a.myInfo,i=[],s=[],c="ConCreateMeeting"===window.getRoute()||"ConMembers"===window.getRoute()||"bookMeeting"===window.getRoute(),q.info("addAttendeeFromWelinkIT isAddContact : "+c),u=0;u<n.length;u++)f=n[u],f.contactsId||f.contactId||(f.contactId=f.calleeNumber),l=f.contactId,d="",f.mobilePhones&&(d=f.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),f.calleeNumber&&(f.calleeNumber=f.calleeNumber.replace(/-/g,"").replace(/\s*/g,"")),p={account:l,name:f.name,mobile:d,number:f.calleeNumber,bind_no:f.calleeNumber,email:f.email,home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:f.name},o.account===l&&(o.bind_no=f.calleeNumber),i.push(p),c&&(q.info("addAttendeeFromWelinkIT add single contact"),h={account:l,avatarContent:f.name,avatarImg:"",avatarPosition:"",isExpanded:!0,isSelected:!0,itemName:f.calleeNumber===d?"mobile":"bind_no",itemType:"contact",name:f.name,email:f.email,number:f.calleeNumber,pushCount:1,qPinyin:"",status:1,numberInfo:{bind_no:{number:f.calleeNumber},mobile:{number:d},home_phone:{number:""},office_phone:{number:""},short_phone:{number:""},other_phone:{number:""},other_phone2:{number:""},voip:{number:f.mobileVoips},ip_phone:{number:""}}},s.push(h));if(!c){e.next=15;break}q.info("addAttendeeFromWelinkIT pure add person"),$dispatch(coreUi.setContactSelectedList(s)),$dispatch(coreUi.changeTempSelectedListData(s)),Dt(),e.next=23;break;case 15:if(!r){e.next=22;break}return q.info("addAttendeeFromWelinkIT is in conf"),e.next=19,coreConf.addAttendee(i);case 19:coreUi.hideModal(),e.next=23;break;case 22:"CALL_CONNECTED"===$getState().call.callStatus||"VIDEO_CONNECTED"===$getState().call.callStatus?(Ot(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,!0,i),q.info("addAttendeeFromWelinkIT p2pTransToConf")):(q.info("addAttendeeFromWelinkIT action create conf"),_=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,ae(o,i,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,_));case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var Pe=t.actionHangupAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.hangupAttendeeService(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),De=(t.actionCallAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.callAttendee(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionRemoveAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.removeAttendeeService(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Ue=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(coreCall.getCallCount()>0)){e.next=3;break}return q.warn("already exist call, reject conf"),e.abrupt("return",!1);case 3:if(!G.isInReCall()){e.next=6;break}return q.warn("isInReCall, reject conf"),e.abrupt("return",!1);case 6:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=11;break}return e.next=10,window.isSimCardCall();case 10:e.t0=e.sent;case 11:if(!(n=e.t0)){e.next=15;break}return q.warn("isInSimCardCall, reject conf"),e.abrupt("return",!1);case 15:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.isHubEnv){e.next=18;break}return q.warn("ISBIGWIN or isHubEnv, reject conf"),e.abrupt("return",!1);case 18:return q.info("checkCanIncomingConf yes"),e.abrupt("return",!0);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Fe=t.confIncoming=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Ue(t.isVideo);case 2:if(n=e.sent){e.next=6;break}return Ge(t.confHandle),e.abrupt("return");case 6:return q.info("confIncoming, confHandle = "+t.confHandle),e.next=9,W.confIncoming(t);case 9:if(coreCommon.dispatchModuleEvent("confIncomingShown",t),H.confInComingRefreshRecent(),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=22;break}if(!t.isVideo){e.next=22;break}return e.next=15,coreCall.createVideoPreCheck();case 15:if(r=e.sent){e.next=22;break}if(q.info("userClick <video>mobile user 3/4G reject confincoming"),!t.confHandle){e.next=22;break}return q.info("confhangup,confhanled = "+t.confHandle),e.next=22,Ge(t.confHandle);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ge=t.rejectConf=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.rejectConfService(t),W.rejectConf(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Be=(t.acceptConf=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=5;break}return q.info("conf has ended, return"),window.ToastNew(language.END_CONFERENCE,2),W.rejectConf(t),e.abrupt("return");case 5:return e.next=7,coreCall.Call2GNet(!0);case 7:if(!e.sent){e.next=10;break}q.info("The network is 2G not support video conf"),n=0;case 10:return W.acceptConfStart(n),r={confHandle:t,isVideoType:n},e.next=14,coreConf.acceptConfService(r);case 14:a=e.sent,a&&0===a.result?(q.info("accept conf success"),W.accpetConfSuc()):(q.error("accept conf failed"),W.rejectConf(t)),H.acceptConfRefreshRecent();case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.doClearSipForSipLoginOnly=function(){var e=(0,S.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.sipserverDeregister();case 2:return e.next=4,coreAccount.clearnsipinfo();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSmcFirstRequest=function(){$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||coreConf.setIsSmcFirstRequestCharimanRest(!0)}),We=(t.handleClosePairConfPage=function(){if(q.info("BLE: start handleClosePairConfPage"),coreCall.resumeScreenStateWhenCallOrConfEnd(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.clearConfInfo()),coreCommon.SpkControl.getInstance().setHandsFree(!1),G.terminateReCall(),Pt(!0),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeCallId("")),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.clearPhoneAddrInfo()),W.closeConfPage(),window.CLIENTCONFIG.ISMOBILE){window.callOrConfEnded(),qn();"callMain"===window.getRoute()&&(q.info("BLE: mobile return origin page"),history.back())}coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade()},t.actionLeaveConf=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&"ios"===window.CLIENTCONFIG.PLATFORM&&window.iosLeaveConfDissmissDrawButton(),!$getState().synergismInfo.inPairConf){e.next=5;break}return q.info("BLE: actionLeaveConf, start leave pair meeting"),(0,P.pairStartEndMeeting)(!1),e.abrupt("return");case 5:return t=coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE_START_END"),n=coreCommon.TaskOptions.defaultOptions(),r=a?language.NO_MIC_TO_LEAVE_CONF:language.EXIT_CONFERENCE,t.addTask(W.closeConfPage,n,null,!0,!1,0,r),e.next=11,coreConf.leaveConf();case 11:t.addTask(W.clearAfterConfEnd,n,null,!0,!1,0);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Ve=(t.actionBroadcastAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("actionBroadcastAttendee，isBroadcast= "+t+",NNN="+n.substr(0,3)+"****"+n.substr(-3)),r=JSON.parse((0,f.default)($getState().conf.broadCastInfo)),void 0!==r.broadCastList&&(a="",o="",r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})),q.info("actionBroadcastAttendee",r),i={isBroadcast:t,number:n},e.next=7,coreConf.broadcastAttendeeService(i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.actionWatchAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreConf.confctrlWatchAttendee(t);case 2:n=e.sent,n&&0===n.result?(J=t,q.info("actionWatch attendee success: "+handlePhoneNumber(t))):q.error("actionWatch attendee failed: "+handlePhoneNumber(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confEnded=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("confEnded, reason is ",t.param.reason),n=language.END_CONFERENCE,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(r=window.pcLoginState())&&(n=language.PC_ONLINE_EXIST_CONFERNECE),W.closeConfPage(!1,!0,0,n),W.clearAfterConfEnd(!1,!0,t.param.reason);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),He=function(e){var t="";switch(e){case 0:t="[In Conf]";break;case 1:t="[Inviting]";break;case 2:t="[Entering conf]";break;default:t="[Hang Up]"}return t},$e=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r="";if(n&&(r=",CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND"),t&&!isNaN(t.length)&&t.length>0)for(var a=0;a<t.length;a++)r=n?r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+handlePhoneNumber(t[a].number)+",hand_state = "+t[a].hand_state+",is_broadcast = "+t[a].is_broadcast+",is_mute = "+t[a].is_mute+",media_type = "+t[a].media_type+",role = "+t[a].role+",state = "+t[a].state+He(t[a].state)+",is_self = "+t[a].is_self+",is_same_grade_mcu = "+t[a].is_same_grade_mcu:r+","+(t[a].name?t[a].name.length<=2?t[a].name.substr(0,1)+"**":t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):"")+",number:"+t[a].number.substr(0,3)+"****"+t[a].number.substr(-3);q.info(e,r)},Ye=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.svcOnLineAttendances,r=2===t,$dispatch(coreUi.changeIsBigConf(r)),window.CLIENTCONFIG.ISMOBILE?(q.info("notifyIsBigConfToNative isBigConf = "+t),r&&!coreConf.isConfChairMan()&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,!1,"big-conf-toast"),window.notifyIsBigConfToNative(t)):(L.SvcAtdManager.handleAtdlist(n),window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox("NATIVE_ENTER_ACTIVE_CONF",1):window.CLIENTCONFIG.ISMAC&&window.Toast(language.NATIVE_ENTER_ACTIVE_CONF,2,null,!0));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),qe=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r,a,o,i,s){var c,u,f,l,d,p,h,_;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.isInConf()){e.next=3;break}return q.info("handleAttendeeListUpdate not in conf, so return"),e.abrupt("return");case 3:if(c=$getState().conf.videoWatchNum,""!==c&&(u=!1,t.forEach(function(e){if(e.number===c)return u=!0,void(0!==e.state&&$dispatch(coreUi.changeVideoWatchNum("")))}),u||$dispatch(coreUi.changeVideoWatchNum(""))),q.info("service to attendee,isAllowUnmute is",o),$dispatch(coreUi.changeConfAllowUnmute(o)),!window.isSupportiDo){e.next=13;break}return q.info("window.isSupportiDo"),e.next=11,Ke(t,n,r,a,o,i,s);case 11:e.next=15;break;case 13:q.info("window.isSupportiDo else "),je(t,n,r,a,o);case 15:f=$getState().conf.isVideoConf,f||window.CLIENTCONFIG.ISMOBILE||k.ToolbarManager.setAudioConfTip(t),l=$getState().conf.selfNum,d=$getState().myInfo.bind_no,p=$getState().call.isMuteMic,h=$getState().conf.isConfMicMute,_=isNullOrEmpty(l)?d:l,q.info("cwp add isMuteMic： "+p+" isConfMicMute: "+h),p&&h!==p&&(q.info("handleAttendeeListUpdate mute Attendee isMuteMic： "+p+" isConfMicMute: "+h),h||de(!0,_,!0));case 24:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),je=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r,a,o){var i,s,c,u,f,l,d,p,h;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r&&$e("Rest handle AttendeeList Update logic",t),q.info("isAllMute = "+a),i=$getState().conf,s=i.isSvcConf,c=i.isAudience,!(!t||!c&&t.length<=0)){e.next=6;break}return q.error("memberlist is null"),e.abrupt("return");case 6:if(n&&(s&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&L.SvcAtdManager.setSubject(n),$dispatch(coreUi.changeConfSubject(n)),y.setSubject(n)),(0,b.dealItShortNumber)(t),!r){e.next=15;break}t&&t.length>1&&t.sort(b.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),(0,b.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)||Tt($getState().conf.searchText,t),e.next=37;break;case 15:return $dispatch(coreUi.changeConfAllMute(a)),$dispatch(coreUi.changeConfAllowUnmute(o)),e.next=19,(0,b.dealWithMemberListDataRest)(t);case 19:if(u=e.sent,f=u.currentMemberList,l=$getState().conf.isSvcConf,!f||!(f.length>1||l&&f.length>0)){e.next=33;break}if(!l){e.next=32;break}if(d=ze(f),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=30;break}return e.next=28,L.SvcAtdManager.handleSvcAtdList(d);case 28:e.next=32;break;case 30:return e.next=32,O.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(d);case 32:f.sort(b.attendeeSortFunc);case 33:coreConf.updateConfMemberList(f),$dispatch(coreUi.changeMemberListInfo(f)),(0,b.calcMemberCount)(f),isNullOrEmpty($getState().conf.searchText)||Tt($getState().conf.searchText,f);case 37:p=$getState(),h=p.conf.searchText,h&&(q.info("update search result: "),Tt(h)),k.ToolbarManager.setChairmanState(t),k.ToolbarManager.setMuteStateInAvc(t),ce();case 42:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Ke=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r,a,o,i,s){var c,u,f,l,d,p,h,_,m,v,C,I,w,S,E,T,A,x;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.length<21&&!r&&$e("iDo handle AttendeeList Update logic",t),t=(0,b.unique)(t),q.info("isAllMute = "+a),c=$getState().conf,u=c.isAudience,f=c.isSvcConf,!(!t||!u&&t.length<=0)){e.next=7;break}return q.error("memberlist is null"),e.abrupt("return");case 7:if(n&&(f&&window.CLIENTCONFIG.ISWIN&&$getState().conf.confSubject!==n&&L.SvcAtdManager.setSubject(n),q.info("ido attendee list confSubject = "+n.substr(0,1)+"***"),$dispatch(coreUi.changeConfSubject(n)),y.setSubject(n)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,b.dealItShortNumber)(t),!r){e.next=18;break}if(t&&t.length>1&&t.sort(b.attendeeSortFunc),$dispatch(coreUi.changeMemberListInfo(t)),(0,b.calcMemberCount)(t),isNullOrEmpty($getState().conf.searchText)){e.next=16;break}return e.next=16,Tt($getState().conf.searchText,t);case 16:e.next=72;break;case 18:return $dispatch(coreUi.changeConfAllMute(a)),$dispatch(coreUi.changeConfAllowUnmute(o)),e.next=22,(0,b.dealWithMemberListDataiDo)(t);case 22:if(l=e.sent,window.CLIENTCONFIG.ISWIN&&$n(),!l||!(l.length>1||f&&l.length>0)){e.next=38;break}if(!f){e.next=36;break}if(q.info("00000 run into SvcConf"),d=ze(l),!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN){e.next=33;break}return e.next=31,L.SvcAtdManager.handleSvcAtdList(d);case 31:e.next=36;break;case 33:return e.next=35,O.SvcAttendanceManager.handleSvcAttendancesUpdateEvent(d);case 35:q.info("handleSvcAttendancesUpdateEvent end");case 36:l.sort(b.attendeeSortFunc),q.info("currentMemberList sort end");case 38:return e.next=40,coreAccount.getLoginModel();case 40:if(p=e.sent,!p.isSupportAS){e.next=66;break}if(1!==(h=$getState().conf.selfRole)){e.next=58;break}return _=s||0,m=i||0,q.info("record",_),q.info("is_record",m),(0,M.isShowReacrdTypeLogic)(_),(0,M.isReacrdLogic)(m),m&&(0,M.haveRecordedLogic)(1),v={isReacrd:m,isHaveRecordPriviledge:Un(_)},e.next=54,N.NativeInterface.setParam(v);case 54:C=e.sent,q.info("setParam, res = ",C),e.next=66;break;case 58:if(0!==h){e.next=66;break}return(0,M.isReacrdLogic)(i),I={isReacrd:i},q.info("setParam, data.param.isReacrd = ",i),e.next=64,N.NativeInterface.setParam(I);case 64:w=e.sent,q.info("setParam, res = ",w);case 66:if(coreConf.updateConfMemberList(l),$dispatch(coreUi.changeMemberListInfo(l)),(0,b.calcMemberCount)(l),isNullOrEmpty($getState().conf.searchText)){e.next=72;break}return e.next=72,Tt($getState().conf.searchText,l);case 72:if(!window.CLIENTCONFIG.ISWIN&&!window.CLIENTCONFIG.ISBIGWIN){e.next=79;break}return e.next=75,k.ToolbarManager.setChairmanState(t);case 75:return S=$getState().conf,E=S.isBigConf,T=S.svcViewMode,A=S.svcOnLineAttendances,E&&(x=A.length,L.SvcAtdManager.setPageNum(T,x,!0)),e.next=79,k.ToolbarManager.setMuteStateInAvc(t);case 79:ce();case 80:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),Je=function(e,t){if(e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1},ze=function(e){var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||Je(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r},Xe=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:(0,b.dealWithConfSpeakerList)(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Qe=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("add contact to group from conf: "+n),n){e.next=4;break}return q.warn("group uri is not exit"),e.abrupt("return");case 4:return e.next=6,coreGroup.getGroupInfoFromDB(n);case 6:if(!(r=e.sent)||r.group_type!==constant.GROUP_TYPE.DISCUSS_GROUP){e.next=20;break}q.info("discuss group, deal add"),a=0;case 10:if(!(a<t.length)){e.next=18;break}return o=t[a].account,i={groupType:constant.GROUP_TYPE.DISCUSS_GROUP,groupId:n,account:o,groupName:r.name,displayName:r.name},e.next=15,coreGroup.addGroupMemberService(i);case 15:a++,e.next=10;break;case 18:e.next=21;break;case 20:q.error("not discuss group");case 21:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Ze=(t.diableSpeakerIcon=function(e){for(var t=$getState(),n=t.conf.confSpeaker,r=0;r<n.speaker.length;r++)if(e===n.speaker[r].number){n.speaker[r].isToMuted=!0;break}$dispatch(coreUi.updateConfSpeaker(n))},t.toggleShowMemberList=function(e){if($getState().conf.isShowMemberList&&e)return void q.info("now is showMemberList status,return");$dispatch(coreUi.changeIsShowMemberList(e))},t.cancleConfMemberlistMessage=function(){$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(q.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}),et=(t.handleShowMemberList=function(e){var t=(arguments.length>1&&void 0!==arguments[1]&&arguments[1],arguments.length>2&&void 0!==arguments[2]&&arguments[2]),n=$getState(),r=n.conf.isShowMemberListNew;if(e){var a=e.x,o=e.y,i=e.w,s=e.h,c=e.isMove;$dispatch(coreUi.changeMemberListPosition(a,o,i,s)),$dispatch(coreUi.changeMemberListIsMove(c))}if($dispatch(coreUi.changeIsShowMemberListNew()),r){Ze();var u={conf_member_list_off:1};N.NativeInterface.setParam(u)}if(t){var f={conf_member_list_off:0};N.NativeInterface.setParam(f)}},t.toggleShowConfInfoCard=function(e){$dispatch(coreUi.changeIsShowConfInfo(e))},t.updateMemberStateInfo=function(e){q.info("寻呼AttendeeList updateMemberStateInfo"),$dispatch(coreUi.changeMemberStateInfo(e))}),tt=t.updateconfRecallList=function(e){$dispatch(coreUi.changeconfRecallList(e))},nt=t.updateconfMsglList=function(e){$dispatch(coreUi.changeconfMsglList(e))},rt=t.handleBroadcaseResult=function(e){0===e.param.operation_rsp_reason?coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,resultParams:[1]}):coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,resultParams:[0,e.param.operation_rsp_reason]});var t=$getState().conf.isBroadByChairman,n=void 0;n=t?language.BROADCAST_SUCCEED:language.CANCEL_BROADCAST_SUCCEED,q.info("handleBroadcaseResult ----\x3e "+e.param.operation_rsp_reason);var r=[n,language.BROADCAST_FAILED_FF,language.BROADCAST_FAILED_2,language.BROADCAST_FAILED_3,language.BROADCAST_FAILED_4,language.BROADCAST_FAILED_5,language.BROADCAST_FAILED_6,language.BROADCAST_FAILED_7,language.BROADCAST_FAILED_8,language.BROADCAST_FAILED_9,language.BROADCAST_FAILED_10,language.BROADCAST_FAILED_11,language.BROADCAST_FAILED_12,language.BROADCAST_FAILED_FF],a=r[e.param.operation_rsp_reason]||r[r.length-1];if(window.CLIENTCONFIG.ISMOBILE)window.Toast(a,3,!1,"request-chairman-toast-reset");else if(window.CLIENTCONFIG.ISWIN&&$getState().conf.isVideoConf){var o=$getState().conf.videoFrameHwnd,i=y.getAvcFrameHandles(),s={frameHwnd:0!==o?o:i,dialog_type:2,content:a};(0,T.showMessageBox)(s)}else setTimeout(function(){window.Toast(a,2,!1,"pcToast","")},3e3)},at=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("onMultiViewBroadcast"),L.SvcAtdManager.handleMultiViewBroadcast(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ot=function(){q.info("registerConfEvent, Observer subscribe topics"),window.addEventListener("sipRegisterSuc",Cn),window.addEventListener("CloudLinkoffline",In);var e=new coreCommon.ObserverOpts("MODULE_CONFERENCE_START_END");coreCommon.Observer.subscribe("ConfConnected",le,e),coreCommon.Observer.subscribe("ConfEnded",Ve,e),coreCommon.Observer.subscribe("ConfInfoNotify",ue,e),coreCommon.Observer.subscribe("IsBroadcastLocal",Ee),coreCommon.Observer.subscribe("MuteAttendeeResult",pe),coreCommon.Observer.subscribe("lockResult",_e),coreCommon.Observer.subscribe("lockState",ge),coreCommon.Observer.subscribe("handupResult",he),coreCommon.Observer.subscribe("ConfIncoming",Fe),coreCommon.Observer.subscribe("HandleSvcConfWatchRet",En),coreCommon.Observer.subscribe("handleVideoWatchRes",Nn),coreCommon.Observer.subscribe("BroadcaseResult",rt),coreCommon.Observer.subscribe("onMultiViewBroadcast",at);var t=new coreCommon.ObserverOpts("MODULE_CONFERENCE");return t.setQueueParams({delay:10,timeoutMs:5e3}),coreCommon.Observer.subscribe("AttendeeListUpdate",qe,t),coreCommon.Observer.subscribe("BigConfInfoNotify",Ye),coreCommon.Observer.subscribe("AutocallMobile",st),coreCommon.Observer.subscribe("ConfSpeakerNotify",Xe),coreCommon.Observer.subscribe("AddToGroupFromConf",Qe),coreCommon.Observer.subscribe("ExceedGroupMemNum",Nt),coreCommon.Observer.subscribe("TransToConfResult",Lt),coreCommon.Observer.subscribe("VMRConfResult",kt),coreCommon.Observer.subscribe("ConfMTnumber",Zt),coreCommon.Observer.subscribe("SpeakerReport",vt),coreCommon.Observer.subscribe("UportalTokenErr",pt),coreCommon.Observer.subscribe("NonChairCtrlcaps",dt),coreCommon.Observer.subscribe("smcEnterDataConf",ht),coreCommon.Observer.subscribe("ReleaseChairmanResult",be),coreCommon.Observer.subscribe("ReqChairmanResult",Le),coreCommon.Observer.subscribe("GetDataPostponeConf",gt),coreCommon.Observer.subscribe("EnterPwdToChairmanResult",ye),coreCommon.Observer.subscribe("inviteAttendeeResult",bn),coreCommon.Observer.subscribe("transferChairman",rn),coreCommon.Observer.subscribe("callAttendeeResult",an),coreCommon.Observer.subscribe("OnMeetingHWreCallTimeOut",wn),coreCommon.Observer.subscribe("AudientResult",Mn),coreCommon.Observer.subscribe("ChangeDirectionResult",kn),coreCommon.Observer.subscribe("setRecordVideoResult",Bn),coreCommon.Observer.subscribe("recordVideoResult",Wn),coreCommon.Observer.subscribe("confStateDirectBroadCastIndresult",Vn),coreCommon.Observer.subscribe("recordVideoStatusChairmanIndResult",Hn),coreCommon.Observer.subscribe("changeConfHanlde",Kn),coreCommon.Observer.subscribe("changeConfSubject",Jn),coreCommon.Observer.subscribe("changeCallId",zn),coreCommon.Observer.subscribe("changeConfRole",Xn),coreCommon.Observer.subscribe("changeConfServerId",Qn),coreCommon.Observer.subscribe("changeVmrId",Zn),coreCommon.Observer.subscribe("changeIsSvcConf",er,e),coreCommon.Observer.subscribe("changeSsrcRange",tr),coreCommon.Observer.subscribe("changeGroupUri",z),coreCommon.Observer.subscribe("confInfoNotifyIsNotVideoConf",nr),coreCommon.Observer.subscribe("CallEndedInConf",ar,e),coreCommon.Observer.subscribe("SvcSessionModify",fe,e),Mt.wait(),coreCommon.ATOMIC_ACTION_RESULT.SUCCESS},it=t.registerConfEventAtomic=new coreCommon.AtomicAction("registerConfEvent",ot),st=t.AutocallMobile=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,_;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().call,r=n.callStatus,a=n.showCallToolBar,a&&""!==r){e.next=3;break}return e.abrupt("return");case 3:o=[],t.participants=ct(t.participants),i=0;case 6:if(!(i<t.participants.length)){e.next=25;break}if(s=t.participants[i],c=K.test(s.number),u=!1,s.state===s.oldState||c||!0===s.hasCallMobile||1===s.state){e.next=21;break}if(f=$getState().conf.confMsglList,s.hasCallMobile){e.next=19;break}return q.info("寻呼AttendeeList state="+s.state+",oldState="+s.oldState+",hasCallMobile="+s.hasCallMobile+",callnum="+handlePhoneNumber(s.number)+",hasTipMsg="+s.hasTipMsg),e.next=16,(0,b.searchContact)(s.number,s.name);case 16:if(l=e.sent,s.hasCallMobile=!0,l.length>0&&(d=l[0],p=lt(d),p.length>0))for(h=0;h<p.length;h++)_=$getState().conf.confRecallList,"mobile"===p[h].name&&_.indexOf(p[h].num)<0&&(d.number=p[h].num,u=!0,o.push(d),_=_+","+d.number,q.info("寻呼AttendeeList number=",handlePhoneNumber(d.number)),tt(_),ut(s.name,s.state,c,u),f=f+","+s.number);case 19:f.indexOf(s.number)<0&&(ut(s.name,s.state,c,u),f=f+","+s.number),nt(f);case 21:s.oldState=s.state;case 22:i++,e.next=6;break;case 25:return e.next=27,et(t.participants);case 27:return e.next=29,coreConf.addAttendee(o);case 29:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ct=t.handlepPrticipantsList=function(e){for(var t=$getState().conf.memberStateInfo,n=0;n<e.length;n++)if(t.length>0)for(var r=0;r<t.length;r++){t[r];e[n].participant_id===t[r].participant_id&&(isNullOrEmpty(t[r].oldState)?e[n].oldState=-1:(e[n].oldState=t[r].oldState,e[n].hasCallMobile=t[r].hasCallMobile))}for(var a=0;a<e.length;a++)(K.test(e[a].number)||0===e[a].state||2===e[a].state||3===e[a].state||4===e[a].state||7===e[a].state)&&(e[a].hasCallMobile=!0);return et(e),e},ut=function(e,t,n,r){t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER?!n&&r?ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!0):n?n&&ft(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):ft(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED?!n&&r?ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!0):n?n&&ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED,!1):t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST||t===constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY&&(!n&&r?ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!0):n?n&&ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1):ft(e,constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY,!1))},ft=t.setMsg=function(e,t,n){var r="";if(constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_EXIST===t?r=language.CONF_PART_STATUS_NO_EXIST:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_BUSY===t?r=language.CONF_PART_STATUS_BUSY:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_NO_ANSWER===t?r=language.CONF_PART_STATUS_NO_ANSWER:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_REJECT===t?r=language.CONF_PART_STATUS_REJECT:constant.CONF_PARTICIPANT_STATUS_TYPE.CONF_PARTICIPANT_STATUS_CALL_FAILED===t&&(r=language.CONF_PART_STATUS_CALL_FAILED.format(e)),n&&(r=r+", "+language.CALL_Mobile),""!==r){var a=$getState().call,o=a.callStatus;(a.showCallToolBar||"VIDEO_OUT"===o||"CALL_OUT"===o||"VIDEO_CONNECTED"===o||"CALL_CONNECTED"===o||"VIDEO_TRANSTO_CONF"===o||"CALL_TRANSTO_CONF"===o)&&(window.CLIENTCONFIG.ISMOBILE?window.ToastNew(r,2):coreUi.showConfTips(e,constant.CONF_MSG_TYPE.TYPE_OTHER_STATE,r))}},lt=t.checkUsersMobile=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.CALL_CONST.CALL_NUM_LIST,n=[];return t.forEach(function(t){if(e[t]&&K.test(e[t])){var r={name:t,num:e[t]};n.push(r)}}),n},dt=t.handleNonChairCtrlcaps=function(e){q.info("handle Non Chair Ctrlcaps");var t=!e.param.nonchair_cap.event_type[5];q.info("showMuteStatus: "+t),$getState().conf.showMuteStatus!==t&&$dispatch(coreUi.changeShowMuteStatus(t))},pt=t.handleUportalTokenErr=function(e){q.info("handleUportal[Token]Err = "+(0,f.default)(e)),$getState().login.sipLoginOnly||!e||!e.param||e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&e.param.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||coreAccount.actionRefreshToken()},ht=t.handleSmcEnterDataConf=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("handleSmcEnterDataConf,conf[key] length = "+t.confKey.length),n={},n.conf_uri="https://"+$getState().login.smcUri,n.passcode=t.confKey,n.getParamType=1,n.media_type=t.mediaType,t.confToken&&""!==t.confToken&&"0"!==t.confToken?n.sip_num=t.confToken:n.sip_num=$getState().login.sipImpi,e.next=9,coreConf.joinDataConf(n,t.confCallId);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_t=function(e){return(Math.floor(e/60)?Math.floor(e/60)+language.HOUR:"")+(e%60?e%60+language.MINUTE:"")},gt=t.handleGetDataPostponeConf=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{q.info("handleGetDataPostponeConf"),t&&t.param?(n=t.param,r=n.ret,a=$getState().conf,o=a.pastponeTime,i=a.isVideoConf,r===constant.MEDIA_X_ERROR_CODE.success?(q.info("userClick  handleGetDataPostponeConf "+language.MEETING_WILL_ENTENT.format(_t(o))),window.CLIENTCONFIG.ISWIN?L.SvcAtdManager.alertBox(language.MEETING_WILL_ENTENT.format(_t(o)),3):window.ToastNew(language.MEETING_WILL_ENTENT.format(_t(o)),2),xt()):(r===constant.MEDIA_X_ERROR_CODE.conference_time_out_max_time?window.CLIENTCONFIG.ISWIN&&i?L.SvcAtdManager.alertBox(language.MEETING_TIME_OUT_OF_MAX,3):window.ToastNew(language.MEETING_TIME_OUT_OF_MAX,2):window.CLIENTCONFIG.ISWIN&&i?L.SvcAtdManager.alertBox(language.PROLONGING_THE_FAILURE_OF_MEETING,3):window.ToastNew(language.PROLONGING_THE_FAILURE_OF_MEETING,2),q.error("handleGetDataPostponeConf 错误码："+t.param.ret,constant.MEDIA_X_ERROR_INFO[t.param.ret],o))):q.error("handleGetDataPostponeConf 结果异常")}catch(e){q.error("handleGetDataPostponeConf",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),mt=(t.UportalTokenErr=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=$getState().call,n=t.callStatus;if(!e&&(t.showCallToolBar||"VIDEO_OUT"===n||"CALL_OUT"===n||"VIDEO_CONNECTED"===n||"CALL_CONNECTED"===n||"VIDEO_TRANSTO_CONF"===n||"CALL_TRANSTO_CONF"===n))return q.info("UportalTokenErr,delay"),void coreAccount.getLoginModel().then(function(e){e.appstate===constant.APP_STATE.ONLINE&&$dispatch(coreUi.changeuportalTokenErr(!0))});q.info("UportalTokenErr"),mt()},t.UportalTokenErrAndLogout=function(){q.info("UportalTokenErrAndLogout"),coreAccount.getLoginModel().then(function(e){e.appstate===constant.APP_STATE.ONLINE&&(e.isResume&&(coreAccount.clearResumeService(),coreAccount.stopResume("UportalTokenErrAndLogout")),coreAccount.checkAndEndCall().then(function(){coreAccount.setOffline({}),window.endCallPromise&&(window.endCallPromise=null)}).then(function(){window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"loginCtn"!==window.getRoute()&&alert(language.RENEW_EXPIRED_REMINDER).then(function(){coreAccount.logout({}).then(function(){j&&clearTimeout(j),j=null,window.isRepeateCall=!1,q.info("logout success",window.isRepeateCall)})})}))})},t.setUportalTokenRefreshTimer=function(e){j&&clearTimeout(j),j=setTimeout(function(){q.info("timeout not respond allows refresh again",e),window.isRepeateCall=!1},e)},t.endCallAndLogout=function(){coreAccount.checkAndEndCall().then(function(){coreAccount.resume({message:"endCallAndLogout"})})}),vt=t.handleSpeakerReport=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("handleSpeakerReport",t.param.result);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Ct=(t.unregisterConfEvent=function(){q.info(" execute unregisterConfEvent "),window.removeEventListener("sipRegisterSuc",Cn),window.removeEventListener("CloudLinkoffline",In)},function(){var e=(new Date).getTime();return e=parseInt(e/1e3),q.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}),It=function(e){var t=$getState(),n=t.conf.memberListInfo,r=wt(n),a=r+e.length;if(a>400)for(var o=0;o<e.length;o++)!function(t){n.findIndex(function(n){return n.number===e[t].number&&n.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT})>=0&&a--}(o);return a>400},wt=function(e){for(var t=0,n=0;n<e.length;n++)e[n].state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&e[n].state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING||t++;return t},St=function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n],a={};r.item&&r.itemType&&"charItem"===r.itemType?a={account:"",name:r.item.displayName,mobile:Et(r.item.number),number:Et(r.item.number),email:r.item.email,bind_no:"",home_phone:"",office_phone:"",short_phone:"",other_phone:"",other_phone2:"",voip:"",ip_phone:"",q_pin_yin:r.item.pinyin,type:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE}:r.numberInfo?(a={account:r.account,name:r.name,bind_no:r.numberInfo.bind_no.number,mobile:r.numberInfo.mobile.number,home_phone:r.numberInfo.home_phone.number,office_phone:r.numberInfo.office_phone.number,office_phone2:r.officephone2,short_phone:r.numberInfo.short_phone.number,other_phone:r.numberInfo.other_phone.number,other_phone2:r.numberInfo.other_phone2.number,voip:r.numberInfo.voip.number,ip_phone:r.numberInfo.ip_phone.number,number:r.number,email:r.email,q_pin_yin:r.qPinyin,type:isNullOrEmpty(r.officephone2)?constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL},isNullOrEmpty(r.officephone2)?isNullOrEmpty(a.bind_no)||a.bind_no!==a.number?isNullOrEmpty(a.bind_no)||a.mobile!==a.number?a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_OUTSIDE:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_MOBILE:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_NORMAL:a.type=constant.ATTENDEE_TYPE.ATTENDEE_TYPE_TERMINAL):a={name:r.name,number:r.number},t.push(a)}return t},Et=function(e){var t="";return t=0===e.indexOf("+86")?e.substring(3,e.length):e,t.replace(/[^0-9]/gi,"")},Nt=function(){q.warn("member number exceeds 100, can not add to group"),alert(language.CONFERENCE_ADDMEM_EXCEED_GROUP.format("100"))},Tt=t.searchMemberList=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,a=(0,h.default)([],r),""!==f&&(a=(0,h.default)([],f)),""!==t.replace(/\s+/g,"")){e.next=7;break}return q.info("the first input can not enter a space"),$dispatch(coreUi.changeSearchText("")),e.abrupt("return");case 7:for(o=["name","q_pin_yin","number"],i=[],s=[],c=0;c<a.length;c++)u="",u=""===a[c].userInfo.q_pin_yin||null===a[c].userInfo.q_pin_yin||void 0===a[c].userInfo.q_pin_yin?window.pinyinUtil.getPinyin(a[c].userInfo.name.trim()):a[c].userInfo.q_pin_yin,i.push((0,h.default)({},a[c],{name:a[c].userInfo.name,q_pin_yin:u}));coreSearch.filterMatch({searchList:i,key:t,matchItem:o}).map(function(e){s.push(e.object)}),q.info("search conf member, result=",s.length),$dispatch(coreUi.changeSearchText(t)),$dispatch(coreUi.changeSearchMemberList(s));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),bt=(t.toggleConfOtherNumber=function(e){$dispatch(coreUi.changeConfOtherNumber(e))},t.handleShowEndConf=function(e){$dispatch(coreUi.changeShowEndConf(e)),q.info("handleShowEndConf",e)},t.upgrade2DataConfOrStartShare=function(){var e=(0,S.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==coreConf.isNeedUpdate2DataConf()){e.next=5;break}return e.next=3,bt();case 3:e.next=7;break;case 5:return e.next=7,coreConf.startShareScreen();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.upgradeAudioConf2Data=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(t=coreConf.isInConf())){e.next=9;break}return q.info("upgradeAudioConf2Data, isInfConf = true"),$dispatch(coreUi.hideDataShareButton(!0)),!1===coreConf.isConfChairMan()&&(q.error("not chairman，can not upgrade conf"),n=$getState().conf.videoFrameHwnd,r=y.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(a={frameHwnd:0!==n?n:r,dialog_type:1,content_id:"ATTENDEE_UPGRADE_DATA_NOTIFY"},(0,T.showMessageBox)(a))),e.next=7,coreConf.upgradeConf();case 7:e.next=11;break;case 9:return e.next=11,Ot(constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA,!1,[],!0);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Ot=t.p2pTransToConf=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,_,m,v,C,I,w=arguments.length>0&&void 0!==arguments[0]?arguments[0]:constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,S=arguments[1],E=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],N=arguments[3];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("deal p2p trans to conf, add size: "),t=$getState(),n=t.myInfo,r=t.call,a=r.callId,o=r.callNum,i=r.userInfo,s=$getState(),c=void 0,c=s.selectBox.selectBox_tempSelectedList,ie(c)){e.next=6;break}return e.abrupt("return");case 6:if(q.info("deal p2p trans to conf, callStatus: "+$getState().call.callStatus),"VIDEO_CONNECTED"===$getState().call.callStatus&&(q.info("video call trans to conf"),w|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO),oe()&&(w|=constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA),q.info("p2pTransToConf CreateDataConferenceFlag:"+oe()+",mediatype:"+w),coreUi.hideModal(),u=St(c),!1===S&&(u.length=0),f=void 0,f=window.CLIENTCONFIG.ENABLE_IT_MEETING?At(E,n,i,o):At(u,n,i,o),f.length>=1){e.next=18;break}return q.error("add member list is null"),e.abrupt("return");case 18:return q.info("p2p trans to conf, member list count is "+f.length),e.next=21,H.p2pTransToConfCreateGroup(u,n,i,o);case 21:return l=e.sent,d=void 0!==window.isMultiStream?parseInt(window.isMultiStream,10):1,p=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,_={callId:a,memberList:f,confSubject:n.name+language.CONFERENCE_SUBJECT_INFO,groupUri:l,isMultiStream:"VIDEO_CONNECTED"===$getState().call.callStatus?d:0,mediaType:w,userType:2,compereNumber:n.bind_no,selfNumber:n.bind_no,selfInfo:(0,h.default)({},n),userInfo:(0,h.default)({},i,{number:o}),noPassword:p,isAutoScreenShare:void 0!==N&&N},m=(w&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)===constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,W.callToConfStart(m),q.info("p2pTransToConf isMultiStreamValue: "+d),e.next=30,coreConf.p2pTransferConf(_);case 30:v=e.sent,C=v.errorCode,0===C?xt():(q.error("create conf failed"),I=Y.getCreateConfFailTitle(C),W.callToConfFail(I),7===C&&(window.CLIENTCONFIG.ENABLE_IT_MEETING?window.refreshImToken():se(C)));case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Lt=function(e){0!==e.param.ret?q.error("failed to trans to conf"):(coreCall.changeCallHoldStatusLogic(!1),coreCall.setTransferFlagHandle(!1,"handleTransToConfResult"),q.info("successed to trans to conf, handle: ",e.param.handle))},At=function(e,t,n,r){for(var a=[],o=0;o<e.length;o++)e[o].number!==t.bind_no&&e[o].number!==r&&a.push((0,h.default)({},e[o]));return a.push((0,h.default)({},t,{number:t.bind_no})),n.name?a.push((0,h.default)({},n,{number:r})):a.push((0,h.default)({},n,{number:r,name:r})),a},yt=t.getConfInfo=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={page_index:1,page_size:100},e.next=3,Mt.wait();case 3:return r.sub_conf_id=n,r.conf_id=t,e.next=7,coreConf.getConfInfoService(r);case 7:q.info("getConfInfo . confId =",t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),xt=(t.transferChairman=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.confHandle,r={confHandle:n,attendeeInfo:t},e.next=4,coreConf.transferChairmanService(r);case 4:q.info("transferChairman . attendeeInfo =",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionExportConfmember=function(){q.info("userClick export member list btn");var e=void 0;e=coreConf.getConfMemberListContent(),window.LOG_PATH,appService.writeFile(window.LOG_PATH,"tempFile.txt",e).then(function(e){appService.openFileOrFolder(e)},function(e){q.info("write failed:"+e)})},t.changeconfListInfo=function(e){$dispatch(coreUi.changeconfList(e))},t.getConfList=function(){var e=(0,S.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mt.wait();case 2:if(q.info("get_conf_list"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.pcLoginState()){e.next=6;break}if(!window.isOffline){e.next=6;break}return e.abrupt("return");case 6:return e.next=8,coreAccount.getLoginModel();case 8:if(t=e.sent,!t.isSupportAS){e.next=12;break}return q.info("new conf as is not supported get confList"),e.abrupt("return");case 12:return e.next=14,coreConf.getConfListService();case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Rt=t.subScribeConfListAndInfoRes=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("subscribe getConfList ,getConfInfo,cancelConf res"),e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n=t.isSupportAS,q.info("confctrlInit getConfList or subscribeConfList, isSupportAS = "+n),coreCommon.Observer.subscribe("ConfList",Wt),coreCommon.Observer.subscribe("ConfInfo",throttle(en,1e3)),coreCommon.Observer.subscribe("cancelConf",dr),coreCommon.Observer.subscribe("UportalBookConfResult",Q),n?coreConf.subscribeConfList():xt(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Mt=t.subScribeConfListAndInfoResAtomic=new coreCommon.AtomicAction("subScribeConfListAndInfoRes",Rt),kt=t.handleVMRConfResult=function(e){var t=$getState().conf;if(q.info("subscribe VMR Conf Result",e.result),0===e.result){var n=e.vmr_info.conference_right,r={key:"vmrInfo",value:(0,f.default)(e.vmr_info)};if(coreDb.saveUserConfig(r),0===n?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),q.info("conf right",n),$dispatch(coreUi.changeVMRResultcount(0)),""===e.vmr_info.conf_id&&0===e.vmr_info.spec_vmr_num)return $dispatch(coreUi.changehasVMRConfResult("NONE")),void $dispatch(coreUi.changeShowVMRorNot(!1));$dispatch(coreUi.changeVMRConfResult(e.vmr_info)),$dispatch(coreUi.changeShowVMRorNot(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:e.vmr_info.vmr_id,confId:e.vmr_info.conf_id,confSubject:"",maxParties:0})),$dispatch(coreUi.setUseFixedConfIDState(!0))}else t.vmrResultcount<5&&t.showvmrornot?$dispatch(coreUi.changeVMRResultcount(t.vmrResultcount+1)):$dispatch(coreUi.changeVMRResultcount(0)),$dispatch(coreUi.changehasVMRConfResult("FAILED"))},Pt=(t.handleNotShowGeneralPas=function(e){$dispatch(coreUi.changeNotShowGeneralPas(e)),q.info("changeNotShowGeneralPas = ",e)},t.handleNotShowChairPas=function(e){$dispatch(coreUi.changeNotShowChairPas(e)),q.info("changeNotShowChairPas = ",e)},t.handleIsConfPwdInputShow=function(e){$dispatch(coreUi.changeIsConfPwdInputShow(e)),q.info("changeIsConf[Pwd]InputShow = ",e)},t.handleIsShowJoinButton=function(e){q.info("changeIsShowJoinButton = "+e),$dispatch(coreUi.changeIsShowJoinButton(e))}),Dt=(t.createTempMeeting=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState(),n=St(t.common.selectContactModal_selectedList),r=t.common.groupName,a=t.myInfo,n.push(a),o=Sn(n),i=$getState().conf.isCreateMeetingPassword||$getState().conf.showvmrornot?0:1,ae(a,o,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,i),coreUi.hideModal();case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createTempMeetingOfAddMember=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("createTempMeeting add participants"),t=$getState(),n=t.selectBox.selectBox_saveSelectedList,r=t.selectBox.selectBox_tempSelectedList,a=t.selectBox.selectBox_savePhoneSelectedList,0!==a.length&&(a=Ut(a,n),r=r.concat(a)),$dispatch(coreUi.setSaveSelectedList(n.concat(r)));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Ut=t.filterDuplicateData=function(e,t){return e.filter(function(e){return-1===t.findIndex(function(t){return t.itemType&&"charItem"===t.itemType&&t.item.displayName===e.item.displayName&&t.item.id===e.item.id&&t.item.numberName===e.item.numberName&&t.item.number===e.item.number})})},Ft=(t.deleteClickParticipants=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("userClick  createTempMeeting delete participants"),n=$getState(),r=n.selectBox.selectBox_saveSelectedList,a=t.item&&t.itemType&&"charItem"===t.itemType,o=[],o=a?r.filter(function(e){return!e.item||e.item.id!==t.item.id&&e.item.displayName!==t.item.displayName}):r.filter(function(e){return!!e.item||(isNullOrEmpty(t.account)?e.number!==t.number||e.account!==t.account:e.number!==t.number)}),i=n.common.groupName,s=n.myInfo,$dispatch(coreUi.setSaveSelectedList(o)),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=t.selfInfo&&t.selfInfo.account)){e.next=8;break}return e.next=4,window.getContactFromNet(n);case 4:return r=e.sent,e.abrupt("return",r);case 8:q.info("createConf cannot have selfInfo account");case 9:return e.abrupt("return",null);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Gt=(t.createAMeeting=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={},!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=6;break}return e.next=4,Ft(t);case 4:r=e.sent,isNullOrEmpty(r)||(r.name&&(t.selfInfo.name=r.name),a=$getState(),o=a.myInfo,r.mobileCodeAll&&(i=r.mobileCodeAll.replaceAll("+86-",""),o.mobile=i,t.selfInfo.mobile=i),$dispatch(coreUi.updateMyInfo((0,I.default)({},o))));case 6:(0,h.default)(n,t.selfInfo),s=St(t.memberList),s.push(n),c=Sn(s),u=$getState().conf.isCreateMeetingPassword?0:1,ae(t.selfInfo,c,{group_id:""},t.mediaType,u,!0,t.confSubject,t.type,t.recordType,t.vmrConfId),coreUi.hideModal();case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createAMeetingFromHis=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},(0,h.default)(n,t),r=$getState().myInfo,window.CLIENTCONFIG.ENABLE_IT_MEETING&&r&&r.short_phone&&(q.info("debug info replace bind_no with short_phone"),r.bind_no=r.short_phone),a=n.memberList,a.push(r),o=Sn(a),i=isNullOrEmpty(n.general_pwd)?1:0,ae(n.selfInfo,o,{group_id:""},n.mediaType,i,!0,n.confSubject,n.type,n.recordType),coreUi.hideModal();case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createTempTypeMeeting=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("create  instant conference"),n=$getState(),r=void 0,r=St(n.selectBox.selectBox_saveSelectedList),a=n.common.groupName,o=n.myInfo,r.push(o),i=Sn(r),s=n.conf.isCreateMeetingPassword?0:1,ae(o,i,{group_id:""},t.mediaType,s,!0,t.confSubject,t.type,t.recordType,t.vmrConfId),coreUi.hideModal();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.createConfFromHistory=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=n,a=$getState().myInfo,r.push(a),o=Sn(r),i=isNullOrEmpty(t.general_pwd)?1:0,s=7,ae(a,o,{group_id:""},t.media_type,i,!0,t.conf_subject,s,0),coreUi.hideModal();case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.saveConThemeName=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(e){var a=$getState(),o=a.myInfo;$dispatch(coreUi.setConThemeName(""+o.name+language.CONFERENCE_SUBJECT_INFO))}else isNullOrEmpty(n)?$dispatch(coreUi.setConThemeName("")):$dispatch(coreUi.setConThemeName(n[0]))}),Bt=t.initCreateMettingContent=function(){$dispatch(coreUi.meetingTypeValue(0))},Wt=(t.judgeCreateNewConf=function(){if(coreCall.getCallCount()>0)return q.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);Gt(!0),Bt(),$dispatch(coreUi.changeCreatNewConfName("")),window.goRoute("ConCreateMeeting")},t.saveMettingTypeValue=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.meetingTypeValue(t));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfList=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,l,p,h,_,m,v,C,I;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.update_type,q.info("push conference list ,updateType",n),0===t.result){e.next=5;break}return q.info("subscribe conference list failed.result != 0"),e.abrupt("return");case 5:if(t.conf_list_info&&t.conf_list_info.length>0&&$dispatch(coreUi.changeConfPageShowType(!0)),0!==n&&void 0!==n){e.next=34;break}if(q.info("get_conf_list result ="+t.result+"length="+t.conf_count),r=$getState().conf.conflist,!(t.conf_count>0)){e.next=23;break}if((0,f.default)(r)!==(0,f.default)(t.conf_list_info)){e.next=12;break}return e.abrupt("return");case 12:for(a=[],o=$getState().conf.currentConfInfo,i=0;i<t.conf_list_info.length;i++)s=t.conf_list_info[i].start_time,t.conf_list_info[i].start_time=Vt(s),c=t.conf_list_info[i].end_time,t.conf_list_info[i].end_time=Vt(c),a.push(t.conf_list_info[i].conf_id);u=window.getRoute(),-1===a.indexOf(o.conf_id)&&(q.info("Conf:ID"+o.conf_id+" is over"),!window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isShowPcConfInfo&&$dispatch(coreUi.changeShowPcConfInfoFlag(!1)),window.CLIENTCONFIG.ISMOBILE&&"mConferenceInfo"===u&&window.goRoute("main/conference")),t.conf_list_info.sort(jt),$dispatch(coreUi.changeconfList(t.conf_list_info)),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Ht(t.conf_list_info),gr(),e.next=32;break;case 23:if(0!==t.conf_count){e.next=32;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Ht(t.conf_list_info),!isNullOrEmpty(r)){e.next=27;break}return e.abrupt("return");case 27:"Detail"===$getState().conf.curConfPage&&_n("Main"),$dispatch(coreUi.changeconfList([])),$dispatch(coreUi.changecurrentConfInfo([])),gr(),q.info("subscribe conference list result.result = 0");case 32:e.next=48;break;case 34:q.info("get conf list add"+t.result+"length="+t.conf_count),l=$getState(),p=l.conf.conflist,h=[].concat((0,d.default)(p)),_=t.conf_list_info[0],m=Vt(_.start_time),v=Vt(_.end_time),_.start_time=m,_.end_time=v,C=_.conf_id,I=h.findIndex(function(e){return e.conf_id===C}),1===n?(-1===I?h.push(_):(h.splice(I,1),h.push(_)),h.sort(jt)):2===n&&-1!==I&&h.splice(I,1),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Ht(h),$dispatch(coreUi.changeconfList(h)),gr();case 48:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Vt=t.getConfTimedec=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date,t=new Date(e.replace(/-/g,"/")),n=t.getTime(),r=6e4*t.getTimezoneOffset(),a=new Date(n-r).format("yyyy/MM/dd hh:mm");return q.info("timeResult",a),a},Ht=(function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.conflist;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=0;case 1:if(!(t<a.length)){e.next=11;break}return n={account:a[t].scheduser_name},e.next=5,Xt(n);case 5:r=e.sent,q.info("searchContactByInfo success"),!1!==r&&(a[t].name=r[0].name,a[t].native_name=r[0].native_name);case 8:t++,e.next=1;break;case 11:$dispatch(coreUi.changeconfList(a));case 12:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,_,m,v,C,I,w,S,E,N,T,b;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.queryConfReady,r=$getState().conf.isEnableHistoryConfList,q.info("enableHistory in update history conf list",r),r){e.next=5;break}return e.abrupt("return");case 5:n||(q.info("querying db conf record"),$dispatch(coreUi.changeTempConfList(t))),a=$getState().conf.allConfList,o=a.filter(function(e){return!e.isInPast}),i=a.filter(function(e){return e.isInPast}),s=[],(0,h.default)(s,o),u=(0,h.default)({},t),f=0,l=0,d=25,q.info("update all conf list"),p=0;case 17:if(!(p<s.length)){e.next=42;break}s[p].isInPast=!0,e.t0=g.default.keys(u);case 20:if((e.t1=e.t0()).done){e.next=32;break}if(_=e.t1.value,!u[_]||u[_].conf_id!==s[p].conf_id){e.next=30;break}if(s[p].isInPast=!1,!$t({oldconf:s[p],newconf:u[_]})){e.next=28;break}return Yt({oldconf:s[p],newconf:u[_]}),e.next=28,Kt(s[p]);case 28:return u[_]=null,e.abrupt("break",32);case 30:e.next=20;break;case 32:if(!(!0===s[p].isInPast&&new Date(s[p].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=39;break}return e.next=35,Kt(s[p]);case 35:q.info("save conf record when conference end"),m=$getState().conf.allConfInfo,v=m.get(s[p].conf_id),v&&v.conf_list_info&&v.conf_list_info.guest_join_uri&&(v.conf_list_info.guest_join_uri="",_r(v.conf_list_info,v.attendee));case 39:p++,e.next=17;break;case 42:C=[],I=0;case 44:if(!(I<s.length)){e.next=56;break}if(!(!1===s[I].isInPast||new Date(s[I].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=49;break}C.push(s[I]),e.next=53;break;case 49:return w={},w.confid=s[I].conf_id,e.next=53,coreDb.delcallrecord(w);case 53:I++,e.next=44;break;case 56:s=C;for(S in u)u[S]&&(u[S].isInPast=!1,E=new Date(u[S].start_time.replace(/-/g,"/")).valueOf(),N=new Date(u[S].end_time.replace(/-/g,"/")).valueOf(),u[S].starttime=E,u[S].duration=N-E,s.push(u[S]),yt(u[S].conf_id,u[S].cycle_conf_id));if(!((f=i.length+s.length-(0,c.default)(u).length-d)>0)){e.next=72;break}q.info("too many records, delete records count ",f),T=0;case 62:if(!(T<f)){e.next=71;break}return b={},b.confid=i[T].conf_id,q.info("db test del conf record"),e.next=68,coreDb.delcallrecord(b);case 68:T++,e.next=62;break;case 71:i.splice(0,f);case 72:s.push.apply(s,i),s=qt(s),$dispatch(coreUi.changeAllConfList(s));case 75:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),$t=function(e){var t=e.oldconf,n=e.newconf;return t.start_time!==n.start_time||t.end_time!==n.end_time||t.conf_subject!==n.conf_subject||t.media_type!==n.media_type},Yt=function(e){var t=e.oldconf,n=e.newconf;t.conf_subject=n.conf_subject,t.start_time=n.start_time,t.end_time=n.end_time,t.starttime=new Date(n.start_time.replace(/-/g,"/")).valueOf(),t.endtime=new Date(n.end_time.replace(/-/g,"/")).valueOf(),t.duration=t.endtime-t.starttime,t.media_type=n.media_type},qt=function(e){q.info("sort all conf list by start time");var t=[];e.sort(jt),q.info("sort all conf list by status");for(var n in e)!0===e[n].isInPast&&t.push(e[n]);for(var r in e)!1===e[r].isInPast&&t.push(e[r]);return t},jt=function(e,t){return new Date(e.start_time.replace(/-/g,"/")).valueOf()-new Date(t.start_time.replace(/-/g,"/")).valueOf()},Kt=(t.delConfRecord=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.allConfList,r=[],(0,h.default)(r,n),isNullOrEmpty(r)){e.next=15;break}a=0;case 5:if(!(a<r.length)){e.next=15;break}if(t.conf_id!==r[a].conf_id){e.next=12;break}return q.info("del conf record, current conf count",r.length),r.splice(a,1),q.info("del conf record, new conf count",r.length),$dispatch(coreUi.changeAllConfList(r)),e.abrupt("break",15);case 12:a++,e.next=5;break;case 15:return o={confid:t.conf_id},e.next=18,coreDb.delcallrecord(o);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("save conference record after delete those with same conf id"),e.next=3,coreDb.delcallrecord({confid:t.conf_id});case 3:return n={},(0,h.default)(n,t),e.next=7,coreDb.saveConfRecord(n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),Jt=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(n=[],r={},a=0;a<t.length;a++)r.number=t[a].number,r.name=t[a].name,n.push(r),r={};return e.abrupt("return",(0,f.default)(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),zt=(t.getInitHistoryConfList=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return $dispatch(coreUi.changeQueryConfReady(!1)),e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n={starttime:9999999999999,limitcount:50},e.next=7,coreDb.queryAllConfRecord(n);case 7:r=e.sent,r.reverse(),q.info("db query all conf records count ",r.length),a=[],isNullOrEmpty(r)?q.info("db test no conf record"):(a=zt(r),window.CLIENTCONFIG.ENABLE_IT_MEETING&&t.isSupportAS&&hr(a),o=$getState().conf.conflist,a.push.apply(a,o),a=qt(a),$dispatch(coreUi.changeAllConfList(a))),$dispatch(coreUi.changeQueryConfReady(!0)),q.info("change query ready true"),i=[],(0,h.default)(i,$getState().conf.tempConfList),0!==i.length&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&Ht(i);case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){for(var t=[],n={},r=0;r<e.length;r++){var a=e[r],o=isNullOrEmpty(a.exparams)?{}:JSON.parse(a.exparams),i=new Date(a.starttime).format("yyyy/MM/dd hh:mm"),s=new Date(a.starttime+a.duration).format("yyyy/MM/dd hh:mm");n.conf_id=a.confid,n.general_pwd=a.confpasscode,n.confmembers=isNullOrEmpty(a.confmembers)?{}:JSON.parse(a.confmembers),n.groupid=a.groupid,n.starttime=a.starttime,n.end_time=s,n.start_time=i,n.duration=a.duration,n.media_type=isNullOrEmpty(o.mtype)?0:parseInt(o.mtype),n.record_type=o.rtype?o.rtype:0,n.scheduser_name=o.sname,n.scheduser_number=o.snum,n.isInPast=o.past,n.conf_subject=o.subj,n.cycle_conf_id=o.ccid?o.ccid:"0",t.push(n),n={}}return t}),Xt=t.searchContactByInfo=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryContact(t);case 2:if(n=e.sent,r=!1,n&&n.length>0?(q.info("query from local success"),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1?n=[]:n.length<1&&(r=!0)):r=!0,!r){e.next=12;break}return q.info("can not find in local, query contact from server"),e.next=9,coreContact.searchServerContact(t.account);case 9:a=e.sent,a.serverContactResult=a.userInformationList,void 0===a?n=!1:a.serverContactResult&&(q.info("query contact from server success"),(0,h.default)(n,a.serverContactResult),name&&name!==t.account&&(n=n.filter(function(e){return e.name===name})),n.length>1&&(n=[]));case 12:return e.abrupt("return",n);case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Qt=t.handleConfInfostate=function(e){$dispatch(coreUi.changeConfInfoState(e)),q.info("isConfInfostate =",e)},Zt=t.handleConfMTnumber=function(e){q.info("handleConfMTnumber = "+(0,f.default)(e));var t="M"+e.attendee_vc.mcu_num+"T0";$dispatch(coreUi.changevideoMultipicNum(t))},en=t.handleConfInfo=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,_,m,v;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleConfInfo,data.result = ",t.result),n=void 0,0!==t.result){e.next=37;break}return n&&clearInterval(n),L.SvcAtdManager.reportConfInfo(t.get_conf_info_result),r=isNullOrEmpty(t.get_conf_info_result.conf_list_info)?{}:t.get_conf_info_result.conf_list_info,$getState().conf.confServerId&&$getState().conf.confServerId===r.conf_id&&r.guest_join_uri&&coreCommon.dispatchModuleEvent("pluginConfInfoNotify",(0,I.default)({},r)),jn(r),a=t.get_conf_info_result.conf_list_info,o=a.chairman_pwd,i=a.conf_id,s=a.vmr_id,(""===o||isNaN(o))&&(o=a.general_pwd),c=isNullOrEmpty(s)?i:s,u={pstconfparam:{confid:c,access_code:a.access_number,conf_paswd:o},call_type:1},f=a.media_type,l=coreCommon.isVideoConf(f),d=$getState(),p=d.conf,h=p.confServerId,_=p.vmrId,q.info("handleConfInfo，current confServerId is "+h+"getconfinfo return confid is "+i),h===i&&(m=a.general_pwd,m?window.CLIENTCONFIG.ISWIN&&N.NativeInterface.setParam({general_pwd:a.general_pwd,chairman_pwd:a.chairman_pwd,conf_pwd:o}):window.CLIENTCONFIG.ISWIN&&N.NativeInterface.setParam({general_pwd:"",chairman_pwd:a.chairman_pwd,conf_pwd:o})),fn(0===t.get_conf_info_result.num_of_addendee?[]:t.get_conf_info_result.attendee),q.info("conf info attendees count is :",t.get_conf_info_result.num_of_addendee),a.start_time=Vt(a.start_time),a.end_time=Vt(a.end_time),e.next=26,coreAccount.getLoginModel();case 26:v=e.sent,v.isSupportAS&&a.join_advance_time&&(a.join_advance_time=Vt(a.join_advance_time)),_r(a,t.get_conf_info_result.attendee),un(a),Qt("success"),$dispatch(coreUi.changehasConfInfo("yes")),Dn(a.scheduser_name),window.lastSelectedId={confId:i,cycleId:a.cycle_conf_id},tn(t),e.next=39;break;case 37:nn(t),t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT&&t.result!==constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR||pt();case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),tn=(function(){var e=(0,S.default)(g.default.mark(function e(t,n,r){var a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=t.access_number,t.start_time=Vt(t.start_time),(0,D.joinPairConf)(t);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState().conf.confServerId,r=3,t=setInterval((0,S.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,yt(n,"0");case 2:r--,0===r&&clearInterval(t);case 4:case"end":return e.stop()}},e,void 0)})),15e3);case 3:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.get_conf_info_result.attendee,r=t.get_conf_info_result.conf_list_info.conf_id,isNullOrEmpty(n)){e.next=27;break}return q.info("the length of attendeeList is",n.length),a=[],(0,h.default)(a,$getState().conf.allConfList),e.next=8,Jt(n);case 8:o=e.sent,i=0;case 10:if(!(i<a.length)){e.next=27;break}if(a[i].conf_id!==r||isNullOrEmpty(o)||!isNullOrEmpty(a[i].confmembers)&&a[i].confmembers.length===o.length){e.next=24;break}if(!(s=$getState().conf.queryConfReady)){e.next=24;break}if(a[i].confmembers=o,$dispatch(coreUi.changeAllConfList(a)),q.info("change conf list when conf member updated, conf count ",a.length),!(new Date(a[i].start_time.replace(/-/g,"/")).valueOf()<=(new Date).valueOf())){e.next=23;break}return e.next=20,Kt(a[i]);case 20:q.info("save conf record when update conf info"),e.next=24;break;case 23:q.info("reject save conf record because of start time");case 24:i++,e.next=10;break;case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),nn=function(e){"success"!==$getState().conf.isConfInfostate&&Qt("fail");var t=$getState().conf.confSubject;q.info("subscribe conference info fail.data = ",e);var n={access_number:"",chair_join_uri:"",chairman_UUID:"",chairman_pwd:"",conf_id:"",conf_state:2,conf_subject:t||"",cycle_conf_id:"",enable_conf_sign_in:0,end_time:"",general_pwd:"",guest_UUID:"",guest_join_uri:"",join_advance_time:"",media_type:2,record_aux_stream:0,record_type:0,scheduser_name:"",scheduser_number:"",sign_in_time_before_conf:0,size:0,start_time:"",token:"",vmr_id:""};$getState().conf.isShowPcConfInfo&&$dispatch(coreUi.changeShowPcConfInfoFlag(!1)),un(n)},rn=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info(" dealTransferChairmanResult,data.param.ret = ",t.param.ret),n=0===t.param.ret?language.TRANSFER_CHAIRMAN_SUCCESS:language.TRANSFER_CHAIRMAN_FAILED,r=0===t.param.ret?"Right2":"",window.CLIENTCONFIG.ISWIN?coreConf.getSvcAtdManager().alertBox(n,3):window.Toast(n,2);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),an=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.SvcAtdManager.callAttendeeResult(t.param);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),on=t.saveTempMediaxInfo=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.tempMediaxAddress,r=t.tempMediaxPort,q.info("saveTempMediaxInfo: "+n+": "+r),a=[{key:"tempMediaxAddress",value:n},{key:"tempMediaxPort",value:r}],e.next=5,coreDb.saveLoginSettings({args:a});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),sn=(t.getVRMList=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,t.isSipRegSuc()){e.next=5;break}return e.abrupt("return");case 5:return e.next=7,coreConf.getVMRListService();case 7:n=e.sent,q.info("get getvmrlist = ",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("get As info from db"),e.next=3,coreDb.queryUserConfig({key:"asInfo"});case 3:if(t=e.sent,t.value){e.next=6;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 6:return n=JSON.parse(t.value),q.info("query asInfo from db",n),e.next=10,coreAccount.getLoginModel();case 10:return r=e.sent,r.isSupportAS=n,e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),cn=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return q.info("getVmrInfoToDb is bigwin, return"),e.abrupt("return");case 3:return q.info("getVmrInfoToDb"),e.next=6,coreDb.queryUserConfig({key:"vmrInfo"});case 6:if(t=e.sent,t.value){e.next=9;break}return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 9:if(n=JSON.parse(t.value),r=n.conference_right,q.info("query confRight from db",r),0===r?$dispatch(coreUi.toggleConfRight(!1)):$dispatch(coreUi.toggleConfRight(!0)),""!==n.conf_id){e.next=18;break}$dispatch(coreUi.changehasVMRConfResult("NONE")),$dispatch(coreUi.changeShowVMRorNot(!1)),e.next=26;break;case 18:return $dispatch(coreUi.changeVMRConfResult(n)),$dispatch(coreUi.changeShowVMRorNot(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:n.vmr_id,confId:n.conf_id,confSubject:"",maxParties:0})),$dispatch(coreUi.setUseFixedConfIDState(!0)),e.next=24,coreDb.queryUserConfig({key:"curDBInfoForCreateConf"});case 24:a=e.sent,a.value&&(o=JSON.parse(a.value),$dispatch(coreUi.changeCurCreateConfIDItem({idType:o.idType,vmrId:o.vmrId,confId:o.confId,confSubject:o.confSubject,maxParties:o.maxParties})),$dispatch(coreUi.setCreateUseFixedConfIDState(o.isCreateUseFixedConfID)));case 26:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 27:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),un=(t.getVmrInfoToDbAtomic=new coreCommon.AtomicAction("getVmrInfoToDb",cn),t.getAsInfoToDbAtomic=new coreCommon.AtomicAction("getAsInfoToDb",sn),t.oneJoinVMR=function(e){q.info("enter conf one Key Enter vmr Conf");var t=e.access_number;if(coreCall.getCallCount()>0)return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),q.error("oneJoinVMR already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);rr(t,e.conf_id,e.chairman_pwd,!0)},t.changeCurrentConfInfo=function(e){q.info("change Current Conference Info ."),$dispatch(coreUi.changecurrentConfInfo(e))}),fn=t.changeConfAttendeeInfo=function(e){q.info("change Current Conference Attendee Info."),$dispatch(coreUi.changecurrentConfAttendeeInfo(e))};t.changeHistoryConfInfo=function(e){q.info("change Current History Conference Info."),$dispatch(coreUi.changecurrentHistoryConfInfo(e))},t.changeHistoryAttendeeInfo=function(e){q.info("change history conf attendee info"),$dispatch(coreUi.changeHistoryAttendeeList(e))},t.changeBookConfSubject=function(e){q.info("change create conf subject"),$dispatch(coreUi.changeCreateConfSubject(e))},t.enterConfInConfInfo=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("enterConfInConfInfo"),""===s&&(q.warn("enterConfInConfInfo input is null, so get from ducks"),s=$getState().conf.currentConfInfo),t=s.conf_subject,$dispatch(coreUi.changeConfSubject(t)),y.setSubject(t),n=s.media_type,r=coreCommon.isVideoConf(n),a=s.chairman_pwd,(""===s.chairman_pwd||isNaN(s.chairman_pwd))&&(q.info("enterConfInConfInfo chair pwd is null"),a=s.general_pwd),o=isNullOrEmpty(s.vmr_id)?s.conf_id:s.vmr_id,i=s.access_number,rr(i,o,a,r);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.oneKeyEnterPairConf=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("oneKeyEnterPairConf"),""===o&&(o=$getState().conf.currentConfInfo),t=o.conf_subject,$dispatch(coreUi.changeConfSubject(t)),y.setSubject(t),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=10;break}return e.next=9,window.isSimCardCall();case 9:e.t0=e.sent;case 10:if(!(n=e.t0)){e.next=16;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),q.error("oneKeyEnterPairConf already in sim card call, can not create conf"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 16:if(!coreConf.isInConf()){e.next=20;break}return q.error("oneKeyEnterPairConf already exist conference, can not create conf"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 20:return e.next=22,coreUi.checkMobileMultiDevice();case 22:if(!0!==(r=e.sent)){e.next=27;break}return q.info("multi device logined, return"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 27:if(!(coreCall.getCallCount()>0)){e.next=31;break}return q.error("oneKeyEnterPairConf already exist call, can not create conf"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return");case 31:return q.info("oneKeyEnterPairConf,enter conf oneKeyEnterConf"),a=o.access_number,e.next=35,coreCall.pairCallOut(o,{number:a});case 35:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyWithConfPas=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("enterConfByIdWithConfPas"),e.next=3,re(!0,!1,f);case 3:if(n=e.sent,0===n.code){e.next=10;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),q.error("enterConfByIdWithConfPas,resOfCheck is false"),e.abrupt("return",n);case 10:q.info("enterConfByIdWithConfPas,resOfCheck is true");case 11:return r=t.confSubject?t.confSubject:"",W.showConfOutPage(!0,!1,r,""),a=t.confId?t.confId:"",o=t.confPas?t.confPas:"",i={confId:a,confPas:o},e.next=18,coreConf.enterConfByIdOnlyService(i);case 18:if(s=e.sent,0===(c=s.errorCode)){e.next=31;break}return q.info("enterConfByIdWithConfPas fail, errorCode = "+c),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),u=Y.getEnterConfByIdOnlyTip(c),W.closeConfPage(!1,!1,c,u),W.clearAfterConfEnd(!1,!1),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),7===c&&se(c),e.abrupt("return",{code:c,msg:u});case 31:return q.error("enterConfByIdWithConfPas suc"),e.abrupt("return",Y.CREATE_CONF_ERR.SUCCESS);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnly=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.conf.confAcsId,q.info("enterConfByIdOnly"),e.next=5,re(!0);case 5:if(r=e.sent,0===r.code){e.next=10;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),q.error("enterConfByIdOnly,resOfCheck is false"),e.abrupt("return",!1);case 10:return W.showLoadingPage(),a=n,o=!$getState().conf.isOpenCameraDe,i=!$getState().conf.isOpenMicDe,s={confId:a,confPas:"",deviceSet:{isCloseCameraDe:o,isMuteMicDe:i}},e.next=17,coreConf.enterConfByIdOnlyService(s);case 17:if(c=e.sent,u=c.errorCode,f=c.isNeedPwd,l=c.accessNum,0!==u){e.next=27;break}return W.closeLoadingPage(),W.showConfOutPage(!0,!1,"",l),e.abrupt("return",!0);case 27:return W.closeLoadingPage(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),f?(coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NEED),gn(l)):(coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.NOT_NEED),11017===u&&mn(""),7===u&&se(u),d=Y.getEnterConfByIdOnlyTip(u),coreCommon.isNeedQuickFeedback(d)?window.confirm(d+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,d)}):alert(d)),e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterConfById=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.confAcsId,r=t.confAcsNum,a=n,$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}if(""!==$getState().conf.confAcsNum){e.next=8;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),window.ToastNew(language.ENTER_CONF_ACS_ID_NULL,2),q.info("enterConfById confAcs is null"),e.abrupt("return");case 8:return q.info("enterConfById get conf pwd"),e.next=11,coreSecurity.getPasswordManager();case 11:return o=e.sent,e.next=14,o.getPassword("cnfAcsPassword");case 14:i=e.sent,s=isNullOrEmpty(i)?"":i,q.info("enterConfById pre ok,then call out,change enter conf state true"),rr(r,a,s,!0);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.enterTempConf=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("enterTempConf"),""!==$getState().conf.confTempAcsId){e.next=4;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 4:if(""!==$getState().conf.confTempAcsNum){e.next=7;break}return alert(language.ENTER_CONF_ACS_ID_NULL),e.abrupt("return");case 7:if(""!==$getState().conf.confTempAcsPas){e.next=10;break}return alert(language.ENTER_CONF_ACS_PAS_TIPS),e.abrupt("return");case 10:if(""!==$getState().conf.confTempAcsAccount){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ACCOUNT_NULL),e.abrupt("return");case 13:return e.next=15,coreSecurity.getPasswordManager();case 15:return t=e.sent,e.next=18,t.getPassword("password");case 18:if(""!==(n=e.sent)){e.next=22;break}return alert(language.ENTER_CONF_TEMP_ACS_PWD_NULL),e.abrupt("return");case 22:return r={confAcsId:$getState().conf.confTempAcsId,confAcsNum:$getState().conf.confTempAcsNum,confAcsPas:$getState().conf.confTempAcsPas},q.info("confAcsId :"+$getState().conf.confAcsId+",  confAcsNum:"+$getState().conf.confAcsNum+", confAcsPas: "+$getState().conf.confAcsPas+", tempConfdata :"+(0,f.default)(r)),$dispatch(coreUi.saveTempConfInfo(r)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=29,coreAccount.login({isResume:!1,isTempLogin:!0});case 29:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handleJoinTempConfNoNameWithConfId=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,_,m,v,C,I,w,S,E,N;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState(),n=t.login,r=n.tempMediaxAddress,a=n.tempMediaxPort,o=n.tempSipAccount,i=n.tempsipPassword,s=n.tempSipNick,q.info("handleJoinTempConfNoNameWithConfId tempMediaxAddress : "+r+", tempMediaxPort"+a),e.next=4,coreAccount.getLoginModel();case 4:if(c=e.sent,!c.isForceUpdate||!c.isPortalUpgrade){e.next=9;break}return q.info("need upgrade before no login conference"),coreAccount.showUpdateHintsOrBar(),e.abrupt("return");case 9:if(!isNullOrEmpty(s)){e.next=12;break}return alert(language.NICKNAME_IS_REQUIRED),e.abrupt("return");case 12:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=17;break}return e.next=16,window.isSimCardCall();case 16:e.t0=e.sent;case 17:if(!(u=e.t0)){e.next=22;break}return q.info("handleJoinTempConfNoNameWithConfId now is in sim card call"),alert(language.PLEASE_HANG_UP_CALL),e.abrupt("return");case 22:return e.next=24,coreCall.callPermissionCheck(!0);case 24:if(f=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),f){e.next=29;break}return q.info("handleJoinTempConfNoNameWithConfId do not have permission for call"),e.abrupt("return");case 29:return e.next=31,coreCall.createVideoPreCheck();case 31:if(l=e.sent){e.next=34;break}return e.abrupt("return");case 34:if($dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(window.socketCloseResumePromise)){e.next=39;break}return e.next=38,window.socketCloseResumePromise;case 38:window.socketCloseResumePromise=null;case 39:return e.next=41,coreTup.getUportalInstance();case 41:return d=e.sent,e.next=44,coreAccount.setLoginProxy(d);case 44:if(p=$getState().login.isSupportCACertCheck,h=window.EXEC_PATH,!p){e.next=56;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=52;break}return e.next=50,d.loginSetTlsParamsEx(h,1);case 50:e.next=54;break;case 52:return e.next=54,d.loginSetTlsParams(h,1);case 54:e.next=63;break;case 56:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=61;break}return e.next=59,d.loginSetTlsParamsEx(h,0);case 59:e.next=63;break;case 61:return e.next=63,d.loginSetTlsParams(h,0);case 63:return _=r,m=parseInt(a),v=0,C=o,6!==C.length&&(v=1),e.next=70,coreAccount.queryMediaXaddrFromServer({uportalService:d,is_cms_addr:v});case 70:if(I=e.sent,I&&0===I.result?(_=I.mediaxAddr,m=I.mediaxPort,v=I.isCmsAddr,q.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer success mediaxAddr:",_,"mediaxPort:",m,"isCmsAddr:",v)):q.info("handleJoinTempConfNoNameWithConfId queryMediaXaddrFromServer failed"),!isNullOrEmpty(_)){e.next=75;break}return alert(language.MAXHUB_LOGIN_INPUT_ADDRESS),e.abrupt("return");case 75:if(!isNullOrEmpty(m)){e.next=78;break}return alert(language.PORT_EMPTY),e.abrupt("return");case 78:return w=i,S=window.CLIENTCONFIG.ISMOBILE?1:0,E=1,coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),it.wait(),coreCall.registerVideoEvent(),e.next=90,coreConf.initializeDataConf();case 90:return(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,x.registerNativeWndEvent)(),on(),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.next=95,coreAccount.getLocalDNSIp({domain:_});case 95:return N=e.sent,isNullOrEmpty(N)||(_=N),c.urlOfGetSipInfo=_,e.abrupt("return",d.getTempUserInfoFromConfinfo(_,m,C,w,S,E,v));case 99:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleItConfRecord=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.conflist,n=null,r=!1,a=0;case 4:if(!(a<t.length)){e.next=13;break}if(t[a].conf_id!==i){e.next=10;break}return n=t[a],q.info("handle it conf record find conf."),r=!0,e.abrupt("break",13);case 10:a++,e.next=4;break;case 13:r?(q.info("handle it conf record one key enter conf"),or(n)):(q.info("handle it conf record create a new conf"),window.handleItJoinMeeting(o,"2"));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.handleItJoinMeeting=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,_=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=null,n="1",t=h,n=_,q.info("handleItJoinMeeting, set isOffline false"),window.isOffline=!1,!t){e.next=38;break}r=[],a=0,o="",i=$getState(),s=i.myInfo,c=0;case 11:if(!(c<t.length)){e.next=36;break}if(u=t[c],u.calleeNumber=u.calleeNumber.replace(/-/g,"").replace(/\s*/g,""),u.contactsId||(u.contactsId=u.calleeNumber),f=u.contactsId,!(o.indexOf(f)>=0)){e.next=18;break}return e.abrupt("continue",33);case 18:l="",u.mobilePhones&&(l=u.mobilePhones.replace(/-/g,"").replace(/\s*/g,"")),r[a]={},o+=f,u.contactsId&&(r[a].account=u.contactsId),u.contactId&&(r[a].account=u.contactId),s.account||(d=appService.getItUserInfo(),s.account=d.contactsId),!s.account||s.account!==u.contactsId&&s.account!==u.contactId||u.name&&(q.info("getITMeeting username is "+u.name.substr(0,1)+"***"),s.name=u.name),r[a].mobile=l,r[a].number=u.calleeNumber,r[a].bind_no=u.calleeNumber,r[a].name=u.name,r[a].email=u.email,q.info("create a new conf. the urser number:"),a++;case 33:c++,e.next=11;break;case 36:p=$getState().conf.isCreateMeetingPasswordDefault||$getState().conf.showvmrornot?0:1,"2"===n?ae(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE,p):ae(s,r,{group_id:""},constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VOICE|constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO,p);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.updateItMeeting=function(e){coreAccount.getLoginModel().then(function(t){return t.set(e)})},window.handleJoinTempConfNoNamePreProcess=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.inAppBrowserRef&&window.inAppClosePage&&window.inAppClosePage(),e.next=3,coreAccount.getResumeEnable();case 3:if(n=e.sent){e.next=9;break}q.info("[handleJoinTempConfNoNamePreProcess] now is is logout or kickout "+t),window.handleJoinTempConfNoName(t),e.next=16;break;case 9:if(q.info("[handleJoinTempConfNoNamePreProcess] now is login"+t),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=15;break}return e.next=13,coreUi.checkMobileMultiDevice();case 13:r=e.sent,r&&q.info("multi device handleJoinTempConfNoNamePreProcess");case 15:window.enterNoNameConfUrl=t;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handleJoinTempConfNoName=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("[handleJoinTempConfNoName] fromScanQrcode :"+u),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,params:[u?constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_SCAN_TO_JOIN:constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_LINK]}),window.setTimeout(function(){return window.dispatchEvent(new Event("closeOutSidePage"))},500),clearTimeout(window.openBrowerTimer),window.hasLoadConfig){e.next=8;break}return window.handleJoinTempConfNoNameURL=t,q.info("[handleJoinTempConfNoName] has not loadconfig , do later :"+window.handleJoinTempConfNoNameURL),e.abrupt("return");case 8:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=18;break}return e.next=11,coreTup.getUportalInstance();case 11:return n=e.sent,e.next=14,coreAccount.setLoginProxy(n);case 14:return e.next=16,coreAccount.getNickName();case 16:e.next=19;break;case 18:t="cloudlinkpro://welinksoftclient/page/link?site_url="+t;case 19:if(q.info("handleJoinTempConfNoName",t),r=coreCommon.getUrlVars(t),q.info("uriValues",r),isNullOrEmpty(r.user_name)){e.next=25;break}return e.next=25,coreAccount.updateTempSipNick({name:decodeURI(r.user_name)});case 25:return a={sipOnlyurlInfo:{site_url:isNullOrEmpty(r.site_url)?"":decodeURIComponent(r.site_url.trim()),random:isNullOrEmpty(r.random)?"":decodeURIComponent(r.random.trim()),chairman:isNullOrEmpty(r.chairman)?"":decodeURIComponent(r.chairman.trim()),topology:isNullOrEmpty(r.topology)?"":decodeURIComponent(r.topology.trim())}},o=/https:\/\/([^\/]+)\//g,i=null,e.next=30,coreAccount.getLoginModel();case 30:if(s=e.sent,(i=o.exec(a.sipOnlyurlInfo.site_url))&&!isNullOrEmpty(i)&&i.length>1&&(c=i[1].split(":"),c.length>1?(s.tempNoNameMediaxAddress=c[0],s.tempNoNameMediaxPort=c[1]):(s.tempNoNameMediaxAddress=c[0],s.tempNoNameMediaxPort="443")),q.info("urlInfo",a),s.set(a),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=45;break}return coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreAccount.registerLoginEvent(),coreCall.registerCallEvent(),it.wait(),coreCall.registerVideoEvent(),e.next=44,coreConf.initializeDataConf();case 44:(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN)&&(0,x.registerNativeWndEvent)();case 45:window.checkJoinTempConfNoName(t),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 48:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var ln=t.gettempuserinfo=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=5;break}return e.next=4,window.isSimCardCall();case 4:e.t0=e.sent;case 5:if(!(t=e.t0)){e.next=10;break}return alert(language.PLEASE_HANG_UP_CALL),q.info("gettempuserinfo now is in sim card call"),e.abrupt("return");case 10:if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=14;break}return e.next=13,window.isHavePermission("AUDIO_AND_CAMERA_PERMISSION");case 13:window.isHavePerm||(window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"),window.switchToFront());case 14:return e.next=16,coreCall.callPermissionCheck(!0);case 16:if(n=e.sent,window.requestPermissionPromise&&(window.requestPermissionPromise=null),n){e.next=21;break}return q.info("gettempuserinfo have no permission. "),e.abrupt("return");case 21:if($dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),r=window.CLIENTCONFIG.ISMOBILE?1:0,a=$getState().login,o=""===a.sipAccount?1:0,i=$getState().login,s=i.sipOnlyurlInfo.site_url,c=i.sipOnlyurlInfo.random,q.info("gettempuserinfo",s,c,r,o),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=43;break}return u=s.split("/")[2],u.indexOf(":")>0&&(u=u.split(":")[0]),f="",e.next=36,coreDb.queryLoginSetting({key:u});case 36:l=e.sent,l&&l.value&&(f=l.value),isNullOrEmpty(f)||(s=s.replace(u,f)),q.info("gettempuserinfo real:",s),e.next=43;break;case 43:return e.next=45,coreTup.getUportalInstance();case 45:return d=e.sent,e.abrupt("return",d.gettempuserinfo(s,c,r,o));case 47:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.checkJoinTempConfNoName=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,_,m,v,C,I;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=3,coreSecurity.getPasswordManager();case 3:return f=e.sent,e.next=6,f.getPassword("password");case 6:if(l=e.sent,q.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=14;break}if(d=window.localStorage.getItem("isFirstInstall"),window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===d){e.next=14;break}return q.info("[checkJoinTempConfNoName] local has First install before license, enter conf after access license"),window.enterNoNameConfUrl=t,e.abrupt("return");case 14:return p=coreCommon.getUrlVars(t),h={sipOnlyurlInfo:{site_url:isNullOrEmpty(p.site_url)?"":decodeURIComponent(p.site_url.trim()),random:isNullOrEmpty(p.random)?"":decodeURIComponent(p.random.trim()),chairman:isNullOrEmpty(p.chairman)?"":decodeURIComponent(p.chairman.trim())}},e.next=18,coreAccount.isAccountAutoLogin();case 18:if(_=e.sent,m=!1,window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=24;break}return e.next=23,window.stroage.isFastLogin();case 23:m=e.sent;case 24:if(!(coreConf.isInConf()||coreCall.getCallCount()>0)){e.next=28;break}return window.CLIENTCONFIG.ISMOBILE?alert(language.PREVENT_TWO_CALLS):window.Toast(language.PREVENT_TWO_CALLS,2,!1,null,"WhiteWarning"),window.enterNoNameConfUrl=null,e.abrupt("return");case 28:if(appService.showMainWindow(!0),(isNullOrEmpty(a)||isNullOrEmpty(l)||isNullOrEmpty(o)||isNullOrEmpty(i))&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=85;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=51;break}if(v=window.SERVERCONFIG,q.info("[checkJoinTempConfNoName] Start , mode: [ HWUC "+v.HWUC+" ]"),v.HWUC!==constant.LOGIN_TYPE.BASE){e.next=50;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=40;break}return q.info("[checkJoinTempConfNoName]local has uportal, state: registering, enter conf later"),window.enterNoNameConfUrl=t,e.abrupt("return");case 40:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=44;break}q.info("[checkJoinTempConfNoName]local has uportal, state: registered"),e.next=48;break;case 44:return q.info("[checkJoinTempConfNoName]local has uportal, state: register failed"),q.info("[checkJoinTempConfNoName]local has not uportal, no sip"),dn(p),e.abrupt("return");case 48:e.next=51;break;case 50:v.HWUC,constant.LOGIN_TYPE.HWUC;case 51:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=62;break}return e.next=54,coreAccount.getLoginModel();case 54:return C=e.sent,C.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP,q.info("[checkJoinTempConfNoName]local has sip, state: registered"),window.enterNoNameConfUrl=null,ln(),e.abrupt("return");case 62:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=68;break}return q.info("[checkJoinTempConfNoName]local has sip , state: registering"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.enterNoNameConfUrl=null,ln()),e.abrupt("return");case 68:if(q.info("[checkJoinTempConfNoName]local has sip, state register failed"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=73;break}return window.enterNoNameConfUrl=null,ln(),e.abrupt("return");case 73:if(!window.isOffline){e.next=77;break}return alert(language.OFFLINE_STATUS),window.enterNoNameConfUrl=null,e.abrupt("return");case 77:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=82;break}return e.next=80,coreUi.checkMobileMultiDevice();case 80:I=e.sent,I&&q.info("multi device checkJoinTempConfNoName");case 82:window.enterNoNameConfUrl=t;case 83:e.next=99;break;case 85:e.next=91;break;case 91:if(!_){e.next=97;break}return q.info("[checkJoinTempConfNoName] pc auto login, enter conf after sip registered"),window.enterNoNameConfUrl=t,e.abrupt("return");case 97:q.info("[checkJoinTempConfNoName]local has not uportal, no sip"),dn(p);case 99:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var dn=function(e){if("1"===(e.chairman&&decodeURIComponent(e.chairman.trim())))return window.clearDialogQueue&&window.clearDialogQueue(),void alert(language.GET_SIP_FAILED_FOR_CHAIRMAN);$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),coreAccount.getLoginModel().then(function(e){e.sipOnlyType=constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_NO_UPORTAL_NO_SIP}),navigator.splashscreen&&navigator.splashscreen.hide(),isNullOrEmpty(e.user_name)||ln(),window.CLIENTCONFIG.ISMOBILE?window.goRoute("mJoinConfSIPOnly"):window.goRoute("login/joinConfSIPOnly")};window.handleJoinTempConf=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pn();case 2:if(n=e.sent,q.info("window.handleJoinTempConf should get temp usr :"+n),!n){e.next=10;break}if(r=$getState(),a=r.login.account,isNullOrEmpty(a)){e.next=10;break}return q.info("window.handleJoinTempConf, logout old im account"),e.next=10,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0);case 10:o=coreCommon.getUrlVars(t),i=o.site_address,s=o.confid,$dispatch(coreUi.changeConfTempAcsNum("")),$dispatch(coreUi.changeConfTempAcsId("")),$dispatch(coreUi.changeConfTempAcsPas("")),$dispatch(coreUi.changeConfTempAcsNick("")),$dispatch(coreUi.changeConfTempAcsAccount("")),$dispatch(coreUi.changeConfTempAcsMemberTotal(0)),$dispatch(coreUi.changeConfTempAcsEndTime(0)),n&&window.goRoute("mTempEnterConfPage"),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),c=!n,q.info(" getTempConfInfo: confId : "+s+", eccmAddress:"+i+", hasAccount: "+c),u="https://"+i+"/v1/jointmpconf/gettmpaccount",f='{"conferenceid":"'+s+'","hasaccount": '+(c?1:0)+"}",appService.doHttpsPost(u,f);case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var pn=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=!0,n=$getState(),r=n.login,a=r.account,o=r.serverAddress,i=r.serverPort,s=r.loginDisable,c=r.uportalLoginState,u=r.sipRegisterState,e.next=4,coreSecurity.getPasswordManager();case 4:return f=e.sent,e.next=7,f.getPassword("password");case 7:if(l=e.sent,q.info(" account : "+handlePhoneNumber(a)+", serverAddress: "+o+", serverPort: "+i),isNullOrEmpty(a)||isNullOrEmpty(o)||isNullOrEmpty(i)){e.next=45;break}if(d=window.SERVERCONFIG,q.info("checkShouldUseTempUsrForTempConf Start , mode: [ HWUC "+d.HWUC+" ]"),d.HWUC!==constant.LOGIN_TYPE.BASE){e.next=27;break}if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING!==c){e.next=19;break}return q.info("local has uportal, state: registering"),t=!0,e.abrupt("return",t);case 19:if(constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS!==c){e.next=23;break}q.info("local has uportal, state: registered"),e.next=25;break;case 23:return t=!0,e.abrupt("return",t);case 25:e.next=28;break;case 27:d.HWUC,constant.LOGIN_TYPE.HWUC;case 28:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED!==u){e.next=34;break}return q.info("local has sip, state: registered"),t=!1,e.abrupt("return",t);case 34:if(constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING!==u){e.next=40;break}return q.info("local has sip , state: registering"),t=!1,e.abrupt("return",t);case 40:return q.info("local has sip, state register failed"),t=!0,e.abrupt("return",t);case 43:e.next=48;break;case 45:return q.info("local has not uportal, no sip"),t=!0,e.abrupt("return",t);case 48:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.handleDoHttpsPostResult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===t&&(t=""),t=decodeURIComponent(t),n="";try{n=JSON.parse(t)}catch(e){n="",q.error("window.handleDoHttpsPostResult try catch error = "+(0,f.default)(e))}return e.next=6,pn();case 6:if(r=e.sent,isNullOrEmpty(n)){e.next=24;break}if(a=n.result,o=n.jointmpconfinfo,!isNullOrEmpty(a)){e.next=13;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return");case 13:if(0!==a.retCode&&isNullOrEmpty(o)){e.next=21;break}return e.next=16,hn(o,r);case 16:if(!1!==(i=e.sent)){e.next=19;break}return e.abrupt("return");case 19:e.next=22;break;case 21:14e3===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14000),r&&window.goRoute("loginCtn")):14001===a.retCode?(alert(language.END_CONFERENCE),r&&window.goRoute("loginCtn")):14002===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14002),r&&window.goRoute("loginCtn")):14003===a.retCode?(alert(language.ENTER_CONF_TEMP_ACS_ERROR_14003),r&&window.goRoute("loginCtn")):(alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),r&&window.goRoute("loginCtn"));case 22:e.next=28;break;case 24:alert(language.ENTER_CONF_TEMP_ACS_ERROR_NET_ERROR),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),r&&window.goRoute("loginCtn");case 28:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var hn=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r,a,o,i,s,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return alert(language.ENTER_CONF_TEMP_ACS_ERROR_UNKNOWN),e.abrupt("return",!1);case 3:if(r=$getState(),a=r.login,o=a.account,i=a.serverAddress,s=a.serverPort,n){e.next=13;break}return $dispatch(coreUi.changeConfAcsNum(t.accessCode)),$dispatch(coreUi.changeConfAcsId(t.conferenceID)),e.next=9,vn(t.conferencePWD);case 9:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.goRoute("mEnterConfPage"),e.next=31;break;case 13:if($dispatch(coreUi.changeConfTempAcsNum(t.accessCode)),$dispatch(coreUi.changeConfTempAcsId(t.conferenceID)),$dispatch(coreUi.changeConfTempAcsPas(t.conferencePWD)),$dispatch(coreUi.changeConfTempAcsMemberTotal(isNullOrEmpty(t.total)?0:t.total)),$dispatch(coreUi.changeConfTempAcsEndTime(isNullOrEmpty(t.endTime)?0:t.endTime)),isNullOrEmpty(t.tmpUsrAccount)?$dispatch(coreUi.changeConfTempAcsAccount(o)):$dispatch(coreUi.changeConfTempAcsAccount(t.tmpUsrAccount)),!isNullOrEmpty(t.tmpUsrPWD)){e.next=22;break}e.next=27;break;case 22:return e.next=24,coreSecurity.getPasswordManager();case 24:return c=e.sent,e.next=27,c.setPassword("password",t.tmpUsrPWD);case 27:isNullOrEmpty(t.uportalAddress)?$dispatch(coreUi.changeTempAcsUportalAddress(i)):$dispatch(coreUi.changeTempAcsUportalAddress(t.uportalAddress)),isNullOrEmpty(t.uportalPort)?$dispatch(coreUi.changetempAcsUportalPort(s)):$dispatch(coreUi.changetempAcsUportalPort(t.uportalPort)),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 31:return e.abrupt("return",!0);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),_n=t.changeConfPage=function(e){if(q.info("userClick  create conf or join conf",e),window.CLIENTCONFIG.ENABLE_IT_MEETING&&"New"===e&&coreCall.getCallCount()>0)return q.error("already exist call, can not create conf"),void alert(language.PREVENT_CONFERENCE_AFTER_CALL);"Detail"!==e&&(window.lastSelectedId={confId:"",cycleId:""}),$dispatch(coreUi.changeCurConfPage(e))},gn=t.toggleChangeConfAcsNum=function(e){$dispatch(coreUi.changeConfAcsNum(e))},mn=t.toggleChangeConfAcsId=function(e){$dispatch(coreUi.changeConfAcsId(e))},vn=t.toggleChangeConfAcsPas=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return n=e.sent,e.next=5,n.setPassword("cnfAcsPassword",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Cn=(t.toggleSetUseFixedConfIDState=function(e){$dispatch(coreUi.setUseFixedConfIDState(e))},t.toggleSetIsBookSendEmail=function(e){$dispatch(coreUi.changeIsBookSendEmail(e))},t.toggleSetIsBookSendSMS=function(e){$dispatch(coreUi.changeIsBookSendSMS(e))},t.toggleSetCreateUseFixedConfIDState=function(e){$dispatch(coreUi.setCreateUseFixedConfIDState(e))},t.toggleChangeMicState=function(){$dispatch(coreUi.changeMicState())},t.toggleChangeCamerState=function(){$dispatch(coreUi.changeCamerState())},t.toggleopenCamerState=function(){$dispatch(coreUi.openCamerState())},t.toggleClearEnterTempConfInfo=function(){$dispatch(coreUi.clearEnterTempConfInfo())},t.toggleShouldAutoEnterTempConf=function(){$dispatch(coreUi.changeShouldAutoEnterTempConf())},t.returnToConfWelPage=function(){$dispatch(coreUi.changeCurConfPage("Main")),coreCall.setNoMoveTrue()},function(){var e=$getState(),t=e.call,n=t.savedCalleeInfo,r=t.tempConfInfo;isNullOrEmpty(n)?isNullOrEmpty(r)||(q.info(" handleSipRegSuc, CalloutForTempConf"),$dispatch(coreUi.saveTempConfInfo({})),coreCall.CalloutForTempConf(r.confAcsId,r.confAcsNum,r.confAcsPas),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(""))):n.bConf&&(q.info(" handleSipRegSuc, actionCreateConf"),ae.apply(void 0,[n.selfInfo,n.memberList,n.groupInfo,n.mediaType,n.noPassword,!0].concat((0,d.default)(n.others))))});window.unRegister=(0,S.default)(g.default.mark(function e(){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.sipUseByOther=!0,!window.webView){e.next=13;break}if(q.info("it welink logout 1"),!window.webView.isItLogout()){e.next=9;break}return q.info("it welink logout."),e.next=7,coreAccount.endCurrentCall();case 7:e.next=13;break;case 9:if(!window.webView.isSimCardCall()||""===$getState().call.callId){e.next=13;break}return window.dontUnregister=!0,q.info("is sim card call no need unregister"),e.abrupt("return");case 13:window.dontUnregister=!1,coreAccount.sipserverDeregister(),q.info("unRegister, set isOffline true"),window.isOffline=!0,In();case 18:case"end":return e.stop()}},e,void 0)}));var In=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.isOffline){e.next=27;break}if(t=!coreConf.isInConf(),n=coreCall.getCallCount()<=0,q.info("handleOfflineReLogin bNoConf: "+t+" bNoCall: "+n),!t||!n){e.next=7;break}return q.debug("handleOfflineReLogin, no conf or call exit, do nothing"),e.abrupt("return");case 7:if(r=$getState(),a=r.conf.confHandle,o=r.call.callId,t||""===a){e.next=17;break}if(q.info("handleOfflineReLogin, confHandle: "+a),i=coreConf.getSavedRecallInfo(),isNullOrEmpty(i)){e.next=15;break}return q.info("handleOfflineReLogin,recallOrHangup"),coreCall.recallOrHangup(i,!0,""),e.abrupt("return");case 15:return e.next=17,We();case 17:if(n=coreCall.getCallCount()<=0){e.next=27;break}if(s=coreConf.getSavedRecallInfo(),isNullOrEmpty(s)){e.next=23;break}return q.info("handleOfflineReLogin, recall not hangup call"),e.abrupt("return");case 23:q.info("handleOfflineReLogin, callId: "+o),o&&coreCall.endCallService(o),coreCall.endCall(o),coreCall.deleteCallObject(o);case 27:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),wn=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,R.meetingHWreCallTimeOut)(t):(0,R.meetingHWLeaveConf)();case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Sn=(t.showJoinMeetingBtn=function(){var e=$getState().call,t=e.showCallToolBar,n=e.callStatus;return!$getState().conf.showJoinButton||!(!t&&"VIDEO_CONNECTED"!==n&&"VIDEO_OUT"!==n&&"CALL_OUT"!==n&&"CALL_CONNECTED"!==n||!coreConf.isInConf())&&(q.info("already exist conference, need to join the meeting button gray"),!0)},t.showOrDisabledBtn=function(){return!!$getState().conf.showJoinButton},function(e){if(0!==e.length){for(var t=[],n=0;n<e.length;n++)!function(n){var r=t.findIndex(function(t){return e[n].number?t.number===e[n].number:t.number===e[n].bind_no});-1===r?t.push(e[n]):!t[r].account&&e[n].account&&t.splice(r,1,e[n])}(n);return t}}),En=(t.clearPhoneContacts=function(){$dispatch(coreUi.clearPhoneAddrInfo())},t.handleSvcConfWatchRet=function(e){q.info("handleSvcConfWatchRet =",e);window.CLIENTCONFIG.ISMOBILE;e.param.ret}),Nn=t.handleVideoWatchRes=function(e){0===e?(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,extraTrackKey:handlePhoneNumber(J),resultParams:[1],isTrackTimeCosts:!0}),q.info("video watch suc,watchNum = "+handlePhoneNumber(J)),$dispatch(coreUi.changeVideoWatchNum(J))):(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,isTrackTimeCosts:handlePhoneNumber(J),resultParams:[0,e]}),10===e?(q.error("video watch reason_code = 10,watchNum = "+handlePhoneNumber(J)),Tn(""===J?"NATIVE_VIDEO_CANCEL_WATCH_FAIL_WHEN_CONFPAGE_OPEN":"NATIVE_VIDEO_WATCH_FAIL_WHEN_CONFPAGE_OPEN")):(q.error("video watch reason_code = "+e+"watchNum = "+J),Tn(""===J?!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_CANCEL_WATCH_MULTIVIEWBROADCAST":"NATIVE_VIDEO_CANCEL_WATCH_FAIL":!$getState().conf.isSvcConf&&coreConf.getIsAvcMultiViewBroadcast()?"NATIVE_FAILURE_WATCH_MULTIVIEWBROADCAST":"NATIVE_FAILURE_ERR_TUP")))},Tn=t.handleVideoWatchResMessageBox=function(e){if(q.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)?L.SvcAtdManager.alertBox(e,2):alert(language[e])}},bn=(t.handlePlatformMessageBox=function(e){q.info("reacrd handleShowErrorMsgBox errorTile:",e),isNullOrEmpty(e)||(L.SvcAtdManager.isNativeUIExsit()?(q.info("handlePlatformMessageBox1 isVideo"),L.SvcAtdManager.alertBox(e,2)):(q.info("handlePlatformMessageBox2 "),alert(language[e])))},t.dealInviteAttendeeResult=function(e){$getState().synergismInfo.inPairConf&&(q.info("BLE: in pair conf, deal invite attendee result, data=",e),(0,P.pairInviteAttendeeNotify)(e.param));var t=void 0;t=0===e.param.ret?[1]:[0,e.param.ret],coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,resultParams:t})});t.resetFirstInfoConferenceFlag=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstInfoConf",value:t.toString()},q.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)),q.info("The isFirstInfoConf flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstInfoConf=function(){var e=(0,S.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstInfoConf"});case 4:t=e.sent,void 0===t.value||""===t.value?(q.info("isFirstInfoConf",t.value,!0),$dispatch(coreUi.toggleFirstInfoConfModalShow(!0))):(q.info("isFirstInfoConf",t.true,!1),$dispatch(coreUi.toggleFirstInfoConfModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetFirstAcceptShareFlag=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return n={key:"isFirstAcceptShare",value:t.toString()},q.info("click the first info conference guide modal to"),e.next=6,coreDb.saveLoginSetting(n);case 6:$dispatch(coreUi.toggleFirstsharingModalShow(!1)),q.info("The isFirstAcceptShare flag save success");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initMobileFirstAcceptShare=function(){var e=(0,S.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreDb.queryLoginSetting({key:"isFirstAcceptShare"});case 4:t=e.sent,void 0===t.value||""===t.value?(q.info("isFirstAcceptShare",t.value,!0),$dispatch(coreUi.toggleFirstsharingModalShow(!0))):(q.info("isFirstAcceptShare",t.true,!1),$dispatch(coreUi.toggleFirstsharingModalShow(!1)));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.mobileSendBfcp=(0,S.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:t=e.sent,n=t.startData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?q.info("[bfcp] use tup send bfcp success"):q.info("[bfcp] use tup send bfcp failed")}).catch(function(e){q.info("[bfcp] startResult error",e)});case 6:case"end":return e.stop()}},e,void 0)})),window.mobileStopBfcp=(0,S.default)(g.default.mark(function e(){var t,n,r,a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:t=e.sent,n=t.stopData($getState().call.callId),r=0,a=1,n.then(function(e){0===e.result?q.info("[bfcp] use tup stop bfcp success"):q.info("[bfcp] use tup stop bfcp failed")}).catch(function(e){q.info("[bfcp] stopResult error",e)});case 6:case"end":return e.stop()}},e,void 0)}));var On={uiFramesize:9,uiDecodeFrameSize:12},Ln={uiFrameRate:3,uiMinFrameRate:1},An={ulDataRate:150,ulMinDataRate:150,ulMaxDataRate:150,ulMaxBw:300},yn={bArs:1,bArsCtrlBitRate:1,bArsCtrlFec:0,bArsCtrlFrameRate:1,bArsCtrlFrameSize:0},xn={ulHdEncoder:0,ulHdDecoder:0},Rn={uiParamSetNumber:0,pstVideoH264QualityLevelParamSet:4};window.sendToTupConfig=(0,S.default)(g.default.mark(function e(){var t;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("set mobile bfcp config start"),e.next=3,coreTup.getCallInstance();case 3:t=e.sent,t.configToTupBfcp(285476352,On),t.configToTupBfcp(285477120,Ln),t.configToTupBfcp(285476608,An),t.configToTupBfcp(285344768,"106"),t.configToTupBfcp(285737472,0),t.configToTupBfcp(285738240,1),t.configToTupBfcp(285477632,yn),t.configToTupBfcp(285281792,100),t.configToTupBfcp(285280768,5),t.configToTupBfcp(285476864,xn),t.configToTupBfcp(285478656,Rn),q.info("set mobile bfcp config success");case 16:case"end":return e.stop()}},e,void 0)}));var Mn=(t.grabBfcpConfirm=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreConf.isConfChairMan()?(n=(0,I.default)({},t),window.confirm(language.OTHER_IS_SHARING_ISNOT_INSTEAD).then(function(e){if(e.ret){var t=$getState(),r=t.call,a=r.callStatus,o=r.isSwitchShareBfcp,i=t.conf.isEnterDataConf,s="VIDEO_OUT"===a||"VIDEO_CONNECTED"===a,c=o&&s;(!!window.CLIENTCONFIG.ENABLE_IT_MEETING||!c&&i)&&window.isMobileSupportScreenShare?window.startShareScreen():coreUi.showPopoverMenu(n,coreUi.popoverTypeMap.TYPE_VIDEO_SHARE,coreUi.videoShareClick),$dispatch(coreUi.changeShowBfcp(!0))}else $dispatch(coreUi.changeShowBfcp(!1))})):(q.info("grabBfcpConfirm but not chairman"),alert(language.LANG_NATIVE_DATA_CONF_SOMEONE_SHARE_RIGHTNOW));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealAudientResult=function(e){if(q.info("change Current Audient Status."),window.CLIENTCONFIG.ISMOBILE){var t=$getState().conf.isAudience;return q.info("audience, meeting is audience, "+t),void(!1===t&&($dispatch(coreUi.changeAudientStatus(!0)),coreCall.changeDirectionForMobile(!1)))}$getState().conf.isAudience||($dispatch(coreUi.changeBidirectionStatus(!1)),$dispatch(coreUi.toggleSmallSvcVisible(!1)),coreCommon.MicControl.getInstance().muteMic(!0),coreCommon.SpkControl.getInstance().muteSpk(!1),coreCommon.CameraControl.getInstance().switchCameraStateAction(!1)),$dispatch(coreUi.changeAudientStatus(!0)),window.CLIENTCONFIG.ISWIN&&(0,E.notifyChangeAudientStatus)(e)}),kn=t.dealChangeDirectionResult=function(e){if(q.info("change Current direction result."),window.CLIENTCONFIG.ISMOBILE){var t=e.param.result;e.param.opration_type;if(q.info("audience, change direction result = ",t),0!==t){var n=$getState().call.isBidirection,r=$getState().call.isDirecResult;if(n===r||!r)return void q.info("audience jsNotify return, direction is isBidirection = ",n);var a=language.TALK_REQUEST_TOAST;window.confirm(a,{leftButton:language.LANG_NATIVE_CLOSE,rightButton:language.TALK_REQUEST_AGAIN}).then(function(e){e.ret?(q.info("audience request change direction again "),Pn()):q.info("audience close change direction")})}}else{var o=0;e&&e.param&&(o=e.param.result),o?q.info("user change direction failed: "+o):q.info("user change direction succeed."),$dispatch(coreUi.ChangeDirectionResult(o)),window.CLIENTCONFIG.ISWIN&&(0,E.notifyChangeActiveBidirectionStatus)(e)}},Pn=(t.actionActiveDirection=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("change Current Direction Status Active."),$dispatch(coreUi.ChangeDirectionResult(0)),e.next=4,coreConf.changeActiveDirection(t);case 4:if(!(n=e.sent)||0!==n.result){e.next=9;break}return e.abrupt("return",!0);case 9:return q.error("change Current Direction Status failed: "+n.result),e.abrupt("return",!1);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.actionActiveDirectionForMobile=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().call.isBidirection,q.info("audience , you want to change your direction,  isBidirection = "+t),e.next=4,coreConf.changeActiveDirection(!t);case 4:n=e.sent,0===n.result&&$dispatch(coreUi.changeAudienceDirecResult(!t)),q.error("audience , you want to change your direction,  result = "+n.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Dn=t.setRecordScheduserName=function(e){$getState().call.callStatus===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&(q.info("reacrd set conf setRecordScheduserName"),(0,M.setRecordSchednameLogic)(e))},Un=t.isHasRecordPermission=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";q.info("reacrd isHasRecordPermission [recordType:"+e+"]");var t=$getState().conf,n=t.confHandle,r=t.isShowRecordType,a=t.selfRole;""!==e&&(r=e);var o=$getState().call.callStatus,i=$getState().login.deployMode;return q.info("reacrd set determine if the meeting has permission to record [deployMode:"+i+"] [callStatus:"+o+"] [confHandle:"+n+"] [isShowRecordType:"+r+"] [selfRole:"+a+"]"),!isNullOrEmpty(n)&&1===a&&o===constant.CALL_VIDEO_STATUS.VIDEO_CONNECTED&&1===r},Fn=t.getRecordStatus=function(){var e=$getState().conf.isReacrd;return q.info("reacrd getRecordStatus [isReacrd:"+e+"]"),e},Gn=(t.clearRecordInfoHandle=function(){(0,M.clearRecordInfoLogic)()},t.actionCloudRecordRequest=function(){var e=(0,S.default)(g.default.mark(function e(t,n){var r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reacrd actionCloudRecordRequest[2] messageId:",t,"switchType:",n),!isNullOrEmpty(n)){e.next=4;break}return q.error("switchType is null or undefined"),e.abrupt("return");case 4:return r={messageId:t,switchType:n},e.next=7,coreConf.cloudRecordRequest(r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),Bn=t.handleSetRecordVideoResult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reacrd handleSetRecordVideoResult[2] data:",(0,f.default)(t)),n=t.param.result,r=n.switch_type,a=n.reson,o=n.record_type,i=n.result,q.info("handleSetRecordVideoResult switch_type",r,"reson",a,"record_type",o,"result",i),0!==i){e.next=8;break}0===o&&1===r?(q.info("start reacrd success"),(0,M.isReacrdLogic)(r),(0,M.haveRecordedLogic)(1)):0===o&&0===r&&(q.info("stop reacrd success"),(0,M.isReacrdLogic)(r)),e.next=18;break;case 8:return q.error("start/stop reacrd failed ",a),s={isReacrd:0},q.info("setParam, switch_type = ",0),e.next=13,N.NativeInterface.setParam(s);case 13:c=e.sent,q.info("setParam, res = ",c),u=null,u=0===a?language.NO_RECORDING_PERMISSION:1===a?language.CONFERENCE_RECORDING_IS_NOT_SUPPORTED:2===a?language.CONFERENCE_LIVE_BROADCAST_IS_NOT_SUPPORTED:50331819===a?language.START_RECORDING_FAILED_BY_NO_SERVICE:language.START_PAUSE_RECORDING_FAILED,Yn(u);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Wn=t.handleVideoRecordResult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reacrd handleVideoRecordResult[2] data:",(0,f.default)(t)),n=t.param,r=n.switch_type,a=n.result,q.info("handleVideoRecordResult switch_type",r,"result",a),0!==a){e.next=8;break}1===r?(q.info("start reacrd success"),(0,M.isReacrdLogic)(r),(0,M.haveRecordedLogic)(1)):0===r&&(q.info("stop reacrd success"),(0,M.isReacrdLogic)(r)),e.next=17;break;case 8:return o={isReacrd:0},q.info("setParam, switch_type = ",0),e.next=12,N.NativeInterface.setParam(o);case 12:i=e.sent,q.info("setParam, res = ",i),s=null,s=11070003===a?language.SYSTEM_OPERATE_FAILED:11072021===a?language.CONFERENCE_RECORDING_RESOURCE_IS_NOT_ENOUGH:11072022===a?language.CONFERENCE_RECORDING_OPERATE_FAILED:11072023===a?language.CONFERENCE_RECORDING_NO_ATTENDE_IN:11072063===a?language.CONFERENCE_RECORDING_APPLY_RESOURCE:11072066===a?language.CONFERENCE_RECORDING_NOT_PURCHASE:11072067===a?language.CONFERENCE_RECORDING_NO_ENOUGH:15021001===a?language.CONFERENCE_RECORDING_MEDIA_RESOURCE_NOT_ENOUGH:language.START_PAUSE_RECORDING_FAILED,11072063===a&&window.CLIENTCONFIG.ISMOBILE?window.ToastNew(s):Yn(s);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Vn=t.handleConfStateDirectBroadCastIndresult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("reacrd handleConfStateDirectBroadCastIndresult[2] data:",(0,f.default)(t)),(0,M.isReacrdLogic)(t.param.is_record),n={isReacrd:t.param.is_record},q.info("setParam, data.param.isReacrd = ",t.param.is_record),e.next=6,N.NativeInterface.setParam(n);case 6:r=e.sent,q.info("setParam, res = ",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),Hn=t.handleRecordVideoStatusChairmanIndResult=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reacrd handleRecordVideoStatusChairmanIndResult[2] data:",(0,f.default)(t)),!t||!t.param){e.next=12;break}return n=t.param.result,r=n.bro_rec_status,a=n.sup_bro_record,o=a||0,i=r||0,(0,M.isShowReacrdTypeLogic)(o),(0,M.isReacrdLogic)(i),s={isReacrd:i,isHaveRecordPriviledge:Un(o)},e.next=10,N.NativeInterface.setParam(s);case 10:c=e.sent,q.info("setParam, res = ",c);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$n=t.setRecordStatusForNative=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("setRecordStatusForNative"),t={isReacrd:Fn(),isHaveRecordPriviledge:Un()},e.next=4,N.NativeInterface.setParam(t);case 4:n=e.sent,q.info("setRecordStatusForNative setParam, res = ",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Yn=t.handleShowErrorMsgBox=function(e){if(q.info("reacrd handleShowErrorMsgBox errorTile:",e),!isNullOrEmpty(e)){var t=$getState().conf,n=t.confHandle,r=t.isVideoConf;if(window.CLIENTCONFIG.ISWIN&&r&&!isNullOrEmpty(n)){var a=$getState().conf.videoFrameHwnd,o=y.getAvcFrameHandles(),i={frameHwnd:0!==a?a:o,dialog_type:1,content:e};(0,T.showMessageBox)(i)}else alert(e)}},qn=(t.AsErrorDeal=function(e){var t=language[constant.AS_ERRORCODE_LOG_INFO[e]];q.error(" AsErrorDeal,errorCode "+e+"error msg "+t),alert(t||"unknow error")},t.handleMobileBfcpStatus=function(){q.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}),jn=(t.createMaxHubMeeting=function(){q.info("maxhub create instant conference");var e=$getState(),t=parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.CreateDataConference"]),n=t?constant.CON_CREATE_MEETING_STATUS.DATA_MULTIMEDIA_TYPE:constant.CON_CREATE_MEETING_STATUS.VIDEO_TYPE;q.info("maxhub create data conference flag: ",t+", mediaType:",n);var r=e.myInfo,a=getContactName(e.myInfo),o=a+language.CONFERENCE_SUBJECT_INFO,i=St(e.common.selectContactModal_selectedList);i.push(r);var s=Sn(i),c=e.conf.isReacrdSwitch&&2||0,u=constant.CONTACT_SELECT_DIALOG_TYPE.CONTACT_SELECT_DIALOG_TEMPMEETING;ae(r,s,{group_id:""},n,1,!0,o,u,c)},t.changeStatusOfConference=function(e){$dispatch(coreUi.changeStatusOfConf(e))},t.recoredOldPwd=function(e){$dispatch(coreUi.recoredOldPassword(e))},t.changeFlagClickJoinConfBtn=function(e){q.info("click join-conf btn to join conference"),$dispatch(coreUi.changeflagClickJoinConfBtn(e))},t.recordConferencePasswordDetail=function(e){q.info("record conference pwd"),e.conf_id===$getState().conf.confServerId&&$dispatch(coreUi.changeRecordConfPwdDetail(e))}),Kn=(t.recordConferenceOldId=function(e){q.info("record conference recordConferenceOldId"),$dispatch(coreUi.changeRecordConferenceOldId(e))},t.recordFlagIsFirstTimeRun=function(e){q.info("record conference recordFlagIsFirstTimeRun"),$dispatch(coreUi.changeFlagIsFirstTimeRun(e))},t.RecordIsIntoInterval=function(e){q.info("record conference RecordIsIntoInterval"),$dispatch(coreUi.changeIsIntoInterval(e))},t.showConfInfo=function(e){var t=e.conf_id;window.lastSelectedId.confId;un(e),yt(t,e.cycle_conf_id),coreUi.changeIsShowCopyTip(!1),fn([])},function(e){q.info("handleChangeConfHanlde in logic,hanlde = "+e),$dispatch(coreUi.changeConfHandle(e)),k.ToolbarManager.setConfHandle(e)}),Jn=function(e){$dispatch(coreUi.changeConfSubject(e)),window.CLIENTCONFIG.ISWIN&&(y.setSubject(e),$getState().conf.isSvcConf&&L.SvcAtdManager.setSubject(e))},zn=function(e){$dispatch(coreUi.changeCallId(e))},Xn=function(e){$dispatch(coreUi.changeConfRole(e))},Qn=function(e,t){$dispatch(coreUi.changeConfServerId(e)),L.SvcAtdManager.setConfServerId(isNullOrEmpty(t)?e:t),y.setConfServerId(isNullOrEmpty(t)?e:t)},Zn=function(e){q.info("confInfoNotify vmrid is not empty. "),$dispatch(coreUi.changeVmrId(e))},er=function(){q.info("handleChangeIsSvcConf true"),$dispatch(coreUi.changeIsSvcConf(!0)),W.changeIsSvcConf()},tr=function(e){q.info("handlechangeSsrcRange ssrcRange",e),$dispatch(coreUi.changeSSRCRange(e))},nr=function(){window.pairId&&0!==window.pairId&&(q.info("send maxhub pair join conf failed"),(0,U.sendJoinPairResult)(window.pairId,constant.PAIR_CONF_RESULT.INVALID)),q.info("maxhubCheckConfType, not video conf, end the conf in maxhub"),We(),alert(language.MAXHUB_INVALID_CONF)},rr=t.oneKeyEnterConf=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r,a){var o,i,s,c,u,f,l,d=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o={bConf:!0,bVideo:a,number:t,contactInfo:{number:t},enterConfParam:{pstconfparam:{confid:n,access_code:t,conf_paswd:r},call_type:1},isConsultTransfer:!1},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=9;break}return e.next=4,coreUi.checkMobileMultiDevice(o);case 4:if(!(i=e.sent)){e.next=9;break}return q.info("multi device logined oneKeyEnterConf"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 9:return e.next=11,re(a);case 11:if(s=e.sent,0===s.code){e.next=15;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 15:return W.showConfOutPage(a,!1,"",t),$dispatch(coreUi.saveCalleeInfo({})),c=!1,u=!1,c=!$getState().conf.isOpenCameraDe,u=!$getState().conf.isOpenMicDe,f={confAcs:t,confId:n,confPwd:r,isVideo:a,deviceSet:{isCloseCameraDe:c,isMuteMicDe:u},isVMR:d},e.next=24,coreConf.oneKeyEnterConfService(f);case 24:if(l=e.sent,$dispatch(coreUi.changeEnterConfState(!1)),!l){e.next=31;break}return q.info("onekeyenterconf send to TUP suc"),e.abrupt("return",!0);case 31:return q.info("onekeyenterconf send to TUP fails"),W.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),W.clearAfterConfEnd(!1,!1),e.abrupt("return",!1);case 35:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),ar=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r){var a;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("callEnded, callId: "+r+"reason_code is "+t),a=Y.getCallEndedErrorTip(t,n),W.closeConfPage(!1,!0,t,a),W.clearAfterConfEnd(!1,!0,t,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),or=t.enterConfInConfList=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("enterConfInConfList: isPairConf:"+h),""===t&&(t=$getState().conf.currentConfInfo),n=t.access_number,r=t.conf_id,a={number:n,conf_id:r,cycle_conf_id:t.cycle_conf_id},o=t.media_type,i=coreCommon.isVideoConf(o),s={pstconfparam:{confid:t.conf_id,access_code:t.access_number,conf_paswd:""},call_type:1},c={bConf:!0,bVideo:i,number:n,contactInfo:a,enterConfParam:s,isConsultTransfer:!1},window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=17;break}return e.next=12,coreUi.checkMobileMultiDevice(c);case 12:if(!(u=e.sent)){e.next=17;break}return q.error("checkMultiDevice is false,cannot enterConfInConfList"),coreUt.utEventFinish(constant.EVENT_ID.UT_CONF_JOIN,null,[0]),e.abrupt("return",!1);case 17:return e.next=19,re(i,h);case 19:if(f=e.sent,0===f.code){e.next=24;break}return q.error("resOfCheck is false,cannot enterConfInConfList"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 24:return l=t.conf_subject,W.showConfOutPage(i,!1,l,""),$dispatch(coreUi.saveCalleeInfo({})),q.info("enterConfInConfList,enter conf oneKeyEnterConf"),d={confId:a.conf_id,cycle_conf_id:a.cycle_conf_id},e.next=31,coreConf.enterConfInConfListService(d);case 31:if(p=e.sent){e.next=40;break}return q.error("enterConfInConfList fail"),W.closeConfPage(!1,!1,-2,language.ENTER_CONF_FAIL),W.clearAfterConfEnd(!1,!1),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 40:$dispatch(coreUi.changeEnterConfState(!1));case 41:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),ir=(t.lockConfFuc=function(){window.confirm(language.LOCK_CONFERENCE_PROMPT).then(function(e){e.ret&&(q.info("userClick lockConfFuc confirm"),coreConf.lockConfService(1))})},t.unlockConfFuc=function(){q.error("userClick unlockConfFuc"),coreConf.lockConfService(0)},function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,s=(0,i.default)(e);!(n=(o=s.next()).done);n=!0){var c=o.value;if(c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}return t}),sr=t.compressreleasePreservate=function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=ir(t),e.next=4,Te(n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q.error("compressreleasePreservate:",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t){return e.apply(this,arguments)}}(),cr=(t.compressRemoveAttendee=function(){var e=(0,S.default)(g.default.mark(function e(t){var n,r;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=-1,r=$getState().conf.memberListInfo,r.forEach(function(e){e.number===t&&(n=e.state)}),!(5===n||6===n&&window.isSupportiDo)){e.next=8;break}return e.next=6,De(t);case 6:e.next=10;break;case 8:return e.next=10,Pe(t);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairmanFuc=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.confirm(language.MEETING_WILL_HAVE_NO_CHAIRMAN).then(function(e){e.ret&&(q.info("userClick  releaseChairmanFuc confirm"),sr(t))});case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairmanFuc=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t=$getState().conf.memberListInfo,n=ir(t),(r=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=8;break}ur(),e.next=23;break;case 8:if(a=$getState().login.tempConfInfo,o=decodeURIComponent(escape(window.atob(a.chairman_pwd))),window.isSupportiDo){e.next=20;break}if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=17;break}return q.info("SMC first Rest"),e.next=15,Oe(o,n);case 15:e.next=18;break;case 17:ur();case 18:e.next=23;break;case 20:return q.info("SMC first iDo"),e.next=23,Oe(o,n);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(0),q.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[0,25]])}));return function(){return e.apply(this,arguments)}}()),ur=function(){var e=(0,S.default)(g.default.mark(function e(){var t,n,r,a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=$getState().conf.memberListInfo,n=$getState().login.deployMode,r=ir(t),window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISWIN?(a=$getState().conf.isShowMemberListNew,a?(o=$getState().conf.showqusetchairman)||$dispatch(coreUi.showqusetchairman()):window.CLIENTCONFIG.ISWIN?(coreUi.changeRightBtnDisabled(!0),window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if(e.ret)lr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);else{var t=$getState().common.showResetfuc;t&&t(!1)}})):(coreUi.setMInputValueLogic(""),window.notifyPrompt(language.NATIVE_CHAIRMAN_PASSWORD,{placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(e){if("callMain"===window.getRoute()){var t=$getState().common.showResetfuc;t&&t()}e.ret&&(q.info("userClick  confirmRequestPreservate"),fr(r,e.param.input_type_password),window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1))}))):window.notifyPrompt("",{isNotMessage:!0,placeholders:language.PLEASE_ENTER_THE_CHAIRPERSON_PASSWORD,inputType:"password"}).then(function(){var e=(0,S.default)(g.default.mark(function e(t){var n;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=5;break}return n=$getState().login.deployMode,e.next=4,Oe(t.param.input_type_password,r);case 4:window.isSupportiDo||n===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}())}catch(e){q.error("reRequestChairman",e)}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),fr=function(){var e=(0,S.default)(g.default.mark(function e(t,n){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),q.error("compressRequestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}(),lr=function(){var e=(0,S.default)(g.default.mark(function e(t,n){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Oe(n,t);case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),q.error("requestPreservate:",e.t0);case 8:case"end":return e.stop()}},e,void 0,[[0,5]])}));return function(t,n){return e.apply(this,arguments)}}();t.cloudRecordRequestFuc=function(){var e=(0,S.default)(g.default.mark(function e(t,n){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,q.info("reacrd cloudRecordRequestFuc[1] messageId:",t,"switchType:",n),e.next=4,Gn(t,n);case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),q.error("cloudRecordRequestFuc",e.t0);case 9:case"end":return e.stop()}},e,void 0,[[0,6]])}));return function(t,n){return e.apply(this,arguments)}}();window.stopRecallTimer=function(){G.terminateReCall()};var dr=(t.createConfByTeamList=function(){var e=(0,S.default)(g.default.mark(function e(t,n,r){var a,o;return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=$getState(),o=a.myInfo,ae(o,n,r,t,!1);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.cancelConf=function(e){window.confirm(language.CONFIRM_TO_CANCEL_THE_CONF).then(function(){var t=(0,S.default)(g.default.mark(function t(n){return g.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.ret){t.next=7;break}return q.info("userClick confirmBtn to cancel the meeting"),t.next=4,Mt.wait();case 4:coreConf.cancelConfService(e),t.next=8;break;case 7:q.info("userClick cancelBtn to cancel the meeting");case 8:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}())},t.handleCancelConf=function(){var e=(0,S.default)(g.default.mark(function e(t){return g.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("handle cancel conf result:",t.param.error_code),pr(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),pr=t.createCancelConfEvent=function(e){var t=new Event("cancelInfoResult");t.data={ret:e},window.dispatchEvent(t)},hr=function(e){for(var t=0;t<e.length;t++){var n={},r=[];n.enable_conf_sign_in=0,n.conf_subject=e[t].conf_subject,n.start_time=e[t].start_time,n.end_time=e[t].end_time,n.media_type=e[t].media_type,n.conf_id=e[t].conf_id,n.general_pwd="",n.guest_pwd="";for(var a=0;a<e[t].confmembers.length;a++){var o={};o.role=0,o.name=e[t].confmembers[a].name,o.number=e[t].confmembers[a].number,r[a]=o}_r(n,r),$dispatch(coreUi.changehasConfInfo("yes"))}},_r=t.addToAllConfInfo=function(e,t){q.info("add confInfo to AllConfInfo, confId = "+e.conf_id);var n=$getState().conf.allConfInfo,r={};r.conf_list_info=e,r.attendee=t,n.set(e.conf_id,r),$dispatch(coreUi.changeAllConfInfo(n))},gr=function(){q.info("update AllConfInfo");var e=$getState().conf.isEnableHistoryConfList,t=[];t=e?$getState().conf.allConfList:$getState().conf.conflist;var n=$getState().conf.allConfInfo,r=!0,a=!1,o=void 0;try{for(var s,c=(0,i.default)(n);!(r=(s=c.next()).done);r=!0){for(var u=s.value,f=!1,l=0;l<t.length;l++)if(u[0]===t[l].conf_id){f=!0;break}f||(q.info("delete confinfo in AllConfInfo, conf_id = "+u[0]),n.delete(u[0]))}}catch(e){a=!0,o=e}finally{try{!r&&c.return&&c.return()}finally{if(a)throw o}}$dispatch(coreUi.changeAllConfInfo(n))};t.formatConfId=function(e){if(isNullOrEmpty(e))return"";for(var t=e.length,n="",r=0;r<t;r+=3){n+=e.substring(r,r+3)+" "}var a=n.split(" "),o=a[a.length-1].length;return o<1&&(n=n.substring(0,n.length-1-o),n+=a[a.length-1]),n},t.recordIsImGroupCreateConf=function(e){q.info("record conference recordIsImGroupCreateConf"),$dispatch(coreUi.changeIsImGroupCreateConf(e))}},154:function(e,t,n){e.exports={default:n(213),__esModule:!0}},157:function(e,t,n){e.exports=n(0)(593)},158:function(e,t,n){n(22),n(159),e.exports=n(8).Array.from},159:function(e,t,n){"use strict";var r=n(11),a=n(10),o=n(130),i=n(32),s=n(33),c=n(27),u=n(160),f=n(26);a(a.S+a.F*!n(34)(function(e){Array.from(e)}),"Array",{from:function(e){var t,n,a,l,d=o(e),p="function"==typeof this?this:Array,h=arguments.length,_=h>1?arguments[1]:void 0,g=void 0!==_,m=0,v=f(d);if(g&&(_=r(_,h>2?arguments[2]:void 0,2)),void 0==v||p==Array&&s(v))for(t=c(d.length),n=new p(t);t>m;m++)u(n,m,g?_(d[m],m):d[m]);else for(l=v.call(d),n=new p;!(a=l.next()).done;m++)u(n,m,g?i(l,_,[a.value,m],!0):a.value);return n.length=m,n}})},160:function(e,t,n){"use strict";var r=n(25),a=n(161);e.exports=function(e,t,n){t in e?r.f(e,t,a(0,n)):e[t]=n}},161:function(e,t,n){e.exports=n(0)(79)},164:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){return g.default.reject(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.LoginInfo=t.resetLoginModel=t.getSyncLoginModel=t.getLoginModel=t.ErrorType=t.ErrorCode=t.EAErrorCode=t.UErrorCode=void 0;var o=n(119),i=r(o),s=n(4),c=r(s),u=n(5),f=r(u),l=n(120),d=r(l),p=n(121),h=r(p),_=n(3),g=r(_),m=n(1),v=r(m),C=n(2),I=r(C);t.LoginError=a;var w=(t.UErrorCode=constant.UPORTAL_LOGIN_ERROR,t.EAErrorCode=constant.EADDR_LOGIN_ERROR,t.ErrorCode=constant.LOGIN_COMMON_ERROR,t.ErrorType=constant.LOGIN_ERROR_TYPE,coreLogger.getLogger("logic")("login/model/login")),S=void 0,E=(t.getLoginModel=function(){var e=(0,I.default)(v.default.mark(function e(){return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S||(S=new N(E)),e.abrupt("return",S);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getSyncLoginModel=function(){return S||(S=new N(E)),S},t.resetLoginModel=function(){S=null,w.info("<account_login>12_reset_loginmodel")},{shouldExitApp:"true",displayAccount:"",account:"",tenantid:"",verificationNumber:"",verificationCode:"",loadPwd:!1,folder:!0,showPwd:!1,showLangSet:!1,isSaveLangChange:!1,oldLangCode:"",isSaveAddress:!1,middleEndAddress:"",serverAddress:"",serverPort:"",_serverUportalAddress:"",_serverUportalPort:"",uportalLoginState:0,sipRegisterState:0,authToken:"",isRememberPassword:window.CLIENTCONFIG.ISMOBILE,isAutoLogin:!1,loginHistoryList:[],loginRecordList:[],isLoading:!1,loginDisable:!1,logoutDisable:!1,isCapslock:!1,isOffline:!1,passwordType:"",eabUri:"",groupServer:"",sipUri:"",svnUri:"",currentNum:0,mainSiteSum:0,httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,isFreeUser:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerLocal:"",sipServerPortLocal:0,eServerAddressAll:"",eServerAddress:"",eServerPort:0,socketMode:0,isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1,maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",shouldBuildStg:!1,isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,appstate:constant.APP_STATE.DISCONNECTED,funcType:0,deployMode:0,lastDeployMode:0,tmsServer:"",tmsAccount:"",tmsPwd:"",sipLoginOnly:!1,sipLoginissiptls:0,sipLoginissrtp:1,pushgwUri:"",sipOnlyType:0,isMultiDeviceLogined:!1,switchAccount:{},tempsipinfo:{},tempConfInfo:{},tempsipserverAddress:"",tempsipserverPort:"",tempMediaxAddress:"",tempMediaxPort:"",tempNoNameMediaxAddress:"",tempNoNameMediaxPort:"",tempSipAccount:"",tempSipNick:"",tempsipPassword:"",tempsipGetState:0,sipOnlyurlInfo:{},isSupportCACertCheck:!0,isShowShareRecommendationCircle:!0,sipTransMode:0,sipWhiteList:null,srtpMode:0,smcUri:"",certificateUrl:"",keysUrl:"",certificateName:"",selectCertificate:!0,mProveUrl:"",mkeysUrl:"",mProveName:"",mSelectProve:!0,mZipUrl:"",isIwb:!1,maxhubLoginError:{},euaServer:"",whetherInLoginRecordList:!1,showPullRecordList:!1,isCloudec:!1,isOAuth:!1,OAuthUrl:"",OAuthAccountUrl:"",changeItPasswordUrl:"",FrogetPwdUrl:"",FrogetPwdUrlPort:0,isFrogetRedriect:!1,forgetPwdAccount:"",sysProxyAddress:"",sysProxyPort:0,isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:"",real_user_account:"",itOAuthUrl:"",itSignedUrl:"",itUploadHeadImgUrl:"",isPortalUpgrade:!1,isWaitUpgrade:!1,isPortalAfterCallUpgrade:!1,progressPercent:-1,isUpdateError:!1,whatsNewCHN:"",whatsNewENG:"",showContentType:0,isForceUpdate:!1,downloadVersion:"",downloadUrl:"",isReqAddrChanged:!1,isSupportAS:!1,show_account:"",curPortalState:0,manMachineCode:{},isUserClickUploadComplaints:!1,canRecordConf:!1,ctdServerUri:"",confctrlUri:"",ssoLoginTypeCheckedValue:0,authType:0}),N=t.LoginInfo=function(e){function t(e){var n=this;(0,c.default)(this,t);var r=(0,d.default)(this,(t.__proto__||(0,i.default)(t)).call(this,e));return r.hasLoginCanceled=!1,r.useSip=!0,r.useEsight=!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,r.checkSipState=(0,I.default)(v.default.mark(function e(){var t;return v.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!r.isSipRegSuc()){e.next=2;break}return e.abrupt("return");case 2:return t=r,w.info("checkSipState: sip is not registered."),r.prepareSipForCallOrConf=!0,e.abrupt("return",new g.default(function(e){var n=5,r=setInterval(function(){(n<1||t.isSipRegSuc())&&(t.prepareSipForCallOrConf=!1,clearInterval(r),e()),n-=1,w.info("checkSipState: retry: "+(5-n))},1e3)}));case 6:case"end":return e.stop()}},e,n)})),r}return(0,h.default)(t,e),(0,f.default)(t,[{key:"notifyChanged",value:function(e){coreCommon.dispatchModuleEvent("login_model",e)}},{key:"isSipRegSuc",value:function(){return this.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED}},{key:"setLoginStatus",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments[1];w.info("[ setLoginStatus ] flag:",e,", result:",t,", isResume:",this.isResume);var n=void 0;e?n=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECTING:!0===t?n=constant.APP_STATE.ONLINE:!1===t&&(n=this.isResume?constant.APP_STATE.RECONNECTING:constant.APP_STATE.CONNECT_FAILED),this.set({loginDisable:e,appstate:n})}},{key:"setAppState",value:function(e){w.info("[ appstate ]",e),this.appstate=e}},{key:"getstate",value:function(e){return e?$getState().login[e]:$getState().login}},{key:"clearInLoginState",value:function(){this.set({isInUportalLogin:!1,isInInitPrivateDB:!1,isInDetectFireWall:!1,isInLoadConfigFromDB:!1,isInEserverLogin:!1,isInSipLogin:!1})}},{key:"update",value:function(e){this.dispatch(e)}},{key:"clearPassword",value:function(){this.password="",this.proxyPassword="",this.sipPassword=""}},{key:"serverUportalAddress",get:function(){return this._serverUportalAddress||this.serverAddress},set:function(e){this._serverUportalAddress=e}},{key:"serverUportalPort",get:function(){return this._serverUportalPort||this.serverPort},set:function(e){this._serverUportalPort=e}},{key:"loginType",get:function(){return window.SERVERCONFIG.HWUC},set:function(e){window.SERVERCONFIG.HWUC=e}},{key:"isMobile",get:function(){return window.CLIENTCONFIG.ISMOBILE},set:function(e){window.CLIENTCONFIG.ISMOBILE=e}},{key:"isHWUC",get:function(){return window.SERVERCONFIG.HWUC===constant.LOGIN_TYPE.HWUC},set:function(e){}},{key:"useIM",get:function(){return!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&window.CLIENTCONFIG.USE_IM},set:function(e){window.CLIENTCONFIG.USE_IM=e}},{key:"useMetting",get:function(){return window.CLIENTCONFIG.USE_MEETING},set:function(e){window.CLIENTCONFIG.USE_MEETING=e}},{key:"useEab",get:function(){return window.SERVERCONFIG.HWUC!==constant.LOGIN_TYPE.HWUC&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&!this.sipLoginOnly},set:function(e){}},{key:"asAddress",get:function(){return $getState().conf.asAddress}},{key:"OAuthClinetID",get:function(){return window.CLIENTCONFIG.IT_WELINK_CLIENT_ID},set:function(e){window.CLIENTCONFIG.IT_WELINK_CLIENT_ID=e}},{key:"defaultRoute",get:function(){if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)return"callMain";var e="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME;return $getState().menu.menuList&&$getState().menu.menuList instanceof Array&&$getState().menu.menuList[0]?!e&&$getState().menu.menuList.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+$getState().menu.menuList[0]:window.CLIENTCONFIG.MOBILE_MENU_LIST&&window.CLIENTCONFIG.MOBILE_MENU_LIST instanceof Array&&window.CLIENTCONFIG.MOBILE_MENU_LIST[0]?!e&&window.CLIENTCONFIG.MOBILE_MENU_LIST.includes(window.navMobileConfiglist[1].route)?"main/"+window.navMobileConfiglist[1].route:"main/"+window.CLIENTCONFIG.MOBILE_MENU_LIST[0]:e?"main/"+window.navMobileConfiglist[0].route:"main/"+window.navMobileConfiglist[1].route},set:function(e){}}]),t}(coreCommon.ModuleCache)},165:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAtdManager=t.WatchRequestManager=t.DecoderManager=t.HwndManager=t.SsrcManager=t.Atdlogger=void 0;var o,i,s,c,u,f,l,d,p,h,_=n(143),g=a(_),m=n(141),v=a(m),C=n(135),I=a(C),w=n(191),S=a(w),E=n(401),N=a(E),T=n(154),b=a(T),O=n(1),L=a(O),A=n(2),y=a(A),x=n(69),R=a(x),M=n(123),k=a(M),P=n(4),D=a(P),U=n(152),F=n(186),G=r(F),B=(n(248),n(207)),W=n(194),V=n(208),H=r(V),$=n(329),Y=n(286),q=coreLogger.getLogger("conf")("logic/video/svcManager");window.refreshAtdlistTimer=null,window.haveCreateVideoFrame=!1;window.lockHandleAtdlist=!1,window.reportOnlineAtdNumTimer=null;var j=t.Atdlogger=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";name:"+(t[a]&&t[a].name?t[a].name.length>2?t[a].name.substr(0,1)+"**"+t[a].name.substr(-1):t[a].name.substr(0,1)+"**":"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",is_same_grade_mcu:"+(t[a]&&t[a].is_same_grade_mcu?t[a].is_same_grade_mcu:"")+",wnd_handle:"+(t[a]&&t[a].wnd_handle?t[a].wnd_handle:""):r+";name:"+(t[a]&&t[a].userInfo&&t[a].userInfo.name?t[a].userInfo.name.substr(0,1)+"**"+t[a].userInfo.name.substr(-1):"")+",number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"");q.info(e,r)},K=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r="";if(t&&!isNaN(t.length))for(var a=0;a<t.length;a++)r=0===n?r+";number:"+(t[a]&&t[a].number?t[a].number.substr(0,3)+"****"+t[a].number.substr(-3):"")+",ssrc:"+(t[a]&&t[a].ssrc?t[a].ssrc:"")+",width:"+t[a].width+",height:"+t[a].height:1===n?r+";render:"+t[a].render+",ssrc:"+(t[a]&&t[a].ssrc_id?t[a].ssrc_id:"")+",width:"+t[a].width+",height:"+t[a].height:r+";confName:"+(t[a]&&t[a].confName?t[a].confName.substr(0,1)+"**"+t[a].confName.substr(-1):"")+",hwnd:"+t[a].hwnd;q.info(e,r)},J=function(){var e=$getState().call.iSreceivingBFCP,t=$getState().conf,n=t.bfcpFrameHwnd,r=t.bfcpIsBigHwnd,a=t.dataIsBigHwnd;return q.info("iSreceivingBFCP = "+e+", bfcpFrameHwnd = "+n+", bfcpIsBigHwnd = "+r),q.info("coreConf.isDataShareStarted()  = "+coreConf.isDataShareStarted()+", dataIsBigHwnd = "+a),!0===e&&n>0&&r||!0===coreConf.isDataShareStarted()&&!0===a},z=t.SsrcManager=(i=o=function e(){(0,D.default)(this,e)},o.addSvcSSRC=function(e){var t=$getState().conf.usedSsrcList,n=(0,k.default)([],t);return n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n)),q.info("used ssrc list is "+(0,R.default)(n)),e},o.removeSvcSSRC=function(e){if(q.info("removeSSRC: "+e,e),-1===e)return!1;var t=$getState().conf.usedSsrcList,n=(0,k.default)([],t),r=n.indexOf(e);return-1===r?(q.info("unexpected removeSSRC",n,e),!1):(n.splice(r,1),$dispatch(coreUi.changeUsedSvcSSRCList(n)),!0)},o.clearAllSvcSSRC=function(){q.info("clearAllSvcSSRC"),$dispatch(coreUi.changeUsedSvcSSRCList([]))},o.assignSsrc=function(e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=constant.SVC_SSRC_FLAG.LOCAL_SSRC;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return q.info("assignSsrc ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null}return z.addSvcSSRC(a),a},o.updateAllSsrcOfAtds=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];z.clearAllSvcSSRC();for(var t=0;t<e.length;t++){var n=z.assignSsrc(e[t]);e[t].ssrc=n}return j("updateAllSsrcOfAtds,new svcAtd is",e),e},i),X=t.HwndManager=(c=s=function e(){(0,D.default)(this,e)},s.createHwndsByType=function(){var e=(0,y.default)(L.default.mark(function e(t,n,r){var a,o;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwndsByType start, count = "+t+", hwnd = "+n),!(t<=0)){e.next=3;break}return e.abrupt("return");case 3:return a=$getState().conf.videoFrameHwnd,e.next=6,B.NativeInterface.createWindows(a,t,n,r);case 6:return o=e.sent,X.handleChangeSvcWndHandles(o),q.info("createHwndsByType end,hwndList = "+(0,R.default)(o)),e.abrupt("return",o);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),s.createHwnds=function(){var e=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createHwnds start, count = "+o+", hwnd = "+i),!(o<=0)){e.next=3;break}return e.abrupt("return");case 3:for(t=$getState().conf.videoFrameHwnd,n=new Array,r=0;r<o;r++)n.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return e.next=8,B.NativeInterface.createWindows(t,o,i,n);case 8:return a=e.sent,X.handleChangeSvcWndHandles(a),q.info("createHwnds end,hwndList = "+(0,R.default)(a)),e.abrupt("return",a);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.createBigHwnds=function(){var e=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("createBigHwnds start, count = "+i+", hwnd = "+s),t=$getState().conf,n=t.videoFrameHwnd,r=t.svcWndHandles,!window.haveCreateBigWnd){e.next=4;break}return e.abrupt("return");case 4:return window.haveCreateBigWnd=!0,a=[{type:constant.SVC_HWND_TYPE.BIG_VIDEO}],r&&r.length>0&&(s=r[0].hwnd),e.next=9,B.NativeInterface.createWindows(n,i,s,a);case 9:return o=e.sent,X.handleChangeSvcWndHandles(o),o&&o[0].type===constant.SVC_HWND_TYPE.BIG_VIDEO?($dispatch(coreUi.changeBigHwnd(o[0].hwnd)),window.haveCreateBigWnd=!1):(q.info("big hwnd create failed"),window.haveCreateBigWnd=!1),q.info("createBigHwnds end,hwndList = "+(0,R.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.updateHwnds=function(){var e=(0,y.default)(L.default.mark(function e(t,n){var r,a;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("updateHwnds start, deleteHwnds = "+(0,R.default)(t)+",create = "+(0,R.default)(n)),r=$getState().conf.videoFrameHwnd,e.next=4,B.NativeInterface.updateWindows(r,t,n);case 4:return a=e.sent,X.handleChangeSvcWndHandles(a),q.info("updateHwnds end,hwndList = "+(0,R.default)(a)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),s.destoryHwnds=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destoryHwnds: "+t),0!==t.length){e.next=3;break}return e.abrupt("return");case 3:return n=$getState().conf.videoFrameHwnd,e.next=6,B.NativeInterface.destoryWindows(n,t);case 6:return r=e.sent,X.handleChangeSvcWndHandles(r),q.info("destoryHwnds end: hwndList = "+(0,R.default)(r)),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),s.clearAllHwnds=function(){var e=(0,y.default)(L.default.mark(function e(){var t,n,r,a=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n=X.getAllHwnds(a),e.next=4,B.NativeInterface.destoryWindows(t,n);case 4:return r=e.sent,X.handleChangeSvcWndHandles(r),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),s.getAllHwnds=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=$getState().conf,n=t.svcWndHandles,r=t.svcViewMode,a=t.maxSizeForPage;if(!n)return q.info("svcWndHandles is null"),new Array;for(var o=new Array,i=0;i<n.length;i++)if(e)o.push(n[i].hwnd),$dispatch(coreUi.changeBigHwnd(0));else{if(1===n[i].type)continue;o.push(n[i].hwnd)}return r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.minModeKeepWndNum>0&&o.splice(a-ee.minModeKeepWndNum),q.info("getAllHwnds,wndhandles = ",o),o},s.handleChangeSvcWndHandles=function(e){$dispatch(coreUi.changeSvcWndHandles(e))},c),Q=t.DecoderManager=(f=u=function e(){(0,D.default)(this,e)},u.createAllWndDecoders=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf.svcViewMode,r=$getState().call.callId,(a=Q.createDecoderListFactory(n,t))&&0!==a.length){e.next=6;break}return q.info("videoWindowList is nulll or zero!"),e.abrupt("return");case 6:return K("createAllWndDecoders videoWindowList is",a,1),e.next=9,coreCall.setAllSvcVideoWindows(a.length,r,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u.createDecoderListFactory=function(e,t){var n=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n=Q.createBigSmallDecoderList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n=Q.createDivideDecoderList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:n=Q.createPicInPicDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:n=Q.createMinSingleDecoderList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:n=Q.createMinVerticalDecoderList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:n=Q.createMinSingleDecoderList(e);break;default:q.info("SvcViewMode is error,please check!")}return n},u.createBigSmallDecoderList=function(e,t){if(!t)return void q.info("svcShowAttendances is null");var n=Q.createSmallWndDecoders(t),r=Q.createBigWndDecoders(e);return r&&r.length>0&&n.splice(0,0,r[0]),n},u.createDivideDecoderList=function(e){return e?Q.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.createPicInPicDecoderList=function(e){var t=new Array;return J()||(t=Q.createBigWndDecoders(e)),t},u.createMinSingleDecoderList=function(e){return Q.createBigWndDecoders(e)},u.createMinVerticalDecoderList=function(e){return e?Q.createSmallWndDecoders(e):void q.info("svcShowAttendances is null!")},u.closeAllWndDecoders=(0,y.default)(L.default.mark(function e(){var t;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("closeAllWndDecoders"),t=[{render:0,ssrc_id:0,width:0,height:0}],e.next=4,coreCall.setAllSvcVideoWindows(t.length,$getState().call.callId,t);case 4:case"end":return e.stop()}},e,void 0)})),u.createBigWndDecoders=function(e){q.info("createBigWndDecoders start");var t=$getState().conf,n=(t.svcBigPicInfo,t.ssrcRange),r=t.bigHwnd,a=t.svcDesktopSpeakerBigMaxLook,o=t.svcMaxWatchResolution,i=t.svcOnLineAttendances,s=(t.isSvcSelectMode,constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(s=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?s=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?s=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(s=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(a)||0===a.width||0===a.height||(s=Z.getRealResolution(s,a),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",s)),s=Z.getRealResolution(s,o),q.info("bigWatchRatio.width:"+s.width+",bigWatchRatio.height:"+s.height+", svcViewMode = "+e);var c=new Array,u=n.min,f=r;i.length<=1&&(f=0);var l=$getState().conf.isStopSvcSelect;q.info("createBigWndDecoders isStopSvcSelect:",l," checkIsNeedBigWatch():",J());var d=void 0;return d=l||J()?Q.windowTemplate(f,0,0,0):Q.windowTemplate(f,u,s.width,s.height),q.info("createBigWndDecoders videoWindow:",d),c.push(d),q.info("createBigWndDecoders end,bigWndDecoders = "+(0,R.default)(c)),c},u.createSmallWndDecoders=function(e){q.info("createSmallWndDecoders start");for(var t=($getState().conf.svcWndHandles,new Array),n=Z.getSvcWatchRatio(),r=0;r<e.length;r++)if(!(1===e[r].is_self||e[r].ssrc<0)){var a=$getState().conf.isStopSvcSelect;q.info("createSmallWndDecoders isStopSvcSelect:"+a);var o=Q.windowTemplate(e[r].wnd_handle,0,0,0);a||(o=Q.windowTemplate(e[r].wnd_handle,e[r].ssrc,n.width,n.height)),q.info("createSmallWndDecoders videoWindow:",o),t.push(o)}return q.info("createSmallWndDecoders end,smallWndDecoders = "+(0,R.default)(t)),t},u.windowTemplate=function(e,t,n,r){return{render:e,ssrc_id:t,width:n,height:r}},f),Z=t.WatchRequestManager=(d=l=function e(){(0,D.default)(this,e)},l.getSvcWatchRatio=function(){var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=e.isSvcBroadcastMode,a=e.audioVideoNum,o=window.CLIENTCONFIG.ISBIGWIN?a.video-1:t.length-1;window.CLIENTCONFIG.ISBIGWIN&&r&&(o=1);var i=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90);if(n===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL)i=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);else if(n===constant.SVC_VIEW_MODE.DIVIDE_MODE){if(1===o)i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720,window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(i=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);else if(o>=2&&o<=6){i=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var s=$getState().conf.svcDesktopDivideModeMaxLook2_6;i=Z.getRealResolution(i,s)}else if(o>=7&&o<=16){i=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var c=$getState().conf.svcDesktopDivideModeMaxLook7_16;i=Z.getRealResolution(i,c)}else if(o>16){i=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var u=$getState().conf.svcDesktopDivideModeMaxLook17_24;i=Z.getRealResolution(i,u)}}else if(n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE){i=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var f=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;i=Z.getRealResolution(i,f)}q.info("svcWatchRatio.width:"+i.width+",svcWatchRatio.height:"+i.height+", svcViewMode = "+n);var l=$getState().conf.svcMaxWatchResolution;return i=Z.getRealResolution(i,l)},l.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,q.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},l.sendSvcWatchRequest=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=ee.getSelfNumber(),r=$getState().conf,a=r.svcViewMode,o=r.isStopSvcSelect,K("sendSvcWatchRequest svcViewMode is",a),i=Z.createWatchListFactory(a,t,o),K("sendSvcWatchRequest watchAttendees is",i,0),s={attendeeList:i,selfNum:n},e.next=8,coreConf.sendWatchSvcRequestService(s);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),l.createWatchListFactory=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=new Array;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:q.info("go into constant.SVC_VIEW_MODE.BIG_SMALL_MODE!"),r=Z.createBigSmallWatchList(e,t);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:q.info("go into constant.SVC_VIEW_MODE.DIVIDE_MODE!"),r=Z.createDivideWatchList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:q.info("go into constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE!"),r=Z.createPicInPicWatchList(e);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:q.info("go into constant.SVC_VIEW_MODE.MIN_WIN_SINGLE!"),r=Z.createMinSingleWatchList(e,n);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:q.info("go into constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL!"),r=Z.createMinVerticalWatchList(t,n);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:q.info("go into constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE!"),r=Z.createMinSingleWatchList(e,n);break;case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:q.info("go into constant.SVC_VIEW_MODE.MIN_WIM_FLOAT!"),r=Z.createMinSingleWatchList(e,n);break;default:q.info("SvcViewMode is Error,please check!")}return r},l.createBigSmallWatchList=function(e,t){if(!t)return void q.info("createBigSmallWatchList,svcShowAttendances is null!");var n=Z.createSmallWatchList(t),r=new Array;return J()||(r=Z.createBigWatchList(e)),r&&r.length>0&&n.splice(0,0,r[0]),n},l.createDivideWatchList=function(e){return e?Z.createSmallWatchList(e):void q.info("createDivideWatchList,svcShowAttendances is null!")},l.createPicInPicWatchList=function(e){var t=new Array;if(J()){var n=Z.watchTemplate("",0,0,0);t.push(n)}else t=Z.createBigWatchList(e);return t},l.createMinSingleWatchList=function(e,t){return Z.createBigWatchList(e,t)},l.createMinVerticalWatchList=function(e,t){return e?Z.createSmallWatchList(e,t):void q.info("createMinVerticalWatchList,svcShowAttendances is null!")},l.createBigWatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q.info("createBigWatchList");var n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcBigPicInfo,o=n.ssrcRange,i=n.isSvcSelectMode,s=n.svcDesktopSpeakerBigMaxLook,c=n.svcMaxWatchResolution,u=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720);window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(u=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),e===constant.SVC_VIEW_MODE.MIN_WIN_MIN||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT?u=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_90):e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE?u=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180):e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE&&(u=(0,k.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360)),isNullOrEmpty(s)||0===s.width||0===s.height||(u=Z.getRealResolution(u,s),q.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchRatio= ",u)),u=Z.getRealResolution(u,c),q.info("bigWatchRatio.width:"+u.width+",bigWatchRatio.height:"+u.height+", svcViewMode = "+e+",isStopSvcSelect:"+t);var f=new Array,l="",d=o.min;if(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&2===r.length){for(var p=0;p<r.length;p++)if(1!==r[p].is_self){l=r[p].number;break}}else i&&a&&(l=a.number);var h=Z.watchTemplate("",0,0,0);return t||(h=Z.watchTemplate(l,d,u.width,u.height)),f.push(h),f},l.createSmallWatchList=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];q.info("createSmallWatchList");for(var n=$getState().conf,r=n.isSameGradeMcu,a=n.isBigConf,o=n.svcShowPage,i=n.isSvcMultiViewBroadcast,s=n.broadcastIsMultiview,c=new Array,u=Z.getSvcWatchRatio(),f=0;f<e.length;f++)if(!(1===e[f].is_self||e[f].ssrc<0)){var l=e[f].number;0===r&&0===e[f].is_same_grade_mcu&&0===e[f].is_broadcast&&(l="M255T0");var d=Z.watchTemplate("",0,0,0);t||(d=Z.watchTemplate(l,e[f].ssrc,u.width,u.height)),c.push(d)}if(q.info(" createSmallWatchList isStopSvcSelect:",t),i&&window.CLIENTCONFIG.ISBIGWIN&&s)q.info("isSvcMultiViewBroadcast = "+i),$dispatch(coreUi.changeBroadcastIsMultiView(!1));else if(a&&0===o)for(var p=0;p<c.length;p++)c[p].number="";return c},l.watchTemplate=function(e,t,n,r){return{number:e,ssrc:t,width:n,height:r}},d),ee=t.SvcAtdManager=(h=p=function e(){(0,D.default)(this,e)},p.addAudioNum=0,p.addVideoNum=0,p.showAtdListChanged=!1,p.aDeleteHwnds=new Array,p.iAddCount=0,p.highlightWnd=0,p.speaker="",p.bcHwnd=!1,p.init=!1,p.memberlistArray=new Array,p.muteInfo=new b.default,p.localMicStates={},p.serialConfFirstIndex=-1,p.minModeKeepWndNum=0,p.oldSingleState=new b.default,p.userCameraStu=!0,p.conf_info={},p.isBfcpFromData=!1,p.isBfcpFromData=!1,p.rateCalc={preRate:1,curRate:0,cnt:3},p.handleSvcAtdList=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcAtdList start"),n=$getState().conf,r=n.isBigConf,a=n.svcActiveAttendances,ee.memberlistArray.push(t),!refreshAtdlistTimer){e.next=6;break}return q.info("refreshAtdlistTimer is not null!"),e.abrupt("return");case 6:refreshAtdlistTimer=setInterval(function(){if(!ee.memberlistArray||0===ee.memberlistArray.length)return clearInterval(refreshAtdlistTimer),refreshAtdlistTimer=null,void q.info("clear refreshAtdlistTimer!");if($getState().conf.videoFrameHwnd<=0||window.lockHandleAtdlist)return void q.info("refreshAtdlistTimer videoFrameHwnd:",$getState().conf.videoFrameHwnd,"window.lockHandleAtdlist:",window.lockHandleAtdlist);var e=ee.memberlistArray[ee.memberlistArray.length-1];ee.memberlistArray=new Array;var t=ee.getOnLineAttendances(e);if(r&&a&&a.length>0){var n=sortPreAndOrigiArray(a,t);$dispatch(coreUi.changeSvcOnLineAttendances(n))}else $dispatch(coreUi.changeSvcOnLineAttendances(t));var o=$getState().conf.isSvcMultiViewBroadcast;if(!window.CLIENTCONFIG.ISBIGWIN||!o){var i=$getState().conf.svcOnLineAttendances;K("onLineAttendances watchAttendees is",i,0),ee.handleAtdlist(i)}},500);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleAtdlist=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,_,g,m,v,C,I,w,S,E,N,T,b,O,A,y,x,R;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleAtdlist start"),ee.showAtdListChanged=!1,ee.aDeleteHwnds=new Array,ee.iAddCount=0,ee.addAudioNum=0,ee.addVideoNum=0,ee.bcHwnd=null,ee.init=!1,ee.muteInfo.clear(),n={},r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.svcShowAttendances,s=r.isSvcSelectMode,c=r.svcRecallorNot,u=r.isBigConf,f=r.svcSelectWatchInfo,l=r.svcBandMode,void 0!==t&&0!==t.length){e.next=14;break}return q.info("onLineAttendances length is zero,please check."),e.abrupt("return");case 14:for(d=t.length,window.CLIENTCONFIG.ISBIGWIN||(window.isHubEnv?t.length<2&&(o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("maxhub attendances only one, change viewMode to divide mode!"),ee.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE,!0),ee.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&(q.info("maxhub low bandwidth, change viewMode to PIP mode"),ee.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)):t.length<2&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)?(q.info("change viewMode to big small mode!"),ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0),ee.init=!0):t.length>=2&&l===constant.SVC_BAND_MODE.LOW_BAND&&(o===constant.SVC_VIEW_MODE.DIVIDE_MODE||o===constant.SVC_VIEW_MODE.BIG_SMALL_MODE)&&ee.switchViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,!0)),p=d;p--;)ee.muteInfo.set(t[p].number,{is_mute:t[p].is_mute});if(s&&f.number&&""!==f.number&&((h=ee.isSvcOnlineAttendance(f.number))||ee.handleCancelWatch()),!(_=ee.handleBroadcastInfo(t))||!$getState().conf.isSvcBroadcastMode){e.next=24;break}return e.next=22,ee.handleJoinBroadCast();case 22:e.next=25;break;case 24:_&&ee.handleCancelBroadCast();case 25:if(o!==constant.SVC_VIEW_MODE.MIN_WIN_MIN&&o!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&o!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&o!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE){e.next=28;break}return 1===t.length&&2===a.length||2===t.length&&1===a.length?ee.handleWatchAndDecoder([]):q.info("no need to deal in svcViewMode = "+o),e.abrupt("return");case 28:return o=$getState().conf.svcViewMode,e.next=31,ee.createAtdsFactory(t,o);case 31:if(g=e.sent,!ee.showAtdListChanged&&!c){e.next=39;break}return e.next=35,ee.handleHwndAndAtds(g,ee.aDeleteHwnds,ee.iAddCount,ee.bcHwnd,ee.init);case 35:m=e.sent,ee.handleWatchAndDecoder(m),ee.setWindowName(m),$dispatch(coreUi.changesvcRecallorNot(!1));case 39:for(v=g.length;v--;)ee.muteInfo.set(g[v].number,(0,k.default)({},ee.muteInfo.get(g[v].number),{wnd_handle:g[v].wnd_handle}));C=$getState().conf,I=C.videoFrameHwnd,w=C.bigHwnd,S=C.isSvcBroadcastMode,E=C.svcShowPage,N=C.isMinWin,_&&S?(T=ee.getShowBoradcastParam(1),n=(0,k.default)(n,T),s&&(b=ee.getCancelWatchParam(0),n=(0,k.default)(n,b))):_&&(O=ee.getShowBoradcastParam(0),n=(0,k.default)(n,O)),N||ee.setAvailableMode(!1,t,S),A=-1,y=0,x=t.length;case 45:if(!(y<x)){e.next=52;break}if(1!==t[y].is_self){e.next=49;break}return A=t[y].role,e.abrupt("break",52);case 49:y++,e.next=45;break;case 52:R=!1,1!==A&&u&&(q.info("The Conf is big conf, and selfrole is not chair"),R=!0,0!==E&&(E=0,ee.handlePageSwitch(E))),n=(0,k.default)(n,{large_scale_conf:R}),n=(0,k.default)(n,{set_conf_userinfo:{videoCount:a.length}}),ee.setNativeSelectState(),ee.setPageNum(o,d),ee.setParam(n),window.CLIENTCONFIG.ISBIGWIN?ee.setBigMuteState(!1,g):ee.setMuteState(),j("handleAtdlist end"),ee.serialConfFirstIndex=-1;case 62:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.setNativeSelectState=function(){var e=$getState().conf,t=e.isSvcBroadcastMode,n=e.selfRole,r=e.isDataConfSharing,a=$getState().call.iSreceivingBFCP,o={};!t||a||r||n?(o=(0,k.default)(o,{isBroadCast:!1}),ee.setParam(o)):(o=(0,k.default)(o,{isBroadCast:!0}),ee.setParam(o))},p.getSelfNumber=function(){for(var e="",t=$getState().conf.svcOnLineAttendances,n=0;n<t.length;n++)if(t[n].is_self){e=t[n].number;break}return e},p.isSvcOnlineAttendance=function(e){if(void 0===e||""===e)return q.error("targetNumber is empty."),!1;var t=$getState().conf,n=t.isSameGradeMcu,r=t.svcOnLineAttendances,a=t.serialMcuMemberList;if(void 0===r||r.length<=0)return q.error("onlineAttendance is empty."),!1;for(var o=0;o<r.length;o++)if(r[o].number===e)return!0;if(!n)return!1;if(void 0===a||a.length<=0)return q.error("serialMcuMemberList is empty."),!1;for(var i=0;i<a.length;i++)if(a[i].number===e)return!0;return!1},p.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=new Array,a=!1,o=!1,i=new Array,s={userInfo:{name:""},number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0},c=0;c<e.length;c++){var u=ee.isVideoMember(e[c]);if(5===e[c].state&&u){if(window.CLIENTCONFIG.ISBIGWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self&&ee.serialConfFirstIndex<0&&(ee.serialConfFirstIndex=c),window.CLIENTCONFIG.ISWIN&&0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){o=!0,i.push({number:e[c].number,is_self:e[c].is_self,is_broadcast:e[c].is_broadcast});continue}1===e[c].is_self?(a=!0,n.unshift(e[c])):n.push(e[c])}else if(window.CLIENTCONFIG.ISBIGWIN&&5===e[c].state){if(0===t&&0===e[c].is_same_grade_mcu)continue;r.push(e[c])}}return $dispatch(coreUi.changeSerialMemberList(i)),window.CLIENTCONFIG.ISWIN&&o&&n.splice(1,0,s),n.push.apply(n,r),a||(n=new Array),j("getOnLineAttendances end,onLineAttendances:",n,1),q.info("getOnLineAttendances end serialMcuMemberList",i),n},p.isVideoMember=function(e){return 0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO)},p.createAtdsFactory=function(){var e=(0,y.default)(L.default.mark(function e(t,n){var r;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=new Array,e.t0=n,e.next=e.t0===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?4:e.t0===constant.SVC_VIEW_MODE.DIVIDE_MODE?6:e.t0===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?8:e.t0===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?10:12;break;case 4:return r=ee.createBigSmallAtdList(t),e.abrupt("break",13);case 6:return r=ee.createDivideAtdList(t),e.abrupt("break",13);case 8:return r=ee.createPicInPicAtdList(t),e.abrupt("break",13);case 10:return r=ee.createMinVerticalAtdList(t),e.abrupt("break",13);case 12:q.info("svcViewMode is "+n+",no need to deal");case 13:return r&&r.length>0&&$dispatch(coreUi.changeSvcShowAttendances(r)),e.abrupt("return",r);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.createBigSmallAtdList=function(e){q.info("createBigSmallAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createBigSmallAtd(e,r);return a.length<1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createBigSmallAtd(e,a)),q.info("createBigSmallAtdList end"),a},p.getInsertBeforeHwnd=function(e){for(var t=0,n=e?e.length:0,r=0;r<n;r++)if(3===e[r].type){t=e[r].hwnd;break}return t},p.constructBigConfPropList=function(e,t){var n=(new Array,ee.constructVideoPropList(e)),r=ee.constructAudioPropList(t);return n.concat(r)},p.constructVideoPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.SMALL_VIDEO});return t},p.constructAudioPropList=function(e){for(var t=new Array,n=0;n<e;n++)t.push({type:constant.SVC_HWND_TYPE.AUDIO});return t},p.createDivideAtdList=function(e){q.info("createDivideAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createDivideAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createDivideAtd(e,a)),q.info("createDivideAtdList end"),a},p.createPicInPicAtdList=function(e){q.info("createPicInPicAtdList start");var t=$getState().conf.svcShowAttendances;return ee.addLocalAtd(e,t),q.info("createPicInPicAtdList end"),t},p.createMinVerticalAtdList=function(e){q.info("createMinVerticalAtdList start");var t=$getState().conf,n=t.svcShowPage,r=t.svcShowAttendances,a=ee.createMinVerticalAtd(e,r);return a.length<=1&&n>0&&($dispatch(coreUi.changeSvcShowPage(0)),a=ee.createMinVerticalAtd(e,a)),q.info("createMinVerticalAtdList end"),a},p.handleWatchAndDecoder=function(e){var t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=(t.isSvcSelectMode,t.svcBigPicInfo,t.bigHwnd),o=t.isSvcMultiViewBroadcast,i=$getState().call.callId;n.length>1||o?Z.sendSvcWatchRequest(e):r!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE&&r!==constant.SVC_VIEW_MODE.MIN_WIM_FLOAT&&r!==constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE||B.NativeInterface.setLocalWindow(i,a),Q.createAllWndDecoders(e);for(var s=0;s<e.length;s++)if(1===e[s].is_self){e[s].wnd_handle>0?B.NativeInterface.setLocalWindow(i,e[s].wnd_handle):q.info("local wnd_handle is ",e[s].wnd_handle);break}},p.handleHwndAndAtds=function(){var e=(0,y.default)(L.default.mark(function e(t,n,r,a){var o,i,s=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwndAndAtds start"),t&&0!==t.length){e.next=4;break}return q.info("handleHwndAndAtds svcShowAttendances is zero"),e.abrupt("return");case 4:return e.next=6,ee.handleHwnds(t,n,r,ee.addVideoNum,ee.addAudioNum,a,s);case 6:return o=e.sent,i=ee.bindAtdsAndWnds(t,o),e.abrupt("return",i&&i.length>0?i:[]);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p.handleHwnds=function(){var e=(0,y.default)(L.default.mark(function e(t,n,r,a,o,i){var s,c,u,f,l,d,p,h,_,g,m,v,C=arguments.length>6&&void 0!==arguments[6]&&arguments[6];return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleHwnds,dHwnds = "+n+",aHwnds = "+r+",videoNum = "+a+",audioNum = "+o+",bHwnd = "+i+",init = "+C),s=$getState().conf,c=s.svcViewMode,u=s.bigHwnd,f=s.svcWndHandles,l=s.svcOnLineAttendances,d=s.isSvcMultiViewBroadcast,p=f,h=null,!C){e.next=15;break}return _=X.getAllHwnds(),g=!0,1===l.length&&(g=!1),h=window.CLIENTCONFIG.ISBIGWIN&&!d?ee.constructBigConfPropList(a,o):ee.constructPropList(c,t,g),e.next=11,X.updateHwnds(_,{propList:h});case 11:p=e.sent,ee.setBigHwnd(c,p),e.next=51;break;case 15:if(1===l.length&&u>0&&(n.push(u),$dispatch(coreUi.changeBigHwnd(0))),!(n.length>0)){e.next=20;break}return e.next=19,X.destoryHwnds(n);case 19:p=e.sent;case 20:if(!(l.length>1)||c!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&c!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||0!==u){e.next=24;break}return e.next=23,X.createBigHwnds(1,0);case 23:p=e.sent;case 24:if(!i){e.next=36;break}if(q.info("FFFF handleHwnds bHwnd = "+i),!p||1!==p.length){e.next=32;break}return e.next=29,X.createHwnds(1,0);case 29:p=e.sent,e.next=36;break;case 32:if(!(p&&p.length>=2)){e.next=36;break}return e.next=35,X.createHwnds(1,p[1].hwnd);case 35:p=e.sent;case 36:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=47;break}if(q.info("handleHwnds,videoNum = "+a+" audioNum = "+o),m=ee.constructBigConfPropList(a,o),v=0,a>0&&(v=ee.getInsertBeforeHwnd(p)),!(r>0)){e.next=45;break}return e.next=44,X.createHwndsByType(m.length,v,m);case 44:p=e.sent;case 45:e.next=51;break;case 47:if(!(r>0)){e.next=51;break}return e.next=50,X.createHwnds(r,0);case 50:p=e.sent;case 51:return e.abrupt("return",p);case 52:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i){return e.apply(this,arguments)}}(),p.bindAtdsAndWnds=function(e,t){if(q.info("bindAtdsAndWnds"),!t||0===t.length)return void q.info("bindAtdsAndWnds hwndlist length is zero");var n=$getState().conf,r=(n.isSvcShareMode,n.svcShowPage,n.svcViewMode),a=n.svcOnLineAttendances;t=ee.checkHwndList(t,r,e);for(var o=0;o<e.length;o++)r===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:1===a.length&&1===t.length?e[o].wnd_handle=t[0].hwnd:q.info("BIG_SMALL_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.DIVIDE_MODE?t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("DIVIDE_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?t&&o+1<t.length?e[o].wnd_handle=t[o+1].hwnd:q.info("PIC_IN_PIC_MODE : window handle create failed ,please check!"):r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(t&&o<t.length?e[o].wnd_handle=t[o].hwnd:q.info("MIN_WIN_VERTICAL : window handle create failed ,please check!"));return j("bindAtdsAndWnds end,svcShowAttendances:",e),$dispatch(coreUi.changeSvcShowAttendances(e)),e},p.checkHwndList=function(e,t,n){var r=$getState().conf,a=r.svcShowPage,o=r.isSvcShareMode,i=(r.videoFrameHwnd,0);if(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?0===a&&o?e.length>n.length+2&&(i=e.length-n.length-2):e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.DIVIDE_MODE?e.length>n.length&&(i=e.length-n.length):t===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?e.length>n.length+1&&(i=e.length-n.length-1):t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&e.length>n.length&&(i=e.length-n.length),i>0){for(var s=e.splice(e.length-i,i),c=[],u=0;u<s.length;u++)c.push(s[u].hwnd);q.info("checkHwndList, delete extra windows = "+(0,R.default)(c)),X.destoryHwnds(c)}return e},p.initShowAtds=function(e){var t=$getState().conf,n=t.svcShowPage,r=t.svcViewMode,a=t.maxSizeForPage,o=ee.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array,c=a;switch(r){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:e.length<2?ee.addLocalAtd(e,s):ee.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:n>0&&ee.addLocalAtd(e,s),ee.addOnlineAtds(i,s,c);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:ee.addLocalAtd(e,s);break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:ee.initVerticalShowAtds(e,s)}return j("initShowAtds end,newSvcShowAtds:",s),s},p.initVerticalShowAtds=function(e,t){if(0===e.length)return void(t=[]);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o="",i=[];ee.minModeKeepWndNum=0;for(var s=0;s<e.length;s++)-1===o.indexOf(e[s].number)&&(o=o+e[s].number+",",i.push(e[s]));var c=$getState().conf.svcPageNum,u=r*a,f=u+a,l=i.length-u;if(l<a){f=u+l;for(var d=u;d<f;d++){var p=ee.createAtdInfo(i[d]);t.push(p)}if(i.length<a||1===c)return;var h=a-l;f=u,u-=h,ee.minModeKeepWndNum=f-u}for(var _=u;_<f;_++){var g=ee.createAtdInfo(i[_]);t.push(g)}},p.createBigSmallAtd=function(e,t){j("createBigSmallAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.isSvcShareMode),o=n.maxSizeForPage,i=ee.getCanUseAtdsPos(),s=new Array;s=e.slice(i);var c=new Array;c=ee.deleteLeaveAtds(t,s),0===r&&ee.addLocalAtd(e,c);var u=a&&0===r?o-1:o;return ee.addOnlineAtds(s,c,u),j("createBigSmallAtd end,svcShowAttendances:",c),c},p.createDivideAtd=function(e,t){j("createDivideAtd start,svcShowAttendances:",t);var n=$getState().conf,r=(n.svcShowPage,n.svcViewMode,n.isSvcBroadcastMode),a=n.maxSizeForPage,o=new Array;if(window.CLIENTCONFIG.ISBIGWIN&&r)ee.addBroadCastAtd(e,o);else{var i=ee.getCanUseAtdsPos(),s=new Array;s=e.slice(i),o=ee.deleteLeaveAtds(t,e),ee.addLocalAtd(e,o),ee.addOnlineAtds(s,o,a),window.CLIENTCONFIG.ISBIGWIN&&ee.updataIsMuteStu(ee.muteInfo,o)}return o},p.createMinVerticalAtd=function(e,t){j("createMinVerticalAtd start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=(n.svcViewMode,n.isSvcBroadcastMode,n.maxSizeForPage),o=ee.getCanUseAtdsPos(),i=new Array;i=e.slice(o);var s=new Array;if(s=ee.deleteLeaveAtds(t,e),0===r)if(ee.addLocalAtd(e,s),0===s.length)ee.iAddCount++;else for(var c=0;c<s.length;c++)1===s[c].is_self&&0===ee.iAddCount&&ee.iAddCount++;return ee.addOnlineAtds(i,s,a),j("createMinVerticalAtd end,svcShowAttendances:",s),s},p.deleteLeaveAtds=function(e,t){var n=$getState().conf,r=n.isSameGradeMcu,a=n.audioVideoNum,o=n.serialMcuMemberList,i=(0,k.default)({},a),s=e.filter(function(e){var n=!1;if(window.CLIENTCONFIG.ISBIGWIN&&0===r&&0===e.is_self&&0===e.is_same_grade_mcu)ee.serialConfFirstIndex>=0?(n=!0,ee.isInShowAtds(e,t)||(ee.showAtdListChanged=!0)):(z.removeSvcSSRC(e.ssrc)&&i.video--,$dispatch(coreUi.changeHaveAddSerialConf(!1)),ee.showAtdListChanged=!0,z.removeSvcSSRC(e.ssrc),ee.aDeleteHwnds.push(e.wnd_handle));else{if(window.CLIENTCONFIG.ISWIN&&0===r&&0===e.is_same_grade_mcu)return o.length>0?(ee.checkSerialConf(e.number)||(ee.showAtdListChanged=!0),n=!0):(ee.showAtdListChanged=!0,z.removeSvcSSRC(e.ssrc),ee.aDeleteHwnds.push(e.wnd_handle)),n;ee.isInShowAtds(e,t)?n=!0:(ee.showAtdListChanged=!0,ee.aDeleteHwnds.push(e.wnd_handle),ee.isVideoMember(e)?z.removeSvcSSRC(e.ssrc)&&i.video--:i.audio--)}return n});return $dispatch(coreUi.changeAudioVideoNum(i)),q.info("deleteLeaveAtds end SvcAtdManager.aDeleteHwnds = "+(0,R.default)(ee.aDeleteHwnds)),j("deleteLeaveAtds end,svcShowAttendances:",s),s},p.addLocalAtd=function(e,t){q.info("addLocalAtd start");for(var n=$getState().conf,r=(n.isSvcShareMode,n.isSvcBroadcastMode),a=n.svcWndHandles,o=n.audioVideoNum,i=(0,k.default)({},o),s=!1,c=0;c<t.length;c++)if(1===t[c].is_self){s=!0;break}if(!s)for(var u=0;u<e.length;u++)if(1===e[u].is_self){var f=ee.createAtdInfo(e[u]);if(f){ee.showAtdListChanged=!0,i.video++;if(a&&a.length>0)if(ee.init&&!r)ee.addVideoNum++,ee.iAddCount++;else{var l=a.filter(function(e){return 0===e.type&&-1===ee.aDeleteHwnds.indexOf(e.hwnd)});l&&l.length>0?(f.wnd_handle=l[0].hwnd,q.info("Local is not in showAtd,need to create as wnd_handle = "+f.wnd_handle)):(ee.addVideoNum++,ee.iAddCount++,q.info("Local is not in showAtd,need to create a new window"))}else q.info("svcWndHandles length is "+a+",need to create in pos = 0,it is wrong!");t.splice(0,0,f),$dispatch(coreUi.changeAudioVideoNum(i))}break}},p.addBroadCastAtd=function(e,t){q.info("addBroadCastAtd start");for(var n=$getState().conf,r=n.svcBroadcastData,a=n.ssrcRange,o=null,i=0;i<e.length;i++)if(r.number===e[i].number){o=e[i];break}if(o){var s=ee.createAtdInfo(o);s&&(window.CLIENTCONFIG.ISBIGWIN&&(s.ssrc=a.min+1),t.push(s),ee.bcHwnd=!0,q.info("addBroadCastAtd broadcast is not in showAtd,need to create")),ee.showAtdListChanged=!0}else q.info("addBroadCastAtd can not find broadcastAtd, please check")},p.receviceShareOrBfcp=function(){var e=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("receviceShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcOnLineAttendances,a=t.svcShowAttendances,o=t.svcShowPage,i=t.maxSizeForPage,s=0===u?constant.SVC_SSRC_FLAG.SHARE_SSRC:constant.SVC_SSRC_FLAG.BFCP_SSRC,$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcShareData({ssrc:s,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:s,name:f})),n!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=14;break}return window.lockHandleAtdlist=!0,e.next=11,ee.reInitAtdAndWindow(n);case 11:window.lockHandleAtdlist=!1,e.next=28;break;case 14:if(n!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=27;break}if(0!==o){e.next=24;break}if(i!==a.length){e.next=23;break}return c=new Array,c.push(a[i-1].wnd_handle),e.next=21,X.destoryHwnds(c);case 21:z.removeSvcSSRC(a[i-1].ssrc),a.splice(i-1,1);case 23:X.createShareOrBfcpHwnds(1,0);case 24:ee.setBFCPBigWnd(),e.next=28;break;case 27:ee.setBFCPBigWnd();case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p.stopShareOrBfcp=function(){var e=(0,y.default)(L.default.mark(function e(){arguments.length>0&&void 0!==arguments[0]&&arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1];return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:q.info("stopShareOrBfcp");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),p.setBFCPBigWnd=(0,y.default)(L.default.mark(function e(){var t;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.bigHwnd,t>0?B.NativeInterface.setBFCPWindow($getState().call.callId,t,!1):q.info("bigHwnd is 0");case 2:case"end":return e.stop()}},e,void 0)})),p.addOnlineAtds=function(e,t,n){var r=$getState().conf,a=r.isSameGradeMcu,o=r.haveAddSerialConf,i=r.audioVideoNum,s=r.svcViewMode,c=(0,k.default)({},i);c.video<=0&&(q.info("unexpected tmpAudioVideoNum.video",c.video),c.video=1);for(var u=0;u<e.length;u++)if(!window.CLIENTCONFIG.ISBIGWIN||0!==a||!o||0!==e[u].is_same_grade_mcu){var f=ee.isInShowAtds(e[u],t);if(t.length>=n){if(ee.isVideoMember(t[n-1])||!ee.isVideoMember(e[u]))break;if(f)continue;ee.aDeleteHwnds.push(t[n-1].wnd_handle),t.pop(),c.audio--}if(!f){var l=ee.createAtdInfo(e[u]);l||s!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&s!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(q.info("addOnlineAtds fail, mode = "+s+", svcAtds = "+(0,R.default)(t)),t=z.updateAllSsrcOfAtds(t),l=ee.createAtdInfo(e[u]),q.info("addOnlineAtds updateAllSsrcOfAtds svcAtds = "+(0,R.default)(t))),l&&(ee.showAtdListChanged=!0,q.info("cwp add attendance "),ee.isVideoMember(l)?(c.video++,t.splice(c.video-1,0,l),ee.addVideoNum++,ee.iAddCount++):(c.audio++,t.push(l),ee.addAudioNum++,ee.iAddCount++)),l&&0===l.is_same_grade_mcu&&(o=!0,$dispatch(coreUi.changeHaveAddSerialConf(!0)))}}$dispatch(coreUi.changeAudioVideoNum(c))},p.isInShowAtds=function(e){for(var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1,r=0;r<t.length;r++)if(t[r].number===e.number&&(1===e.is_self||t[r].media_type===e.media_type)){n=!0;break}return n},p.handleBroadcastInfo=function(e){for(var t=$getState().conf,n=t.isSvcBroadcastMode,r=t.svcBroadcastData,a=t.ssrcRange,o=t.isSvcMultiViewBroadcast,i=(t.svcViewMode,!1),s=!1,c=0;c<e.length;c++){if(window.CLIENTCONFIG.ISWIN&&!o&&r.number!==e[c].number&&1===e[c].is_broadcast){var u=language.SVC_BROAD_CAST.format(e[c].userInfo.name);ee.alertBox(u,3)}if(1===e[c].is_broadcast){if(!o&&(0,N.default)(r).length>0&&r.number===e[c].number)q.info("The broadcast is same");else if(1!==e[c].is_self){i=!0;var f={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(f)),q.info("Entry broadcast mode,broadcast is "+f.number.substr(0,3)+"****"+f.number.substr(-3))}else if(1===e[c].is_self){var l={name:e[c].userInfo.name,number:e[c].number,is_self:e[c].is_self,ssrc:a.min};$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(l))}s=!0;break}}return!s&&n&&(i=!0,$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),0===$getState().conf.selfRole&&(window.CLIENTCONFIG.ISWIN?ee.alertBox(language.BROADCAST_CANCELLED_BY_CHAIRMAN,3):window.Toast(language.BROADCAST_CANCELLED_BY_CHAIRMAN,2)),q.info("Cancel broadcast mode")),i},p.handleJoinBroadCast=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleJoinBroadCast start"),t=$getState().conf,n=t.isSvcSelectMode,r=t.svcViewMode,a=t.svcBroadcastData,o=t.svcBigPicInfo,r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=8;break}n&&($dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),$dispatch(coreUi.changeSvcBigPicInfo(a)),ee.showAtdListChanged=!0,e.next=22;break;case 8:if(r!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=21;break}if(ee.init=!0,!window.CLIENTCONFIG.ISBIGWIN){e.next=17;break}$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0})),e.next=19;break;case 17:return e.next=19,ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 19:e.next=22;break;case 21:r===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 22:q.info("handleJoinBroadCast end");case 23:case"end":return e.stop()}},e,void 0)})),p.handleCancelBroadCast=function(){if(window.CLIENTCONFIG.ISBIGWIN)ee.init=!0,$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeHaveAddSerialConf(!1)),$dispatch(coreUi.changeAudioVideoNum({video:0,audio:0}));else{var e=$getState().conf,t=e.svcShowAttendances,n=e.isSvcBroadcastMode;if(e.svcViewMode!==constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n||ee.handleModeSwitch(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),0===t.length)return}},p.initVideoFrame=function(){var e=(0,y.default)(L.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,l,d,p,h,_,g,m,v,C,I,w,S,E,N,T,b,O,A,y,x,M,P,D,U,F,G,V,$,Y,j,K,J,z,Q,Z,te,ne;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!($getState().conf.videoFrameHwnd>0||window.haveCreateVideoFrame)){e.next=3;break}return q.info("video native frame have already created!"),e.abrupt("return");case 3:if(a=0,window.haveCreateVideoFrame=!0,window.lockHandleAtdlist=!0,q.info("begin init video native frame!"),!(H.getAvcFrameHandles()>0)){e.next=14;break}a=H.getAvcFrameHandles(),$dispatch(coreUi.changeVideoFrameHwnd(a)),window.isHubEnv?ee.switchViewMode(constant.SVC_VIEW_MODE.DIVIDE_MODE):ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),q.info("switchViewMode avc trans to svc but use avc winwhnd"),e.next=18;break;case 14:return ee.switchViewMode(n,!1),e.next=17,B.NativeInterface.initNativeScreen(n,r,window.langcode,!1);case 17:a=e.sent;case 18:if(!a){e.next=94;break}if(window.haveCreateVideoFrame=!1,$dispatch(coreUi.changeVideoFrameHwnd(a)),o=H.getRemoteVideoHwnd(),i=H.getLocalVideoHwnd(),H.setAvcNullForSvc(),s=[],o>0&&s.push(o),i>0&&s.push(i),!(s.length>0)){e.next=40;break}return q.info("initVideoFrame destroy AVCVideoHwnd list = "+(0,R.default)(s)),e.next=31,B.NativeInterface.destoryWindows(a,s);case 31:if(!((c=e.sent)&&c.length>0)){e.next=40;break}for(u=[],f=0,l=0;l<c.length;l++)1===c[l].type&&(0===f?$dispatch(coreUi.changeBigHwnd(c[l].hwnd)):u.push(c[l].hwnd),f++);if(!(u.length>0)){e.next=39;break}return e.next=38,B.NativeInterface.destoryWindows(a,u);case 38:c=e.sent;case 39:c&&c.length>0&&X.handleChangeSvcWndHandles(c);case 40:if(d=$getState().conf,p=d.isSupportAS,h=d.svcWndHandles,_=d.svcRecallorNot,g=d.confSubject,m=d.isEnterDataConf,v=d.currentConfInfo,C=d.confServerId,I=d.vmrId,w=d.isSrtp,S=d.isConfMicMute,E=d.memberListInfo,N=d.setPreviewsCount,T=$getState().call,b=T.isOpenCamera,O=T.isMuteMic,A=T.isMuteSpk,y=T.cameraNum,x=T.cameraDevicesList,M=T.spkDevicesList,P=T.micDevicesList,D=$getState().setting,U=D.camIndex,F=D.spkIndex,G=D.micIndex,!(h&&h.length>0&&_)){e.next=48;break}B.NativeInterface.setLocalWindow(t,h[0].hwnd),q.info("initVideoFrame svcRecallorNot is true, svcWndHandles = "+(0,R.default)(h)),e.next=51;break;case 48:return e.next=50,X.createHwnds(1,0);case 50:h=e.sent;case 51:return window.lockHandleAtdlist=!1,ee.userCameraStu||(ee.userCameraStu=!0,b=!1,W.ToolbarManager.setCameraStu({state:0})),q.info("initVideoFrame isOpenCamera = "+b),V=O||S?0:100,A=A?1:0,$=w?1:0,ee.isDataConf=m,W.ToolbarManager.setChairmanState(E,!0),Y={},isNullOrEmpty(I)||(C=I),C>0?Y=(0,k.default)({},{set_window_title:{title:g,confID:C}}):(j=0,K=setInterval(function(){j++;var e=$getState().conf,t=e.confSubject,n=e.confServerId,r=e.vmrId;isNullOrEmpty(r)||(n=r),n>0?(clearInterval(K),ee.setConfServerId(n,t)):j>=10&&clearInterval(K)},500)),e.next=64,coreAccount.getLoginModel();case 64:J=e.sent,Y=(0,k.default)(Y,{isSupportAS:J.isSupportAS?1:0}),Y=(0,k.default)(Y,{init_state:{encrypt:$}}),Y=(0,k.default)(Y,{init_device_state:{isMuteSpk:A,mic_volume:V,camera_on:y>0?b:-1}}),Y=(0,k.default)(Y,{camera_devices:{camIndex:U,cameraDevicesList:x}}),Y=(0,k.default)(Y,{mic_devices:{micIndex:G,micDevicesList:P}}),Y=(0,k.default)(Y,{spk_devices:{spkIndex:F,spkDevicesList:M}}),Y=(0,k.default)(Y,{general_pwd:v.general_pwd?v.general_pwd:null}),N>0&&(Y=(0,k.default)(Y,{set_conf_userinfo:{count:N}})),Y=(0,k.default)(Y,{has_data_ability:{is_data_conf:ee.isDataConf?1:0}}),Y=(0,k.default)(Y,{is_free_user:$getState().login.isFreeUser}),Y=(0,k.default)(Y,{is_in_conf:""===$getState().conf.confHandle?0:1}),z=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,Q=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,z?Y=(0,k.default)(Y,{has_delete_member:0}):Q&&(Y=(0,k.default)(Y,{has_delete_member:1})),Z=$getState().myInfo.enableDoubleScreen,Y=(0,k.default)(Y,{enableDoubleScreen:Z}),te=JSON.parse((0,R.default)(Y)),void 0!==te.set_window_title&&(ne=te.set_window_title.title,te.set_window_title.title=ne?ne.substr(0,1)+"***":""),te.general_pwd=te.general_pwd?"***":"null",q.info("SVC initVideoFrame initParam param = "+(0,R.default)(te)),ee.setParam(Y),ee.switchCPURateCalc(!0),ee.rateCalc={preRate:1,curRate:0,cnt:3},coreUi.getConfGuestLink(),ee.oldSingleState.clear(),ee.conf_info={},ee.confMemNum=-1,e.next=97;break;case 94:window.haveCreateVideoFrame=!1,window.lockHandleAtdlist=!1,q.info("init video native frame failed,please check!");case 97:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),p.closeVideoFrame=(0,y.default)(L.default.mark(function e(){var t,n;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:ee.isDataConf=-1,ee.confMemNum=-1,t=$getState().conf.videoFrameHwnd,n=G.getShareAppHwnd(),n>0&&(q.info("closeVideoFrame shareAppHwnd :",n),B.NativeInterface.setHightlightShareWnd(n,!1)),t>0&&(ee.switchCPURateCalc(!1),ee.rateCalc={preRate:1,curRate:0,cnt:3},ee.conf_info={},B.NativeInterface.uninitNativeScreen(t,!1),$dispatch(coreUi.changeVideoFrameHwnd(0)),ee.highlightWnd=0,ee.speaker=""),window.CLIENTCONFIG.ISBIGWIN||coreUi.selectBoxCancelDataNWin();case 7:case"end":return e.stop()}},e,void 0)})),p.sendWatchWithBfcp=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithBfcp start"),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=13;break}if(q.info("sendWatchWithBfcp bfcpIsBigHwnd:"+$getState().conf.bfcpIsBigHwnd+", isBigwnd:"+t),$getState().conf.bfcpIsBigHwnd===t){e.next=8;break}return e.next=8,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 8:return $dispatch(coreUi.changeBfcpIsBigHwnd(t)),e.next=11,Z.sendSvcWatchRequest(a);case 11:return e.next=13,Q.createAllWndDecoders(a);case 13:q.info("sendWatchWithBfcp end");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.sendWatchWithData=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("sendWatchWithData start"),$dispatch(coreUi.changeDataIsBigHwnd(t)),n=$getState().conf,r=n.isSvcConf,a=n.svcShowAttendances,o=n.svcViewMode,"VIDEO_CONNECTED"!==(i=$getState().call.callStatus)||!r||!window.CLIENTCONFIG.ISWIN||o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=13;break}return q.info("sendWatchWithData dataIsBigHwnd:"+t),q.info("sendWatchWithData svcShowAttendances:",a),e.next=9,coreCall.setBfcpIsBigWnd($getState().call.callId,t);case 9:return e.next=11,Z.sendSvcWatchRequest(a);case 11:return e.next=13,Q.createAllWndDecoders(a);case 13:q.info("sendWatchWithData end");case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.sendWatchStopOrRecovery=function(){var e=(0,y.default)(L.default.mark(function e(t){var n;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("sendWatchStopOrRecovery start,IsStopSvcWatch: ",t),$dispatch(coreUi.changeIsStopSvcWatch(t)),n=$getState().conf.svcShowAttendances,e.next=5,Z.sendSvcWatchRequest(n);case 5:return e.next=7,Q.createAllWndDecoders(n);case 7:q.info("sendWatchStopOrRecovery end");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.initBfcpFrame=function(){var e=(0,y.default)(L.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p,h;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((r=$getState().conf.bfcpFrameHwnd)>0)){e.next=4;break}return q.info("bfcp native frame have already created!"),e.abrupt("return");case 4:return q.info("begin init bfcp native frame!"),a=!1,window.CLIENTCONFIG.ISBIGWIN&&(a=!0),ee.isBfcpFromData=n,o=ee.getModeAndVersion(a,!0),i=o.mode,s=o.version,e.next=11,B.NativeInterface.initNativeScreen(i,s,window.langcode,!0);case 11:if(!(c=e.sent)){e.next=25;break}if($dispatch(coreUi.changeBfcpFrameHwnd(c)),!$getState().conf.isDataConfSharing){e.next=19;break}return q.info("isDataConfSharing is true  destroy bfcpfHwnd "),e.next=18,ee.closeBfcpFrame();case 18:return e.abrupt("return");case 19:return e.next=21,B.NativeInterface.createWindows(c,1,0,[{type:2}]);case 21:return u=e.sent,u&&u.length>0&&(B.NativeInterface.setBFCPWindow(t,u[0].hwnd,n),f=$getState().conf,l=f.confSubject,d=f.confServerId,p=f.vmrId,isNullOrEmpty(p)||(d=p),h=(0,k.default)({},{set_window_title:{title:l,confID:d}}),B.NativeInterface.setParam(h,c),ee.setIsSupportChatNative(c),window.isHubEnv&&ee.switchVideoToMin()),e.next=25,ee.sendWatchWithBfcp(!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.closeBfcpFrame=(0,y.default)(L.default.mark(function e(){var t;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.bfcpFrameHwnd,t>0&&(B.NativeInterface.uninitNativeScreen(t,!0),$dispatch(coreUi.changeBfcpFrameHwnd(0))),e.next=4,ee.sendWatchWithBfcp(!1);case 4:case"end":return e.stop()}},e,void 0)})),p.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,y.default)(L.default.mark(function e(t,n){return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.NativeInterface.setBFCPWindow($getState().call.callId,t,ee.isBfcpFromData),$dispatch(coreUi.changeBfcpFrameHwnd(t)),e.next=4,ee.sendWatchWithBfcp(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.nativeNotifyUpdateDataIsBigHwnd=function(){var e=(0,y.default)(L.default.mark(function e(t){return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.sendWatchWithData(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.nativeNotifyIsStopWatchSvc=function(){var e=(0,y.default)(L.default.mark(function e(t){return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ee.sendWatchStopOrRecovery(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.switchVideoToMin=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o,i,s;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMin"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isShowMinWin,a=t.svcMiniViewMode,o=t.svcViewMode,!r){e.next=6;break}return q.info("switchVideoToMin isShowMinWin is true"),window.isDataSharing&&(ee.setViewMode(o),q.info("switchVideoToMin share owner is self,reSet layout = "+(o+256))),e.abrupt("return");case 6:return window.lockHandleAtdlist=!0,i=new S.default([constant.SVC_VIEW_MODE.BIG_SMALL_MODE,constant.SVC_VIEW_MODE.DIVIDE_MODE,constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE,constant.SVC_VIEW_MODE.MIN_WIM_FLOAT]),i.has(o)?$dispatch(coreUi.changePreConfViewMode(o)):$dispatch(coreUi.changePreConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE)),0===a&&(a=window.isHubEnv?constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),ee.setViewMode(a),q.info("changeIsShowMinWin true 5"),$dispatch(coreUi.changeIsShowMinWin(!0)),ee.switchViewMode(a,!1),s=new Array,s.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),s.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),s.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),s.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),s.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT),$dispatch(coreUi.changeCurrentLayout(s)),e.next=23,ee.reInitAtdAndWindow(a,!0);case 23:ee.setPageNum(a,n.length),window.lockHandleAtdlist=!1;case 25:case"end":return e.stop()}},e,void 0)})),p.RedrawVideoMain=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o,i,s,c;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("RedrawVideoMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=a,window.lockHandleAtdlist=!0,s=n.length,c=ee.getPageNum(r,s),!(s<o)){e.next=10;break}return q.info("RedrawVideoMain, onLineNum = "+s+", maxSizeForPage = "+o),window.lockHandleAtdlist=!1,e.abrupt("return");case 10:if(!(c<=a)){e.next=18;break}return i=c-1,q.info("RedrawVideoMain,pageNum is less than svcShowPage,pageNum = "+c+",showPage = "+a),ee.handlePageSwitch(i),$dispatch(coreUi.changeSvcShowPage(i)),ee.setPageNum(a,s),window.lockHandleAtdlist=!1,e.abrupt("return");case 18:window.lockHandleAtdlist=!1,ee.handleAtdlist(n);case 20:case"end":return e.stop()}},e,void 0)})),p.switchVideoToMain=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("switchVideoToMain"),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcBroadcastMode,a=t.svcViewMode,o=t.isShowMinWin,i=t.svcPreViewMode,o){e.next=4;break}return e.abrupt("return");case 4:if(window.lockHandleAtdlist=!0,s=i||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!window.isHubEnv){e.next=10;break}s=constant.SVC_VIEW_MODE.DIVIDE_MODE,e.next=14;break;case 10:return c=$getState().conf.isSvcSelectMode,u={isSvcSelectMode:c},e.next=14,ee.setParam(u);case 14:return ee.setViewMode(s),q.info("changeIsShowMinWin false 5"),$dispatch(coreUi.changeIsShowMinWin(!1)),e.next=19,ee.switchViewMode(s,!1);case 19:return ee.setAvailableMode(!1,n,r),e.next=22,ee.reInitAtdAndWindow(s,!0);case 22:ee.setPageNum(s,n.length),window.lockHandleAtdlist=!1;case 24:case"end":return e.stop()}},e,void 0)})),p.handleSpeakerNotify=function(e){var t=$getState().conf,n=t.confSpeaker,r=t.svcShowAttendances,a=(t.videoFrameHwnd,t.svcViewMode),o={};if(e&&ee.speaker!==e&&(o=(0,k.default)(o,{set_speaker:{name:e,icon:""}}),ee.speaker=e),a!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){var i=0;if(n&&n.speaker.length>0)for(var s=n.speaker[0].number,c=0;c<r.length;c++)if(s===r[c].number){i=r[c].wnd_handle;break}ee.highlightWnd!==i&&(o=(0,k.default)(o,{highlight_cell:{hwnd:i,show:1}}),ee.highlightWnd=i)}ee.setParam(o)},p.setWindowName=function(e){var t=$getState().conf,n=t.svcViewMode,r=(t.svcShowPage,t.svcWndHandles),a=t.svcBigPicInfo,o=t.videoFrameHwnd,i=t.bigHwnd;if(r&&e&&0!==r.length){for(var s=new Array,c=0;c<e.length;c++){var u={hwnd:e[c].wnd_handle,confName:e[c].name};1===e[c].is_self&&(u.confName=e[c].name+"("+language.ME+")"),s.push(u)}if((n===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||n===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||n===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||n===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||n===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE)&&a&&i>0){var f={hwnd:i,confName:a.name};1===a.is_self&&(f.confName=a.name+"("+language.ME+")"),s.splice(0,0,f)}K("window and name list is",s,2),B.NativeInterface.setWindowsName(o,s)}},p.setPageNum=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=$getState().conf,a=r.svcShowPage,o=r.videoFrameHwnd,i=r.svcPageNum,s=1;e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(s=ee.getPageNum(e,t)),(i!==s||n)&&(B.NativeInterface.setPageNum(o,a+1,s),$dispatch(coreUi.changeSvcPageNum(s)),q.info("setPageNum, onLineCount = "+t+", viewMode = "+e+",svcShowPage = "+a+",pageNum = "+s))},p.setParam=function(e){if(window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN){var t=ee.getVideoFramHwnd();e&&"{}"!==(0,R.default)(e)?B.NativeInterface.setParam(e,t):window.CLIENTCONFIG.ISWIN&&G.setDataConfParams(e)}},p.setConfUserInfo=function(e){if($getState().conf.setPreviewsCount!==e){$dispatch(coreUi.reportSetPreviewsCount(e));var t=(0,k.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}},p.setSignal=function(e){var t=(0,k.default)({},{set_signal:{level:e}});ee.setParam(t)},p.setSubject=function(e){var t=$getState().conf,n=t.confServerId,r=t.vmrId;isNullOrEmpty(r)||(n=r);var a=(0,k.default)({},{set_window_title:{title:e,confID:n}});ee.setParam(a)},p.setConfServerId=function(e,t){q.info("setConfServerId confServerId = "+e+" confSubject = ");var n=(0,k.default)({},{set_window_title:{title:t,confID:e}});ee.setParam(n)},p.reportOnlineAtdNum=function(e){if(ee.getVideoFramHwnd()){if(e>0&&e!==ee.confMemNum){ee.confMemNum=e;var t=(0,k.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}}else if(reportOnlineAtdNumTimer&&clearInterval(reportOnlineAtdNumTimer),e>0){var n=0;reportOnlineAtdNumTimer=setInterval(function(e){if(ee.getVideoFramHwnd()){clearInterval(reportOnlineAtdNumTimer),ee.confMemNum=e;var t=(0,k.default)({},{set_conf_userinfo:{count:e}});ee.setParam(t)}else++n>15&&clearInterval(reportOnlineAtdNumTimer)},1e3)}},p.reportIsDataConf=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(ee.getVideoFramHwnd()>0&&(e!==ee.isDataConf||t)){ee.isDataConf=e;var n={has_data_ability:{is_data_conf:e?1:0}};ee.setParam(n)}},p.getVideoFramHwnd=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=H.getAvcFrameHandles()),e},p.reportConfInfo=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.conf_list_info){e.next=17;break}if(n=t.conf_list_info,r=n.conf_subject,a=(0,U.getConfTimedec)(n.start_time),o=n.scheduser_name,i=isNullOrEmpty(n.vmr_id)?n.conf_id:n.vmr_id,s=n.guest_join_uri,c=(0,U.getConfTimedec)(n.end_time),u={title:r,start_time:a,end_time:c,creator:o,id:i,link:s},$getState().conf.isVideoConf&&(0,R.default)(ee.conf_info)===(0,R.default)(u)){e.next=17;break}if(ee.conf_info=u,f="",!coreCommon.isWin()){e.next=16;break}return e.next=15,coreCommon.getQrcodeBase64(s);case 15:f=e.sent;case 16:window.CLIENTCONFIG.ISWIN&&$getState().conf.confServerId&&$getState().conf.confServerId===n.conf_id&&ee.setParam({conf_info:u,qrcodeBase64:f});case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.reportQos=function(e){var t=ee.getVideoFramHwnd(),n=(0,k.default)({},{QOS:e});t>0&&n&&B.NativeInterface.reportQos(t,n)},p.reportSingleState=function(e){var t=[],n=ee.oldSingleState,r=!0,a=!1,o=void 0;try{for(var i,s=(0,I.default)(e);!(r=(i=s.next()).done);r=!0){var c=(0,v.default)(i.value,2),u=c[0],f=c[1];n.has(u)&&n.get(u)===f||t.push({hwnd:u,state:f})}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}if(q.info("reportSingleState oldSingleState = "+(0,R.default)(ee.oldSingleState)+" VideoSingalState = "+(0,R.default)(e)+" newSingleState = "+(0,R.default)(t)+" "),ee.oldSingleState=e,0!==t.length){var l=$getState().conf.videoFrameHwnd,d=(0,k.default)({},{VideoSingalState:t});l>0&&d&&B.NativeInterface.setParam(d,l)}},p.getShowBoradcastParam=function(e){var t=$getState().conf.bigHwnd,n={},r={cellHwnd:t,show:e};return n.show_broadcast=r,n},p.getCancelWatchParam=function(e){var t={},n={show:e};return t.cancel_watch_icon=n,t},p.getAvailableModeParam=function(e,t){if(!e||0===e.length)return null;var n=$getState().conf,r=(n.videoFrameHwnd,n.currentLayout),a={},o=new Array;if(1===e.length?o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):2===e.length||t?(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):(o.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),o.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),o.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,R.default)(r)!==(0,R.default)(o)){$dispatch(coreUi.changeCurrentLayout(o));var i={layouts:o};return a.set_available_layout=i,a}return null},p.getPageNumParam=function(e,t,n){q.info(" onLineCount = "+t+", viewMode = "+e+", svcShowPage = "+n);var r=$getState().conf.svcPageNum,a=1;if(e!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE&&t>0&&(a=ee.getPageNum(e,t)),r!==a){$dispatch(coreUi.changeSvcPageNum(a));var o={pos:n,count:a},i=[];return i.set_page_num=o,q.info("svcPageNum = "+r+",pageNum = "+a),i}return null},p.getWindowTextParam=function(e){if(e&&0!==e.length){for(var t=new Array,n={},r=$getState().conf,a=r.svcViewMode,o=r.svcBigPicInfo,i=r.bigHwnd,s=0;s<e.length;s++){var c={hwnd:e[s].wnd_handle,confName:e[s].name};t.push(c)}if((a===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||a===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)&&o){var u={hwnd:i,confName:o.name};t.splice(0,0,u)}return n.confInfo=t,q.info("window and name list is "+(0,R.default)(t)),n}},p.setAvailableMode=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(t){var n=$getState().conf,r=n.videoFrameHwnd,a=n.svcBandMode,o=n.currentLayout,i=new Array;window.CLIENTCONFIG.ISBIGWIN?i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE):e?(i.push(constant.SVC_VIEW_MODE.MIN_WIN_MIN),i.push(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE),i.push(constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL),i.push(constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE),i.push(constant.SVC_VIEW_MODE.MIN_WIM_FLOAT)):1===t.length?i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE):a===constant.SVC_BAND_MODE.LOW_BAND?i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE):(i.push(constant.SVC_VIEW_MODE.BIG_SMALL_MODE),i.push(constant.SVC_VIEW_MODE.DIVIDE_MODE),i.push(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)),(0,R.default)(o)!==(0,R.default)(i)&&r&&(B.NativeInterface.setAvailableLayout(r,i.length,i),$dispatch(coreUi.changeCurrentLayout(i)))}},p.setViewMode=function(e,t){var n=$getState().conf.videoFrameHwnd,r=n;t>0&&(r=t);var a=0;window.isDataSharing&&(a=256,q.info("setViewMode is specialMode "+(e+a).toString(16))),n>0?B.NativeInterface.setViewMode(r,e+a):q.info("video frame hwnd is 0,please check!")},p.handlePageSwitch=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s,c,u,f;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.lockHandleAtdlist=!0,n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.usedSsrcList,i=a.length,!((s=ee.getPageNum(r,i))<t)){e.next=8;break}return window.lockHandleAtdlist=!1,q.info("handlePageSwitch,pageNum is less than showPage,pageNum = "+s+",showPage = "+t),e.abrupt("return");case 8:return $dispatch(coreUi.changeSvcShowPage(t)),c=[],$dispatch(coreUi.changeSvcShowAttendances([])),r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?$dispatch(coreUi.changeUsedSvcSSRCList([])):c=o.concat([]),e.next=14,ee.reInitAtdAndWindow(r,!1);case 14:r!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&r!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL||(u=$getState().conf.usedSsrcList,f=u.filter(function(e){return-1===c.indexOf(e)}),$dispatch(coreUi.changeUsedSvcSSRCList(f)),q.info("handlePageSwitch svcViewMode = "+(0,R.default)(r)+" oldSSRCList = "+(0,R.default)(c)+" newUsedSsrcList = "+(0,R.default)(f))),window.lockHandleAtdlist=!1;case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleModeSwitch=function(){var e=(0,y.default)(L.default.mark(function e(t,n){var r,a,o,i;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleModeSwitch,viewMode = "+t),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcViewMode,i=r.videoFrameHwnd,n||(n=i),o!==t&&n===i){e.next=5;break}return e.abrupt("return");case 5:return window.lockHandleAtdlist=!0,e.next=8,ee.switchViewMode(t,!0,n);case 8:return e.next=10,ee.reInitAtdAndWindow(t);case 10:ee.setPageNum(t,a.length),window.lockHandleAtdlist=!1;case 12:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.handleWatch=function(){var e=(0,y.default)(L.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,l,d,p,h,_,g;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleWatch,viewMode = "+t+"}"),r=$getState().conf,a=r.svcOnLineAttendances,o=r.svcShowAttendances,i=r.videoFrameHwnd,s=r.isSvcBroadcastMode,c=r.isSvcSelectMode,u=r.isMinWin,f=r.bigHwnd,l=r.ssrcRange,d={},!c&&s&&(p=ee.getShowBoradcastParam(0),d=(0,k.default)(d,p)),n.ssrc||(n.ssrc=l.min),$dispatch(coreUi.changeSvcBigPicInfo(n)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcControlMode(1)),h=(0,k.default)({},n),$dispatch(coreUi.changeSvcSelectWatchInfo(h)),t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=18;break}Z.sendSvcWatchRequest(o),Q.createAllWndDecoders(o),ee.setWindowName(o),_=$getState().conf.isSvcSelectMode,d=(0,k.default)(d,{isSvcSelectMode:_}),e.next=41;break;case 18:if(t!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE){e.next=25;break}Z.sendSvcWatchRequest(o),Q.createAllWndDecoders(o),ee.setWindowName(o),g=$getState().conf.isSvcSelectMode,e.next=41;break;case 25:if(t!==constant.SVC_VIEW_MODE.DIVIDE_MODE){e.next=34;break}return window.lockHandleAtdlist=!0,e.next=29,ee.switchViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE,!0);case 29:return e.next=31,ee.reInitAtdAndWindow(constant.SVC_VIEW_MODE.BIG_SMALL_MODE);case 31:window.lockHandleAtdlist=!1,e.next=41;break;case 34:if(t!==constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL){e.next=41;break}return window.lockHandleAtdlist=!0,e.next=38,ee.switchViewMode(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,!0);case 38:return e.next=40,ee.reInitAtdAndWindow(constant.SVC_VIEW_MODE.MIN_WIN_SINGLE);case 40:window.lockHandleAtdlist=!1;case 41:u||ee.setAvailableMode(!1,a,s),ee.setParam(d);case 43:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),p.handleCancelWatch=function(){q.info("handleCancelWatch");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcOnLineAttendances,r=e.isSvcBroadcastMode,a=e.svcBigPicInfo,o={};if(r){var i=ee.getShowBoradcastParam(1);o=(0,k.default)(o,i)}var s={ssrc:a.ssrc,is_self:0};1===a.is_self&&(s.is_self=1),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})),Z.sendSvcWatchRequest(t);var c=$getState().conf,u=c.isSvcSelectMode;c.svcViewMode===constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&(o=(0,k.default)(o,{isSvcSelectMode:u})),ee.setAvailableMode(!1,n,r),ee.setParam(o)},p.reInitAtdAndWindow=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("reInitAtdAndWindow"),n=$getState().conf,r=n.svcShowPage,a=n.svcOnLineAttendances,o=n.isSvcShareMode,i=n.svcWndHandles,s=new Array,c=new Array,u=null,ee.aDeleteHwnds=X.getAllHwnds(l),s=ee.initShowAtds(a),c=ee.constructPropList(t,s,l),!(t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&ee.minModeKeepWndNum>0)){e.next=19;break}return ee.minModeKeepWndNum=0,e.next=12,X.destoryHwnds(ee.aDeleteHwnds);case 12:return u=e.sent,f=u?u[0].hwnd:0,e.next=16,X.createHwnds(ee.aDeleteHwnds.length,f);case 16:u=e.sent,e.next=22;break;case 19:return e.next=21,X.updateHwnds(ee.aDeleteHwnds,{propList:c});case 21:u=e.sent;case 22:if(u&&0!==u.length){e.next=25;break}return q.info("reInitAtdAndWindow, hwndlist is null or zero,please check!"),e.abrupt("return");case 25:ee.setBigHwnd(t,u),ee.bindAtdsAndWnds(s,u),ee.handleWatchAndDecoder(s),ee.setWindowName(s),ee.setMuteState();case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.setBigHwnd=function(e,t){if(t&&0!==t.length&&(e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||e===constant.SVC_VIEW_MODE.MIN_WIN_SINGLE||e===constant.SVC_VIEW_MODE.MIN_WIM_FLOAT||e===constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE))for(var n=0;n<t.length;n++)if(1===t[n].type){$dispatch(coreUi.changeBigHwnd(t[n].hwnd));break}},p.constructPropList=function(e,t,n){var r=new Array,a=null,o=$getState().conf.svcOnLineAttendances;switch(e){case constant.SVC_VIEW_MODE.BIG_SMALL_MODE:n&&o.length>1&&(r=ee.constructBigPropList()),a=ee.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.DIVIDE_MODE:r=ee.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE:r=ee.constructBigPropList(),a=ee.constructSmallPropList(t),r=r.concat(a);break;case constant.SVC_VIEW_MODE.MIN_WIN_SINGLE:r=ee.constructBigPropList();break;case constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL:r=ee.constructSmallPropList(t);break;case constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE:case constant.SVC_VIEW_MODE.MIN_WIM_FLOAT:r=ee.constructBigPropList()}return r},p.constructBigPropList=function(){var e=new Array;return e.push({type:constant.SVC_HWND_TYPE.BIG_VIDEO}),e},p.constructSmallPropList=function(e){for(var t=new Array,n={type:constant.SVC_HWND_TYPE.SMALL_VIDEO},r=0;r<e.length;r++)t.push(n);return t},p.switchViewMode=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s,c,u=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],f=arguments[2];return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcOnLineAttendances,o=n.svcBandMode,r===t){e.next=21;break}if(a.length>=2&&o===constant.SVC_BAND_MODE.LOW_BAND&&(t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.DIVIDE_MODE)&&(t=constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(t)),$dispatch(coreUi.changeSvcShowAttendances([])),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeBigHwnd(0)),!u){e.next=11;break}return e.next=11,ee.setViewMode(t,f);case 11:if(t!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE){e.next=16;break}return i=$getState().conf.isSvcSelectMode,s={isSvcSelectMode:i},e.next=16,ee.setParam(s);case 16:c=new S.default([constant.SVC_VIEW_MODE.MIN_WIN_MIN,constant.SVC_VIEW_MODE.MIN_WIN_SINGLE,constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL,constant.SVC_VIEW_MODE.MIN_FLOAT_BIG_ONE]),c.has(t)?(q.info("changeIsShowMinWin true 6"),$dispatch(coreUi.changeIsShowMinWin(!0)),$dispatch(coreUi.changeConfMiniViewMode(t))):(q.info("changeIsShowMinWin false 7"),$dispatch(coreUi.changeIsShowMinWin(!1))),window.CLIENTCONFIG.ISBIGWIN?$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)):$dispatch(coreUi.changeMaxSizeForPage(ee.getMaxSizeForPage(t))),e.next=22;break;case 21:q.info("viewMode is same,no need to change!");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.createAtdInfo=function(e){if(e||e instanceof Object&&!Array.isArray(e)){var t=-1,n=$getState().conf.isSameGradeMcu;if(ee.isVideoMember(e)?t=z.assignSsrc(e):window.CLIENTCONFIG.ISWIN&&0===n&&0===e.is_same_grade_mcu&&(t=z.assignSsrc(e)),!t)return null;return{name:e.userInfo.name,number:e.number,is_self:e.is_self,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,media_type:e.media_type,wnd_handle:-1,ssrc:t}}},p.updataIsMuteStu=function(e,t){if(t&&!(t.length<1)&&e)for(var n=0;n<t.length;n++){var r=t[n].number;if(1===t[n].is_self){var a=$getState().call.micValue;ee.localMicStates.wndHand=t[n].wnd_handle,ee.localMicStates.isMicMute=e.get(r).is_mute,t[n].is_mute=1===e.get(r).is_mute||0===a?1:0}else!e.has(r)||void 0!==t[n].is_mute&&t[n].is_mute===e.get(r).is_mute||(t[n].is_mute=e.get(r).is_mute)}},p.setBigMuteState=function(e,t){var n=$getState().conf.videoFrameHwnd,r=[];if(e){var a=$getState().call.micValue,o=1===ee.localMicStates.isMicMute||0===a?1:0,i={hwnd:ee.localMicStates.wndHand,is_mute:o};r.push(i)}else if(t)for(var s=0,c=t.length;s<c;s++){var u={hwnd:t[s].wnd_handle,is_mute:t[s].is_mute};r.push(u)}q.info("setBigMuteState muteState is "+(0,R.default)(r)),B.NativeInterface.setParam({muteState:r},n)},p.getCanUseAtdsPos=function(){var e=$getState().conf,t=e.svcViewMode,n=e.svcShowPage,r=(e.isSvcShareMode,e.maxSizeForPage),a=0;return t===constant.SVC_VIEW_MODE.BIG_SMALL_MODE||t===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL?a=n*r:t===constant.SVC_VIEW_MODE.DIVIDE_MODE&&n>0&&(a=n*(r-1)+1),a},p.getMaxSizeForPage=function(e){var t=$getState().conf.svcBandMode,n=0;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=t===constant.SVC_BAND_MODE.MIDDLE_BAND?constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE:constant.SVC_MAX_SIZE_FOR_PAGE.BS_MAX_SIZE:e===constant.SVC_VIEW_MODE.DIVIDE_MODE?(t===constant.SVC_BAND_MODE.MIDDLE_BAND?n=constant.SVC_MAX_SIZE_FOR_PAGE.LOW_DV_MAX_SIZE:(n=constant.SVC_MAX_SIZE_FOR_PAGE.DV_MAX_SIZE,window.CLIENTCONFIG.ISBIGWIN&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.BIGWIN_DV_MAX_SIZE)),window.CLIENTCONFIG.ISWIN&&($getState().call.iSreceivingBFCP||coreConf.isReceivingDataShare()||coreConf.isRecevingAppshare()||coreConf.isInReceiveDocSharing()||coreConf.isRecevingWBSharing())&&(n-=1),q.info("maxSizeForPage maxSize:",n)):e===constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE?n=constant.SVC_MAX_SIZE_FOR_PAGE.PIP_MAX_SIZE:e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=constant.SVC_MAX_SIZE_FOR_PAGE.MIN_WIN_VERTICAL_SIZE),n},p.getPageNum=function(e,t){var n=1,r=$getState().conf,a=r.isSvcShareMode,o=r.maxSizeForPage;return e===constant.SVC_VIEW_MODE.BIG_SMALL_MODE?n=a?Math.ceil((t+1)/o):Math.ceil(t/o):e===constant.SVC_VIEW_MODE.DIVIDE_MODE?n=Math.ceil((t-1)/(o-1)):e===constant.SVC_VIEW_MODE.MIN_WIN_VERTICAL&&(n=Math.ceil(t/o)),n},p.getAttendeeByHwnd=function(e){var t=$getState().conf,n=t.svcShowAttendances,r=(t.isSvcShareMode,t.svcShowPage,t.svcShareData,t.svcWndHandles,null);return r=n.find(function(t){return t.wnd_handle===e}),q.info("getAttendeeByHwnd"),r},p.getAtdFullInfoByHwnd=function(e){var t=ee.getAttendeeByHwnd(e),n=null;if(t)for(var r=t.number,a=$getState().conf.memberListInfo,o=a.length;o--;)if(r===a[o].number){n=a[o];break}return n},p.getConfNameBySsrc=function(e){for(var t="",n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].name;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.name),t},p.getConfhwndBySsrc=function(e){for(var t=0,n=$getState().conf,r=n.svcShowAttendances,a=n.svcBigPicInfo,o=n.svcViewMode,i=0;i<r.length;i++)if(e===r[i].ssrc){t=r[i].wnd_handle;break}return o!==constant.SVC_VIEW_MODE.BIG_SMALL_MODE&&o!==constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE||a&&e===a.ssrc&&(t=a.wnd_handle),t},p.getModeAndVersion=function(e,t){var n={mode:3,version:0};return e?(n.mode=constant.SVC_VIEW_MODE.DIVIDE_MODE,n.version=constant.SVC_VERSION_FLAG.BIG):t?(n.mode=constant.SVC_VIEW_MODE.BFCP_MODE,n.version=constant.SVC_VERSION_FLAG.BASE):(n.mode=constant.SVC_VIEW_MODE.BIG_SMALL_MODE,n.version=constant.SVC_VERSION_FLAG.BASE),n},p.handleSvcSsrcModify=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleSvcSsrcModify"),n=$getState().conf,r=n.svcOnLineAttendances,a=n.svcShowAttendances,o=n.svcBigPicInfo,i=z.updateAllSsrcOfAtds(a),$dispatch(coreUi.changeSvcShowAttendances(i)),!window.CLIENTCONFIG.ISBIGWIN&&o.hasOwnProperty("ssrc")&&(s=(0,k.default)([],o),s.ssrc=t.min,z.addSvcSSRC(t.min),$dispatch(coreUi.changeSvcBigPicInfo(s))),!(r.length>1)){e.next=10;break}return e.next=8,Z.sendSvcWatchRequest(i);case 8:return e.next=10,Q.createAllWndDecoders(i);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleMultiViewBroadcast=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("handleMultiViewBroadcast start param = "+(0,R.default)(t)),$getState().conf.isSvcConf){e.next=16;break}if(-1!==t){e.next=8;break}$dispatch(coreUi.changevideoBroadcastNum("")),coreConf.setIsAvcMultiViewBroadcast(!1),0===$getState().conf.selfRole&&(window.CLIENTCONFIG.ISWIN?ee.alertBox(language.BROADCAST_CANCELLED_BY_CHAIRMAN,3):window.Toast(language.BROADCAST_CANCELLED_BY_CHAIRMAN,2)),e.next=15;break;case 8:if(null!==(n=t&&t.attendee_vc?t.attendee_vc:null)){e.next=12;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 12:r="M"+n.mcu_num+"T"+n.terminal_num,$dispatch(coreUi.changevideoBroadcastNum(r)),coreConf.setIsAvcMultiViewBroadcast(!0);case 15:return e.abrupt("return");case 16:if(!window.CLIENTCONFIG.ISWIN){e.next=19;break}return q.info("NO NEED TO handleMultiViewBroadcast"),e.abrupt("return");case 19:if(-1!==t){e.next=24;break}$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!1)),$dispatch(coreUi.changeBroadcastIsMultiView(!1)),e.next=33;break;case 24:if(null!==(a=t&&t.attendee_vc?t.attendee_vc:null)){e.next=28;break}return q.info("handleMultiViewBroadcast param.attendee_vc is null, please check!!!"),e.abrupt("return");case 28:o="M"+a.mcu_num+"T"+a.terminal_num,0===a.terminal_num&&$dispatch(coreUi.changeBroadcastIsMultiView(!0)),i={userInfo:{name:language.MULTI_VIEW_BROADCAST_NAME},name:language.MULTI_VIEW_BROADCAST_NAME,media_type:3,number:o,is_mute:0,role:0,state:5,is_self:0,is_broadcast:1},$dispatch(coreUi.changeIsSvcMultiViewBroadcast(!0)),ee.handleAtdlist([i,{}]);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.reportSRTPStatus=function(){var e=$getState().conf,t=(e.videoFrameHwnd,e.isSrtp),n=t?1:0,r={};r.init_state={encrypt:n},q.info("init_state "+(0,R.default)(r)),ee.setParam(r)},p.setMuteState=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments[1],n=$getState().conf,r=n.svcShowAttendances,a=(n.svcOnLineAttendances,n.isSvcConf);if(!a||r&&0!==r.length){var o=ee.getVideoFramHwnd(),i=($getState().call.isMuteMic,ee.muteInfo),s=[],c={mic_volume:-1},u={};if(a){if(e&&void 0!==t){for(var f=0,l=r.length;f<l;f++)if(1===r[f].is_self){r[f].is_mute=t?1:0;var d={hwnd:r[f].wnd_handle,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(d)}}else for(var p=0,h=r.length;p<h;p++){var _={},g=r[p].number;i.has(g)&&(void 0!==r[p].is_mute&&r[p].is_mute===i.get(g).is_mute&&r[p].wnd_handle===i.get(g).wnd_handle||(r[p].is_mute=i.get(g).is_mute,_={hwnd:r[p].wnd_handle,is_mute:r[p].is_mute},s.push(_),1===r[p].is_self&&(c.mic_volume=1===r[p].is_mute?0:100)))}q.info("setMuteState muteState is "+(0,R.default)(s)),s.length>0&&(u=(0,k.default)({},u,{muteState:s}),$dispatch(coreUi.changeSvcShowAttendances(r))),-1!==c.mic_volume&&(u=(0,k.default)({},u,{init_device_state:c}))}else{var m=H.getLocalVideoHwnd(),v={hwnd:m,is_mute:t?1:0};c.mic_volume=t?0:100,s.push(v),u=(0,k.default)({},{muteState:s},{init_device_state:c})}u&&B.NativeInterface.setParam(u,o)}},p.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},p.getUserInfoByHwnd=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,_,m,v,C,I,w,E;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new S.default,r={},a=null,o=null,i=-1,!(t>0)){e.next=16;break}if(o=ee.getAtdFullInfoByHwnd(t),a=o.userInfo,!isNullOrEmpty(a.account)||!isNullOrEmpty(a.contact_id)){e.next=13;break}return s=a.number,c=a.name,e.next=11,(0,Y.searchContact)(s,c);case 11:u=e.sent,u&&1<=u.length&&(q.info("search userInfo when first right click success!"),a=(0,k.default)({},u[0]),(0,Y.updateMemberDetail)(a,s,c));case 13:i=o.number,e.next=17;break;case 16:0===t&&(a=$getState().myInfo,i=a.bind_no);case 17:if(a){for(f=["mobile","home_phone","office_phone","short_phone","ip_phone","other_phone","other_phone2"],l=f.length;l--;)d=f[l],a[d]&&a[d]!==i&&n.add(a[d]);r={hwnd:t,usernum:(0,g.default)(n)},t>0&&o&&(p=o.is_broadcast,h=o.is_self,_=o.is_mute,m=o.role,v=1===p?0:1===h?1:2,C=$getState().conf.transferChairman,r=(0,k.default)({},r,{type:v,isSelf:h,broadcast:p,isMute:_,isChairman:m,transferChairman:C}))}else r={hwnd:t,error:2};I=$getState().conf.videoFrameHwnd,w=r.usernum.map(function(e){return handlePhoneNumber(e)}),E=(0,k.default)({},r,{usernum:w}),q.info("getUserInfoByHwnd query_user_info_result is "+(0,R.default)(E)),B.NativeInterface.reportUserInfo(I,{query_user_info_result:r});case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.callOtherNum=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("callOtherNum start"),""===t.usernum){e.next=15;break}if(n=$getState().conf.memberListInfo,r=null,t.hwnd>0)r=ee.getAttendeeByHwnd(t.hwnd);else for(a=0;a<n.length;a++)1===n[a].is_self&&(r=n[a]);if(!r){e.next=14;break}return q.info("callOtherNum name = "+handlePhoneNumber(r.name)),r=(0,k.default)({},r,{number:t.usernum}),o=[],o.push(r),e.next=12,(0,U.actionCallOtherNum)(o);case 12:e.next=15;break;case 14:q.info("callOtherNum faild! number = "+handlePhoneNumber(t.usernum));case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.callAttendeeResult=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=JSON.parse((0,R.default)(t)),void 0!==n.number&&(r=n.number,n.number=handlePhoneNumber(r)),q.info("callAttendeeResult",(0,R.default)(n)),t.ret&&(q.info("callAttendeeResult tip start"),a=language.LANG_NATIVE_INVITE_FAILED,o=language.LANG_NATIVE_BEING_BUSY_INVITE_FAILED,t.userInfo&&t.userInfo.name?(a=a.replace("%s",t.userInfo.name),o=o.replace("%s",t.userInfo.name)):(a=a.replace("%s",""),o=o.replace("%s","")),4===t.reason?("win"===window.CLIENTCONFIG.PLATFORM&&ee.alertBox(o,3),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(o,4,!1,"pcToast",""),window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(o,2)):(t.reason,"win"===window.CLIENTCONFIG.PLATFORM&&ee.alertBox(a,3),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(a,4,!1,"pcToast",""),window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(a,2)));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.muteAttendee=function(){var e=(0,y.default)(L.default.mark(function e(t){var n;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.hwnd>0)){e.next=5;break}if(!(n=ee.getAttendeeByHwnd(t.hwnd))){e.next=5;break}return e.next=5,(0,U.actionMuteAttendee)(t.isMute,n.number,n.isSelf);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.removeAttendee=function(){var e=(0,y.default)(L.default.mark(function e(t){var n;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("svcmanager remove attendee ",t),!(t.hwnd>0)){e.next=6;break}if(!(n=ee.getAttendeeByHwnd(t.hwnd))){e.next=6;break}return e.next=6,(0,U.actionRemoveAttendee)(n.number);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.lockConf=function(){var e=(0,y.default)(L.default.mark(function e(t){return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager lock conf",t),e.next=3,coreCall.mlockConf(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handup=function(){var e=(0,y.default)(L.default.mark(function e(t){return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return q.info("svcmanager hand up",t),e.next=3,coreCall.pcHandup();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.hangupAttendee=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a,o,i;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=26;break}if(r=ee.getAtdFullInfoByHwnd(n),q.info("hangupAttendee hwnd = "+n+", attendee = "+r),!r){e.next=26;break}if(a=r.number,o=r.state,i=r.participant_id,window.isSupportiDo){e.next=18;break}if(!i||i===a){e.next=13;break}return q.info("REST right menu actionHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),e.next=11,(0,U.actionHangupAttendee)(a);case 11:e.next=16;break;case 13:return q.info("REST right menu actionRemoveAttendee, remove attendee: ",handlePhoneNumber(a)),e.next=16,(0,U.actionRemoveAttendee)(a);case 16:e.next=26;break;case 18:if(q.info("iDo right menu operatorHangupAttendee, hangup attendee: ",handlePhoneNumber(a)),5!==o){e.next=24;break}return e.next=22,(0,U.actionHangupAttendee)(a);case 22:e.next=26;break;case 24:return e.next=26,(0,U.actionRemoveAttendee)(a);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.transferChairman=function(){var e=(0,y.default)(L.default.mark(function e(t){var n;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n=$getState().conf.transferChairman)){e.next=4;break}return e.next=4,n(t.usernum);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.broadcastAttendee=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r,a;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.hwnd)>0)){e.next=7;break}if(!(r=ee.getAtdFullInfoByHwnd(n))){e.next=7;break}return a=1===r.is_broadcast?0:1,e.next=7,(0,U.actionBroadcastAttendee)(a,r.number);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.handleConfCtrl=function(){var e=(0,y.default)(L.default.mark(function e(t){var n,r;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=(0,R.default)(t),r=t.action,e.t0=r,e.next="mute"===e.t0?5:"broadcast"===e.t0?8:"hangup"===e.t0?11:"set_chairman"===e.t0?14:"request_chairman"===e.t0?17:"release_chairman"===e.t0?20:"call"===e.t0?23:"delete"===e.t0?26:"lock"===e.t0?29:"unlock"===e.t0?32:"put_up_hands"===e.t0?35:"put_down_hands"===e.t0?38:"extend_meeting"===e.t0?41:44;break;case 5:return e.next=7,ee.muteAttendee(t);case 7:return e.abrupt("break",45);case 8:return e.next=10,ee.broadcastAttendee(t);case 10:return e.abrupt("break",45);case 11:return e.next=13,ee.hangupAttendee(t);case 13:return e.abrupt("break",45);case 14:return e.next=16,ee.transferChairman(t);case 16:return e.abrupt("break",45);case 17:return e.next=19,W.ToolbarManager.applyOrReleasechairman({applyStu:1,pwd:t.pwd});case 19:return e.abrupt("break",45);case 20:return e.next=22,W.ToolbarManager.applyOrReleasechairman({applyStu:0});case 22:return e.abrupt("break",45);case 23:return e.next=25,ee.callOtherNum(t);case 25:return e.abrupt("break",45);case 26:return e.next=28,ee.removeAttendee(t);case 28:return e.abrupt("break",45);case 29:return e.next=31,ee.lockConf(t);case 31:return e.abrupt("break",45);case 32:return e.next=34,ee.lockConf(t);case 34:return e.abrupt("break",45);case 35:return e.next=37,ee.handup(t);case 37:return e.abrupt("break",45);case 38:return e.next=40,ee.handup(t);case 40:return e.abrupt("break",45);case 41:return e.next=43,W.ToolbarManager.postponeConf(t);case 43:return e.abrupt("break",45);case 44:q.info("handleConfCtrl cmd not match! pleace check");case 45:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),p.isNativeUIExsit=function(){var e=$getState().conf.videoFrameHwnd;return 0!==e||$getState().conf.isSvcConf||(e=H.getAvcFrameHandles()),0!==e},p.alertBox=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;if(e){var o=$getState().conf.videoFrameHwnd;0!==o||$getState().conf.isSvcConf||(o=H.getAvcFrameHandles());var i={dialog_type:1&t};2==(2&t)?i.content=e:i.content_id=e,i.isForceOnNativeWnd=n,i.dialogID=r,i.confirmBtnText=a,o>0&&i&&B.NativeInterface.showMessageBox(o,i)}},p.destroyNativeWin=function(){B.NativeInterface.destroyNativeWin()},p.removeShowAttendances=function(e){var t=$getState().conf.svcShowAttendances;if(q.info("removeShowAttendances: "+e,e),!isNullOrEmpty(e)){for(var n=-1,r=0;r<t.length;r++)t[r].name===e.name&&(n=r);q.info("removeShowAttendances pos: "+n);var a=(0,k.default)([],t);-1!==n&&(a.splice(n,1),$dispatch(coreUi.changeSvcShowAttendances(a)))}},p.destroyLastNativeWin=(0,y.default)(L.default.mark(function e(){var t,n,r,a,o;return L.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(q.info("destroyLastNativeWin"),t=$getState().conf,n=t.svcShowAttendances,r=t.maxSizeForPage,a=t.svcWndHandles,q.info("maxSizeForPage is "+r+", svcShowAttendances.length is "+n.length),!(r<=n.length)){e.next=11;break}return o=new Array,o.push(n[n.length-1].wnd_handle),e.next=8,X.destoryHwnds(o);case 8:z.removeSvcSSRC(n[n.length-1].ssrc),n.splice(n.length-1,1),$dispatch(coreUi.changeSvcShowAttendances(svcShowAttendancesList));case 11:case"end":return e.stop()}},e,void 0)})),p.switchCPURateCalc=function(e){e=!0===e?1:0;var t=$getState().conf.videoFrameHwnd,n={open:e,duration_ms:5e3};$.EncoderAdpt.clear(),ee.setParam({calc_cpu_rate:n,frameHwnd:t})},p.handleCPURate=function(e){e&&e.cpu&&(q.info("SVC handleCPURate",$.EncoderAdpt),$.EncoderAdpt.feed(e.cpu,e.version))},p.clear=function(){ee.memberlistArray=new Array},p.setIsSupportChatNative=function(e){var t=$getState().call.userInfo,n=$getState().conf.groupId,r=!1;isNullOrEmpty(n)||(r=!0),t&&!isNullOrEmpty(t.account)&&(r=!0),coreAccount.getLoginModel().then(function(t){t.useIM||(r=!1);var n=(0,k.default)({},{isSupportChat:r});B.NativeInterface.setParam(n,e)})},h)},166:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(S.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.alertRegisterSuccess("REGISTER_TITLE"),S.info("register account success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function o(e){window.InAppBrowserRef.executeScript({code:'document.body.style.overflow="hidden"'}),/.*inappbrowserref_close_url.*/.test(e.url)&&(S.info("openInAppBrowserMobile close_url"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i)),/.*inappbrowserref_success_url.*/.test(e.url)&&(window.InAppBrowserRef.close(),window.ToastNew(language.CHANGE_PASSWORD_SUCCESS_FIRST,2),S.info("change [password] success"),window.InAppBrowserRef.close(),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i))}function i(){b({loadPwd:!1}),alert(language.LOGIN_RESUME_NETWORK_ERROR),S.info("openInAppBrowserMobile loaderror"),window.InAppBrowserRef.removeEventListener("loadstop",s),window.InAppBrowserRef.removeEventListener("loaderror",i),window.InAppBrowserRef.close()}function s(){window.InAppBrowserRef.show(),window.setTimeout(function(){return b({loadPwd:!1})},500),clearTimeout(window.openBrowerTimer)}Object.defineProperty(t,"__esModule",{value:!0}),t.initPcFirstPage=t.isAccountAutoLogin=t.isPcFirstInstall=t.isInLoginRecordList=t.initMImportCertificate=t.clearImptZipUrlDataLogic=t.cancelImpSelectDone=t.mobileImptProveLogic=t.setMSelectItLogic=t.setMProveNameAndSelectItLogic=t.setMSaveZipUrlLogic=t.setMProveAndKeyLogic=t.probeImportCertificateLogic=t.loginforverificationCertificateLogic=t.dbInitCertificateLogic=t.verificationCertificateLogic=t.setInitSelectCertificateLogic=t.initImportCertificate=t.setImportCertificate=t.setCertificateCheckLogic=t.saveSelectCertificateNameLogic=t.saveBeforeLogic=t.saveImportCertificateLogic=t.clearSelectCertificateOrkeysLogic=t.updateKeysUrlLogic=t.updateCertificateUrlLogic=t.uploadCertificateFile=t.hideImportCertificateModal=t.showImportCertificateContact=t.changeAutoLogin=t.deleteLoginPwd=t.deleteLoginInfo=t.setProxyInfo=t.setTempProxyInfo=t.setTempMediaxInfo=t.setServerAddress=t.setIsCACertCheckSupport=t.changeLoginInfo=t.renewFolderState=t.deleteLoginPWD=t.setLoginInfoSync=t.setLoginInfo=t.settingPageSetLoginRecord=t.setLoginRecord=t.openInAppBrowserMobile=t.cannotLogin=t.selectAccount=t.loadLoginSetting=t.initLoginStateFromConsole=t.showLoginInfo=t.loadLoginRecordList=t.hideServerAddress=t.showServerAddress=void 0;var c=n(135),u=r(c),f=n(123),l=r(f),d=n(3),p=r(d),h=n(1),_=r(h),g=n(2),m=r(g),v=n(118),C=(r(v),n(195)),I=n(136),w=n(261),S=coreLogger.getLogger("logic")("loginset"),E=(t.showServerAddress=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];S.info("userClick setAddressAndPort menu"),$dispatch(coreUi.showModal(e,t))},t.hideServerAddress=function(){var e=(0,m.default)(_.default.mark(function e(){var t;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreLogger.getLogger("Click")("ServerAddress"),t.info("userClick cancel ServerAddress setting"),U(),window.goRoute("login");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.loadLoginRecordList=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISMOBILE||!window.isLoadLoginRecord){e.next=3;break}return!0===window.ifLogOut&&!0===window.isConfLogOut&&A(),e.abrupt("return",p.default.resolve(!1));case 3:return e.next=5,coreDb.queryAllLoginRecord();case 5:if(t=e.sent,0!==t.length){e.next=8;break}return e.abrupt("return");case 8:return n=[],t.forEach(function(e){var t=e.display_account;n.push(t)}),r=t[0].isAutoLogin,a=t[0].isMaxhubWorkplace,S.info("loadLoginRecordList isMaxhubWorkplace:",a),1===a&&window.isHubEnv&&(S.info("set window.CLIENTCONFIG.NEW_APP_NAME true for maxhub workplace login"),window.CLIENTCONFIG.NEW_APP_NAME="Workplace"),e.next=16,E(t[0],n,t);case 16:return window.isLoadLoginRecord=!0,e.abrupt("return",r);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showLoginInfo=function(){var e=(0,m.default)(_.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,d,p,h,g;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return a=e.sent,o=t.display_account,i=t.account,s=t.tenantid,c=t.encryptPassword,u=t.strUserRandom,f=t.isRememberPassWord,d=t.isAutoLogin,e.next=6,coreSecurity.decrypt({cipher:c,strSalt:u});case 6:return p=e.sent,a.password=p,h={displayAccount:o,account:i,tenantid:s,isRememberPassword:f,isAutoLogin:d,strUserRandom:u,encryptPassword:c},n&&(h.loginHistoryList=n),r&&(h.loginRecordList=r),g=isNullOrEmpty(p),(0,l.default)(h,{showPwd:g}),e.next=15,b(h);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),N=t.initLoginStateFromConsole=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCommon.getConsoleUrlVars();case 2:return t=e.sent,e.next=5,(0,C.getLoginModel)();case 5:if(n=e.sent,isNullOrEmpty(t)){e.next=15;break}if(r=t.page,isNullOrEmpty(r)||"login"!==r){e.next=15;break}return a=t.account,o=t.serverAddress,i=parseInt(t.serverPort),s={displayAccount:a,serverAddress:o,serverPort:i},n.set(s),e.abrupt("return",{serverAddress:o,serverPort:i});case 15:return e.abrupt("return",null);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),T=(t.loadLoginSetting=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,v,C,I,w,E,T,O,L,A,y,x,R,M,k,P,D,U,F,G,B,W;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,e.next=3,N();case 3:return s=e.sent,e.next=6,coreCommon.getSystemProxySetting();case 6:if(c=e.sent,isNullOrEmpty(s)){e.next=13;break}t=s.serverAddress,n=s.middleEndAddress||window.SERVERCONFIG.MIDDLE_END_ADDRESS,r=s.serverPort,e.next=71;break;case 13:return e.next=15,coreDb.queryAllLoginSetting();case 15:return u=e.sent,f=u.find(function(e){return"serverAddress"===e.key}),l=u.find(function(e){return"middleEndAddress"===e.key}),d=u.find(function(e){return"serverPort"===e.key}),t=f?f.value:window.SERVERCONFIG.LOGIN_ADDRESS,n=l?l.value:window.SERVERCONFIG.MIDDLE_END_ADDRESS,r=f?d.value:window.SERVERCONFIG.LOGIN_PORT,p=u.find(function(e){return"tempMediaxAddress"===e.key}),h=u.find(function(e){return"tempMediaxPort"===e.key}),a=p?p.value:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS,o=h?h.value:window.CLIENTCONFIG.TEMP_MEDIAX_PORT,g=u.find(function(e){return"lastDeployMode"===e.key}),i=g?parseInt(g.value):0,e.next=30,b({serverAddress:t,middleEndAddress:n,serverPort:r,tempMediaxAddress:a,tempMediaxPort:o,lastDeployMode:i});case 30:if(m=void 0,v=void 0,C=void 0,I=void 0,w=void 0,E=void 0,T=void 0,O=void 0,L=u.find(function(e){return"isSupportProxy"===e.key}),A=u.find(function(e){return"isUseSysProxy"===e.key}),y=u.find(function(e){return"proxyAddress"===e.key}),x=u.find(function(e){return"proxyPort"===e.key}),R=u.find(function(e){return"proxyAccount"===e.key}),M=u.find(function(e){return"proxyPassword"===e.key}),k=u.find(function(e){return"prxoyRandom"===e.key}),m=L?L.value:"0",v=A?A.value:"0",C=y?y.value:"",I=x?x.value:"",w=R?R.value:"",E=M?M.value:"",T=k?k.value:"",P=u.find(function(e){return"isSupportCACertCheck"===e.key}),D=P?P.value:"1",U=u.find(function(e){return"setIsShowShareRecommendationCircle"===e.key}),F=U?U.value:"1",S.info("loadLoginSetting [decrypt]"),""===E){e.next=58;break}return e.next=53,coreSecurity.getPasswordManager();case 53:return G=e.sent,B=G.setCipherPassword("proxyPassword",E,T),e.next=57,B.decryptPassword();case 57:E=e.sent;case 58:if(S.info("loadLoginSetting end [decrypt]"),S.info("systemProxySetting111: "),S.info("isUseSysProxyValue: ",v),"1"!==m||"1"!==v||isNullOrEmpty(c)){e.next=69;break}return C=c.proxyServer,I=c.proxyPort,m="1",v="1",W=[{key:"proxyAddress",value:C},{key:"proxyPort",value:I},{key:"isSupportProxy",value:m},{key:"isUseSysProxy",value:v}],e.next=69,coreDb.saveLoginSettings({args:W});case 69:return e.next=71,b({isSupportProxy:"1"===m,isUseSysProxy:"1"===v,proxyAddress:C,proxyPort:I,sysProxyAddress:isNullOrEmpty(c)?"":c.proxyServer,sysProxyPort:isNullOrEmpty(c)?"":c.proxyPort,proxyAccount:w,isSupportCACertCheck:"1"===D,isShowShareRecommendationCircle:window.CLIENTCONFIG.NEW_FUNCTION_RECOMMENDATION&&"1"===F});case 71:window.SERVERCONFIG.MIDDLE_END_ADDRESS=n,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=r,window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=a,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=o,window.SERVERCONFIG.HWUC=0;case 77:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.selectAccount=function(){var e=(0,m.default)(_.default.mark(function e(t){var n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginRecord({display_account:t});case 2:return n=e.sent,e.next=5,E(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cannotLogin=function(e){S.info("login click forgetbutton ,open uportal from browser.");var t=1036===window.langcode?"fr_FR":1033===window.langcode?"en_US":"zh_CN",n="https://"+e+"/portal/forgetPassword.sraction?language="+t;appService.openUrl(n)},t.openInAppBrowserMobile=function(){var e=(0,m.default)(_.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"register";return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:void 0!==window.openBrowerTimer&&clearTimeout(window.openBrowerTimer),window.openBrowerTimer=setTimeout(function(){b({loadPwd:!1}),window.InAppBrowserRef&&window.InAppBrowserRef.close(),alert(language.LOGIN_RESUME_NETWORK_ERROR)},2e4),S.info("openInAppBrowserMobile url="+t.substr(0,20)),window.offline?(S.info("openInAppBrowserMobile,network is unreachable"),alert(language.LOGIN_RESUME_NETWORK_ERROR)):(window.InAppBrowserRef=cordova.InAppBrowser.open(t,"_blank","location=no,zoom=no,useWideViewPort=no,toolbar=no,hidden=yes"),"register"===n?window.InAppBrowserRef.addEventListener("loadstart",a):"fogetPassword"===n&&window.InAppBrowserRef.addEventListener("loadstart",o),window.InAppBrowserRef.addEventListener("loadstop",s),window.InAppBrowserRef.addEventListener("loaderror",i)),S.info("openInAppBrowserMobile over");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setLoginRecord=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,g,m,v,I,w,E,N;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return t=e.sent,n=t.displayAccount,r=t.account,a=t.tenantid,o=t.isRememberPassword,i=t.isAutoLogin,s=t.serverAddress,c=t.serverPort,u=t.deployMode,f=t.loginRecordList,e.next=14,coreSecurity.getPasswordManager();case 14:return d=e.sent,e.next=17,d.getPassword("password");case 17:if(p=e.sent,h=void 0,g=void 0,!(o=o||window.CLIENTCONFIG.ISMOBILE)){e.next=26;break}return e.next=23,coreSecurity.saveUserWithCrypt({strUserPwd:p,strAccount:r});case 23:m=e.sent,h=m.res,g=m.realRandom;case 26:return v={},f.forEach(function(e){e.tenantid!==a||isNullOrEmpty(a)||(v=e)}),e.next=30,coreDb.queryLoginRecord({account:r});case 30:if(I=e.sent,w=0,window.isHubEnv&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME||!isNullOrEmpty(I)&&I.isMaxhubWorkplace)&&(w=1),S.info("setLoginRecord isMaxhubWorkplace:",w),E={display_account:n,account:r,tenantcn:v.tenantcn||"",tenanten:v.tenanten||"",thirdaccount:v.thirdaccount||"",tenantid:a,thirdcertype:v.thirdcertype||!1,encryptPassword:o?h:"",strUserRandom:o?g:"",isRememberPassWord:o,isAutoLogin:i,time_stamp:(new Date).getTime(),isMaxhubWorkplace:w},isNullOrEmpty(v.account)||v.account===r){e.next=38;break}return e.next=38,coreDb.deleteLoginRecord({account:v.account});case 38:return e.next=40,coreDb.saveLoginRecord((0,l.default)(I,E));case 40:return N=[{key:"serverAddress",value:s},{key:"serverPort",value:c},{key:"lastDeployMode",value:u}],e.next=43,coreDb.saveLoginSettings({args:N});case 43:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.settingPageSetLoginRecord=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return t=e.sent,n=t.account,r=t.isRememberPassword,a=t.isAutoLogin,e.next=8,coreSecurity.getPasswordManager();case 8:return o=e.sent,e.next=11,o.getPassword("password");case 11:if(i=e.sent,s=void 0,c=void 0,!r){e.next=19;break}return e.next=16,coreSecurity.saveUserWithCrypt({strUserPwd:i,strAccount:n});case 16:u=e.sent,s=u.res,c=u.realRandom;case 19:return f={encryptPassword:r?s:"",strUserRandom:r?c:"",isRememberPassWord:r,isAutoLogin:a,time_stamp:(new Date).getTime()},e.next=22,coreDb.queryLoginRecord({account:n});case 22:return d=e.sent,e.next=25,coreDb.saveLoginRecord((0,l.default)(d,f));case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.saveLoginRecord=function(){T(),window.stroage.setFastLogin(!0)};var b=t.setLoginInfo=function(e){(0,C.getLoginModel)().then(function(t){t.set(e)})},O=t.setLoginInfoSync=function(e){(0,C.getSyncLoginModel)().set(e)},L=(t.deleteLoginPWD=function(e){e={password:""},(0,C.getLoginModel)().then(function(t){t.set(e)})},t.renewFolderState=function(e){(0,C.getLoginModel)().then(function(t){t.set(e)})},t.changeLoginInfo=function(e){var t=(0,C.getSyncLoginModel)(),n=e,r=n.displayAccount,a=n.isAutoLogin,o=n.isRememberPassword,i=(0,C.getSyncLoginModel)(),s=i.displayAccount,c=i.loginHistoryList,u=i.isRememberPassword,f=(0,C.getSyncLoginModel)(),d=f.showPwd;if(void 0===r&&!1===d&&void 0===a&&void 0===o&&(""===t.password||""===s&&""!==e.password)){(0,l.default)(e,{showPwd:!0})}if(void 0!==r&&r!==s){if(c.findIndex(function(e){return e===r})>-1)return e={displayAccount:r,account:window.SERVERCONFIG.HWUC?r.toLowerCase():r},void O(e);e={displayAccount:r,account:window.SERVERCONFIG.HWUC?r.toLowerCase():r,password:"",isRememberPassword:"",isAutoLogin:"",showPwd:""!==r},t.password=""}else a?e.isRememberPassword=!0:o||void 0===o||u===o||(e.isAutoLogin=!1);delete e.password,O(e)},t.setIsCACertCheckSupport=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isSupportCACertCheck,r=[{key:"isSupportCACertCheck",value:n?"1":"0"}],e.next=4,coreDb.bulkPutLoginSetting({settinglist:r});case 4:return e.next=6,b({isSupportCACertCheck:n});case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),new PromiseObject);window.getSystemProxy=function(){return window.electron.ipcRenderer.send("getSystemProxy-event"),L},window.updateSystemProxy=function(e){if(isNullOrEmpty(e))return void L.reject();var t=void 0;t="mac"===window.CLIENTCONFIG.PLATFORM?e.split("\n"):e.split(":");var n=void 0,r=void 0;isNullOrEmpty(t)||(t.length>=2?(n=t[0],r=t[1]):1===t.length?(n=t[1],r=""):(n="",r=""),b({sysProxyAddress:n,sysProxyPort:r}),L.resolve({sysProxyAddress:n,sysProxyPort:r})),L.reject()};var A=(t.setServerAddress=function(){var e=(0,m.default)(_.default.mark(function e(t,n,r){var a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:return a=e.sent,a.serverAddress===t&&a.serverPort===n||(S.info("entity.isReqAddrChanged in"),a.isReqAddrChanged=!0),o=[],i={},window.isHubEnv&&(i.serverAddress=t),isNullOrEmpty(t)||(o.push({key:"serverAddress",value:t}),i.serverAddress=t),isNullOrEmpty(n)||(o.push({key:"serverPort",value:n}),i.serverPort=n),isNullOrEmpty(r)||(o.push({key:"middleEndAddress",value:r}),i.middleEndAddress=r),e.next=12,coreDb.bulkPutLoginSetting({settinglist:o});case 12:return e.next=14,b(i);case 14:window.SERVERCONFIG.MIDDLE_END_ADDRESS=r||window.SERVERCONFIG.MIDDLE_END_ADDRESS,window.SERVERCONFIG.LOGIN_ADDRESS=t,window.SERVERCONFIG.LOGIN_PORT=n,window.SERVERCONFIG.HWUC=0,coreCommon.sha512(t)===constant.SERVER_ADDRESS_SHA512.HWUC?window.SERVERCONFIG.HWUC=1:window.SERVERCONFIG.HWUC=0;case 19:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.setTempMediaxInfo=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.tempMediaxAddress,r=t.tempMediaxPort,e.next=3,b({tempMediaxAddress:n,tempMediaxPort:r});case 3:window.CLIENTCONFIG.TEMP_MEDIAX_ADDRESS=n,window.CLIENTCONFIG.TEMP_MEDIAX_PORT=r,coreConf.saveTempMediaxInfo();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setTempProxyInfo=function(){var e=(0,m.default)(_.default.mark(function e(t){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,b({proxyAddress:t.proxyAddress,proxyPort:t.proxyPort});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setProxyInfo=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.isSupportProxy,r=t.isUseSysProxy,a=t.proxyAddress,o=t.proxyPort,i=t.proxyAccount,s=t.proxyPassword,e.next=3,coreSecurity.getPasswordManager();case 3:return c=e.sent,e.next=6,c.getPassword("proxyPassword");case 6:return u=e.sent,e.next=9,c.setPassword("proxyPassword",s);case 9:return f=e.sent,e.next=12,(0,C.getLoginModel)();case 12:return l=e.sent,l.isSupportProxy===n&&l.proxyAddress===a&&l.proxyPort===o&&l.proxyAccount===i&&u===s||(S.info("entity.isReqAddrChanged in here"),l.isReqAddrChanged=!0),d=[{key:"isSupportProxy",value:n?"1":"0"},{key:"isUseSysProxy",value:r?"1":"0"},{key:"proxyAddress",value:a},{key:"proxyPort",value:o},{key:"proxyAccount",value:i},{key:"proxyPassword",value:f.cipher},{key:"prxoyRandom",value:f.salt}],e.next=17,coreDb.bulkPutLoginSetting({settinglist:d});case 17:return e.next=19,b({isSupportProxy:n,isUseSysProxy:r,proxyAddress:a,proxyPort:o,proxyAccount:i});case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginInfo=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:if(n=e.sent,r=n.displayAccount,a=n.loginHistoryList,o=n.loginRecordList,i=o.find(function(e){return e.display_account===t}),isNullOrEmpty(i)){e.next=29;break}return e.next=10,coreDb.deleteLoginRecord({account:i.account});case 10:if(s=a.findIndex(function(e){return e===t}),a.splice(s,1),s=o.findIndex(function(e){return e.display_account===t}),o.splice(s,1),r!==t){e.next=17;break}return e.next=17,b({tenantid:"",displayAccount:"",account:"",password:"",isRememberPassword:"",isAutoLogin:""});case 17:return e.next=19,coreDb.releaseSQliteDBHandler();case 19:return e.prev=19,e.next=22,appService.deleteUserDir(i.account);case 22:e.next=27;break;case 24:e.prev=24,e.t0=e.catch(19),S.info("deleteUserDir",e.t0);case 27:e.next=30;break;case 29:S.error("delete account failed");case 30:case"end":return e.stop()}},e,void 0,[[19,24]])}));return function(t){return e.apply(this,arguments)}}(),t.deleteLoginPwd=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,g,m;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,S.info("删除记录"),0!==t.length){e.next=6;break}return e.abrupt("return");case 6:return n=[],t.forEach(function(e){var t=e.display_account;n.push(t)}),r=t[0],a=r.display_account,o=r.account,i=r.tenantid,s="",c=!1,u=!1,f={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:"",isRememberPassWord:c,isAutoLogin:u,time_stamp:(new Date).getTime()},e.next=15,coreDb.queryLoginRecord({account:o});case 15:return d=e.sent,e.next=18,coreDb.saveLoginRecord((0,l.default)(d,f));case 18:return e.next=20,coreDb.queryAllLoginRecord();case 20:if(p=e.sent,0!==p.length){e.next=23;break}return e.abrupt("return");case 23:return h=[],p.forEach(function(e){var t=e.display_account;h.push(t)}),g={displayAccount:a,account:o,password:s,loginHistoryList:h,isRememberPassword:c,isAutoLogin:u},window.ifLogOut=!1,e.next=29,(0,C.getLoginModel)();case 29:return m=e.sent,m.password="",e.next=33,b(g);case 33:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),y=(t.changeAutoLogin=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,g,m,v,C;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return");case 5:return n=[],t.forEach(function(e){var t=e.display_account;n.push(t)}),r=t[0],a=r.display_account,o=r.account,i=r.tenantid,s=r.encryptPassword,c=r.strUserRandom,u=r.isRememberPassWord,f=r.isAutoLogin,S.info("取消自动登录"),d=!1,p={display_account:a,account:o,tenantid:i,encryptPassword:"",strUserRandom:c,isRememberPassWord:!1,isAutoLogin:d,time_stamp:(new Date).getTime()},e.next=13,coreDb.queryLoginRecord({account:o});case 13:return h=e.sent,e.next=16,coreDb.saveLoginRecord((0,l.default)(h,p));case 16:return e.next=18,coreDb.queryAllLoginRecord();case 18:if(g=e.sent,0!==g.length){e.next=21;break}return e.abrupt("return");case 21:return m=[],g.forEach(function(e){var t=e.display_account;m.push(t)}),v={displayAccount:a,account:o,password:"",loginHistoryList:m,isRememberPassword:u,isAutoLogin:d,status:void 0},window.ifLogOut=!1,e.next=27,coreSecurity.getPasswordManager();case 27:return C=e.sent,C.setPassword("password",""),e.next=31,b(v);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showImportCertificateContact=function(){var e=(0,m.default)(_.default.mark(function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("userClick showImportCertificateContact menu"),$dispatch(coreUi.showModal(t,n));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hideImportCertificateModal=function(){var e=(0,m.default)(_.default.mark(function e(){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("userClick hideImportCertificateModal menu"),coreUi.hideModal();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),x=(t.uploadCertificateFile=function(){var e=(0,m.default)(_.default.mark(function e(t){var n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("uploadCertificateFile 选择证书上传"),n={},n.properties=["openFile"];try{window.electron.remote.dialog.showOpenDialog(n,function(e){if(!isNullOrEmpty(e)){var n=[],r=!0,a=!1,o=void 0;try{for(var i,s=(0,u.default)(e);!(r=(i=s.next()).done);r=!0){var c=i.value;n.push(c)}}catch(e){a=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(a)throw o}}t===constant.IMPORT_CERTIFICATE_TYPE.CERTIFICATE_TYPE?x(1===n.length&&n[0]||[]):t===constant.IMPORT_CERTIFICATE_TYPE.KEYS_TYPE&&R(1===n.length&&n[0]||[])}})}catch(e){S.error("uploadCertificateFile",e.toString())}case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateCertificateUrlLogic=function(e){(0,C.getLoginModel)().then(function(t){t.certificateUrl=e})}),R=t.updateKeysUrlLogic=function(e){(0,C.getLoginModel)().then(function(t){t.keysUrl=e})},M=t.clearSelectCertificateOrkeysLogic=function(){var e=(0,m.default)(_.default.mark(function e(){var t;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:t=e.sent,t.certificateUrl="",t.keysUrl="";case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),k=(t.saveImportCertificateLogic=function(){var e=(0,m.default)(_.default.mark(function e(t,n,r){var a,o,i,s,c,u,f,l,d,p,h,g,m;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("saveImportCertificateLogic 导入证书"),e.prev=1,a=window.fs,o=window.path,i="",s="",c="",u="",o&&(i=o.win32.basename(t),s=o.win32.basename(n)),""!==i&&""!==s){e.next=9;break}return alert(language.CERTIFICATE_NAME_OR_KEY_NAME_CANNOT_BE_NULL),e.abrupt("return",!1);case 9:if(c=o.extname(i),u=o.extname(s),".pem"===c&&".pem"===u){e.next=14;break}return alert(language.ILLEGAL_CERTIFICATE_FORMAT_PLEASE_RESELECT),e.abrupt("return",!1);case 14:return e.next=16,G(t);case 16:if(f=e.sent){e.next=20;break}return alert(language.INCORRECT_OR_INVALID_CERTIFICATE),e.abrupt("return",!1);case 20:if(!a){e.next=34;break}return l=APP_DATA_PATH+"/ImpBfcpTLS",d=l+"/"+i,p=l+"/"+s,h=l+"/p4bfcp.txt",a.existsSync(l)?(g=a.readdirSync(l),g.forEach(function(e){a.unlinkSync(l+"/"+e)})):a.mkdirSync(l),e.next=28,k(t,d);case 28:return e.next=30,k(n,p);case 30:return e.next=32,coreSecurity.encryptKMC(r);case 32:m=e.sent,0===m.result&&a.writeFile(h,m.param.CiperText,function(e){if(e)throw e});case 34:return e.abrupt("return",!0);case 37:e.prev=37,e.t0=e.catch(1),S.error("saveImportCertificateLogic",e.t0.toString());case 40:case"end":return e.stop()}},e,void 0,[[1,37]])}));return function(t,n,r){return e.apply(this,arguments)}}(),function(){var e=(0,m.default)(_.default.mark(function e(t,n){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("readeContentToWriteFile 开始读写");try{fs.readFile(t,function(e,t){if(e)throw e;fs.writeFile(n,t,function(e){if(e)throw e})})}catch(e){S.error("readeContentToWriteFile",e.toString())}case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),P=(t.saveBeforeLogic=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",u=arguments[2];return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:try{t=window.fs,n=window.path,r="",a="",o="p4bfcp.txt",n&&(r=n.win32.basename(s),a=n.win32.basename(c)),t&&(i=APP_DATA_PATH+"/ImpBfcpTLS",t.readdir(i,function(e,t){t.includes(r)&&t.includes(a)&&t.includes(o)?window.alert(language.IMPORT_DEVICE_CERTIFICATE_SUCCESSFULLY).then(function(e){e.ret&&(M(),u.value="",y(),P(r),D(!1))}):window.alert(language.FAILED_IMPORT_DEVICE_CERTIFICATE_PLEASE_RE_IMPORT).then(function(e){e.ret&&(M(),u.value="")})}))}catch(e){S.error("saveBeforeLogic",e.toString())}case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.saveSelectCertificateNameLogic=function(e){S.info("saveSelectCertificateNameLogic",e),(0,C.getLoginModel)().then(function(t){t.certificateName=e})}),D=t.setCertificateCheckLogic=function(){var e=(0,m.default)(_.default.mark(function e(t){var n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("setCertificateCheckLogic",t),e.next=3,(0,C.getLoginModel)();case 3:n=e.sent,n.selectCertificate=t;case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),U=(t.setImportCertificate=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("setImportCertificate"),n=t.selectCertificate,r=t.certificateName,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return a=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(o=e.sent,"{}"===a&&(a=null),"{}"===o&&(o=null),isNullOrEmpty(a)||isNullOrEmpty(o)){e.next=25;break}if(o.value===r){e.next=16;break}return i=[{key:"certificateName",value:r}],e.next=15,coreDb.saveLoginSettings({args:i});case 15:P(r);case 16:if((s="true"===a.value)===n){e.next=23;break}return c=[{key:"importCertificate",value:n}],e.next=21,coreDb.saveLoginSettings({args:c});case 21:return e.next=23,D(n);case 23:e.next=30;break;case 25:return u=[{key:"importCertificate",value:n},{key:"certificateName",value:r}],e.next=28,coreDb.saveLoginSettings({args:u});case 28:return e.next=30,F(n,r);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initImportCertificate=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("initImportCertificate"),e.prev=1,e.next=4,coreDb.queryLoginSetting({key:"importCertificate"});case 4:return t=e.sent,e.next=7,coreDb.queryLoginSetting({key:"certificateName"});case 7:if(n=e.sent,S.debug("initImportCertificate",t,n),"{}"===t&&(t=null),"{}"===n&&(n=null),S.debug("new initImportCertificate",t,n),isNullOrEmpty(t)||isNullOrEmpty(n)){e.next=16;break}if(""===n.value){e.next=16;break}return e.next=16,F("true"===t.value,n.value);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(1),S.error("initImportCertificate",e.t0.toString());case 21:case"end":return e.stop()}},e,void 0,[[1,18]])}));return function(){return e.apply(this,arguments)}}()),F=t.setInitSelectCertificateLogic=function(){var e=(0,m.default)(_.default.mark(function e(t,n){var r;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("setInitSelectCertificateLogic"),e.next=3,(0,C.getLoginModel)();case 3:r=e.sent,r.selectCertificate=t,r.certificateName=n;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),G=t.verificationCertificateLogic=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("verificationCertificateLogic"),e.prev=1,e.next=4,(0,w.verifyCertificate)(t);case 4:if(n=e.sent,0===n.result){e.next=9;break}return e.abrupt("return",!1);case 9:return e.next=11,(0,w.checkCertificateOverdue)(t);case 11:if(r=e.sent,a=r.param&&r.param.expire_time,o=a.ulUTCSec+"000",i=(new Date).getTime,!(0===r.result&&i-o>0)){e.next=17;break}return e.abrupt("return",!1);case 17:return e.abrupt("return",!0);case 20:e.prev=20,e.t0=e.catch(1),S.error("verificationCertificateLogic",e.t0.toString());case 23:case"end":return e.stop()}},e,void 0,[[1,20]])}));return function(t){return e.apply(this,arguments)}}(),B=t.dbInitCertificateLogic=function(){var e=(0,m.default)(_.default.mark(function e(){var t;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("dbInitCertificateLogic"),t=[{key:"importCertificate",value:""},{key:"certificateName",value:""}],e.next=4,coreDb.saveLoginSettings({args:t});case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.loginforverificationCertificateLogic=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("loginforverificationCertificateLogic"),e.prev=1,t=window.fs,n=!0,!t){e.next=29;break}if(r=APP_DATA_PATH+"/ImpBfcpTLS",a=r+"/server.pem",t.existsSync(r)){e.next=12;break}S.debug("用户文档下没有了设备证书目录"),n=!1,e.next=29;break;case 12:if(o=t.readdirSync(r),!(o.includes("server.pem")&&o.includes("server_key.pem")&&o.includes("p4bfcp.txt"))){e.next=27;break}return e.next=16,G(a);case 16:if(i=e.sent){e.next=25;break}return S.debug("导入的证书不正确或者证书已经失效，自动使用默认证书"),e.next=21,F(!0,"");case 21:n=!1,o.forEach(function(e){t.unlinkSync(r+"/"+e)}),t.rmdirSync(r),B();case 25:e.next=29;break;case 27:S.debug("ImpBfcpTLS目录下没有文件"),n=!1;case 29:return e.abrupt("return",n);case 32:e.prev=32,e.t0=e.catch(1),S.error("loginforverificationCertificateLogic",e.t0.toString());case 35:case"end":return e.stop()}},e,void 0,[[1,32]])}));return function(){return e.apply(this,arguments)}}();window.handleJoinImpVcName=function(e){if(!window.isOffline)return void alert(language.IN_CASE_ONLINE_YOU_CANNOT_IMPORT_CERTIFICATE);isNullOrEmpty(e)?window.ToastNew(language.FAILED_TO_IMPORT_THE_CERTIFICATE,2):(window.goRoute("loginCtn"),q(),window.confirm(language.DOES_THE_DETECTION_ATTACHMENT_HAVE_CERTIFICATE).then(function(t){if(t.ret){window.MLoad(language.DURING_THE_SURVEY_PLEASE_WAIT,!0,"probeLoad");var n=null;clearTimeout(n),n=setTimeout(function(){appService.unzipOfZipPackage(e)},2e3)}}))},window.setProbeZipPackageResult=function(e){W(e)};var W=function(e){switch(window.removeMLoad(),e.resultCode){case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NOT_EXIST:alert(language.IMPORTED_FILE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_NO_CERTIFICATE_EXIST:alert(language.CERTIFICATE_DOES_NOT_EXIST);break;case constant.PROBE_COMPRESSED_PACKAGE.PROBE_CERTIFICATE_EXIST:V(e);break;default:window.ToastNew(language.PROBE_FAILED,2)}},V=t.probeImportCertificateLogic=function(e){new p.default(function(t){window.MLoad(language.SUCCESSFUL_DETECTION_IMPORT,!0,"probeLoad"),H(e.serverPem,e.serverKeyPem),$(e.zipUrl),t("OK")}).then(function(e){if("OK"===e){new p.default(function(e){window.MLoad(language.AUTOMATIC_MATCHING_COMPLETED,!1,"probeLoad"),e("Y")}).then(function(e){if("Y"===e){var t=null;clearTimeout(t),t=setTimeout(function(){window.goRoute("mLoginMoreSet"),window.goRoute("mImportCertificate"),window.goRoute("mSelectImpCertPage"),window.removeMLoad()},1e3)}})}})},H=t.setMProveAndKeyLogic=function(e,t){S.info("setMProveAndKeyLogic"),(0,C.getLoginModel)().then(function(n){n.mProveUrl=e,n.mkeysUrl=t})},$=t.setMSaveZipUrlLogic=function(e){S.info("setMSaveZipUrlLogic"),(0,C.getLoginModel)().then(function(t){t.mZipUrl=e})},Y=t.setMProveNameAndSelectItLogic=function(e,t){S.info("setMProveNameAndSelectItLogic"),(0,C.getLoginModel)().then(function(n){n.mProveName=e,n.mSelectProve=t})};t.setMSelectItLogic=function(){var e=(0,m.default)(_.default.mark(function e(t){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("setMSelectItLogic"),(0,C.getLoginModel)().then(function(e){e.mSelectProve=t});case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.mobileImptProveLogic=function(){var e=(0,m.default)(_.default.mark(function e(t,n,r){var a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.encryptKMC(t);case 2:if(a=e.sent,0!==a.result){e.next=9;break}return e.next=6,(0,C.getLoginModel)();case 6:o=e.sent,i=o.mZipUrl,appService.mImptProve(a.param.CiperText,n,r,i);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}();window.sendSetInitialValueToProbeResult=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return n=window.EXEC_PATH+"/"+t.imptPath,r=n+"/"+t.serverPem,e.next=5,G(r);case 5:a=e.sent,S.info("sendSetInitialValueToProbeResult 证书校验: ",a),a?Y(t.serverPem,!1):S.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.sendIsImportSuccessfulResult=function(e){if("200"===e.imptResultCode&&""!==e.serverName){S.info("导入证书成功"),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var t=null;clearTimeout(t),t=setTimeout(function(){window.history.back(),Y(e.serverName,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)};var q=(t.cancelImpSelectDone=function(){S.info("userClick  back btn"),window.goRoute("mImportCertificate")},t.clearImptZipUrlDataLogic=function(){var e=(0,m.default)(_.default.mark(function e(){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:H("",""),$("");case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.initMImportCertificate=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,C.getLoginModel)();case 2:t=e.sent,n=t.mSelectProve,appService.logoutAndFreeLoginInitProve(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.actionLogoutAndFreeloginHandler=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(t)||""===t.serverPem){e.next=8;break}return n=window.EXEC_PATH+"/"+t.imptPath,r=n+"/"+t.serverPem,e.next=5,G(r);case 5:a=e.sent,S.info("sendSetInitialValueToProbeResult 证书校验: ",a),a?Y(t.serverPem,!1):S.info("证书不正确或证书已经失效");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.unzipOfZipPackageResult=function(e,t,n,r){W({serverPem:e||"",serverKeyPem:t||"",resultCode:n||"0",zipUrl:""})},window.mImptProveResult=function(e,t){if("200"===t&&""!==e){S.info("导入证书成功"),window.MLoad(language.IMPORT_CERTIFICATE_SUCCESSFULLY,!1,"probeLoad");var n=null;clearTimeout(n),n=setTimeout(function(){window.history.back(),Y(e,!1),window.removeMLoad()},1e3)}else alert(language.IMPORT_FAILED_PLEASE_TRY_AGAIN)},window.initJudgeDirExistProveResult=function(){var e=(0,m.default)(_.default.mark(function e(t,n,r){var a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(""===t){e.next=8;break}return a=window.EXEC_PATH+"/"+n,o=a+"/"+t,e.next=5,G(o);case 5:i=e.sent,S.info("sendSetInitialValueToProbeResult 证书校验: ",i),i?Y(t,!1):S.info(language.INCORRECT_OR_INVALID_CERTIFICATE);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}();t.isInLoginRecordList=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:return n=e.sent,r=n.some(function(e){return e.account===t}),e.next=6,(0,C.getLoginModel)();case 6:a=e.sent,a.whetherInLoginRecordList=r;case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isPcFirstInstall=function(){var e=(0,m.default)(_.default.mark(function e(){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.getItem("");case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isAccountAutoLogin=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryAllLoginRecord();case 2:if(t=e.sent,0!==t.length){e.next=5;break}return e.abrupt("return",!1);case 5:return n=t[0].isAutoLogin,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initPcFirstPage=function(){var e=(0,m.default)(_.default.mark(function e(){var t;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.CLIENTCONFIG.PRIVACY_VERSION_VALUE,window.CLIENTCONFIG.ISBIGWIN||(t=window.localStorage.getItem("isFirstInstall")),"2052"===window.langcode&&(window.document.title=window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME),!window.isHubEnv){e.next=10;break}delegate(function(){(0,I.getMyInfo)().then(function(e){e.languageCode=window.langcode})},"updateLanguage"),window.goRoute("maxhubLogin"),coreCommon.verificationCertificate(),coreConf.NotifyAppStared(0),e.next=31;break;case 10:if(!window.isPluginEnv){e.next=16;break}return e.next=13,coreCommon.initLogin(!1);case 13:S.info("init plugin first page"),e.next=31;break;case 16:if(window.CLIENTCONFIG.PRIVACY_VERSION_VALUE===t){e.next=26;break}return S.info("First install or privacy statement updated"),appService.showMainWindow(!1),e.next=21,appService.initLoginTray();case 21:return e.next=23,window.setLoginSize();case 23:window.CLIENTCONFIG.ISBIGWIN?window.goRoute("login"):(window.goRoute("firstLoginPrivacy"),appService.showMainWindow(!0)),e.next=31;break;case 26:if(window.CLIENTCONFIG.ISBIGWIN){e.next=29;break}return e.next=29,window.setLoginSize();case 29:window.goRoute("login"),coreCommon.verificationCertificate();case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},168:function(e,t,n){e.exports=n(0)(80)},170:function(e,t,n){e.exports={default:n(171),__esModule:!0}},171:function(e,t,n){n(23),n(22),e.exports=n(172)},172:function(e,t,n){var r=n(16),a=n(6)("iterator"),o=n(17);e.exports=n(8).isIterable=function(e){var t=Object(e);return void 0!==t[a]||"@@iterator"in t||o.hasOwnProperty(r(t))}},173:function(e,t,n){n(174),e.exports=n(8).Object.keys},174:function(e,t,n){var r=n(130),a=n(168);n(137)("keys",function(){return function(e){return a(r(e))}})},180:function(e,t,n){"use strict";var r=n(25).f,a=n(198),o=n(29),i=n(11),s=n(28),c=n(24),u=n(199),f=n(200),l=n(37),d=n(30),p=n(157).fastKey,h=n(149),_=d?"_s":"size",g=function(e,t){var n,r=p(t);if("F"!==r)return e._i[r];for(n=e._f;n;n=n.n)if(n.k==t)return n};e.exports={getConstructor:function(e,t,n,u){var f=e(function(e,r){s(e,f,t,"_i"),e._t=t,e._i=a(null),e._f=void 0,e._l=void 0,e[_]=0,void 0!=r&&c(r,n,e[u],e)});return o(f.prototype,{clear:function(){for(var e=h(this,t),n=e._i,r=e._f;r;r=r.n)r.r=!0,r.p&&(r.p=r.p.n=void 0),delete n[r.i];e._f=e._l=void 0,e[_]=0},delete:function(e){var n=h(this,t),r=g(n,e);if(r){var a=r.n,o=r.p;delete n._i[r.i],r.r=!0,o&&(o.n=a),a&&(a.p=o),n._f==r&&(n._f=a),n._l==r&&(n._l=o),n[_]--}return!!r},forEach:function(e){h(this,t);for(var n,r=i(e,arguments.length>1?arguments[1]:void 0,3);n=n?n.n:this._f;)for(r(n.v,n.k,this);n&&n.r;)n=n.p},has:function(e){return!!g(h(this,t),e)}}),d&&r(f.prototype,"size",{get:function(){return h(this,t)[_]}}),f},def:function(e,t,n){var r,a,o=g(e,t);return o?o.v=n:(e._l=o={i:a=p(t,!0),k:t,v:n,p:r=e._l,n:void 0,r:!1},e._f||(e._f=o),r&&(r.n=o),e[_]++,"F"!==a&&(e._i[a]=o)),e},getEntry:g,setStrong:function(e,t,n){u(e,t,function(e,n){this._t=h(e,t),this._k=n,this._l=void 0},function(){for(var e=this,t=e._k,n=e._l;n&&n.r;)n=n.p;return e._t&&(e._l=n=n?n.n:e._t._f)?"keys"==t?f(0,n.k):"values"==t?f(0,n.v):f(0,[n.k,n.v]):(e._t=void 0,f(1))},n?"entries":"values",!n,!0),l(t)}}},181:function(e,t,n){"use strict";var r=n(7),a=n(10),o=n(157),i=n(138),s=n(35),c=n(29),u=n(24),f=n(28),l=n(15),d=n(36),p=n(25).f,h=n(201)(0),_=n(30);e.exports=function(e,t,n,g,m,v){var C=r[e],I=C,w=m?"set":"add",S=I&&I.prototype,E={};return _&&"function"==typeof I&&(v||S.forEach&&!i(function(){(new I).entries().next()}))?(I=t(function(t,n){f(t,I,e,"_c"),t._c=new C,void 0!=n&&u(n,m,t[w],t)}),h("add,clear,delete,forEach,get,has,set,keys,values,entries,toJSON".split(","),function(e){var t="add"==e||"set"==e;e in S&&(!v||"clear"!=e)&&s(I.prototype,e,function(n,r){if(f(this,I,e),!t&&v&&!l(n))return"get"==e&&void 0;var a=this._c[e](0===n?0:n,r);return t?this:a})}),v||p(I.prototype,"size",{get:function(){return this._c.size}})):(I=g.getConstructor(t,e,m,w),c(I.prototype,n),o.NEED=!0),d(I,e),E[e]=I,a(a.G+a.W+a.F,E),v||g.setStrong(I,e,m),I}},182:function(e,t,n){var r=n(16),a=n(206);e.exports=function(e){return function(){if(r(this)!=e)throw TypeError(e+"#toJSON isn't generic");return a(this)}}},183:function(e,t,n){"use strict";var r=n(10);e.exports=function(e){r(r.S,e,{of:function(){for(var e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return new this(t)}})}},184:function(e,t,n){"use strict";var r=n(10),a=n(12),o=n(11),i=n(24);e.exports=function(e){r(r.S,e,{from:function(e){var t,n,r,s,c=arguments[1];return a(this),t=void 0!==c,t&&a(c),void 0==e?new this:(n=[],t?(r=0,s=o(c,arguments[2],2),i(e,!1,function(e){n.push(s(e,r++))})):i(e,!1,n.push,n),new this(n))}})}},185:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.registerSipResultCallback=t.sipResume=t.resume=t.registerResumeEvent=t.getResumeFlag=t.clearResumeService=t.logout=t.setOffline=t.doLogout=t.enableAutoLogin=t.login=t.ipLogin=t.initLoginInfo=t.checkForceSwtichAccount=t.recoverAppCache=t.storeAppCache=void 0;var a=n(359),o=r(a),i=n(241),s=r(i),c=n(293),u=r(c),f=n(221),l=r(f);t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.checkForceSwtichAccount=s.checkForceSwtichAccount,t.initLoginInfo=s.initLoginInfo,t.ipLogin=s.ipLogin,t.login=s.login,t.enableAutoLogin=s.enableAutoLogin,t.doLogout=u.doLogout,t.setOffline=u.setOffline,t.logout=u.logout,t.clearResumeService=l.clearResumeService,t.getResumeFlag=l.getResumeFlag,t.registerResumeEvent=l.registerResumeEvent,t.resume=l.resume,t.sipResume=l.sipResume,t.registerSipResultCallback=l.registerSipResultCallback},186:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.showNativeShareSelectWnd=t.bfcpWinDetach=t.bfcpWinAttach=t.isRecevingAppshare=t.getOldShareAppHwnd=t.setOldShareAppHwnd=t.getShareAudio=t.getShareAppHwnd=t.setShareAppHwnd=t.changeShareMonitorType=t.dataConfStatus=t.confInfoNotifyParamsExist=t.getCloseShareDataOperate=t.setCloseShareDataOperate=t.getDataStreamInfo=t.isSendScreenSharing=t.isInScreenSharing=t.clearConfSharingType=t.setDataShareVersion=t.beLeaveDataConf=t.leaveDataConf=t.setDataConfParams=t.getDisplayInfo=t.setDataConfShareRealRect=t.setDataShareRealRect=t.inputWndMsg=t.cancelSharingapp=t.setTransparentwindow=t.setStart=t.setAppShareScreenParam=t.setSharingapp=t.handleNativeNotifyResetRenderRect=t.setDataShareScreenPicQuality=t.showNativeRemoteControl=t.stopWBDoc=t.closeWBTab=t.isRecevingWBSharing=t.isInWBSharing=t.configSharingParam=t.advancedSetting=t.createWBNewDocAndPage=t.getApplist=t.closeNativeDataSharingWnd=t.createNativeDataSharingWnd=t.showNativeDataControl=t.getIsUsePrimarySize=t.changeIsUsePrimarySize=t.isRemoteControling=t.getRemoteControlUserNum=t.changeRemoteControl2Other=t.delRemoteControlPrivilege=t.rejectRemoteControlPrivilege=t.requestRemoteControlPrivilege=t.openDocShareFile=t.isConfDataShareSelfEntered=t.getDataShareOwner=t.setDataCodecVersion=t.getDataCodeccVersion=t.getDataNegoBandwidth=t.docShareCompLoadSucCallback=t.getDocShareFilePath=t.isConfDocShareLoadSuccess=t.stopStgTunnel=t.stopShareScreen=t.getSharingType=t.isConfDataShareLoadSuccess=t.setNativeDataControlStatus=t.setIsAutoStartScreenShare=t.getIsAutoStartScreenShare=t.getMyUserId=t.handleShareEnd=t.isInReceiveDocSharing=t.stopDocSharing=t.isInSendDocSharing=t.startShare=t.isDataShareStarted=t.updateDataShareOwner=t.getDataShareOwnerBindno=t.isRecevingSharing=t.isReceivingDataShare=t.getDataConfMemberList=t.reSetFireWallModeType=t.setFireWallModeType=t.getFireWallModeType=t.isJoiningDataConf=t.isSelfJoinedDataConf=t.isInDataConf=t.terminateconf=t.retryJoinDataConf=t.joinDataConf=t.initDataConf=void 0;var a=n(3),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(700),l=r(f),d=n(249),p=n(227),h=n(273),_=coreLogger.getLogger("dataConf")("model"),g=null,m=!1,v=null,C=(t.initDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.DFConfig.deployMode=t,p.DFConfig.firewallType=n,p.DFConfig.stgAddresslist=r,e.next=5,coreTup.getdataConfInstance();case 5:a=e.sent,o={log_path:window.LOG_PATH+p.DFConfig.pathSeparator+"dataconf"+p.DFConfig.pathSeparator,temp_path:window.APP_DATA_PATH+p.DFConfig.pathSeparator,dev_type:p.DFConfig.devType},v=o,a.init(o);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.joinDataConf=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(_.info(" joinDataConf start "),null===g){e.next=6;break}if(_.info("join data conf already exist"),!(I()||w()||C())){e.next=6;break}return _.info("joining data abort,status is "+g.dataConfStatus),e.abrupt("return");case 6:return _.info(" joinDataConf start uninit"),e.next=9,coreTup.getdataConfInstance();case 9:return r=e.sent,r.uninit(),_.info(" joinDataConf start init"),r.init(v),_.info(" joinDataConf end init"),g=new l.default,g.setCallId(n),g.setLeftConfCallback(S),e.next=19,g.setDataConfNotifyFunc();case 19:return e.next=21,g.setConfCtrlNotifyFunc();case 21:return e.next=23,g.joinDataConf(t);case 23:_.info(" joinDataConf end");case 24:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.retryJoinDataConf=function(){return _.info("retryJoinDataConf"),null===g?void _.info("retry join fail,service not exist"):g.retryJoin()},t.terminateconf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==g){e.next=3;break}return _.info("terninate conf service is null"),e.abrupt("return");case 3:return e.next=5,g.terminateconf();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInDataConf=function(){return null!==g},t.isSelfJoinedDataConf=function(){return g&&g.isSelfJoinedDataConf()}),I=t.isJoiningDataConf=function(){return g&&g.isJoiningDataConf()},w=function(){return g&&g.isLeavingDataConf()},S=(t.getFireWallModeType=function(){return p.DFConfig.firewallType},t.setFireWallModeType=function(e){_.info("setFireWallModeType : "+e+", 0:stg,1:svn,2:sbc"),p.DFConfig.firewallType=e},t.reSetFireWallModeType=function(){_.info("reSetFireWallModeType  NULL "),p.DFConfig.firewallType=h.DATA_FIREWALL_MODE.NULL},t.getDataConfMemberList=function(){return null===g?(_.info("getDataConfMemberList: service is null"),[]):g.getDataConfMemberList()},t.isReceivingDataShare=function(){return null===g?(_.info("isReceivingDataShare: service is null"),!1):g.isReceivingDataShare()},t.isRecevingSharing=function(){return null===g?(_.info("isRecevingSharing: service is null"),!1):g.isRecevingSharing()},t.getDataShareOwnerBindno=function(){return null===g?"":g.getDataShareOwnerBindno()},t.updateDataShareOwner=function(e){if(null!==g)return g.updateDataShareOwner(e);_.info("updateDataShareOwner: service is null")},t.isDataShareStarted=function(){return null===g?(_.info("isDataShareStarted: service is null"),!1):g.isDataShareStarted()},t.startShare=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==g){e.next=3;break}return _.info("startShare: service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.abrupt("return",g.startShare(t));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.isInSendDocSharing=function(){return null!==g&&g.isInSendDocSharing()},t.stopDocSharing=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===g){e.next=2;break}return e.abrupt("return",g.stopDocSharing());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReceiveDocSharing=function(){return null!==g&&g.isInReceiveDocSharing()},t.handleShareEnd=function(e){g?g.handleShareEnd(e):_.info("handleShareEnd: service is null")},t.getMyUserId=function(){return null!==g?g.getMyUserId():""},t.getIsAutoStartScreenShare=function(){return m},t.setIsAutoStartScreenShare=function(e){_.info("setIsAutoStartScreenShare isAutoStart : ",e),m=e},t.setNativeDataControlStatus=function(e){if(g)return g.setNativeDataControlStatus(e)},t.isConfDataShareLoadSuccess=function(){return null!==g&&g.isConfDataShareLoadSuccess()},t.getSharingType=function(){return null===g?(_.info("get sharing type dataConfService error"),-1):g.getSharingType()},t.stopShareScreen=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==g){e.next=3;break}return _.info("stopShareScreen service is null"),e.abrupt("return",o.default.reject(new Error("service is null")));case 3:return e.next=5,g.stopShareScreen();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopStgTunnel=function(){null!==g&&g.stopStgTunnel()},function(){null!==g&&(_.info("releaseDataconf dataConfService is null"),g=null,(0,p.resetConfig)())});t.isConfDocShareLoadSuccess=function(){return!!g&&g.isConfDocShareLoadSuccess()},t.getDocShareFilePath=function(){return null===g?(_.info("get doc share file path confService error"),""):g.getDocShareFilePath()},t.docShareCompLoadSucCallback=function(e){g&&g.docShareCompLoadSucCallback(e)},t.getDataNegoBandwidth=function(){return g?g.getNegoBandwidth():0},t.getDataCodeccVersion=function(){return g?g.getDataCodeccVersion():0},t.setDataCodecVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.setDataCodecVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataShareOwner=function(){return null!==g?g.getDataShareOwnerBindno():""},t.isConfDataShareSelfEntered=function(){return null!==g&&g.m_user_id>0},t.openDocShareFile=function(e){g&&(_.info("openDocShareFile called"),g.openDocShareFile(e))},t.requestRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.requestRemoteControlPrivilege();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.rejectRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.rejectRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.delRemoteControlPrivilege=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.delRemoteControlPrivilege(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeRemoteControl2Other=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g&&g.changeRemoteControl2Other(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getRemoteControlUserNum=function(){return g?g.getRemoteControlUserNum():""},t.isRemoteControling=function(){return null!==g&&g.isRemoteControling()},t.changeIsUsePrimarySize=function(){null!==g&&(g.isUsePrimarySize=!g.isUsePrimarySize)},t.getIsUsePrimarySize=function(){return null!==g&&g.isUsePrimarySize},t.showNativeDataControl=function(e,t,n,r,a,o){g&&g.showNativeDataControl(e,e?o:"0",(0,d.isConfChairMan)(),t,n,r,a)},t.createNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c,u,f,l,d){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=5;break}return e.next=3,g.createNativeDataSharingWnd(t,n,r,a,o,i,c,u,f,l,d);case 3:e.next=6;break;case 5:_.info("create native data win, dataConfService is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),t.closeNativeDataSharingWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.closeNativeDataSharingWnd();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getApplist=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.getApplist();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===g){e.next=3;break}return e.next=3,g.requestWBToken(!0);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.advancedSetting=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===g){e.next=3;break}return e.next=3,g.advancedSetting(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.configSharingParam=function(e,t){if(null===g)return void _.info("config sharing param confService error");g.setConfSharingType(e,t)},t.isInWBSharing=function(){return null!==g&&g.isInWBSharing()},t.isRecevingWBSharing=function(){return null!==g&&g.isRecevingWBSharing()},t.closeWBTab=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===g){e.next=3;break}return e.next=3,g.closeWBTab();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.stopWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===g){e.next=3;break}return e.next=3,g.stopWBDoc();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeRemoteControl=function(e){g&&g.showNativeRemoteControl(e)},t.setDataShareScreenPicQuality=function(e){g&&g.setDataShareScreenPicQuality(e)},t.handleNativeNotifyResetRenderRect=function(e){_.info("handleNativeNotifyResetRenderRect start"),g&&g.handleNativeNotifyResetRenderRect(e)},t.setSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.setSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setAppShareScreenParam=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.setAppShareScreenParam(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setStart=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.setStart();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setTransparentwindow=function(){var e=(0,u.default)(s.default.mark(function e(t,n){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.setTransparentwindow(t,n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.cancelSharingapp=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.cancelSharingapp(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.inputWndMsg=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.inputWndMsg(t,n,r,a,o);case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.setDataShareRealRect=function(e,t,n,r){g?(_.info(" setDataShareRealRect set rect"),g.setDataConfShareRealRect(e,t,n,r)):_.info(" setDataShareRealRect dataConfService null")},t.setDataConfShareRealRect=function(){g&&g.setDataConfShareRealRect()},t.getDisplayInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.getDisplayInfo();case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataConfParams=function(e){g&&g.setDataConfParams(e)},t.leaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=5;break}return e.next=3,g.leaveDataConf(t);case 3:e.next=6;break;case 5:_.info("leaveDataConf:service is null");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.beLeaveDataConf=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:_.info("beLeaveDataConf type "),g&&g.beLeaveDataConf();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setDataShareVersion=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=3;break}return e.next=3,g.setDataShareVersion(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.clearConfSharingType=function(){g&&g.resetConfSharingType()},t.isInScreenSharing=function(){return null!==g&&g.isInScreenSharing()},t.isSendScreenSharing=function(){return null!==g&&g.isSendScreenSharing()},t.getDataStreamInfo=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=4;break}return e.next=3,g.getStreamInfo();case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCloseShareDataOperate=function(e){if(g)return g.setCloseShareDataOperate(e)},t.getCloseShareDataOperate=function(){return null!==g&&g.getCloseShareDataOperate()},t.confInfoNotifyParamsExist=function(){return g&&g.confInfo},t.dataConfStatus=function(){return g?(_.info("dataConfStatus is ",g.dataConfStatus),g.dataConfStatus):(_.info("dataConfService is null"),h.DCONF_STATUS.NONE)},t.changeShareMonitorType=function(e){g&&g.changeShareMonitorType(e)},t.setShareAppHwnd=function(e){g?g.setShareAppHwnd(e):_.error("set share app error.data service is null")},t.getShareAppHwnd=function(){return _.info("get share app hwnd"),g?g.getShareAppHwnd():0},t.getShareAudio=function(){return _.info("get share audio"),!!g&&g.getShareAudio()},t.setOldShareAppHwnd=function(e){g?g.setOldShareAppHwnd(e):_.error("set old app error.service is null")},t.getOldShareAppHwnd=function(){return g?g.getOldShareAppHwnd():0},t.isRecevingAppshare=function(){return!!g&&g.isRecevingAppshare()},t.bfcpWinAttach=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=4;break}return e.abrupt("return",g.bfcpWinAttach(t));case 4:_.info("attach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.bfcpWinDetach=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=4;break}return e.abrupt("return",g.bfcpWinDetach());case 4:_.info("detach:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.showNativeShareSelectWnd=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!g){e.next=4;break}return e.abrupt("return",g.showNativeShareSelectWnd());case 4:_.info("showNativeShareSelectWnd:service is null");case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},191:function(e,t,n){e.exports={default:n(255),__esModule:!0}},194:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.ToolbarManager=void 0;for(var a,o,i=n(135),s=r(i),c=n(123),u=r(c),f=n(1),l=r(f),d=n(69),p=r(d),h=n(2),_=r(h),g=n(4),m=r(g),v=n(5),C=r(v),I=n(152),w=(n(226),n(207)),S=n(165),E=n(208),N=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(E),T=n(329),b=constant.KEYPAD_CONST,O=(b.BTN_HIGH_LIGHT_TIME,b.ON_HOLD_TIME_STAMP,b.KEY_AUDIO_LIST),L=b.KEY_AUDIO_SRC,A=O.length,y=[],x=0;x<A;x++){var R=new Audio;R.src=L+O[x],R.preload="auto",y.push(R)}for(var M=0;M<A;M++){var k=new Audio;k.src=L+O[M],k.preload="auto",y.push(k)}var P=coreLogger.getLogger("conf")("logic/video/toolbarmanager"),D=t.ToolbarManager=(o=a=function(){function e(){(0,m.default)(this,e)}return(0,C.default)(e,null,[{key:"playDialAudio",value:function(e){var t=void 0;if(12===e&&(e=0),window.webView)window.webView.playRing(e+".wav",0);else if(this[e]?(t=y[Number(e)+A],this[e]=!1):(t=y[e],this[e]=!0),coreCommon.isMobile()){var n=new Media(L+O[Number(e)],function(){window.log("audio load success.")},function(){window.log("audio load failed.")});n.play()}else t&&(t.currentTime=0,t.play())}}]),e}(),a.rpChairman={stu:-1,time:Date.now(),timer:-1},a.selfMuteState=-1,a.clearParam=function(){clearTimeout(D.rpChairman.timer),D.rpChairman={stu:-1,time:Date.now(),timer:-1},D.selfMuteState=-1},a.setMicVol=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.index>=0&&(P.info("userClick to set mic device, index=",t.index),coreSetting.setAndSaveMicDevice(t.index)),t.isMute>=0&&(P.info("setMicVolNotify, param = "+(0,p.default)(t)),n=1===t.isMute,r=$getState().conf,a=r.isConfMicMute,o=r.isAllowUnmute,i=r.selfRole,s=r.isConfAllMute,c=$getState().login.isSupportAS,1===s&&1===a&&0===i&&0===o&&c?(P.info("unAllow unmute self mic"),coreConf.getSvcAtdManager().alertBox("CANNOT_BE_LIFTED_BY_YOURSELF",0),S.SvcAtdManager.setMuteState(!0,n)):D.setValueZeroFunc());case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setSpkVol=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.index>=0&&(P.info("userClick to set spk device, index=",t.index),coreSetting.setAndSaveSpkDevice(t.index)),!(t.isMute>=0)){e.next=9;break}if(!$getState().call.isMuteSpk){e.next=7;break}return e.next=5,coreCommon.SpkControl.getInstance().muteSpk(!1);case 5:e.next=9;break;case 7:return e.next=9,coreCommon.SpkControl.getInstance().muteSpk(!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMicState=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(P.info("setMicState = "+t),r=(0,u.default)({frameHwnd:n},{set_mic_state:t}),P.info("setMicState "+(0,p.default)(r)),w.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setSpkSate=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),(window.CLIENTCONFIG.ISWIN||n>0)&&(P.info("setSpkSate = "+t),r=(0,u.default)({frameHwnd:n},{set_spk_state:t}),P.info("setSpkSate "+(0,p.default)(r)),w.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setConfHandle=function(e){var t=0;if($getState().conf.videoFrameHwnd>0&&(t=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(t=N.getAvcFrameHandles()),t>0){var n=(0,u.default)({frameHwnd:t},{is_in_conf:""===e?0:1},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});P.info("setConfhanlde "+(0,p.default)(n)),w.NativeInterface.setParam(n)}else P.warn("setConfhanlde fail cause of  videoWnd = "+t)},a.setCameraState=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=0,$getState().conf.videoFrameHwnd>0&&(n=$getState().conf.videoFrameHwnd),N.getAvcFrameHandles()>0&&(n=N.getAvcFrameHandles()),n>0&&(P.info("setCameraState = "+t),r=(0,u.default)({frameHwnd:n},{set_camera_state:t}),P.info("setCameraState "+(0,p.default)(r)),w.NativeInterface.setParam(r));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setValueZeroFunc=(0,_.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.info("userClick  mic mute btn"),t=$getState().myInfo.bind_no,n=$getState().conf,r=n.confHandle,a=n.isConfMicMute,o=n.selfNum,i=$getState().call,s=i.micValue,c=i.isMuteMic,""===r){e.next=24;break}if(!(a>1)){e.next=6;break}return P.info("middle mute state, do nothing..."),e.abrupt("return");case 6:if(P.info("userClick mute btn, change mute state: "+o+" bindNum: "+t),u=isNullOrEmpty(o)?t:o,0!==s){e.next=13;break}P.info("userClick mute btn, value is 0"),a&&(0,I.actionMuteAttendee)(!1,u,!0),e.next=22;break;case 13:if(P.info("userClick mute btn, change mute state: ",a),!c||a){e.next=17;break}return coreCommon.MicControl.getInstance().muteMic(!1),e.abrupt("return");case 17:if(!isNullOrEmpty(o)||c){e.next=20;break}return coreCommon.MicControl.getInstance().muteMic(!0),e.abrupt("return");case 20:c&&coreCommon.MicControl.getInstance().muteMic(!1),(0,I.actionMuteAttendee)(!a,u,!0);case 22:e.next=26;break;case 24:P.info("call mute self mic"),c?coreCommon.MicControl.getInstance().muteMic(!1):coreCommon.MicControl.getInstance().muteMic(!0);case 26:case"end":return e.stop()}},e,void 0)})),a.dialClk=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P.info("dialClk, param = "+(0,p.default)(t)),n=void 0,r=t.num,a=$getState().call.callId,coreCall.actionDialDTMF(a,r),r<10?n=r:"*"===r?n=10:"#"===r?n=11:"+"===r&&(n=0),D.playDialAudio(n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.postponeConf=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.updatePastponeTime(t.timeout)),coreConf.postponeConfSerivce(t.timeout);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.removeVideo=(0,_.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P.info("removeVideo start"),t=$getState().call.callId,t?(coreCall.removeVideo(t),appService.showMainWindow(!0)):P.info("removeVideo callId is null, please check");case 3:case"end":return e.stop()}},e,void 0)})),a.setCameraStu=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.info("setCameraStu, param = "+(0,p.default)(t)),!(t.index>=0)){e.next=7;break}return P.info("userClick to set cam device, index=",t.index),e.next=5,coreSetting.setAndSaveCamDevice(t.index);case 5:coreCommon.CameraControl.getInstance().switchCameraStateAction(!0),T.EncoderAdpt.onNotifyCameraStatus(!0);case 7:if(void 0===t.state){e.next=19;break}if(n=$getState().call,r=n.callStatus,a=n.cameraIsDisabled,P.info("userClick openCamera,callStatus = "+r),!(o=!("VIDEO_OUT"!==r&&!a))){e.next=15;break}return e.abrupt("return");case 15:coreCommon.CameraControl.getInstance().switchCameraStateAction(t.state),T.EncoderAdpt.onNotifyCameraStatus(t.state),i=window.CLIENTCONFIG.ISMOBILE?$getState().call.currentCamera:$getState().setting.camIndex,$getState().call.cameraDevicesList.length>0&&(s=$getState().call.cameraDevicesList[i],coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_CAMERA,params:[s.name,t.state?1:0]}));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.applyOrReleasechairman=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(P.info("applyOrReleasechairman, param = "+(0,p.default)(t)),n=$getState().conf.memberListInfo,r=D.getSelfOfNumber(n),t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.RELEASE){e.next=8;break}return e.next=6,(0,I.actionReleaseChairman)(r);case 6:e.next=28;break;case 8:if(t.applyStu!==constant.TOOLBAR_EVENT_TYPE.CHAIRMAN.REQUEST){e.next=28;break}if(e.prev=9,a=t.pwd+"",(o=$getState().login.deployMode)!==constant.MEETING_NET_TYPE.MEDIAX_MEETING){e.next=16;break}D.reRequestChairman(a,r),e.next=23;break;case 16:if(!coreConf.getIsSmcFirstRequestCharimanRest()){e.next=22;break}return P.info("SMC first "),e.next=20,(0,I.actionRequestChairman)("",r);case 20:e.next=23;break;case 22:D.reRequestChairman(a,r);case 23:e.next=28;break;case 25:e.prev=25,e.t0=e.catch(9),P.error("requestChairmanFuc",e.t0);case 28:case"end":return e.stop()}},e,void 0,[[9,25]])}));return function(t){return e.apply(this,arguments)}}(),a.reRequestChairman=function(){var e=(0,_.default)(l.default.mark(function e(t,n){var r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return P.info("reRequestChairman by [pwd]"),r=$getState().login.deployMode,e.next=4,(0,I.actionRequestChairman)(t,n);case 4:r===constant.MEETING_NET_TYPE.SMC_MEETING&&coreConf.getIsSmcFirstRequestCharimanRest()&&coreConf.setIsSmcFirstRequestCharimanRest(!1);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getSelfOfNumber=function(e){var t=void 0,n=!0,r=!1,a=void 0;try{for(var o,i=(0,s.default)(e);!(n=(o=i.next()).done);n=!0){var c=o.value;if(1===c.is_self){t=c.number;break}}}catch(e){r=!0,a=e}finally{try{!n&&i.return&&i.return()}finally{if(r)throw a}}return t},a.handleReleaseChairmanResNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P.info("handleReleaseChairmanResNotify result = "+t.param),n=t.param.ret,r={state:0,result:n},a=$getState().conf.isBigConf,0===n?(window.CLIENTCONFIG.ISWIN?a?(S.SvcAtdManager.handleCancelWatch(),S.SvcAtdManager.alertBox("NATIVE_RELEASE_CHAIR_ENTER_ACTIVE_CONF",1)):S.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_RELEASED_RIGHTS",1):window.CLIENTCONFIG.ISMOBILE?$getState().conf.isBigConf?window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS_BIGCONF,2,!1,"big-conf-toast"):window.ToastNew(language.SUCCESSFULLY_RELEASED_RIGHTS,2):window.Toast(language.SUCCESSFULLY_RELEASED_RIGHTS,5,!1,"pcToast",""),(0,I.setSmcFirstRequest)()):(P.error("failed to release the chairman ",n),window.CLIENTCONFIG.ISWIN?S.SvcAtdManager.alertBox("NATIVE_FAILED_RELEASE_THE_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?alert(language.FAILED_RELEASE_THE_CHAIR):window.Toast(language.FAILED_RELEASE_THE_CHAIR,5,!1,"pcToast",""));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleRequestChairmanResNotify=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P.info("handleRequestChairmanResNotify result = "+(0,p.default)(t.param)),n=$getState().login.deployMode,r=n===constant.MEETING_NET_TYPE.SMC_MEETING&&t&&t.param&&t.param.ret===constant.REQUEST_CHAIRMAN.NEED_PASSWORD,a=t.param.ret,o=$getState().conf.showRepChairmanError,i=$getState().conf.showqusetchairman,0===a?(i&&$dispatch(coreUi.showqusetchairman()),o&&(P.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())),window.CLIENTCONFIG.ISWIN?S.SvcAtdManager.alertBox("NATIVE_SUCCESSFULLY_APPLIED_CHAIR",1):window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,2):window.Toast(language.NATIVE_SUCCESSFULLY_APPLIED_CHAIR,5,!1,"pcToast","")):r&&coreConf.getIsSmcFirstRequestCharimanRest()?(coreConf.setIsSmcFirstRequestCharimanRest(!1),$dispatch(coreUi.showqusetchairman())):(P.error("failed to request the chairman ",a),window.CLIENTCONFIG.ISWIN?5===a&&S.SvcAtdManager.alertBox("IDS_TEXT_APPLY_CHAIRMAN_FAIL"):window.CLIENTCONFIG.ISMOBILE?window.CLIENTCONFIG.ENABLE_IT_MEETING?(0,I.popupRequestChairmanInputBox)():alert(language.APPLICATION_FAILED):window.Toast(language.APPLICATION_FAILED,5,!1,"pcToast",""),o||(P.info("showRepChairmanErrorbool",o),$dispatch(coreUi.showRepChairmanError())));case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isConfHasCharMain=(0,_.default)(l.default.mark(function e(){var t,n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t=$getState().call.callStatus,n=$getState().conf,r=n.confHandle,a=n.memberListInfo,o=!1,isNullOrEmpty(r)||"VIDEO_CONNECTED"!==t&&"CALL_CONNECTED"!==t||isNullOrEmpty(a)||(o=a.some(function(e){return 1===e.role&&e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF})),e.abrupt("return",o);case 8:e.prev=8,e.t0=e.catch(0),P.error("isConfHasCharMain:",e.t0);case 11:case"end":return e.stop()}},e,void 0,[[0,8]])})),a.initDeviceStates=(0,_.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,f,d;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().call,n=t.isOpenCamera,r=t.cameraNum,a=$getState().conf.isConfMicMute,o=$getState().call,i=o.isMuteMic,s=o.isMuteSpk,c={isMuteSpk:s?1:0,mic_volume:a||i?0:100,camera_on:r>0?n:-1},f=$getState().conf.videoFrameHwnd,d=(0,u.default)({frameHwnd:f},{init_device_state:c}),P.info("initDeviceStates "+(0,p.default)(d)),w.NativeInterface.setParam(d);case 6:case"end":return e.stop()}},e,void 0)})),a.changeCameraStates=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={camera_on:t?1:0},r=$getState().conf.videoFrameHwnd,a=(0,u.default)({frameHwnd:r},{init_device_state:n}),P.info("changeCameraStates "+(0,p.default)(a)),w.NativeInterface.setParam(a);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setChairmanState=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=3;break}return D.rpChairman.stu=-1,e.abrupt("return");case 3:if(n=S.SvcAtdManager.getVideoFramHwnd(),!$getState().conf.isVideoConf){e.next=23;break}r=-1,a=0,o=t.length;case 7:if(!(a<o)){e.next=14;break}if(1!==t[a].is_self){e.next=11;break}return r=t[a].role,e.abrupt("break",14);case 11:a++,e.next=7;break;case 14:if(-1!==r){e.next=17;break}return P.info("reportChairmanState not find self!!!"),e.abrupt("return");case 17:i=function(e){var t={state:e},r=(0,u.default)({frameHwnd:n},{set_chairman_state:t},{isSMCMeeting:$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING});P.info("reportChairmanState "+(0,p.default)(r)),w.NativeInterface.setParam(r)},s=Date.now()-D.rpChairman.time,P.info("amIChairman = "+r),D.rpChairman.stu!==r||s>5e3?(D.rpChairman.stu=r,D.rpChairman.time=Date.now(),clearTimeout(D.rpChairman.timer),P.info("reportChairmanState 111 tic = "+s),i(r)):s<5e3&&(clearTimeout(D.rpChairman.timer),D.rpChairman.timer=setTimeout(function(){D.rpChairman.stu=r,D.rpChairman.time=Date.now(),P.info("reportChairmanState 222"),i(r),clearTimeout(D.rpChairman.timer)},5e3-s)),e.next=24;break;case 23:window.CLIENTCONFIG.ISWIN&&(P.info("reportChairmanState for audio"),w.NativeInterface.setParam({set_chairman_state:{state:$getState().conf.selfRole}}));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setAudioConfTip=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=coreCommon.getMembersNameTitle(t),r=(0,u.default)({audioConfTip:n}),P.debug("setAudioConfTip "+(0,p.default)(r)),w.NativeInterface.setParam(r);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMuteStateInAvc=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISWIN){e.next=14;break}n=-1,r=0,a=t.length;case 3:if(!(r<a)){e.next=10;break}if(1!==t[r].is_self){e.next=7;break}return n=t[r].is_mute?0:1,e.abrupt("break",10);case 7:r++,e.next=3;break;case 10:if(-1!==n){e.next=12;break}return e.abrupt("return");case 12:P.info("amIMute = "+n),D.selfMuteState!=n&&(D.selfMuteState=n,P.info("reportSelfMuteState "+(0,p.default)(n)),D.setMicState(n));case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangup=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:P.info("hangup, param = "+(0,p.default)(t)),e.t0=t.leaveOption,e.next=e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.LEAVECONF?4:e.t0===constant.TOOLBAR_EVENT_TYPE.HANGUP.DISSOLUTIONCONF?4:7;break;case 4:return(0,I.setSmcFirstRequest)(),D.hangupEndCurrentCall(t.leaveOption),e.abrupt("break",8);case 7:return e.abrupt("break",8);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangupEndCurrentCall=function(){var e=(0,_.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.sipLoginOnly&&(P.info("hangupEndCurrentCall siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())),n=$getState(),r=n.conf,a=r.confHandle,o=r.selfRole,i=n.call.callId,D.clearParam(),coreConf.isInConf()){e.next=9;break}return P.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=18;break;case 9:if(!o||1!==t){e.next=15;break}return P.info("ConfrimNotify end conf, confHandle=",a),e.next=13,(0,I.actionEndConf)();case 13:e.next=18;break;case 15:return P.info("ConfrimNotify leave conf, confHandle=",a),e.next=18,(0,I.actionLeaveConf)();case 18:S.SvcAtdManager.destroyNativeWin();case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.hangupExitBtnClk=(0,_.default)(l.default.mark(function e(){var t,n,r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.call,r=n.callStatus,a=n.callId,o=t.conf,i=o.confHandle,s=o.selfRole,c=o.uportalTokenErr,u=t.login.sipLoginOnly,P.info("userClick HangUpBtn,confhandle = "+i+",selfRole = "+s+",callStatus = "+r+",uportal[Token]Err = "+desensitive(c)+",sipLoginOnly = "+u),!c||u){e.next=6;break}return(0,I.endCallAndLogout)(),e.abrupt("return");case 6:if(1!==s){e.next=10;break}"VIDEO_CONNECTED"!==r&&"CALL_CONNECTED"!==r||(0,I.handleShowEndConf)(!0),e.next=17;break;case 10:if(coreConf.isInConf()){e.next=15;break}return e.next=13,coreCall.callHangup(a);case 13:e.next=17;break;case 15:return e.next=17,window.confirm(language.CHOSE_LEAVE_CONF).then(function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=6;break}return e.next=3,(0,I.actionLeaveConf)();case 3:case 6:return e.abrupt("return");case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 17:case"end":return e.stop()}},e,void 0)})),a.hangupConfirm=function(){var e=(0,_.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o)},195:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.deleteLoginInfo=t.selectAccount=t.inputValueChange=t.valueChange=t.forgetPwd=t.miniApp=t.removeKeyDownListener=t.addKeyDownListener=t.noLoginJoinConference=t.showSettingMenu=t.doLogin=t.checkLoginInfo=t.getSyncLoginModel=t.getLoginModel=t.recoverAppCache=t.storeAppCache=t.getResumeFlag=t.sipResume=t.setOffline=t.resume=t.registerResumeEvent=t.logout=t.login=t.ipLogin=t.initLoginInfo=t.doLogout=t.clearResumeService=t.checkForceSwtichAccount=void 0;var a=n(185),o=r(a),i=n(136),s=r(i),c=n(311),u=r(c),f=n(362),l=r(f),d=n(166),p=r(d);t.checkForceSwtichAccount=o.checkForceSwtichAccount,t.clearResumeService=o.clearResumeService,t.doLogout=o.doLogout,t.initLoginInfo=o.initLoginInfo,t.ipLogin=o.ipLogin,t.login=o.login,t.logout=o.logout,t.registerResumeEvent=o.registerResumeEvent,t.resume=o.resume,t.setOffline=o.setOffline,t.sipResume=o.sipResume,t.getResumeFlag=o.getResumeFlag,t.storeAppCache=o.storeAppCache,t.recoverAppCache=o.recoverAppCache,t.getLoginModel=s.getLoginModel,t.getSyncLoginModel=s.getSyncLoginModel,t.checkLoginInfo=u.checkLoginInfo,t.doLogin=l.doLogin,t.showSettingMenu=l.showSettingMenu,t.noLoginJoinConference=l.noLoginJoinConference,t.addKeyDownListener=l.addKeyDownListener,t.removeKeyDownListener=l.removeKeyDownListener,t.miniApp=l.miniApp,t.forgetPwd=l.forgetPwd,t.valueChange=l.valueChange,t.inputValueChange=l.inputValueChange,t.selectAccount=p.selectAccount,t.deleteLoginInfo=p.deleteLoginInfo},198:function(e,t,n){e.exports=n(0)(133)},199:function(e,t,n){e.exports=n(0)(241)},200:function(e,t,n){e.exports=n(0)(589)},201:function(e,t,n){var r=n(11),a=n(202),o=n(130),i=n(27),s=n(203);e.exports=function(e,t){var n=1==e,c=2==e,u=3==e,f=4==e,l=6==e,d=5==e||l,p=t||s;return function(t,s,h){for(var _,g,m=o(t),v=a(m),C=r(s,h,3),I=i(v.length),w=0,S=n?p(t,I):c?p(t,0):void 0;I>w;w++)if((d||w in v)&&(_=v[w],g=C(_,w,m),e))if(n)S[w]=g;else if(g)switch(e){case 3:return!0;case 5:return _;case 6:return w;case 2:S.push(_)}else if(f)return!1;return l?-1:u||f?f:S}}},202:function(e,t,n){e.exports=n(0)(236)},203:function(e,t,n){var r=n(204);e.exports=function(e,t){return new(r(e))(t)}},204:function(e,t,n){var r=n(15),a=n(205),o=n(6)("species");e.exports=function(e){var t;return a(e)&&(t=e.constructor,"function"!=typeof t||t!==Array&&!a(t.prototype)||(t=void 0),r(t)&&null===(t=t[o])&&(t=void 0)),void 0===t?Array:t}},205:function(e,t,n){e.exports=n(0)(595)},206:function(e,t,n){var r=n(24);e.exports=function(e,t){var n=[];return r(e,!1,n.push,n,t),n}},207:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NativeInterface=void 0;var a,o,i=n(123),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),p=r(d),h=n(226),_=(n(152),n(165)),g=coreLogger.getLogger("conf")("logic/nnativeWnd/NativeInterface"),m=(t.NativeInterface=(o=a=function e(){(0,p.default)(this,e)},a.setLocalWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("setLocalWindow callid = "+t+",wndHandle = "+n+",index = "+o),r=null,r=0===o?[{video_wnd_type:1,render:n,displaytype:1,startimage:""}]:[{video_wnd_type:1,render:n,displaytype:1,index:o,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,r);case 5:return a=e.sent,0!==a.result?g.info("Set local window failed, result = ",a.result):g.info("Set local window success, result = ",a.result),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setBFCPWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(g.info("setBFCPWindow callid="+t+",wndHandle="+n+",isData2Bfcp="+r),r){e.next=10;break}return a=[{video_wnd_type:3,render:n,displaytype:1,startimage:""}],e.next=5,coreCall.setVideoWindow(1,t,a);case 5:return o=e.sent,0!==o.result?g.info("Set bfcp window failed, result = ",o.result):g.info("Set bfcp window success, result = ",o.result),e.abrupt("return",o);case 10:return e.next=12,coreConf.bfcpWinAttach(n);case 12:return i=e.sent,g.info("attach win for data result: ",i),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setRemoteWindow=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g.info("setRemoteWindow callid="+t+",wndHandle="+n),r=[{video_wnd_type:0,render:n,displaytype:1,startimage:""}],e.next=4,coreCall.setVideoWindow(1,t,r);case 4:return a=e.sent,0!==a.result?g.info("setRemoteWindow failed, result = ",a.result):g.info("setRemoteWindow success, result = ",a.result),e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.initNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=!!window.isHubEnv&&window.isHubEnv,g.info("initNativeScreen viewMode = "+t+", version = "+n+", isMaxHub = "+a),o=window.CLIENTCONFIG.NEW_APP_NAME,i=$getState().login.sipLoginOnly,g.info("initNativeScreen sipLoginOnly = "+i),e.next=7,(0,h.initNativeScreen)(t,n,r,a,c,o,i);case 7:if(s=e.sent,0===s.result){e.next=13;break}return g.info("Init native screen failed, result = ",s.result),e.abrupt("return",null);case 13:return g.info("Init native screen success, result = ",s.result),e.abrupt("return",s.param.frameHwnd);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.uninitNativeScreen=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.uninitNativeScreen)(t,r);case 2:return n=e.sent,0!==n.result?g.info("Uninit native screen failed, result = ",n.result):g.info("Uninit native screen success, result = ",n.result),e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.initTimer=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.initTimer)(t,n);case 2:return r=e.sent,0!==r.result?g.info("init timer failed, result = ",r.result):g.info("init timer success, result = ",r.result),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.createWindows=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.createWindows)(t,r,a,o);case 2:if(n=e.sent,g.info("createWindows res = ",n),0===n.result){e.next=9;break}return g.info("Create windows failed, result = ",n.result),e.abrupt("return",null);case 9:return g.info("Create windows success, result = ",n.result),e.abrupt("return",n.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.updateWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.updateWindows)(t,n,r);case 2:if(a=e.sent,g.info("updateWindows, res = ",a),0===a.result){e.next=9;break}return g.info("Update windows failed, result = ",a.result),e.abrupt("return",null);case 9:return g.info("Update windows success, result = ",a.result),e.abrupt("return",a.param.hwndList);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.destoryWindows=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.destoryWindows)(t,n);case 2:if(r=e.sent,g.info("destoryWindows, res = ",r),0===r.result){e.next=9;break}return g.info("Destroy windows failed, result = ",r.result),e.abrupt("return",null);case 9:if(g.info("Destroy windows success, result = ",r.result),!r.param||!r.param.hwndList){e.next=14;break}return e.abrupt("return",r.param.hwndList);case 14:return e.abrupt("return",null);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowHighlight=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setWindowHighlight)(t,n);case 2:return r=e.sent,g.info("setWindowHighlight, res = ",r),0!==r.result?g.info("Set window highlight failed, result = ",r.result):g.info("Set window highlight success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setWindowsName=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setWindowsName)(t,n);case 2:return r=e.sent,g.info("setWindowsName, res = ",r),0!==r.result?g.info("Set windows name failed, result = ",r.result):g.info("Set windows name success, result = ",r.result),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setViewMode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setViewMode)(t,n);case 2:return r=e.sent,g.info("setViewMode, res = ",r),0!==r.result?g.info("Set view mode failed, result = ",r.result):(g.info("Set view mode success, result = ",r.result),a=$getState().conf,o=a.svcPreViewMode,i=a.svcOnLineAttendances,s=o||constant.SVC_VIEW_MODE.BIG_SMALL_MODE,_.SvcAtdManager.setPageNum(s,i.length)),e.abrupt("return",r);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setPageNum=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setPageNum)(t,n,r);case 2:return a=e.sent,g.info("setPageNum, res = ",a),0!==a.result?g.info("set page num failed, result = ",a.result):g.info("set page num success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.getFrameHwnd=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf.videoFrameHwnd,n={},n.param={},n.param.frameHwnd=t,e.abrupt("return",n);case 5:case"end":return e.stop()}},e,void 0)})),a.getBfcpFrameHwnd=function(){var e=$getState().conf.bfcpFrameHwnd,t={};return t.param={},t.param.frameHwnd=e,t},a.setHightlightShareWnd=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setHightlightShareWnd)(t,n);case 2:if(r=e.sent,g.info("setHightlightShareWnd, res = ",r),0===r.result){e.next=9;break}return g.info("Set hightlight shareWnd failed, result = ",r.result),e.abrupt("return",null);case 9:return g.info("Set hightlight shareWnd success, result = ",r.result),e.abrupt("return",r.param.hwnd);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.getWindowIcon=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getWinIcon)(t);case 2:return n=e.sent,g.info("get Window Icon, res = ",n),0!==n.result?g.info("get Window Icon failed"):g.info("get Window Icon success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getTransparentWindow=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getTransparentWindow)(t);case 2:return n=e.sent,g.info("getTransparentWindow, res = ",n),0!==n.result?g.info("Get Transparent Window hwnd failed, result = ",n.result):g.info("Get Transparent Window hwnd success, result = ",n.result),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getDataConfFrameWnd=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.getDataConfFrameWnd)();case 2:return t=e.sent,g.info("getDataConfFrameWnd, res = ",t),0!==t.result?g.info("Get dataconfframe hwnd failed, result = ",t.result):g.info("Get dataconfframe hwnd success, result = ",t.result),e.abrupt("return",t);case 6:case"end":return e.stop()}},e,void 0)})),a.setAvailableLayout=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setAvailableLayout)(t,n,r);case 2:return a=e.sent,g.info("setAvailableLayout, res = ",a),0!==a.result?g.info("set available layout failed, result = ",a.result):g.info("set available layout success, result = ",a.result),e.abrupt("return",a);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),a.setBigconfDataInitRect=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setBigconfDataInitRect)(t,n);case 2:r=e.sent,g.info("setBigconfDataInitRect, res = ",r),0!==r.result?g.info("setBigconfDataInitRect failed, result = ",r.result):g.info("setBigconfDataInitRect success, result = ",r.result);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setParam=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,r=(0,s.default)({},t),r=(0,s.default)(r,{frameHwnd:n,isHaveSharePriviledge:m(),isSvcConf:$getState().conf.isSvcConf}),e.next=5,(0,h.setParam)(r);case 5:a=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportQos=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.reportQos)(a);case 4:o=e.sent,g.info("reportQos, res = ",o),0!==o.result?g.info("report qos failed, result = ",o.result):g.info("report qos success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.reportUserInfo=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.reportUserInfo)(a);case 4:o=e.sent,g.info("reportUserInfo, res = ",o),0!==o.result?g.info("reportUserInfo failed, result = ",o.result):g.info("reportUserInfo success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.showMessageBox=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={frameHwnd:t},a=(0,s.default)({},r,n),e.next=4,(0,h.showMessageBox)(a);case 4:o=e.sent,g.info("showMessageBox, res = ",o),0!==o.result?g.info("showMessageBox failed, result = ",o.result):g.info("showMessageBox success, result = ",o.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.destroyNativeWin=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.destroyNativeWin)();case 2:t=e.sent,g.info("destroyNativeWin, res = ",t),0!==t.result?g.info("destroyNativeWin failed, result = ",t.result):g.info("destroyNativeWin success, result = ",t.result);case 5:case"end":return e.stop()}},e,void 0)})),a.notifyGetWinSystemFonts=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.notifyGetWinSystemFonts)();case 2:if(t=e.sent,0===t.result){e.next=7;break}g.info("notifyGetWinSystemFonts failed, result = ",t.result),e.next=9;break;case 7:return g.info("notifyGetWinSystemFonts success, total = ",t.param.fontlist.length),e.abrupt("return",t.param.fontlist);case 9:case"end":return e.stop()}},e,void 0)})),a.notifyGetSystemInfo=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.notifyGetSystemInfo)();case 2:if(t=e.sent,g.info("notifyGetSystemInfo, res = ",t),0===t.result){e.next=8;break}g.info("notifyGetSystemInfo failed, result = ",t.result),e.next=9;break;case 8:return e.abrupt("return",t.param);case 9:case"end":return e.stop()}},e,void 0)})),a.setCustomMenu=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,h.setCustomMenu)(t);case 2:if(n=e.sent,g.info("setCustomMenu, res = ",n),0===n.result){e.next=8;break}g.info("setCustomMenu failed, result = ",n.result),e.next=9;break;case 8:return e.abrupt("return",n.param);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o),function(){var e=$getState().conf.hasConFRight,t=$getState().conf.confHandle,n=!0;return""===t&&!1===e&&(n=!1),g.info("initNativeScreen isHaveSharePriviledge = "+n),n})},208:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleCPURate=t.getAvcBfcpHwnd=t.getRemoteVideoHwnd=t.getLocalVideoHwnd=t.getAvcFrameHandles=t.setAvcNullForSvc=t.isAvcNativeExsit=t.setViewMode=t.switchAudioToMain=t.switchVideoToMain=t.switchVideoToMin=t.handleSwitchToVideo=t.setConfServerId=t.setSubject=t.closeCallInterface=t.nativeNotifyUpdateBfcpFrameWnd=t.closeBfcpFrame=t.initBfcpWindow=t.initRemotWindow=t.updateLocalwindowCallId=t.updateCameraList=t.initCallInterface=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(698),u=r(c),f=coreLogger.getLogger("conf")("logic/video/AVCNativeService"),l=null;t.initCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.initCallInterface(t,n,r);case 4:a=e.sent,0===a?f.info("initCallInterface int avc win suc"):(f.error("initCallInterface int avc win fail"),l=null),e.next=9;break;case 8:f.warn("initCallInterface avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.updateCameraList=function(){var e=(0,s.default)(o.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateCameraList avc win no exist"),e.abrupt("return");case 5:l.updateCameraList(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateLocalwindowCallId=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("updateLocalwindowCallId avc win no exist"),e.abrupt("return");case 5:l.updateLocalwindowCallId(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initRemotWindow=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("initRemotWindow avc win no exist"),e.abrupt("return");case 5:l.initRemotWindow(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.initBfcpWindow=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null===l&&(f.warn("initBfcpWindow avc win no exist"),l=new u.default),l.initBfcpWindow(t,n,r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.closeBfcpFrame=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.closeBfcpFrame();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.nativeNotifyUpdateBfcpFrameWnd=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeBfcpFrame avc win no exist"),e.abrupt("return");case 5:l.nativeNotifyUpdateBfcpFrameWnd(t);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closeCallInterface=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("closeCallInterface avc win no exist"),e.abrupt("return");case 5:return l.closeBfcpFrame(),e.next=8,l.closeCallInterface();case 8:t=e.sent,0===t?(f.info("closeCallInterface avc win suc"),l=null):f.error("closeCallInterface avc win fail");case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setSubject=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setSubject(e)},t.setConfServerId=function(e){if(null===l)return void f.warn("setSubject avc win no exist");l.setConfServerId(e)},t.handleSwitchToVideo=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=8;break}return l=new u.default,e.next=4,l.handleSwitchToVideo(t);case 4:n=e.sent,0===n?f.info("handleSwitchToVideo int avc win suc"):(f.error("handleSwitchToVideo int avc win fail"),l=null),e.next=9;break;case 8:f.warn("handleSwitchToVideo avc win is exist");case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.switchVideoToMin=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMin avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMin();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchVideoToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchVideoToMain avc win no exist"),e.abrupt("return");case 5:l.switchVideoToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.switchAudioToMain=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=5;break}return f.warn("switchAudioToMain avc win no exist"),e.abrupt("return");case 5:l.switchAudioToMain();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setViewMode=function(e,t){null===l?f.warn("setViewMode avc win no exist"):l.setViewMode(e,t)},t.isAvcNativeExsit=function(){return!(null===l)},t.setAvcNullForSvc=function(){l=null,f.info("setAvcNullForSvc")},t.getAvcFrameHandles=function(){return null===l?0:l.getAvcFrameHandles()},t.getLocalVideoHwnd=function(){return null===l?0:l.getLocalVideoHwnd()},t.getRemoteVideoHwnd=function(){return null===l?0:l.getRemoteVideoHwnd()},t.getAvcBfcpHwnd=function(){return null===l?0:l.getAvcBfcpHwnd()},t.handleCPURate=function(e){return null===l?0:l.handleCPURate(e)}},210:function(e,t){var n={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==n.call(e)}},211:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}Object.defineProperty(t,"__esModule",{value:!0}),t.unRegisterPush=t.registerPush=t.showUpdateHintsOrBar=t.reStartUpgrade=t.downloadUpgradeFile=t.queryVersionInfo=t.checkUpgrade=t.resumeUportalService=t.getOAuthTicket=t.actionGetCorpResourceAtomic=t.actionGetUploadInfo=t.uportalLogout=t.clearLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.queryMediaXaddrFromServer=t.setLoginProxy=t.resetLoginInfo=t.refreshTokenCallback=t.changeLoginPassword=t.actionRefreshToken=t.startLoginDownLoadCaCert=t.startPortDetect=t.startFireWallDetect=t.fireWallDetect=t.updateStgAuthInfo=t.updateStgInfo=t.updateFireWallAndSipInfo=t.stgTunnelDisconnected=t.destroyStgTunnel=t.buildStgTunnel=t.checkIsFirstLogin=t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.setFistLoginInfo=void 0;var a=n(235),o=r(a),i=n(309),s=r(i),c=n(291),u=r(c),f=n(407),l=r(f),d=n(308),p=r(d),h=n(292),_=r(h),g=n(260),m=r(g),v=n(228);t.setFistLoginInfo=s.setFistLoginInfo,t.firstLoginChangePassword=s.firstLoginChangePassword,t.firstTimeLoginChangePassword=s.firstTimeLoginChangePassword,t.checkIsFirstLogin=s.checkIsFirstLogin,t.buildStgTunnel=o.buildStgTunnel,t.destroyStgTunnel=o.destroyStgTunnel,t.stgTunnelDisconnected=o.stgTunnelDisconnected,t.updateFireWallAndSipInfo=o.updateFireWallAndSipInfo,t.updateStgInfo=o.updateStgInfo,t.updateStgAuthInfo=o.updateStgAuthInfo,t.fireWallDetect=o.fireWallDetect,t.startFireWallDetect=o.startFireWallDetect,t.startPortDetect=o.startPortDetect,t.startLoginDownLoadCaCert=l.startLoginDownLoadCaCert,t.actionRefreshToken=u.actionRefreshToken,t.changeLoginPassword=u.changeLoginPassword,t.refreshTokenCallback=u.refreshTokenCallback,t.resetLoginInfo=u.resetLoginInfo,t.setLoginProxy=(0,v.getUportalApi)().setLoginProxy,t.queryMediaXaddrFromServer=u.queryMediaXaddrFromServer,t.recordPrivacy=u.recordPrivacy,t.queryUserAccount=u.queryUserAccount,t.requestVerificationCode=u.requestVerificationCode,t.getCaptcha=u.getCaptcha,t.sendCaptchaResult=u.sendCaptchaResult,t.getVerifyCode=u.getVerifyCode,t.verifyVerificationCode=u.verifyVerificationCode,t.frogetPassword=u.frogetPassword,t.clearLocalDNSIp=u.clearLocalDNSIp,t.uportalLogout=u.uportalLogout,t.actionGetUploadInfo=u.actionGetUploadInfo,t.actionGetCorpResourceAtomic=u.actionGetCorpResourceAtomic,t.getOAuthTicket=p.getOAuthTicket,t.resumeUportalService=u.resumeUportalService,t.checkUpgrade=_.checkUpgrade,t.queryVersionInfo=_.queryVersionInfo,t.downloadUpgradeFile=_.downloadUpgradeFile,t.reStartUpgrade=_.reStartUpgrade,t.showUpdateHintsOrBar=_.showUpdateHintsOrBar,t.registerPush=m.registerPush,t.unRegisterPush=m.unRegisterPush},213:function(e,t,n){n(31),n(22),n(23),n(214),n(215),n(216),n(217),e.exports=n(8).Map},214:function(e,t,n){"use strict";var r=n(180),a=n(149);e.exports=n(181)("Map",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{get:function(e){var t=r.getEntry(a(this,"Map"),e);return t&&t.v},set:function(e,t){return r.def(a(this,"Map"),0===e?0:e,t)}},r,!0)},215:function(e,t,n){var r=n(10);r(r.P+r.R,"Map",{toJSON:n(182)("Map")})},216:function(e,t,n){n(183)("Map")},217:function(e,t,n){n(184)("Map")},220:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNickName=t.resumeAllSipService=t.checkDetectFireWall=t.detectFireWall=t.configSipIp=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.stgBuildforNoName=t.handletempsipconfinfo=t.registerLoginEvent=void 0;var r=n(229),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.registerLoginEvent=a.registerLoginEvent,t.handletempsipconfinfo=a.handletempsipconfinfo,t.stgBuildforNoName=a.stgBuildforNoName,t.clearnsipinfo=a.clearnsipinfo,t.sipserverDeregister=a.sipserverDeregister,t.unEnableBFCP=a.unEnableBFCP,t.reLoginSipserver=a.reLoginSipserver,t.stopLocalServer=a.stopLocalServer,t.ipCallConfig=a.ipCallConfig,t.dealPcLogin=a.dealPcLogin,t.dealPcLogout=a.dealPcLogout,t.startSipRefresh=a.startSipRefresh,t.stopSipRefresh=a.stopSipRefresh,t.configSipIp=a.configSipIp,t.detectFireWall=a.detectFireWall,t.checkDetectFireWall=a.checkDetectFireWall,t.resumeAllSipService=a.resumeAllSipService,t.getNickName=a.getNickName},221:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){N.info(e),window.console.warn(e)}function o(){window.updateLocalIp().then(function(e){(0,w.getLoginModel)().sipLoginOnly?(a("[ pcSuspend online -> sipLoginOnly sipResume ]"),H()):(a("[ online -> resume ] resume ip: "),A({message:"PCOnline"}))})}function i(){a("[ pc offline ]"),v(constant.APP_STATE.NETWORK_ERROR),a("[ offline ->  waiting online ]"),s().then(o)}function s(){var e=PromiseObject(),t=function t(n){a("[ online -> then ]"),window.removeEventListener("online",t),e.resolve(n)};return window.addEventListener("online",t),e}Object.defineProperty(t,"__esModule",{value:!0}),t.setAppResumeState=t.registerSipResultCallback=t.doSipResumeAndEserverDetect=t.clearResumeService=t.registerResumeEvent=t.sipResume=t.resetSipResumeFlag=t.meetinghwSipEnableToLogout=t.cleraQosMediaInfo=t.stopResume=t.resume=t.getResumeEnable=t.getResumeFlag=void 0;var c=n(3),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,o,i,s,c,u,f;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().call.callStatus,e.next=3,(0,w.getLoginModel)();case 3:r=e.sent,e.t0=t.netType,e.next=e.t0===constant.NETWORK_TYPE.TYPE_NONE?7:e.t0===constant.NETWORK_TYPE.TYPE_WIFI?11:e.t0===constant.NETWORK_TYPE.TYPE_2G?11:e.t0===constant.NETWORK_TYPE.TYPE_3G?11:e.t0===constant.NETWORK_TYPE.TYPE_4G?11:35;break;case 7:return a("[ mobileNetworkChange -> offline ]"),v(constant.APP_STATE.NETWORK_ERROR),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(N.info(" xhx_se change local qos level setMicValue Zero"),$dispatch(coreUi.changeCallLocalQoslevel(0)),y()),e.abrupt("break",36);case 11:if(a("[ mobileNetworkChange -> online ]"),!t.newIp||"0.0.0.0"===t.newIp||Y===t.newIp){e.next=19;break}v(constant.APP_STATE.RECONNECTING),o=r.sipLoginOnly,o?(a("[ mobileNetworkChange -> sipLoginOnly sipResume ]",t),H()):(a("[ mobileNetworkChange -> sipLoginOnly resume ]",t),A({message:"mobileNetworkChange"})),Y=t.newIp,e.next=34;break;case 19:if(!t.newIp||"0.0.0.0"===t.newIp){e.next=31;break}return e.next=22,q(t);case 22:Y=t.newIp,i=r.isSipRegSuc(),s=$getState().conf.confHandle,c=void 0===s||""===s,u=$getState().call.callStatus,f=!("VIDEO_CONNECTED"===u||"VIDEO_OUT"===u||"CALL_OUT"===u||"CALL_CONNECTED"===u),i&&f&&c&&(0,S.reConfigVideoAndDataSetting)(),e.next=34;break;case 31:return a("[ mobileNetworkChange -> offline ]",t),v(constant.APP_STATE.NETWORK_ERROR),e.abrupt("break",36);case 34:case 35:return e.abrupt("break",36);case 36:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),_=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return e.next=4,(0,w.getLoginModel)();case 4:t=e.sent,a("[ pcSuspend ]"),navigator.onLine?(v(constant.APP_STATE.RECONNECTING),n=t.sipLoginOnly,n?(a("[ pcSuspend online -> sipLoginOnly sipResume ]"),H()):(a("[ pcSuspend online ->  resume ]  resume ip: ",window.localIp),A({message:"pcSuspend"}))):(v(constant.APP_STATE.NETWORK_ERROR),a("[ pcSuspend offline ->  waiting onLine ]"),window.CLIENTCONFIG.USE_IM&&s().then(o));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&x?(a("[ sipRegisterNotify ] registering"),n.useIM||v(constant.APP_STATE.RECONNECTING)):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER||t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0!==t.reasonCode?(a("[ sipRegisterNotify ] unregister"),coreConf.isInReCall()||(a("[ sipRegisterNotify ] => sipresume in sipRegisterNotify",t.reasonCode),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&0===t.reasonCode||H(!1))):t.registerState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED&&0===t.reasonCode&&(a("[ sipRegisterNotify ] registered"),n.useIM||v(constant.APP_STATE.ONLINE));case 4:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:t=e.sent,t.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,(0,C.stopLocalServer)(),H();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=t.setAppResumeState=function(){var e=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,t===constant.APP_STATE.ONLINE?(N.info("setAppResumeState, set isOffline false"),window.isOffline=!1,window.dispatchEvent(new Event("CloudLinkonline")),n.setAppState(t),a("[ setAppResumeState ] Enable all service")):(N.info("setAppResumeState, set isOffline true"),window.isOffline=!0,window.dispatchEvent(new Event("CloudLinkoffline")),n.setAppState(t),a("[ setAppResumeState ] Disable all service"),window.CLIENTCONFIG.USE_IM&&(a("publish [ offline ] status"),coreIm.setEServerOffline()),n.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER),t!==constant.APP_STATE.NETWORK_ERROR||window.CLIENTCONFIG.USE_IM?!window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(language.THE_NETWORK_IS_ABNORMAL,!1):!window.CLIENTCONFIG.ISMOBILE&&window.ToastNew(language.THE_NETWORK_IS_ABNORMAL,!0);case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),C=n(220),I=n(241),w=n(136),S=n(230),E=n(235),N=coreLogger.getLogger("logic")("resume"),T=(t.getResumeFlag=function(){return b},t.getResumeEnable=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",T);case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),!1),b=!1,O=void 0,L=void 0,A=t.resume=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,o,i,s,c,u,f,d,p=t.reloadTup,h=void 0!==p&&p,_=t.message;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return N.info("<account_resume><1_Start> message:"+_+", reloadTup:"+h),e.next=3,(0,w.getLoginModel)();case 3:if(n=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=7;break}e.next=10;break;case 7:if(T){e.next=10;break}return N.info("<account_resume><5_Stop> isResumeEnable=false"),e.abrupt("return");case 10:if(window.dispatchEvent(new Event("CloudLinkresume")),!(r=n.loginDisable)){e.next=21;break}return N.info("<account_resume><0_Info> wating for last resumePromise=false"),e.next=16,L;case 16:if(!((o=e.sent)&&o.result||!1===window.isOffline)){e.next=21;break}return v(constant.APP_STATE.ONLINE),N.info("<account_resume><5_Stop> resumeFlag=false"),e.abrupt("return",b=!1);case 21:O&&O.end&&O.end(),b=!0,v(constant.APP_STATE.RECONNECTING),i=function(e){return N.info("<account_resume><2_DoResume> retrytime:"+e),L=(0,I.login)(!0)},s=3e4,c=10,u=function(e){return e&&e.result||!1===window.isOffline},f=function(){N.info("<account_resume><3_Success>"),v(constant.APP_STATE.ONLINE),b=!1},d=function(){N.error("resume failed, try again..."),N.info("<account_resume><4_Fail> resumeTimesout"),v(constant.APP_STATE.RECONNECT_FAILED),setTimeout(A,1e4),b=!1};try{O=makeSure(i,u,s,c,f,d),O()}catch(e){a("resume exception : "+e.toString()),b=!1}case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=(t.stopResume=function(){var e=(0,p.default)(l.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("<account_resume><6_StopResume> reason:"+t),O&&O.end instanceof Function&&O.end();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.cleraQosMediaInfo=function(){var e={audio:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},video:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}},bfcp:{send:{encodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"},recv:{decodeProtocol:"--",bitRate:"--",frameSize:"--",frameRate:"--",lost:"--",delay:"--",jitter:"--",srtp:"--"}}};$dispatch(coreUi.changeCallMediaInfo(e))}),x=!1,R=0,M=10,k=1e3,P=1e4,D=!1,U=!1,F=!1,G=null,B=null,W=0;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(M=15,P=2e3,k=0);var V=t.meetinghwSipEnableToLogout=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:N.info("[IT-Meeting] meetinghwSipEnableToLogout"),window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),$getState().conf.confSubject?coreConf.actionLeaveConf():(window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),H=(t.resetSipResumeFlag=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:x=!1;case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.sipResume=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(R=0,x=!1,window.CLIENTCONFIG.USE_IM||v(constant.APP_STATE.ONLINE),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return e.next=6,coreConf.confctrlInit();case 6:a("[ sipResume success ]"),i.resolve();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n=function(){return T?(U=!1,R>=M?D?(R=0,a("[ retrytime reset due to max times tried ]"),a("[ sipResume stoped, max times tried ]"),x=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!coreConf.isInReCall()&&(window.itWeLinkNotifyCallEnded(0,language.EADDR_FAIL_CONNECT),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)),(0,w.getLoginModel)().then(function(e){e.useIM||v(constant.APP_STATE.RECONNECT_FAILED)}),void i.reject("max times tried")):(R=0,a("[ retrytime reset due to disaster tolerance ]"),k=1e3,D=!0,x=!1,void(0,I.login)(!0)):(a("[ sipResume failed, will retry again... ]"),void o())):(a("[ resume failed, but resume is unEnable, break resume ]"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&V()))},r=function(e){return F=!0,new u.default(function(t,n){(0,w.getLoginModel)().then(function(r){var o=e/500,i=0;a("check sip state:"+r.sipRegisterState+", check count: "+o),B=setInterval(function(){i++,i>o?(i=0,clearInterval(B),F=!1,a("check sip state end:"+r.sipRegisterState),n()):(a("check sip state:"+r.sipRegisterState),r.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED?(i=0,clearInterval(B),F=!1,t()):r.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING&&(i=0))},500)})})},o=function(){var e=(0,p.default)(l.default.mark(function e(){var i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:if(i=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=19;break}if(T){e.next=6;break}return e.abrupt("return");case 6:if(window.localIp&&"0.0.0.0"!==window.localIp){e.next=14;break}return a("[ sipResume stoped, is none network ]"),W=0,window.meetingWHGetLocalIp(),setTimeout(function(){o()},500),e.abrupt("return");case 14:if(!window.localIp||"0.0.0.0"===window.localIp){e.next=19;break}if(1===W){e.next=19;break}return a("[ after one second to doSipResume ]"),setTimeout(function(){W=1,o()},1e3),e.abrupt("return");case 19:return e.next=21,window.updateLocalIp(!0);case 21:if(!window.localIp||"0.0.0.0"!==window.localIp){e.next=26;break}return a("[ sipResume stoped, is none network ]"),v(constant.APP_STATE.NETWORK_ERROR),x=!1,e.abrupt("return");case 26:if(i.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED){e.next=34;break}return R=0,a("[ retrytime reset due to already registered ]"),a("[ sipResume stoped, already registered ]"),x=!1,e.abrupt("return");case 34:if(i.sipRegisterState!==constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING){e.next=40;break}return R=0,a("[ retrytime reset due to registering ]"),a("[ sipResume stoped, registering ]"),x=!1,e.abrupt("return");case 40:if(!window.resumeFromShut||!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isOffline){e.next=45;break}return v(constant.APP_STATE.ONLINE),window.resumeFromShut=!1,x=!1,e.abrupt("return");case 45:if(!/^login/.test(window.getRoute())){e.next=51;break}return R=0,a("[ retrytime reset due to in the login page ]"),a("[ sipResume stoped, user logout ]"),x=!1,e.abrupt("return");case 51:x=!0,a("[ doSipResume ]"),R++,a("sipResume retrytime "+R),(0,E.checkStgReConnect)().then(C.reLoginSipserver).then(function(e){return e.result?r(P).then(t):u.default.reject(e)}).catch(function(e){N.error("sipResume Error",e),a("sipResume retrytime "+R),U=!0,G=setTimeout(n,Math.abs(R*k))});case 56:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();if(a("[ sipResume ]"),!T)return a("[ sipResume current is logout or kickout, no resume ]"),void(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&V());if(e?(R=0,a("[ retrytime reset due to forceInitRetryTime ]"),(0,w.getLoginModel)().then(function(e){e.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER})):a("[ exec due to SipRegResultNotify => TUP send (data.notify=98305) message ]"),x){if(a("[ currentInErrorSetTimeoutFlag ] "+U),a("[ currentInSipResultCheck ] "+F),!U)return a("[ sipResume is excuting, no need to do again ]");U=!1,clearTimeout(G)}var i=PromiseObject();return a("[ sipResume start ]"),x=!0,window.CLIENTCONFIG.USE_IM||v(constant.APP_STATE.RECONNECTING),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(W=0,window.meetingWHGetLocalIp(),setTimeout(function(){N.info("[IT-Meeting] meetinghw to do sipserverDeregister"),(0,C.sipserverDeregister)(),N.info("[IT-Meeting] meetinghw to do doSipResume"),o()},1e3)):o(),(0,w.getLoginModel)().then(function(e){if(!e.useIM)return i})});window.sipResume=H;var $=(t.registerResumeEvent=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,$();case 2:T=!0,a("[ RegisterResumeEvent ]"),window.CLIENTCONFIG.ISMOBILE?window.addEventListener("networkchange",h):(window.electron.ipcRenderer.addListener("suspend",_),window.addEventListener("offline",i)),window.addEventListener("stgTunnelDisconnected",m);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearResumeService=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a("[ ClearResumeService ]"),b=!1,T=!1,window.CLIENTCONFIG.ISMOBILE?window.removeEventListener("networkchange",h):(window.electron.ipcRenderer.removeListener("suspend",_),window.removeEventListener("offline",i)),window.removeEventListener("stgTunnelDisconnected",m);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),Y=null,q=t.doSipResumeAndEserverDetect=function(){var e=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,w.getLoginModel)();case 2:n=e.sent,a("[ doSipResumeAndEserverDetect -> sipResume ]",t),window.CLIENTCONFIG.ISMOBILE&&n.isMultiDeviceLogined||H(),n.useIM&&T&&(a("[ doSipResumeAndEserverDetect -> eServerDetect ]",t),coreIm.checkEServerIsOnline());case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.registerSipResultCallback=function(){window.removeEventListener("sipRegResultEvent",g),window.addEventListener("sipRegResultEvent",g)};window.handleResumeLogin=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=window.getRoute(),"main/conference"===t&&(window.noactivity=!1,window.showPageLoading(!1),"function"==typeof window.resumeGetConfInterval&&window.resumeGetConfInterval()),""===t&&window.goRoute("main/conference");case 3:case"end":return e.stop()}},e,void 0)})),window.resume=A},224:function(e,t,n){"use strict";function r(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var n=e.indexOf("=");return-1===n&&(n=t),[n,n===t?0:4-n%4]}function a(e){var t=r(e),n=t[0],a=t[1];return 3*(n+a)/4-a}function o(e,t,n){return 3*(t+n)/4-n}function i(e){for(var t,n=r(e),a=n[0],i=n[1],s=new d(o(e,a,i)),c=0,u=i>0?a-4:a,f=0;f<u;f+=4)t=l[e.charCodeAt(f)]<<18|l[e.charCodeAt(f+1)]<<12|l[e.charCodeAt(f+2)]<<6|l[e.charCodeAt(f+3)],s[c++]=t>>16&255,s[c++]=t>>8&255,s[c++]=255&t;return 2===i&&(t=l[e.charCodeAt(f)]<<2|l[e.charCodeAt(f+1)]>>4,s[c++]=255&t),1===i&&(t=l[e.charCodeAt(f)]<<10|l[e.charCodeAt(f+1)]<<4|l[e.charCodeAt(f+2)]>>2,s[c++]=t>>8&255,s[c++]=255&t),s}function s(e){return f[e>>18&63]+f[e>>12&63]+f[e>>6&63]+f[63&e]}function c(e,t,n){for(var r,a=[],o=t;o<n;o+=3)r=(e[o]<<16&16711680)+(e[o+1]<<8&65280)+(255&e[o+2]),a.push(s(r));return a.join("")}function u(e){for(var t,n=e.length,r=n%3,a=[],o=0,i=n-r;o<i;o+=16383)a.push(c(e,o,o+16383>i?i:o+16383));return 1===r?(t=e[n-1],a.push(f[t>>2]+f[t<<4&63]+"==")):2===r&&(t=(e[n-2]<<8)+e[n-1],a.push(f[t>>10]+f[t>>4&63]+f[t<<2&63]+"=")),a.join("")}t.byteLength=a,t.toByteArray=i,t.fromByteArray=u;for(var f=[],l=[],d="undefined"!=typeof Uint8Array?Uint8Array:Array,p="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",h=0,_=p.length;h<_;++h)f[h]=p[h],l[p.charCodeAt(h)]=h;l["-".charCodeAt(0)]=62,l["_".charCodeAt(0)]=63},225:function(e,t){t.read=function(e,t,n,r,a){var o,i,s=8*a-r-1,c=(1<<s)-1,u=c>>1,f=-7,l=n?a-1:0,d=n?-1:1,p=e[t+l];for(l+=d,o=p&(1<<-f)-1,p>>=-f,f+=s;f>0;o=256*o+e[t+l],l+=d,f-=8);for(i=o&(1<<-f)-1,o>>=-f,f+=r;f>0;i=256*i+e[t+l],l+=d,f-=8);if(0===o)o=1-u;else{if(o===c)return i?NaN:1/0*(p?-1:1);i+=Math.pow(2,r),o-=u}return(p?-1:1)*i*Math.pow(2,o-r)},t.write=function(e,t,n,r,a,o){var i,s,c,u=8*o-a-1,f=(1<<u)-1,l=f>>1,d=23===a?Math.pow(2,-24)-Math.pow(2,-77):0,p=r?0:o-1,h=r?1:-1,_=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,i=f):(i=Math.floor(Math.log(t)/Math.LN2),t*(c=Math.pow(2,-i))<1&&(i--,c*=2),t+=i+l>=1?d/c:d*Math.pow(2,1-l),t*c>=2&&(i++,c/=2),i+l>=f?(s=0,i=f):i+l>=1?(s=(t*c-1)*Math.pow(2,a),i+=l):(s=t*Math.pow(2,l-1)*Math.pow(2,a),i=0));a>=8;e[n+p]=255&s,p+=h,s/=256,a-=8);for(i=i<<a|s,u+=a;u>0;e[n+p]=255&i,p+=h,i/=256,u-=8);e[n+p-h]|=128*_}},226:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCustomMenu=t.setNativeWndLogPath=t.changeNativeLangCode=t.notifyGetSystemInfo=t.notifyGetWinSystemFonts=t.notifyChangePassiveBidirectionStatus=t.notifyChangeActiveBidirectionStatus=t.notifyChangeAudientStatus=t.destroyNativeWin=t.showMessageBox=t.notifyPutHandup=t.notifyLockConfState=t.notifyLockConfResult=t.reportUserInfo=t.setBigconfDataInitRect=t.setParam=t.getWinIcon=t.notifyNativeLeaveConf=t.getWndRect=t.reportQos=t.reportChairmanStu=t.setAvailableLayout=t.getDataConfFrameWnd=t.getTransparentWindow=t.setHightlightShareWnd=t.getFrameHwnd=t.setPageNum=t.setViewMode=t.setWindowsName=t.setWindowHighlight=t.destoryWindows=t.updateWindows=t.createWindows=t.initTimer=t.uninitNativeScreen=t.initNativeScreen=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(207),l=(r(f),n(152),coreLogger.getLogger("model")("model/nativewndService/index"));t.initNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,o,i,c){var u,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return u=e.sent,e.next=5,u.initNativeScreen(t,n,r,a,o,i,c);case 5:return f=e.sent,e.abrupt("return",f);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),t.uninitNativeScreen=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.uninitNativeScreen(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.initTimer=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("wh_initTimer::",t,"  ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.initTimer(t,n);case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.createWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a){var o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return o=e.sent,e.next=5,o.createWindows(t,n,r,a);case 5:return i=e.sent,e.abrupt("return",i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),t.updateWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.updateWindows(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.destoryWindows=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.destoryWindows(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowHighlight=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setWindowHighlight(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setWindowsName=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setWindowsName(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setViewMode=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setViewMode(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.setPageNum=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.setPageNum(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.getFrameHwnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.getFrameHwnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setHightlightShareWnd=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setHightlightShareWnd(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getTransparentWindow=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getTransparentWindow(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getDataConfFrameWnd=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.getDataConfFrameWnd();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setAvailableLayout=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return a=e.sent,e.next=5,a.setAvailableLayout(t,n,r);case 5:return o=e.sent,e.abrupt("return",o);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.reportChairmanStu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.reportChairmanStu(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reportQos=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.reportQos(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getWndRect=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getWndRect(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyNativeLeaveConf=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyLeaveConf();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getWinIcon=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.getWindowIcon(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setParam=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,o.default)({},t),n=(0,o.default)(n,{isSvcConf:$getState().conf.isSvcConf}),e.next=4,coreTup.getNativeWindowInstance();case 4:return r=e.sent,e.next=7,r.setParam(n);case 7:return a=e.sent,e.abrupt("return",a);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setBigconfDataInitRect=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return r=e.sent,e.next=5,r.setBigconfDataInitRect(t,n);case 5:return a=e.sent,e.abrupt("return",a);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.reportUserInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().conf.memberListInfo,r=t.query_user_info_result.usernum,a=r.map(function(e){var t=-1,r=n.some(function(t){return t.number.replace("+86","")===e.replace("+86","")&&1===t.state}),a=n.some(function(t){return t.number.replace("+86","")===e.replace("+86","")&&5===t.state});return r&&(t=1),a&&(t=5),{number:e,state:t}}),t.query_user_info_result.usernum=a,e.next=6,coreTup.getNativeWindowInstance();case 6:return o=e.sent,e.next=9,o.reportUserInfo(t);case 9:return i=e.sent,e.abrupt("return",i);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfResult=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyLockConfResult(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyLockConfState=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyLockConfState(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyPutHandup=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyPutHandup(t);case 5:r=e.sent;case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.showMessageBox=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.showMessageBox(t);case 5:return r=e.sent,e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.destroyNativeWin=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.destroyNativeWin();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyChangeAudientStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangeAudientStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangeActiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangeActiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyChangePassiveBidirectionStatus=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return n=e.sent,e.next=5,n.notifyChangePassiveBidirectionStatus(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.notifyGetWinSystemFonts=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyGetWinSystemFonts();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.notifyGetSystemInfo=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:return t=e.sent,e.next=5,t.notifyGetSystemInfo();case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.changeNativeLangCode=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("changeNativeLangCode start "),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.changeNativeLangCode(t);case 6:return r=e.sent,l.info("changeNativeLangCode end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setNativeWndLogPath=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setNativeWndLogPath start "),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.setNativeWndLogPath(t);case 6:return r=e.sent,l.info("setNativeWndLogPath end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setCustomMenu=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("setCustomMenu start ",t),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.setCustomMenu(t);case 6:return r=e.sent,l.info("setCustomMenu end"),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},227:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resetConfig=t.DFConfig=void 0;var r,a,o=n(4),i=function(e){return e&&e.__esModule?e:{default:e}}(o),s=n(273),c=coreLogger.getLogger("dataconf")("config"),u=t.DFConfig=(a=r=function e(){(0,i.default)(this,e)},r.platform=s.DFPLATFORM.platform,r.isWin=s.DFPLATFORM.isWin,r.isBigWin=s.DFPLATFORM.isWin,r.isMobile=s.DFPLATFORM.isMobile,r.isPc=s.DFPLATFORM.isPc,r.isMac=s.DFPLATFORM.isMac,r.isWinBase=s.DFPLATFORM.isWinBase,r.moduleName="DataConf",r.isAppShareEnabled=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin,r.pathSeparator=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin?"\\":"/",r.supportBuried=s.DFPLATFORM.isBigWin,r.userSipNumberRequestBigParams=s.DFPLATFORM.isMobile&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||s.DFPLATFORM.isBigWin,r.useSBC=!s.DFPLATFORM.isBigWin,r.decFr=function(){return s.DFPLATFORM.isMobile||2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},r.encFr=function(){return 2===window.cpu_core_num&&2===window.cpu_proc_num?3:30},r.isDocShareEnabled=function(){var e=void 0!==window.enableDocShare?parseInt(window.enableDocShare,10):0;return c.info("openDocShareFlag  enableDocShare : "+window.enableDocShare),!isNullOrEmpty(e)&&1===e},r.whiteBoardShareEnable=s.DFPLATFORM.isWin,r.serverType=function(){return u.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING?1:3},r.shouldSendServerInfoNotify=function(){return window.CLIENTCONFIG.ENABLE_IT_MEETING},r.shouldPasscodeBase64=function(){return u.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING},r.captureType=function(){return s.DFPLATFORM.isMac?4:0===n(704).release().indexOf("10")?3:0},r.sendAnnotationEnable=s.DFPLATFORM.isWin||s.DFPLATFORM.isBigWin,r.supportDataToBfcp=s.DFPLATFORM.isMac,r.deployMode=constant.MEETING_NET_TYPE.MEDIAX_MEETING,r.firewallType=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?s.DATA_FIREWALL_MODE.SBC:s.DATA_FIREWALL_MODE.NULL,r.stgAddresslist="",r.devType=s.DFPLATFORM.isBigWin?11:1,r.dataCodeccVersion=5,a);t.resetConfig=function(){c.info("resetConfig start"),u.dataCodeccVersion=5,u.devType=s.DFPLATFORM.isBigWin?11:1}},228:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getUportalApi=void 0;var a=n(141),o=r(a),i=n(142),s=r(i),c=n(119),u=r(c),f=n(120),l=r(f),d=n(121),p=r(d),h=n(69),_=r(h),g=n(1),m=r(g),v=n(2),C=r(v),I=n(4),w=r(I),S=n(405),E=r(S),N=n(136),T=n(164),b=n(308),O=n(235),L=n(309),A=n(211),y=n(413),x=coreLogger.getLogger("logic")("login/uportal"),R=function e(){var t=this;(0,w.default)(this,e),this.loadLastUportalInfoFromDB=(0,C.default)(m.default.mark(function e(){var n,r;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"LastUportalLoginIP"});case 2:n=e.sent,r=n&&n.value&&JSON.parse(n.value)||{},t.value=r.value||"",t.serverKey=r.serverKey||"";case 6:case"end":return e.stop()}},e,t)})),this.loadLastUportalInfo=function(){var e=(0,C.default)(m.default.mark(function e(n){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.isFirstLoad){e.next=4;break}return t.isFirstLoad=!1,e.next=4,t.loadLastUportalInfoFromDB();case 4:t.serverKey!==n&&(t.value=""),t.serverKey=n;case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.saveLastUportalInfo=function(){var e=(0,C.default)(m.default.mark(function e(n,r){var a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.serverKey!==n||t.value!==r){e.next=2;break}return e.abrupt("return",!0);case 2:return t.serverKey=n,t.value=r,a={serverKey:t.serverKey,value:t.value},e.abrupt("return",coreDb.saveLoginSetting({key:"LastUportalLoginIP",value:(0,_.default)(a)}));case 6:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.value="",this.serverKey="",this.isFirstLoad=!0},M=function e(){var t=this;(0,w.default)(this,e),this.switchProxy=(0,C.default)(m.default.mark(function e(){var n,r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x.info("[ ProxyUtil ] switchProxy"),e.next=3,coreAccount.getLoginModel();case 3:return n=e.sent,r=n.isSupportProxy,a=n.isUseSysProxy,o=n.proxyAddress,i=n.proxyPort,s=n.proxyAccount,e.next=11,coreSecurity.getPasswordManager();case 11:return c=e.sent,e.next=14,c.getPassword("proxyPassword");case 14:if(u=e.sent,t.lastProxyInfo={isSupportProxy:r,isUseSysProxy:a,proxyAddress:o,proxyPort:i,proxyAccount:s,proxyPassword:u},!r){e.next=21;break}return e.next=19,coreAccount.setProxyInfo({isSupportProxy:!1,isUseSysProxy:!1,proxyAddress:"",proxyPort:"",proxyAccount:"",proxyPassword:""});case 19:e.next=27;break;case 21:return e.next=23,window.getSystemProxy();case 23:if(!(f=e.sent)){e.next=27;break}return e.next=27,coreAccount.setProxyInfo({isSupportProxy:!0,isUseSysProxy:!0,proxyAddress:f.sysProxyAddress||"",proxyPort:f.sysProxyPort||"",proxyAccount:"",proxyPassword:""});case 27:case"end":return e.stop()}},e,t)})),this.resetProxy=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x.info("[ ProxyUtil ] resetProxy"),!t.lastProxyInfo){e.next=3;break}return e.abrupt("return",coreAccount.setProxyInfo(t.lastProxyInfo));case 3:t.lastProxyInfo=null;case 4:case"end":return e.stop()}},e,t)})),this.lastProxyInfo=null};window.isRepeateCall=!1;var k=function(t){function n(){var t=this;(0,w.default)(this,n);var r=(0,l.default)(this,(n.__proto__||(0,u.default)(n)).call(this));return r.getUportalLoginInfo=function(){var e=(0,C.default)(m.default.mark(function e(n,r,a,o){var i,s,c,u,f,l,d,p,h,_,g;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:if(i=e.sent,s=i.isOAuth,c=i.account,u=i.user_ticket,f=i.userTicket,l=i.authType,d=i.domain,1!==l){e.next=6;break}return e.abrupt("return",{auth_type:constant.AUTH_TYPE.TICKET,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,short_ticket:f,domain:d,auth_info:{user_name:"",password:""},auth_server:{server_type:0,server_url:a,server_port:parseInt(o),server_version:"V6R6C00",proxy_url:""}});case 6:return p="",n.indexOf("@")<0?(p="mobile",x.info("lgn acc is ",handlePhoneNumber(n))):n.length>4&&x.info("lgn acc is",n.length>4?n.substr(0,3)+"******"+n.substr(-4):"****"),x.info("login user_name_type =",p),h="",_="",i.isOAuth&&(u.length>40?h=u:_=u),g=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:window.isHubEnv?constant.USER_AGENT.MAXHUB:"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,x.info("uportal user_agent=",g),e.abrupt("return",{auth_type:s?constant.AUTH_TYPE.TICKET_WITH_USERNAME:constant.AUTH_TYPE.NORMAL,user_agent:g,user_tiket:h,short_ticket:_,user_name_type:p,src_of_psw:1,auth_info:{user_name:s?c:n,password:r},auth_server:{server_type:0,server_url:a,server_port:parseInt(o),server_version:"V6R6C00",proxy_url:""}});case 14:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.uportalLogin=function(){var e=(0,C.default)(m.default.mark(function e(n){var a,o,i,s,c,u,f,l,d,p,h=n.loginAccount,_=n.password,g=n.serverAddress,v=n.serverPort;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return a=e.sent,a.set({isInUportalLogin:!0,uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_LOGINING}),e.next=6,coreTup.getUportalInstance();case 6:if(o=e.sent,o.setNotifyFunc(360459,r.refreshTokenCallback),i=a.isSupportCACertCheck,s=window.EXEC_PATH,i?window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,1):o.loginSetTlsParams(s,1):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?o.loginSetTlsParamsEx(s,0):o.loginSetTlsParams(s,0),window.CLIENTCONFIG.ISBIGWIN){e.next=14;break}return e.next=14,r.setLoginProxy(o);case 14:return c=void 0,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER]}),e.next=18,r.getUportalLoginInfo(h,_,g,v);case 18:if(u=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=27;break}return e.next=22,o.loginAuthorizeEx(u);case 22:f=e.sent,l=f.param,c=l,e.next=32;break;case 27:return e.next=29,o.loginAuthorize(u);case 29:d=e.sent,p=d.param,c=p;case 32:return(0,L.setFistLoginInfo)(c,h),r.loggerUportalLogin(c),e.abrupt("return",c);case 35:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.loggerUportalLogin=function(){var e=(0,C.default)(m.default.mark(function e(n){var a,o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:a=(0,_.default)(n),o=JSON.parse(a),i=new Array("server_port","server_uri","server_num","auth_mode","corp_id","deploy_mode","display_name","dms_server","eab_server","expire","ItLoginAutoReg","ItPasswordModifyUrl","ItSignedUrl","ItUploadHeadImgUrl","group_server","is_first_login","is_free_user","left_days_of_pwd","media_type","num_of_site","onebox_app_id","onebox_server_addr","onebox_server_type","password_type","privacy_version","redirect_url","register_server","sip_domain","androidpush_uri","conf_type","conf_uri","eab_uri","eserver_uri","eserver_uri_backup","eua_server","http_proxy_uri","httpsproxy_uri","is_mainsite","is_siptls","is_srtp","maa_drproxy_uri","maa_proxy_uri","maa_uri","maa_uri_backup","ms_param_path_uri","ms_param_uri","onebox_address_uri","priority","prophoto_uri","push_gateway","server_name","sip_tls_uri","sip_uri","account","eserver_stg_uri","eserver_stg_uri_backup","maa_stg_uri","maa_stg_uri_backup","sip_stg_uri","stg_uri","svn_uri","tms_server","num_of_server","sbc_domain","site_name","tms_account","terminal_func_type","terminal_scene","user_id","result","user_type"),r.paraseJson(o,i),x.info("uportal login result:",o);case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.paraseJson=function(){var e=(0,C.default)(m.default.mark(function e(n,a){var o,i;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(o in n)i=n[o],"object"===(void 0===i?"undefined":(0,s.default)(i))?r.paraseJson(i,a):-1===a.indexOf(o)&&(n[o]="******");case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),r.updateSiteInfo=function(){var e=(0,C.default)(m.default.mark(function e(n){var r,a,i,s,c,u,f,l,d,p,h,_,g,v,C,I,w,S,E,T,b,O,L,A,R,M,k,P,D,U,F,G,B,W,V,H,$,Y,q,j,K,J,z,X,Q,Z,ee,te,ne,re,ae,oe,ie,se,ce,ue,fe,le,de,pe,he,_e,ge,me,ve,Ce,Ie,we,Se,Ee,Ne,Te,be,Oe,Le,Ae,ye,xe,Re,Me,ke,Pe,De,Ue,Fe,Ge,Be,We,Ve,He,$e,Ye,qe,je,Ke,Je,ze,Xe,Qe,Ze,et,tt,nt,rt,at,ot,it,st,ct,ut,ft,lt,dt,pt,ht,_t,gt,mt,vt,Ct,It,wt;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:for(r=e.sent,a=n.uportal_authorize_result.terminal_func_type,i=!0,s=n.uportal_authorize_result.terminal_scene,c=!!s&&"room"===s,(window.CLIENTCONFIG.ENABLE_IT_MEETING||c)&&(a=5),u="",-1!==a?(r.funcType=a,1===a?(u="soft mode",window.CLIENTCONFIG.USE_MEETING=!1,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="contactGroups",window._currentRoute="/main/contactGroups",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["contactGroups","myInfo"]):5===a?(u="te mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!1,window.CLIENTCONFIG.USE_CALL=!0,window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference",$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","contactGroups","myInfo"]):7===a&&(u="uc mode",window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),f=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==f&&"nav"!==f&&f?coreCommon.switchNav(f):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["recent","conference","contactGroups","myInfo"]),(0,y.setAppConfigList)(),x.info("functype == "+a+" "+u)):(window.CLIENTCONFIG.USE_MEETING=!0,window.CLIENTCONFIG.USE_IM=!0,window.CLIENTCONFIG.USE_CALL=!0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(window.CLIENTCONFIG.DEFAULT_MENU="recent",window._currentRoute="/main/recent"):(window.CLIENTCONFIG.DEFAULT_MENU="conference",window._currentRoute="/main/conference"),l=$getState().menu.currentNav,window.CLIENTCONFIG.DEFAULT_MENU!==l&&"nav"!==l?coreCommon.switchNav(l):$dispatch(coreUi.navSwitch(window.CLIENTCONFIG.DEFAULT_MENU)),window.CLIENTCONFIG.MOBILE_MENU_LIST=["conference","recent","contactGroups","myInfo"],x.info("functype == -1")),d=n.uportal_authorize_result.all_sip_server.server_info,p=d.length<window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT?d.length:window.CLIENTCONFIG.CALL_D_MAX_IP_WHITE_LIST_COUNT,h=new Array,_=0;_<p;_++)g={server_address:d[_].server_uri,server_port:d[_].server_port},h.push(g);if($dispatch(coreUi.updateMenuInfo({menuList:window.CLIENTCONFIG.MOBILE_MENU_LIST})),!(v=n.uportal_authorize_result.site_info)||!v[0]){e.next=132;break}C=v[0],I=C.num_of_server,w=C.access_server,S=C.tms_account,E="",T="",b="",O="",L="",A="",R="",M="",k="",P="",D="",U="",F="",G="",B="",W="",V="",H="",$="",Y="",q=w[0].conf_uri,j=w[0].conf_type,j&&"CMS"===j&&!isNullOrEmpty(q)?(x.info("new conf AS is supported"),r.isSupportAS=!0,$dispatch(coreUi.changeAsAddress(q))):(x.info("new conf AS is not supported"),r.isSupportAS=!1),K=w[0].http_proxy_uri,isNullOrEmpty(K)||(r.ctdServerUri=K,r.confctrlUri=K,x.info("http_proxy_uri:"+K)),J=w[0].onebox_address_uri,z="CloudEC","Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&(z="espace"),X=n.uportal_authorize_result.corp_id||"",J&&coreIm.setOfflineFileConfig(!0,{onebox_app_id:z,onebox_server_addr:J,corp_id:X}),"supportRest"===S&&(i=!1),window.CLIENTCONFIG.ISBIGWIN&&(i=!0),Q=0,Z=0;case 36:if(!(Z<I)){e.next=60;break}if(w&&w[Z]){e.next=39;break}return e.abrupt("continue",57);case 39:E+=w[Z].sip_uri,T+=w[Z].sip_tls_uri,b+=w[Z].svn_uri,k+=w[Z].stg_info.stg_uri,U+=w[Z].stg_info.sip_stg_uri,F+=w[Z].stg_info.eserver_stg_uri,G+=w[Z].stg_info.eserver_stg_uri_backup,B+=w[Z].maa_proxy_uri,W+=w[Z].maa_drproxy_uri,A+=w[Z].eserver_uri,R+=w[Z].eserver_uri_backup,O+=w[Z].httpsproxy_uri,P=w[0].stg_info.account,D=w[0].stg_info.password,H||(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(w[Z].tms_uri&&(H=w[Z].tms_uri),w[Z].tms_server&&(H=w[Z].tms_server)):H=w[Z].tms_server),$||($=w[Z].ms_param_uri),Y||(Y=w[Z].eua_server),Z<I-1&&(E+=";",T+=";",b+=";",k+=";",U+=";",F+=";",G+=";",B+=";",A+=";",R+=";",O+=";");case 57:Z++,e.next=36;break;case 60:if(x.info("sipUri:"+E+" sipTlsUri:"+T),Q=I,F+=";",F+=G,A+=";",A+=R,B+=";",B+=W,window.isSupportiDo=i,x.info("uportal isSupportiDo: "+window.isSupportiDo),ee=n.uportal_authorize_result,te=ee.auth_token,ne=ee.sip_account,re=ee.sip_impi,ae=ee.sip_password,oe=ee.password_type,ie=ee.eab_server,se=ee.group_server,ce=ee.deploy_mode,ue=ee.sip_domain,fe=ee.auth_serinfo,le=ee.is_free_user,de=ee.privacy_version,pe=ee.user_type,he=n.uportal_authorize_result,_e=he.extra_parameters,ge=he.all_extra_parameter,isNullOrEmpty(_e)&&!isNullOrEmpty(ge)){me={};for(ve in ge)me[ge[ve].parameter_name]=ge[ve].parameter_value;_e=me}isNullOrEmpty(_e)||Y||(Y=_e.eua_server),Ce=ce,Ie="",we="",Se="",Ee="",_e&&(_e.ItPasswordModifyUrl&&(Ie=_e.ItPasswordModifyUrl),_e.ItLoginAutoReg&&(we=_e.ItLoginAutoReg),_e.ItSignedUrl&&(Se=_e.ItSignedUrl),_e.ItLoginAutoReg&&(Ee=_e.ItUploadHeadImgUrl)),Ce=0===ce?constant.MEETING_NET_TYPE.USM_MEETING:1===ce?constant.MEETING_NET_TYPE.SMC_MEETING:constant.MEETING_NET_TYPE.MEDIAX_MEETING,x.info("uportal get deploy_mode is "+ce+",envtype is "+Ce),Ne=A.split(";"),Te=O.split(";"),be=B.split(";").filter(function(e){return!!e}),x.info("updateSiteInfo eserverUriList.length: "+Ne.length+", httpsProxyList.length: "+Te.length+", maaProxyUrlList.length: "+be.length),Ne.length>0&&(M=Ne[0]),Te.length>0&&(L=Te[0]),be.length>0&&(V=be[0]),Oe=0,Le=M.split(":"),Ae=(0,o.default)(Le,2),ye=Ae[0],xe=Ae[1],Re=V.split(":"),Me=(0,o.default)(Re,2),ke=Me[0],Pe=Me[1],De=E.split(";"),Ue=De[0]?De[0].split(":"):["",0],Fe=(0,o.default)(Ue,2),Ge=Fe[0],Be=Fe[1],We=De[1]?De[1].split(":"):["",0],Ve=(0,o.default)(We,2),He=Ve[0],$e=Ve[1],Ye=De[2]?De[2].split(":"):["",0],qe=(0,o.default)(Ye,2),je=qe[0],Ke=qe[1],Je=De[3]?De[3].split(":"):["",0],ze=(0,o.default)(Je,2),Xe=ze[0],Qe=ze[1],Ze=T.split(";"),et=Ze[0]?Ze[0].split(":"):["",0],tt=(0,o.default)(et,2),nt=tt[0],rt=tt[1],at=Ze[1]?Ze[1].split(":"):["",0],ot=(0,o.default)(at,2),it=ot[0],st=ot[1],ct=Ze[2]?Ze[2].split(":"):["",0],ut=(0,o.default)(ct,2),ft=ut[0],lt=ut[1],dt=Ze[3]?Ze[3].split(":"):["",0],pt=(0,o.default)(dt,2),ht=pt[0],_t=pt[1],gt="",e.t0=m.default.keys(v[0].access_server);case 104:if((e.t1=e.t0()).done){e.next=112;break}if(mt=e.t1.value,isNullOrEmpty(v[0].access_server[mt].push_gateway)){e.next=110;break}return x.info("push_gateway:",v[0].access_server[mt].push_gateway),gt=v[0].access_server[mt].push_gateway,e.abrupt("break",112);case 110:e.next=104;break;case 112:return vt={authToken:te,sipAccount:ne,sipImpi:re,sipPasswordType:oe,eabUri:ie,groupServer:se,mainSiteSum:Q,currentNum:Oe,eServerAddressAll:A,eServerAddress:ye,eServerPort:parseInt(xe),sipServerAddress:Ge,sipServerPort:parseInt(Be),sipTlsServerAddress:nt,sipTlsPort:parseInt(rt),sipTlsServerBackup1:it,sipTlsPortBackup1:parseInt(st),sipTlsServerBackup2:ft,sipTlsPortBackup2:parseInt(lt),sipTlsServerBackup3:ht,sipTlsPortBackup3:parseInt(_t),sipDomain:ue,sipServerBackup1:He,sipServerPortBackup1:parseInt($e),sipServerBackup2:je,sipServerPortBackup2:parseInt(Ke),sipServerBackup3:Xe,sipServerPortBackup3:parseInt(Qe),sipUri:E,svnUri:b,httpsProxyAll:O,httpsProxy:L,stgUri:k,stgAccount:P,sipStgUri:U,eserverStgUri:F,deployMode:Ce,funcType:a,tmsServer:H,changeItPasswordUrl:Ie,itOAuthUrl:we,itSignedUrl:Se,itUploadHeadImgUrl:Ee,sipWhiteList:h,serverUportalAddress:fe.server_uri,serverUportalPort:fe.server_port,sipLoginissiptls:v[0].access_server[0].is_siptls,sipLoginissrtp:v[0].access_server[0].is_srtp,pushgwUri:gt,smcUri:$,isIwb:c,privacy_version:de,euaServer:Y,maaProxyUrlAll:B,maaProxyAddress:ke,maaProxyPort:Pe,real_user_account:n.uportal_authorize_result.real_user_account},vt.isFreeUser=pe!==constant.REGISTER_USER_TYPE.FREE?0:1,x.info("isFreeUser: "+vt.isFreeUser),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&re.indexOf("@")&&(Ct=re.split("@")[0],window.sendSipNoToProto(Ct)),vt.show_account=r.account,(window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||r.isSupportAS)&&(It=n.uportal_authorize_result.real_user_account,vt.show_account=r.account,vt.account=It),coreUt.utConfigAccountInfo({configAccount:vt.show_account}),e.next=121,coreSecurity.getPasswordManager();case 121:if(wt=e.sent,e.t2=D,!e.t2){e.next=126;break}return e.next=126,wt.setPassword("stgPassword",D);case 126:if(e.t3=ae,!e.t3){e.next=130;break}return e.next=130,wt.setPassword("sipPassword",ae);case 130:return r.set(vt),e.abrupt("return",vt);case 132:return e.abrupt("return",{});case 133:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.uportalAllonline=(0,C.default)(m.default.mark(function e(){var n,a,o,i,s;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.getUportalRes(),a=n.param,e.next=4,(0,N.getLoginModel)();case 4:return o=e.sent,i=o.loginAccount,o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:a.uportal_authorize_result.user_name||i}),e.next=9,r.updateSiteInfo(a);case 9:return s=e.sent,e.abrupt("return",{result:!0,loginInfo:s});case 11:case"end":return e.stop()}},e,t)})),r.setLoginProxy=function(){var e=(0,C.default)(m.default.mark(function e(n){var r,a,o,i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return r=e.sent,a=r.isSupportProxy,o=r.proxyAddress,i=r.proxyPort,s=r.proxyAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return c=e.sent,e.next=12,c.getPassword("proxyPassword");case 12:if(u=e.sent,a||(o="",i="0",s="",u=""),f={server_port:parseInt(i),server_uri:o,user_name:s,password:u},x.info("setLoginProxy proxyAddress: "+o),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}return e.next=19,n.setLoginProxy(f);case 19:e.next=23;break;case 21:return e.next=23,n.setLoginProxyEx(f);case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),r.refreshTokenCallback=function(){var n=(0,C.default)(m.default.mark(function n(r){var a,o,i,s,c,u,f,l;return m.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,N.getLoginModel)();case 2:if(a=t.sent,!((o=r.param)&&0===o.result&&o.refresh_token_result&&o.refresh_token_result.auth_token)){t.next=34;break}if(x.info("refreshTokenSuccess"),$dispatch(coreUi.changeuportalTokenErr(!1)),coreCommon.dispatchModuleEvent("login",{event:"tokenUpdate",code:0,data:o.refresh_token_result.auth_token}),a.set({authToken:o.refresh_token_result.auth_token}),x.info("[check upgrade] for refresh [token]"),coreAccount.checkUpgrade({isFirstIn:!1,token:o.refresh_token_result.auth_token}),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME||window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=17;break}return t.next=14,coreTup.getOfflineFileInstance();case 14:i=t.sent,s=new e(o.refresh_token_result.auth_token,"base64").toString(),i.refreshToken(s);case 17:if(x.info("refreshToken update stg info"),c=o.refresh_token_result.stg_account,u=o.refresh_token_result.stg_pwd,!c||!u){t.next=30;break}return a.set({stgAccount:c}),t.next=24,coreSecurity.getPasswordManager();case 24:if(f=t.sent,t.t0=u,!t.t0){t.next=29;break}return t.next=29,f.setPassword("stgPassword",u);case 29:(0,O.updateStgAuthInfo)({account:c,password:u});case 30:a.isHWUC||coreContact.refreshTocken(),coreCwmp.cwmpConfigToken().then(function(){x.info("refresh cwmp [token] sucess")},function(){x.info("refresh cwmp [token] failed")}),t.next=40;break;case 34:if(x.info("refresh failed "+o.result+" isRepeateCall"+window.isRepeateCall),!window.CLIENTCONFIG.ENABLE_IT_MEETING){t.next=38;break}return x.info("it welink refresh [token] no use here"),t.abrupt("return");case 38:l=9===o.result&&!0||!1,coreConf.UportalTokenErr(l);case 40:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}(),r.switchProxy=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.proxyUtil.switchProxy());case 1:case"end":return e.stop()}},e,t)})),r.resetProxy=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.proxyUtil.resetProxy());case 1:case"end":return e.stop()}},e,t)})),r.loginToUportal=(0,C.default)(m.default.mark(function e(){var n,a,o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.innerLoginToUportal();case 2:if(n=e.sent,!n.result){e.next=5;break}return e.abrupt("return");case 5:if(n.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT){e.next=7;break}return e.abrupt("return",(0,T.LoginError)(n));case 7:return e.next=9,coreAccount.getLoginModel();case 9:if(a=e.sent,!(o=a.isResume)){e.next=13;break}return e.abrupt("return",(0,T.LoginError)(n));case 13:return e.next=15,r.switchProxy();case 15:return e.next=17,r.innerLoginToUportal();case 17:if(n=e.sent,n.result){e.next=22;break}return e.next=21,r.resetProxy();case 21:return e.abrupt("return",(0,T.LoginError)(n));case 22:case"end":return e.stop()}},e,t)})),r.innerLoginToUportal=(0,C.default)(m.default.mark(function e(){var n,a,o,i,s,c,u,f,l,d,p,h,_,g,v,C,I,w,S,E;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return n=e.sent,a=n.account,o=n.displayAccount,i=n.serverUportalAddress,s=n.serverUportalPort,c=n.isResume,u=n.tenantid,f=n.loginRecordList,l=n.sipLoginOnly,d=n.password,x.info("<account_login><3_uportal>begin"),e.next=7,coreSecurity.getPasswordManager();case 7:if(p=e.sent,window.isHubEnv){e.next=12;break}return e.next=11,p.getPassword("password");case 11:d=e.sent;case 12:if("Workplace"!==window.CLIENTCONFIG.NEW_APP_NAME||l){e.next=55;break}h=void 0,_=0;case 15:if(!(_<f.length)){e.next=22;break}if(u!==f[_].tenantid){e.next=19;break}return h=f[_],e.abrupt("break",22);case 19:_++,e.next=15;break;case 22:if(isNullOrEmpty(h)&&window.isHubEnv&&(h={account:a},o=a,d=d),!h){e.next=55;break}return g=h.thirdcertype?h.tenantid:"",x.info("sso login,tenantcn:"+handlePhoneNumber(h.tenantcn)+",thirdcertype:"+h.thirdcertype),e.next=28,coreAccount.ssoLogin({loginName:o,password:d,tenantid:g});case 28:if(v=e.sent,n.crypt_token=v&&v.recv_body.crypt_token,!v.result||!v.recv_body.crypt_token){e.next=41;break}if(n.user_ticket=v.recv_body.crypt_token,o=h.account,isNullOrEmpty(v.recv_body.meetingurl)){e.next=38;break}return e.next=36,coreAccount.getUrlHost(v.recv_body.meetingurl);case 36:i=e.sent,n.serverUportalAddress=i;case 38:n.isOAuth=!0,e.next=55;break;case 41:C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.t0=parseInt(v.code),e.next=1101===e.t0?45:1103===e.t0?47:1146===e.t0?49:51;break;case 45:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",53);case 47:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR,e.abrupt("break",53);case 49:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",53);case 51:return C=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,e.abrupt("break",53);case 53:return x.info("<account_login><3_uportal>end ok/failed"),e.abrupt("return",{result:!1,errorCode:C,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c});case 55:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=60;break}o=window.getLinkSmcUportalAccount?window.getLinkSmcUportalAccount:window.linkSmcW3Acc,d=window.getLinkSmcUportalPassword?window.getLinkSmcUportalPassword:window.linkSmcW3Pas,e.next=63;break;case 60:if(window.CLIENTCONFIG.ISBIGWIN){e.next=63;break}return e.next=63,r.IP.loadLastUportalInfo(i);case 63:I=i,r.IP.value.length>0&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN&&(x.info("[ loginToUportal ] login replace ip"),I=r.IP.value),w=void 0,S=2;case 67:if(!(S>0)){e.next=121;break}return x.info("[ loginToUportal ] login serverAddress:"+I+", serverPort:"+s),e.next=71,r.uportalLogin({loginAccount:o,password:d,serverAddress:I,serverPort:s});case 71:if(E=e.sent,x.info("[ loginToUportal ] result:"+E.result+";reloginCount:"+S),0!==E.result){e.next=80;break}return e.next=76,r.dealWithUportalLoginSuccess(E,I,o);case 76:return w=e.sent,e.abrupt("break",121);case 80:if(E.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_CA_VERIFY_FAILED){e.next=91;break}return e.next=83,r.dealWithUportalLoginFailed(E,o);case 83:return e.next=85,r.dealWithUportalLoginFailedAuth(a,d,I,s);case 85:if(w=e.sent,w.result){e.next=89;break}return x.info("[ loginToUportal ] download ca failed, exit login loop"),e.abrupt("break",121);case 89:e.next=119;break;case 91:if(E.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED){e.next=100;break}return S--,e.next=95,r.dealWithUportalLoginFailed(E,o);case 95:return w=e.sent,x.info("[ loginToUportal ] user or password wrong, exit login loop"),e.abrupt("break",121);case 100:if(E.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_SERVER_REDIRECT){e.next=113;break}return e.next=103,r.dealWithUportalLoginFailedRedirect(E,a,d);case 103:if(w=e.sent,!w.result||!w.serverInfo){e.next=109;break}I=w.serverInfo.address||I,s=w.serverInfo.port||s,e.next=111;break;case 109:return x.info("[ loginToUportal ] 302 failed, exit login loop"),e.abrupt("break",121);case 111:e.next=119;break;case 113:return e.next=115,r.dealWithUportalLoginFailed(E,o);case 115:w=e.sent,I=i,S--,x.info("[ loginToUportal ] reloginCount:"+S);case 119:e.next=67;break;case 121:return x.info("<account_login><3_uportal>end",w.result),e.abrupt("return",w);case 123:case"end":return e.stop()}},e,t)})),r.dealWithUportalLoginSuccess=function(){var e=(0,C.default)(m.default.mark(function e(n,a,o){var i,s,c,u,f,l,d,p,h,_,g;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:if(i=e.sent,s=i.sipLoginOnly,c=i.isOAuth,u=i.isResume,s||c||"Workplace"!==window.CLIENTCONFIG.NEW_APP_NAME||window.isHubEnv){e.next=6;break}return e.abrupt("return",r.dealWithAccountMutex());case 6:return A.actionGetCorpResourceAtomic.reset(),A.actionGetCorpResourceAtomic.wait(),f=n.uportal_authorize_result,l=f.user_name,d=f.onebox_app_id,p=f.onebox_server_addr,h=f.corp_id,p&&(h=h||"",coreIm.setOfflineFileConfig(!0,{onebox_app_id:d,onebox_server_addr:p,corp_id:h})),i.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_SUCCESS,account:l||(c?i.account:o)}),e.next=14,r.updateSiteInfo(n);case 14:if(_=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[1,u?1:0],isTrackTimeCosts:!0}),i.isInUportalLogin=!1,_&&_.serverUportalAddress&&r.IP.value!==_.serverUportalAddress&&(window.CLIENTCONFIG.ISBIGWIN||r.IP.saveLastUportalInfo(a,_.serverUportalAddress),x.info("uportalAddrUpdate")),window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv){e.next=23;break}if(!(0,L.checkIsFirstLogin)()||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=23;break}return i.setLoginStatus(!1,!1),(0,L.firstLoginChangePassword)(),e.abrupt("return",{result:!1,errorCode:"fistLoginReject",errorType:constant.LOGIN_ERROR_TYPE.common,isResume:u});case 23:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=36;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=29;break}return e.next=28,window.isFloatWindow;case 28:e.t0=e.sent;case 29:if(!(g=e.t0)){e.next=34;break}x.info("the window is float "),e.next=36;break;case 34:return x.error("has no activity, login err!!!"),e.abrupt("return",{result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common});case 36:if(!window.isHubEnv||i.isIwb){e.next=39;break}return i.setLoginStatus(!1,!1),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:u});case 39:return e.abrupt("return",{result:!0});case 40:case"end":return e.stop()}},e,t)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.dealWithUportalLoginFailedRedirect=function(){var e=(0,C.default)(m.default.mark(function e(n,a,o){var i,s,c,u,f,l,d,p,h,_;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:if(i=e.sent,s=n.uportal_authorize_result.redirect_url,i.OAuthUrl=s,x.info("[ O[Auth] ] enter the third ticket [auth], url:",desensitive(s)),"Huawei Meeting"!==window.CLIENTCONFIG.NEW_APP_NAME||-1!==s.indexOf("cloudportal")||window.isHubEnv){e.next=8;break}return e.abrupt("return",r.dealWithAccountMutex());case 8:if(i.isOAuth=!0,c=void 0,u=void 0,-1===s.indexOf("cloudportal")){e.next=23;break}if(f=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(l=f.exec(s))){e.next=19;break}d=l[1],p=l[2],h=l[3],c=d||p,u=h&&h||0,e.next=20;break;case 19:return e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:i.isResume});case 20:i.isOAuth=!1,e.next=30;break;case 23:return e.next=25,(0,b.getOAuthTicket)(a,o);case 25:return _=e.sent,e.next=28,(0,b.getOAuthAccount)(_);case 28:i.account=e.sent,i.user_ticket=_;case 30:return e.abrupt("return",{result:!0,serverInfo:{address:c,port:u}});case 31:case"end":return e.stop()}},e,t)}));return function(t,n,r){return e.apply(this,arguments)}}(),r.dealWithUportalLoginFailedAuth=function(){var e=(0,C.default)(m.default.mark(function e(n,r,a,o){var i,s,c,u,f;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return i=null,s="",c=!1,e.next=5,(0,N.getLoginModel)();case 5:if(u=e.sent,f=function(){var e=(0,C.default)(m.default.mark(function e(s){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!s.ret){e.next=5;break}return x.info("user click to start login download cacert"),e.next=4,(0,A.startLoginDownLoadCaCert)({account:n,password:r,serverAddress:a,serverPort:o});case 4:i=e.sent;case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=10,window.confirm(language.CA_CERT_IS_NOT_TRUSTED).then(f);case 10:e.next=14;break;case 12:return e.next=14,window.confirm(language.CA_CERT_IS_NOT_TRUSTED,!0).then(f);case 14:return null===i?(x.info("user cancel download cacert files"),c=!1,s="USER_CANCEL_DOWNLOAD_CA_CERT"):i&&0===i.result?(x.info("Download cacert success, re-login to uportal"),c=!0,s=""):(x.info("download cacert files failed"),c=!1,s=constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR),e.abrupt("return",{result:c,errorCode:s,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:u.isResume});case 16:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),r.dealWithUportalLoginFailed=function(){var e=(0,C.default)(m.default.mark(function e(n,a){var o;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return o=e.sent,window.CLIENTCONFIG.ISBIGWIN||r.IP.saveLastUportalInfo("",""),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_UPORTAL_SERVER,resultParams:[0,n.result,o.isResume?1:0],isTrackTimeCosts:!0}),o.set({uportalLoginState:constant.UPORTAL_LOGIN_STATE.UPORTAL_LOGIN_FAILED,account:o.isOAuth?o.account:a}),x.error("baseLogin:loginUportal result=",n.result),o.isInUportalLogin=!1,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.uportalLoginFailed(n.result),e.abrupt("return",{result:!1,errorCode:n.result,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:o.isResume});case 10:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),r.dealWithAccountMutex=(0,C.default)(m.default.mark(function e(){var n;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,N.getLoginModel)();case 2:return n=e.sent,n.isInUportalLogin=!1,n.setLoginStatus(!1,!1),x.info("[ loginToUportal ] login fail. workplace account can not login on huawe meeting"),alert(language.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE),e.abrupt("return",{result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DISTINGUISH_HUAWEIMEETING_OR_WORKPLACE,errorType:constant.LOGIN_ERROR_TYPE.common,isResume:n.isResume});case 8:case"end":return e.stop()}},e,t)})),r.IP=new R,r.proxyUtil=new M,r}return(0,p.default)(n,t),n}(E.default),P=void 0;t.getUportalApi=function(){return isNullOrEmpty(P)&&(P=new k),P}}).call(t,n(131).Buffer)},229:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.updateTempMediaxPort=t.updateTempMediaxAddress=t.updateTempSipGetState=t.updateTempSipPwd=t.getNickName=t.saveNickName=t.updateTempSipNick=t.updateTempSipAccount=t.updateTempSipPort=t.updateTempSipServer=t.buildStg=t.clearFireWallStore=t.saveFireWall=t.updateFirewallMode=t.detectFireWall=t.checkDetectFireWall=t.resumeAllSipService=t.stopSipRefresh=t.startSipRefresh=t.dealPcLogout=t.dealPcLogin=t.configSipIp=t.ipCallConfig=t.stopLocalServer=t.reLoginSipserver=t.unEnableBFCP=t.sipserverDeregister=t.clearnsipinfo=t.stgBuildforNoName=t.getStgInfo=t.handleSipOnlyJoinConf=t.handleAccountJoinConf=t.handletempsipconfinfo=t.prepareHandletempsipconfinfo=t.registerLoginEvent=void 0;var a=n(69),o=r(a),i=n(127),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=(t.resumeAllSipService=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,coreCall.registerCallEvent(),coreCall.registerVideoEvent(),coreConf.getRegisterConfEventAtomic().wait(),e.next=8,coreConf.initializeDataConf();case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.checkDetectFireWall=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,window.updateLocalIp();case 2:return t=e.sent,E.info(" start checkDetectFireWall "),e.next=6,coreDb.queryLoginSetting({key:"firewall"});case 6:if(n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)){e.next=22;break}if(r=JSON.parse(n.value),t!==r.ip){e.next=17;break}return E.info("detectFireWall local has store for ip :"+handleIp(t)),coreConf.setFireWallModeType(r.fireWallMode),N=r.fireWallMode,e.next=15,p(r.fireWallMode);case 15:e.next=20;break;case 17:return E.info("detectFireWall local has no store for ip :"+handleIp(t)),e.next=20,d(t);case 20:e.next=25;break;case 22:return E.info("detectFireWall local has no store for ip :"+handleIp(t)),e.next=25,d(t);case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.detectFireWall=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(f)){e.next=4;break}return e.next=3,window.updateLocalIp();case 3:f=e.sent;case 4:return e.next=6,(0,I.getLoginModel)();case 6:if(t=e.sent,n=t.svnUri,r=t.useIM,a=t.stgUri,o=t.isMultiDeviceLogined,i=t.isMobile,void 0===a||""===a||";"===a||";;"===a||";;;"===a||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=29;break}if(s=void 0,!(c=t.isSupportProxy)){e.next=15;break}s={fire_wall_mode:0,result:0},e.next=18;break;case 15:return e.next=17,(0,v.startFireWallDetect)(n);case 17:s=e.sent;case 18:if(E.info("detectFireWall isSupportProxy:",c),!s||void 0===s.fire_wall_mode){e.next=26;break}return e.next=22,p(s.fire_wall_mode);case 22:return e.next=24,h(f,s.fire_wall_mode);case 24:e.next=27;break;case 26:E.error("firewall detect failed");case 27:e.next=32;break;case 29:E.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,v.updateFireWallAndSipInfo)(3);case 32:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),p=t.updateFirewallMode=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(coreConf.setFireWallModeType(t),N=t,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==t){e.next=5;break}return e.next=5,R();case 5:(0,v.updateFireWallAndSipInfo)(t);case 6:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),h=t.saveFireWall=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r={ip:t,fireWallMode:n},a=(0,o.default)(r),E.info("detectFireWall save "+(0,o.default)({ip:handleIp(t),fireWallMode:n})),coreDb.saveLoginSetting({key:"firewall",value:a});case 4:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),_=(t.clearFireWallStore=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:E.info("fireWall: clear local store"),coreDb.saveLoginSetting({key:"firewall",value:""});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:if(t=e.sent,n=t.useIM,r=t.fireWallMode,n){e.next=22;break}if(constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==r&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==r){e.next=21;break}return a=t.stgUri,o=t.stgAccount,e.next=9,coreSecurity.getPasswordManager();case 9:return i=e.sent,e.next=12,i.getPassword("stgPassword");case 12:return c=e.sent,E.info("TE mode need buildStgTunnel， building"),e.next=16,(0,v.buildStgTunnel)({stgUri:a,stgAccount:o,stgPassword:c});case 16:if(f=e.sent,f.result){e.next=19;break}return e.abrupt("return",(0,I.LoginError)((0,s.default)({},f,{result:!1,errorCode:I.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:I.ErrorType.uportal})));case 19:e.next=22;break;case 21:E.info("firewall result is ok, no need to buildStgTunnel");case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(406)),g=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(_),m=n(288),v=n(211),C=n(289),I=(n(291),n(164)),w=n(185),S=n(230),E=coreLogger.getLogger("logic")("login/sipServer"),N=2,T=(t.registerLoginEvent=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g.setloginNotifyFunc(),E.info("registerLoginEvent, Observer subscribe TempSipConfInfo"),coreCommon.Observer.subscribe("TempSipConfInfo",b);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.prepareHandletempsipconfinfo=function(e){return 34===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INVALIDE_CONF,2),0):36===e.param.result?(window.ToastNew(language.END_CONFERENCE,2),0):37===e.param.result?(window.ToastNew(language.GET_SIP_FAILED_INPUT_TOO_MUCH_ERROR_PWD,2),0):35===e.param.result?(D(""),0):2===e.param.result?(D(""),0):3===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):7===e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):33===e.param.result?(window.ToastNew(language.CALL_FAILED_OFFLINE,2),0):40===e.param.result?(window.ToastNew(language.THE_VMR_MEETING_HAS_NOT_YET_STARTED,2),0):39===e.param.result?(window.ToastNew(language.THE_MEETING_HAS_BEEN_LOCKED_DOWN,2),0):32===e.param.result?(window.ToastNew(language.CA_CERT_IS_NOT_TRUSTED_CONNECT_FAILED,2),0):0!==e.param.result?(window.ToastNew(language.CALL_CALLING_FAILED,2),0):1}),b=t.handletempsipconfinfo=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("handletempsipconfinfo",t.param.result),e.next=3,(0,I.getLoginModel)();case 3:if(n=e.sent,0===t.param.result){e.next=22;break}if($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),t.param.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT){e.next=22;break}if(E.info("handletempsipconfinfo timeout,clear dns ip"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=21;break}return e.next=12,window.getMeetingDomain();case 12:return r=e.sent,a="",e.next=16,coreDb.queryLoginSetting({key:r});case 16:o=e.sent,o&&o.value&&(a=o.value),a&&(coreDb.saveLoginSetting({key:r,value:""}),coreConf.gettempuserinfo()),e.next=22;break;case 21:(0,v.clearLocalDNSIp)(n.urlOfGetSipInfo);case 22:return e.next=24,U(t.param.result);case 24:if(0!==T(t)){e.next=27;break}return D(""),e.abrupt("return");case 27:if(!(t.param.tempuser_info_result.length<=1)){e.next=30;break}return alert(language.GET_SIP_NOTHING),e.abrupt("return");case 30:if(i=n.sipOnlyType,s=t.param.tempuser_info_result,c=s.conf_id.length,f=n.isSupportAS,constant.SIP_ONLY_TYPE.SIP_ONLY_TYPE_HAS_SIP!==i&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=52;break}if(!(c!==constant.MEDIA_X_ID_LENGTH&&!f||c===constant.MEDIA_X_ID_LENGTH&&f)){e.next=38;break}return window.confirm(language.CONF_NOT_IN_SAME_DEPARTMENT_AUTO).then(function(){var e=(0,l.default)(u.default.mark(function e(t){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ret){e.next=18;break}return e.next=3,delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT);case 3:if(!window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return r={tempSipAccount:s.conf_id},n.set(r),e.next=8,P();case 8:return e.next=10,coreConf.getConfInfoFromDb();case 10:window.goRoute("noLoginJoinConference"),e.next=16;break;case 13:a={tempSipAccount:s.conf_id},n.set(a),coreAccount.noLoginJoinConference();case 16:e.next=19;break;case 18:$dispatch(coreUi.changeEnterConfState(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),e.abrupt("return");case 38:return $dispatch(coreUi.changeConfAcsNum(s.access_code)),$dispatch(coreUi.changeConfAcsId(s.conf_id)),e.next=42,coreConf.toggleChangeConfAcsPas(s.conf_pwd);case 42:return $dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),d={tempConfInfo:{chairman_pwd:s.chairman_pwd,user_role:s.user_role}},n.set(d),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),window.CLIENTCONFIG.ISMOBILE?$dispatch(coreUi.changeCurConfPage("mEnterConfPage")):$dispatch(coreUi.changeCurConfPage("Join")),coreConf.oneKeyEnterConf(s.access_code,s.conf_id,s.conf_pwd,!0),e.abrupt("return");case 52:p=s.account_info,isNullOrEmpty(p.account)?L(s):O(s);case 54:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.handleAccountJoinConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.account_info,r={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd,user_role:t.user_role,chairman_pwd:t.chairman_pwd},a={tempConfInfo:r,sipLoginOnly:!0},e.next=5,(0,I.getLoginModel)();case 5:return o=e.sent,o.set(a),i=t.user_role,1===i&&window.ToastNew(language.CONF_NO_INVITE_PEMISSIOM_TIP),s=$getState(),c=s.login,f=c.serverAddress,l=c.serverPort,d=n.access_url,isNullOrEmpty(n.second_access_url)||(isNullOrEmpty(d)?d=n.second_access_url:d+=","+n.second_access_url),isNullOrEmpty(d)&&(d=f),$dispatch(coreUi.changeConfTempAcsAccount(n.account)),e.next=16,coreSecurity.getPasswordManager();case 16:return p=e.sent,e.next=19,p.setPassword("password",n.password);case 19:return $dispatch(coreUi.changeTempAcsUportalAddress(d)),$dispatch(coreUi.changetempAcsUportalPort(l)),$dispatch(coreUi.changeEnterConfState(!0)),$dispatch(coreUi.changeEnterConfNotifyMsg(language.ENTER_CONF_TEMP_ACS_ENTING)),e.next=25,coreAccount.login({isResume:!1,isTempLogin:!0});case 25:$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg(""));case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),L=t.handleSipOnlyJoinConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p,h,_,g,C;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=!0,e.next=3,A(t.site_info);case 3:return r=e.sent,e.next=6,(0,I.getLoginModel)();case 6:return a=e.sent,o={conf_id:t.conf_id,access_code:t.access_code,conf_pwd:t.conf_pwd},"supportRest"===t.site_info[0].tms_account&&(n=!1),window.CLIENTCONFIG.ISBIGWIN&&(n=!0),i={sipAccount:t.sip_account,sipDomain:t.sip_domain,sipImpi:t.sip_impi,sipPasswordType:t.password_type,sipServerAddress:t.site_info[0].access_server[0].sip_uri.split(":")[0],sipServerPort:parseInt(t.site_info[0].access_server[0].sip_uri.split(":")[1]),sipTlsServerAddress:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"":t.site_info[0].access_server[0].sip_tls_uri.split(":")[0],sipTlsPort:isNullOrEmpty(t.site_info[0].access_server[0].sip_tls_uri)?"0":parseInt(t.site_info[0].access_server[0].sip_tls_uri.split(":")[1]),sipStgUri:t.site_info[0].access_server[0].stg_info.sip_stg_uri,sipUri:t.site_info[0].access_server[0].sip_uri,svnUri:r.svnUri,stgUri:r.stgUri,stgAccount:r.stgAccount,tempsipinfo:t,tempConfInfo:o,sipLoginOnly:!0,deployMode:3,sipLoginissiptls:t.site_info[0].access_server[0].is_siptls,sipLoginissrtp:t.site_info[0].access_server[0].is_srtp},t.uportal_uri.indexOf(":")>=0?(i.tempsipserverAddress=t.uportal_uri.split(":")[0],i.tempsipserverPort=parseInt(t.uportal_uri.split(":")[1])):(i.tempsipserverAddress=t.uportal_uri,i.tempsipserverPort=8443),window.isSupportiDo=n,E.info("handletempsipconfinfo isSupportiDo: "+window.isSupportiDo),a.set(i),e.next=17,coreSecurity.getPasswordManager();case 17:if(s=e.sent,e.t0=t.sip_password,!e.t0){e.next=22;break}return e.next=22,s.setPassword("sipPassword",t.sip_password);case 22:if(window.CLIENTCONFIG.ISMOBILE){e.next=71;break}if(c=r.svnUri,void 0===(f=r.stgUri)||""===f||";"===f||";;"===f||";;;"===f||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=66;break}return e.next=27,(0,v.startFireWallDetect)(c);case 27:if(!(l=e.sent)||void 0===l.fire_wall_mode){e.next=58;break}if(coreConf.setFireWallModeType(l.fire_wall_mode),N=l.fire_wall_mode,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==l.fire_wall_mode){e.next=34;break}return e.next=34,R();case 34:if((0,v.updateFireWallAndSipInfo)(l.fire_wall_mode),constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==l.fire_wall_mode&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==l.fire_wall_mode){e.next=55;break}return d=r.stgUri,p=r.stgAccount,e.next=39,coreSecurity.getPasswordManager();case 39:return h=e.sent,e.next=42,h.getPassword("stgPassword");case 42:return _=e.sent,E.info("TE mode need buildStgTunnel， building"),e.next=46,(0,v.buildStgTunnel)({stgUri:d,stgAccount:p,stgPassword:_});case 46:if(g=e.sent,g.result){e.next=53;break}return y(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.abrupt("return");case 53:e.next=56;break;case 55:E.info("firewall result is ok, no need to buildStgTunnel");case 56:e.next=64;break;case 58:return E.error("firewall detect failed"),y(),alert(language.CALL_CALLING_FAILED),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),e.abrupt("return");case 64:e.next=69;break;case 66:E.info("reSetFireWallModeType"),coreConf.reSetFireWallModeType(),(0,v.updateFireWallAndSipInfo)(3);case 69:e.next=72;break;case 71:E.info("handleSipOnlyJoinConf mobile no need to fireWallDetect");case 72:return C={result:!1},e.prev=73,e.next=76,(0,m.loginToSipServer)();case 76:C=e.sent,e.next=82;break;case 79:e.prev=79,e.t1=e.catch(73),E.error("handleSipOnlyJoinConf loginToSipServer try catch error = "+e.t1);case 82:C&&!1===C.result&&($dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changeEnterConfNotifyMsg("")),window.ToastNew(language.ENTER_CONF_FAIL,2),E.info("handleSipOnlyJoinConf loginToSipServer fail exit sipLoginOnly"));case 83:case"end":return e.stop()}},e,void 0,[[73,79]])}));return function(t){return e.apply(this,arguments)}}(),A=t.getStgInfo=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p,h,_,g,m,v;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n="",r="",a="",o="",i="",s="",c="",f="",l="",!t||!t[0]){e.next=28;break}d=t[0],p=d.num_of_server,h=d.access_server,_=p-1;case 4:if(!(_>=0)){e.next=20;break}if(h&&h[_]){e.next=7;break}return e.abrupt("continue",17);case 7:n+=h[_].sip_uri,r+=h[_].svn_uri,i+=h[_].stg_info.stg_uri,f+=h[_].stg_info.sip_stg_uri,l+=h[_].stg_info.eserver_stg_uri,s=h[0].stg_info.account,c=h[0].stg_info.password,o||(o=h[_].eserver_uri,a=h[_].httpsproxy_uri),a||(a=h[_].httpsproxy_uri),0!==_&&(n+=";",r+=";",i+=";",f+=";",l+=";");case 17:_--,e.next=4;break;case 20:return g={sipUri:n,svnUri:r,httpsProxy:a,eserverUri:o,stgUri:i,stgAccount:s,stgPassword:c,sipStgUri:f,eserverStgUri:l},e.next=23,coreSecurity.getPasswordManager();case 23:if(m=e.sent,e.t0=c,!e.t0){e.next=28;break}return e.next=28,m.setPassword("stgPassword",c);case 28:return v={sipUri:n,svnUri:r,httpsProxy:a,eserverUri:o,stgUri:i,stgAccount:s,stgPassword:c,sipStgUri:f,eserverStgUri:l},e.abrupt("return",v);case 30:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=(t.stgBuildforNoName=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,c,f=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:if(a=e.sent,o=(new Date).getTime(),i=void 0,void 0===t||""===t||";"===t||";;"===t||";;;"===t){e.next=8;break}return e.next=8,(0,v.startFireWallDetect)(a.svnUri);case 8:if(constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==N){e.next=16;break}if(void 0===t||""===t||";"===t||";;"===t||";;;"===t){e.next=16;break}return e.next=12,(0,v.buildStgTunnel)({stgUri:t,stgAccount:n,stgPassword:r});case 12:if(c=e.sent,c.result){e.next=16;break}return(0,C.handleUportalLoginFailed)((0,s.default)({},c,{isResume:f})),e.abrupt("return",{result:!1});case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.clearnsipinfo=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("clearsipinfo"),t={sipAccount:"",sipDomain:"",sipImpi:"",sipPassword:"",sipPasswordType:"",sipServerAddress:"",sipServerPort:"",sipStgUri:"",sipUri:"",tempsipinfo:"",tempConfInfo:"",sipLoginOnly:!1,deployMode:"",tempsipserverAddress:"",tempsipserverPort:"",tempSipAccount:"",tempsipPassword:"",sipLoginissiptls:0,sipLoginissrtp:1,tempSipNick:""},e.next=4,(0,I.getLoginModel)();case 4:return n=e.sent,n.set(t),E.info("clearsipinfo finished"),e.next=9,coreSecurity.getPasswordManager();case 9:return r=e.sent,e.next=12,r.setPassword("sipPassword","");case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),x=t.sipserverDeregister=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:return t=e.sent,n=t.sipImpi,E.info("sipserverDeregister"),e.next=7,coreTup.getCallInstance();case 7:if(r=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=11,r.deRegisterForAccount(0);case 11:e.next=15;break;case 13:return e.next=15,r.deRegister(n);case 15:window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(window.setSipState("0"),a=!!window.pcLoginState(),t.isMultiDeviceLogined=a,E.info("isMultiDeviceLogined = "+a)),$dispatch(coreUi.changeDoSipReg(!1));case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=(t.unEnableBFCP=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("[ unEnableBFCP ]"),t={media:{enable_bfcp:0}},e.next=4,coreTup.getCallInstance();case 4:return n=e.sent,e.next=7,n.config(t);case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLoginSipserver=function(e){return E.info("[ reLoginSipserver ]"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(0,m.loginToSipServer)():x().then(m.loginToSipServer)},t.stopLocalServer=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("stop local server."),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,e.next=6,t.stopLocalServer();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.ipCallConfig=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.skipLogin){e.next=2;break}return e.abrupt("return");case 2:return t=(0,S.configIPCallServer)(),e.next=5,coreTup.getCallInstance();case 5:return n=e.sent,e.next=8,n.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configSipIp=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("configSipIp"),e.next=3,(0,S.sipIpConfig)();case 3:return t=e.sent,e.next=6,coreTup.getCallInstance();case 6:return n=e.sent,e.next=9,n.config(t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.dealPcLogin=function(){E.info("multi devices, deal pc login "),k().then(function(e){0===e.result&&(E.info("stop sip refresh success"),x())}),coreCommon.dispatchModuleEvent("sipOtherPCLogin"),coreConf.endPairWithPeripherals({tips:language.PAIR_CLOSED})};window.onlyInitHme=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCallInstance();case 2:return t=e.sent,e.next=5,(0,S.configHMELog)();case 5:return n=e.sent,E.info("sip server login configHmeInfo=",n),e.next=9,t.setHMELog(n);case 9:case"end":return e.stop()}},e,void 0)})),window.onlyDoSipRegister=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(E.info("only do sip register."),!window.dontUnregister){e.next=10;break}if(E.info("sim call finish resume sip service."),!window.isOffline){e.next=8;break}return e.next=6,x();case 6:e.next=10;break;case 8:return E.info("sim call finish resume sip service."),e.abrupt("return");case 10:return e.next=12,(0,m.loginToRegSipServer)();case 12:E.info("relogin sipserverLogin end");case 13:case"end":return e.stop()}},e,void 0)}));var M=(t.dealPcLogout=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState(),n=t.call,r=n.saveCalleeInfo,a=n.isDoSipReg,E.info("multi devices, deal pc logout ","isDoSipReg:"+a),window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,!0){e.next=8;break}return e.next=5,k();case 5:return e.next=7,M();case 7:return e.abrupt("return");case 8:return(0,w.sipResume)(),isNullOrEmpty(r)&&window.ToastNew(language.MULTIDEVICE_PC_QUIT,3),e.next=12,coreConf.confctrlInit();case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.startSipRefresh=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("start sip refresh."),e.next=3,(0,I.getLoginModel)();case 3:return t=e.sent,n=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(r=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",r.refreshRegisterForAccount(0));case 10:return e.abrupt("return",r.startRefreshRegister(n));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),k=t.stopSipRefresh=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return E.info("stop sip refresh."),e.next=3,(0,I.getLoginModel)();case 3:return t=e.sent,n=t.sipImpi,e.next=7,coreTup.getCallInstance();case 7:if(r=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=10;break}return e.abrupt("return",r.stopReForAccount(0));case 10:return e.abrupt("return",r.stopRefreshRegister(n));case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),P=(t.updateTempSipServer=function(e){(0,I.getLoginModel)().then(function(t){t.tempsipserverAddress=e})},t.updateTempSipPort=function(e){(0,I.getLoginModel)().then(function(t){t.tempsipserverPort=e})},t.updateTempSipAccount=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,n.tempSipAccount=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempSipNick=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,n.tempSipNick=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.saveNickName=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={key:"noLoginNickName",value:t},coreDb.saveLoginSetting(n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getNickName=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"noLoginNickName"});case 2:return t=e.sent,e.next=5,(0,I.getLoginModel)();case 5:n=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)?n.tempSipNick="":n.tempSipNick=t.value;case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),D=t.updateTempSipPwd=function(e){(0,I.getLoginModel)().then(function(t){t.tempsipPassword=e})},U=t.updateTempSipGetState=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,n.tempsipGetState=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.updateTempMediaxAddress=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,n.tempMediaxAddress=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.updateTempMediaxPort=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getLoginModel)();case 2:n=e.sent,n.tempMediaxPort=t;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},230:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.serGroupPickupCfg=t.serPointPickupCfg=t.restoreMAAConfControl=t.reConfigVideoAndDataSetting=t.initVideoSettingParam=t.initVideoHardCodeParam=t.configBFCPForTLS=t.configBandwidthLimit=t.configSessionTimer=t.configBFCP=t.configVideo=t.configRTP=t.configMKI=t.configRejectCallType=t.configCall=t.sipIpConfig=t.configSip=t.configIPCallServer=t.configHMELog=void 0;var a=n(3),o=(r(a),n(123)),i=r(o),s=n(1),c=r(s),u=n(69),f=r(u),l=n(2),d=r(l),p=n(136),h=n(166),_=coreLogger.getLogger("logic")("common/sipCallConfig"),g=window.CLIENTCONFIG,m=(t.configHMELog=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=10,1===window.CLIENTCONFIG.IS_HME_DEBUG&&(t=200),window.hmeLogSizeMb&&(t=window.hmeLogSizeMb),n={audio_log_level:3,audio_max_size:10,video_log_level:3,video_max_size:t},_.info("HMEConfig =",(0,f.default)(n)),e.abrupt("return",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configIPCallServer=function(){return{log_path:window.LOG_PATH,network:{local_ipv4:window.localIp,user_agent:"WeLink-Mobile"},audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,audio_rfc2198:{switch:1,red_pt:121,red_level:3}},sip:{user_type:1,tls_rootcertpath:"",tls_server_certpath:"",tls_anonymous_enable:0,trans_mode:0}}},t.configSip=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,f,l,d,h,v,C,I,w,S,E,N,T,b,O,L,A,y,x,R,M,k,P,D,U,F,G,B,W,V,H,$,Y,q,j,K,J,z,X,Q,Z,ee,te,ne=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.getLoginModel)();case 2:if(t=e.sent,n=t.sipServerAddress,r=t.sipServerPort,a=t.sipTlsServerAddress,o=t.sipTlsPort,i=t.sipTlsServerBackup1,s=t.sipTlsPortBackup1,u=t.sipTlsServerBackup2,f=t.sipTlsPortBackup2,l=t.sipTlsServerBackup3,d=t.sipTlsPortBackup3,h=t.sipServerBackup1,v=t.sipServerPortBackup1,C=t.sipServerBackup2,I=t.sipServerPortBackup2,w=t.sipServerBackup3,S=t.sipServerPortBackup3,E=t.sipPasswordType,N=t.sipOutgoingAccCode,T=t.fireWallMode,b=t.sipDomain,O=t.serverAddress,L=t.sipLoginissiptls,A=t.sipLoginOnly,y=t.tempSipNick,x=t.sipTransMode,R=t.isSupportCACertCheck,M=t.sipWhiteList,k=t.deployMode,_.info("config sip param",n,r,h,v,C,I,w,S,a,o,i,s,u,f,l,d,desensitive(E),N,T,b,O),P=$getState().conf,D=P.confTempAcsNick,U=P.confTempAcsAccount,F=constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,G=window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:constant.USER_AGENT.PC,F=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===T?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===T?constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_INNERSVN:constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_LINE,_.info("config sip stgModeForCall "+F+", 0:sbc,1:stg,2:svn,3:butt"),window.CLIENTCONFIG.USE_IM||(G=window.CLIENTCONFIG.ISMOBILE?"Huawei TE Mobile":"Huawei TE Desktop"),_.info("config sip deployMode "+k),k===constant.MEETING_NET_TYPE.SMC_MEETING&&(G="CloudLink SoftClient"),1===window.SERVERCONFIG.HWUC&&(b=n),_.info("serverAddress ="+O+", sipServerAddress ="+n+", sipDomain"+b+", isForTempLogin = "+ne),B=coreCommon.isHuaweiCloud(O),ne&&(B=!0),A&&(B=1===L),W={account_pwd_type:parseInt(E)||0,account_label_name:isNullOrEmpty($getState().myInfo.name)?$getState().myInfo.account:$getState().myInfo.name},_.info("config sip account_label_name default "+isNullOrEmpty(W.account_label_name)+" "+isNullOrEmpty($getState().myInfo.name)+" "+isNullOrEmpty($getState().myInfo.account)),ne&&(_.info("config sip account_label_name forTempLogin "),W={account_pwd_type:parseInt(E)||0,account_label_name:isNullOrEmpty(D)?U:D}),A&&!isNullOrEmpty(y)&&(_.info("config sip account_label_name sipLoginOnly "),W={account_pwd_type:parseInt(E)||0,account_label_name:y}),!isNullOrEmpty(W.account_label_name)||A){e.next=29;break}return _.info("config sip account_label_name from contactModule "),e.next=25,coreContact.getContactByAccount(t.account);case 25:V=e.sent,_.info("config sip account_label_name from contactModule success"),W.account_label_name=getContactName(V),_.info("config sip account_label_name from util function");case 29:if(H="",isNullOrEmpty(W.account_label_name)||(H=W.account_label_name.length<=2?W.account_label_name.substr(0,1)+"**":W.account_label_name.substr(0,1)+"**"+W.account_label_name.substr(-1)),_.info("esight config siptls is null,use uportal siptlsmode is "+L+",account_label_name = "+H),B=1===L,F===constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG&&(B=!1),$=0,window.CLIENTCONFIG.ENABLE_IT_MEETING&&(B=!0,$=1),0===x&&(R=!1),Y=B?1:x||0,_.info("config sip trans_mode : "+Y+" , 1: tls: 0: udp"),q="",j="",K="",J="",z="",X="",Q="",Z="",o>0&&L&&F!==constant.CALL_FIREWALL_MODE.CALL_E_FIREWALL_MODE_STG?(q=a,j=o,K=i,J=s,z=u,X=f,Q=l,Z=d):(q=n,j=B?5061:r||5060,K=h,J=B?5061:v||5060,z=C,X=B?5061:I||5060,Q=w,Z=B?5061:S||5060),_.info("sipTlsServerAddress , sipLoginissiptls : "+L+" realSipServerAddress:"+q+" , realSipServerPort : "+j),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=56;break}return _.info("[IT-Meeting] update local IP before sip register."),$=0,e.next=54,window.updateLocalIp(!0);case 54:e.next=59;break;case 56:return _.info("config sip update local IP before sip register."),e.next=59,window.updateLocalIp(!0);case 59:if(_.info("config sip update local IP : "+handleIp(window.localIp)),ee=window.localIp,window.CLIENTCONFIG.ISBIGWIN){e.next=65;break}return e.next=64,m(q,j);case 64:ee=e.sent;case 65:return te={log_path:window.LOG_PATH,network:{sip_svr_addr:b,sip_svr_port:j,backup1_addr:isNullOrEmpty(K)?"":b,backup1_port:j,backup2_addr:isNullOrEmpty(z)?"":b,backup2_port:j,backup3_addr:isNullOrEmpty(Q)?"":b,backup3_port:j,local_ipv4:ee,local_sip_port:parseInt(g["Device.ComCfg.Sip.LocalPort"]),user_agent:G,force_dereg_disconnect_tls:1,net_environment:1===window.SERVERCONFIG.HWUC?8:0,proxy_addr:q,proxy_port:parseInt(j),proxy_backup1_addr:K,proxy_backup1_port:parseInt(J),proxy_backup2_addr:z,proxy_backup2_port:parseInt(X),proxy_backup3_addr:Q,proxy_backup3_port:parseInt(Z)},account:W,call:{param_outgoingcode:N,cfg_firewall_mode:F,cfg_welink_symbol:window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?1:0,call_anonymous_enable:B?1:R?1:0,call_ipcall_enable:0,sip_keepalive_time:parseInt(g["Device.ComCfg.Sip.sipKeepaliveTime"]),bfcp_keepalive_time:parseInt(g["Device.ComCfg.Media.BfcpKeepaliveTime"])},sip:{audvie_mode:1,user_type:window.SERVERCONFIG.HWUC?0:1,trans_mode:Y,tls_anonymous_enable:$,root_cert_path:window.EXEC_PATH+"\\",tls_version:7,regist_timeout:window.CLIENTCONFIG.ISBIGWIN?600:parseInt(g["Device.ComCfg.Sip.RegistExpires"]),white_list:M||"",white_list_count:M&&M.length>0?M.length:0,pai_priority:1,check_cseq:window.CLIENTCONFIG.ISBIGWIN?0:1},conf:{use_maa_confctrl:0,enable_ms_dataconf:1,ido_over_bfcp_version:parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])}},_.info("sip ido retransmission flag bit",parseInt(window.CLIENTCONFIG["Device.ComCfg.Conf.IsIdoBfcpRetransmission"])),e.abrupt("return",te);case 68:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(c.default.mark(function e(t,n){var r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r=window.localIp,window.CLIENTCONFIG.ISMOBILE){e.next=9;break}return e.next=4,coreTup.getToolInstance();case 4:return a=e.sent,e.next=7,a.tupToolGetLocalIp(t,n,!1);case 7:o=e.sent,r=0===o.result&&""!==o.param.local_ip?o.param.local_ip:window.localIp;case 9:return _.info("checkLocalIpAddr: "+handleIp(r)),e.abrupt("return",r);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),v=(t.sipIpConfig=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={network:{local_ipv4:window.localIp}},e.abrupt("return",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configCall=function(){var e=Number($getState().setting.micAgc),t=parseInt(g["Device.ComCfg.Media.StreamAutomaticallyHangUp"]),n=window.CLIENTCONFIG.ISMOBILE?window.DEFAULT_CAMERA_IMG_PATH:window.VIDEO_DEFAULT_IMG+"default_camera.bmp",r=Number($getState().call.cameraNum),a={audio:{audio_codec:"112,9,8,0,98,18",dtmf_mode:1,net_ate_level:2,send_empty_audio_pkt:1,netate_redpt_switch:0,audio_pkt_red_num_in_stg:{opus_repeat_num:1,other_repeat_num:2},audio_rfc2198:{switch:1,red_pt:121,red_level:3},audio_anr:3,audio_aec:1,audio_agc:e,ilbcmode:20,audio_band_limit:{lowest_band_width:64,lowest_audio_codec:"112,98,18",lower_band_width:384,lower_audio_codec:"112,98,18,9,8,0"},audio_port_range:{min_port:10002,max_port:65528}},media:{video_preview_type:0===r?0:2,lowbandwidth_ability:1,loose_port_nego:1,chan_upd_dyn:1,video_default_image:0===r?n:"",enable_audio_bfcp:window.isSupportiDo?1:0},call:{stream_detect_enable:t,stream_detect_inrval:5}};return _.info("configCallInfo =",(0,f.default)(a)),a},t.configRejectCallType=function(){var e={sip:{reject_type:2}};return _.info("config[sip][reject_type] = ",e),e},t.configMKI=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(g["Device.ComCfg.Media.EncryptCalloutUseMKI"]),n={media:{srtp_mki:t}},_.info("configMKIInfo =",(0,f.default)(n)),e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configRTP=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.sipLoginissrtp,r=t.sipLoginOnly,a=t.srtpMode,o=a,o=""!==g["Device.ComCfg.Media.priorityRtp"]?parseInt(g["Device.ComCfg.Media.priorityRtp"]):1===n?1:0,i=2,0===o&&(i=1),r&&(o=1===n?1:0),s={media:{srtp_mode:o,rtp_priority:i,merge_srtp_rtp:1,support_ec_direction:1}},_.info("configRTPInfo =",(0,f.default)(s)),e.abrupt("return",s);case 10:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configVideo=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,S();case 3:return t.media=e.sent,n={},n.media=w(),r={},r.media=E(),a={},a.media=N(),o={media:{}},o.media=(0,i.default)({},t.media,n.media,r.media,a.media),_.info("configVideoInfo =",(0,f.default)(o)),e.abrupt("return",o);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBFCP=function(){var e=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,C();case 3:return t.media=e.sent,e.abrupt("return",t);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),C=(t.configSessionTimer=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(g["Device.ComCfg.Sip.enableSessionTimer"]),n=parseInt(g["Device.ComCfg.Sip.SessionTime"]),r={sip:{sessiontimer_enable:t,session_time:n}},_.info("config[Session]TimerInfo =",desensitive(r)),e.abrupt("return",r);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.configBandwidthLimit=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=parseInt(g["Device.ComCfg.Media.BandwidthLimit"]),n={media:{video_bitrate_limited:t}},_.info("configBandwidthLimitInfo =",n),e.abrupt("return",n);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,f,l,d,p;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,s=void 0,s=$getState().login,t=g.DATA_CONFIG_MEDIA_LEVEL,n=g.DATA_CONFIG_MEDIA_MAX_MBPS,r=g.DATA_CONFIG_MEDIA_MAX_BR,a=g.DATA_CONFIG_MEDIA_MAX_FS,o=4096,i=0,!window.CLIENTCONFIG.ISMOBILE){e.next=24;break}return e.next=11,coreTup.getCallInstance();case 11:if(u=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=19;break}return e.next=15,u.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 15:f=e.sent,0===f.result?(_.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+f.param.hdaccelerate.hdencoder),i=f.param.hdaccelerate.hdencoder):_.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+f.result),e.next=23;break;case 19:return e.next=21,u.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 21:l=e.sent,0===l.result?(_.info("mediaGetHdaccelerate success, hdencoder = "+l.param.hd_accelerate.hdencoder),i=l.param.hd_accelerate.hdencoder):_.error("mediaGetHdaccelerate failed, result = "+l.result);case 23:o=T(i);case 24:return _.info("The default bandWidth is: "+o),d=void 0,window.CLIENTCONFIG.ISMOBILE?(o>=384?(t=22,n=27e3,r=g.DATA_CONFIG_MEDIA_MAX_BR,a=9e3):(t=20,n=10800,r=g.DATA_CONFIG_MEDIA_MAX_BR,a=3600),d={table_num:4,param_set:[{band_width:300,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:300,min_bit_rate:32},{band_width:192,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1280,height:720,max_frame_rate:3,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]}):(t=31,n=9e4,r=g.DATA_CONFIG_MEDIA_MAX_BR,a=9e3,d={table_num:6,param_set:[{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]},window.CLIENTCONFIG.ISBIGWIN&&(t=40,n=246e3,r=g.DATA_CONFIG_MEDIA_MAX_BR,a=8192,d={table_num:8,param_set:[{band_width:1536,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1536,min_bit_rate:32},{band_width:1152,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:1152,min_bit_rate:32},{band_width:512,width:1920,height:1080,max_frame_rate:5,min_frame_rate:1,max_bit_rate:512,min_bit_rate:32},{band_width:384,width:1920,height:1080,max_frame_rate:3,min_frame_rate:1,max_bit_rate:384,min_bit_rate:32},{band_width:256,width:1920,height:1080,max_frame_rate:2,min_frame_rate:1,max_bit_rate:256,min_bit_rate:32},{band_width:192,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:192,min_bit_rate:32},{band_width:128,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:128,min_bit_rate:32},{band_width:64,width:1920,height:1080,max_frame_rate:1,min_frame_rate:1,max_bit_rate:64,min_bit_rate:32}]})),p=512,p=o<384?o/2:o<512?192:o<768?256:o<1152?384:o<2048?512:o<2880?768:o<3840?1536:o<5760?1920:o/2,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===s.fireWallMode&&(window.CLIENTCONFIG.ISMOBILE?p=o>=384?192:o/2:o>=768&&o<1024?p=192:o>=1024&&o<=4096&&(p=256)),e.abrupt("return",I(s,t,a,n,p,d));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),I=function(e,t,n,r,a,o){var i=window.CLIENTCONFIG,s=parseInt(i["Device.ComCfg.Media.BFCPMode"]);2===s&&(s=1);var c=coreCommon.isHuaweiCloud(e.serverAddress),u=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===e.fireWallMode,l=parseInt(i["Device.ComCfg.Media.DataNetRat"]),d=parseInt(i["Device.ComCfg.Media.DataKeyFrameIntervalNetRat"]);window.CLIENTCONFIG.ISMOBILE&&(l=5,d=0);var p=u?0:parseInt(i["Device.ComCfg.Media.DataHarq"]),h=c?0:parseInt(i["Device.ComCfg.Media.DataARS"]),g=c?0:parseInt(i["Device.ComCfg.Media.DataARSFrameSize"]),m=c?0:parseInt(i["Device.ComCfg.Media.DataARSFrameRate"]),v=c?0:parseInt(i["Device.ComCfg.Media.DataARSBitRate"]),C=c?0:parseInt(i["Device.ComCfg.Media.DataArsFec"]),I=c?0:parseInt(i["Device.ComCfg.Media.DataShaping"]),w=u?512:384,S={enable_bfcp:1,enable_data:1,aux_fir_response_interval:500,bfcp_param:{floor_ctrl:3,setup:3,trans_type:s},bfcp_port_range:{min_port:5070,max_port:5090,ulTlsPort:5071},data_framesize:{decode_framesize:16,framesize:3},data_framerate:{frame_rate:3,min_frame_rate:1},data_port_range:{min_port:10006,max_port:65532},data_level:{level:t,max_fs:n,max_mbps:r},data_datarate:{max_bw:a},tmmbr_threshold:{data_limit:w,min_data_bandwidth:64,min_video_bandwidth:64},data_codec:"106",data_arq:parseInt(i["Device.ComCfg.Media.DataArq"]),data_harq:p,data_errorcorrecting:i.DATA_CONFIG_MEDIA_DATA_ERRORCORRECTING,data_net_lossrate:l,data_keyframe_interval:d,data_ars:{ars:h,ars_ctrl_framesize:g,ars_ctrl_framerate:m,ars_ctrl_bitrate:v,ars_ctrl_fec:C,ars_data_shaping:I},data_h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return S.data_resolution_table=o,_.info("media:BFCP参数 media =",(0,f.default)(S)),S},w=(t.configBFCPForTLS=function(){var e=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,g,m,v,C,I,w,S,E,N,T,O,L,A,y,x,R;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.decryptKMC(window.bfcpp);case 2:if(n=e.sent,r=n&&n.param&&n.param.PlainText||"",_.info("configBFCPForTLS mode : "+t+" path: "+window.EXEC_PATH),_.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===r?"failed":"success")),a=window.EXEC_PATH+"/BfcpTLS/",o=window.EXEC_PATH+"/BfcpTLS/server.pem",i=window.EXEC_PATH+"/BfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=window.EXEC_PATH+"\\BfcpTLS\\",o=window.EXEC_PATH+"\\BfcpTLS\\server.pem",i=window.EXEC_PATH+"\\BfcpTLS\\server_key.pem"),window.CLIENTCONFIG.ISMOBILE){e.next=53;break}return e.next=13,coreDb.queryLoginSetting({key:"importCertificate"});case 13:return s=e.sent,e.next=16,coreDb.queryLoginSetting({key:"certificateName"});case 16:return u=e.sent,"{}"===s&&(s=null),"{}"===u&&(u=null),_.info("_importCertificate : "+s+" _certificateName: "+u),e.next=22,(0,h.loginforverificationCertificateLogic)();case 22:if(f=e.sent,_.info("是否存在:"+f),!f||isNullOrEmpty(s)||isNullOrEmpty(u)){e.next=40;break}if("false"!==s.value||""===u.value){e.next=38;break}return l=b(),e.next=29,coreSecurity.decryptKMC(l);case 29:n=e.sent,r=n&&n.param&&n.param.PlainText||"",_.info("使用导入的证书"),_.info("configBFCPForTLS mode : "+t+" path: "+APP_DATA_PATH),_.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===r?"failed":"success")),a=APP_DATA_PATH+"/ImpBfcpTLS/",o=APP_DATA_PATH+"/ImpBfcpTLS/server.pem",i=APP_DATA_PATH+"/ImpBfcpTLS/server_key.pem","win"!==window.CLIENTCONFIG.PLATFORM&&"bigwin"!==window.CLIENTCONFIG.PLATFORM||(a=APP_DATA_PATH+"\\ImpBfcpTLS\\",o=APP_DATA_PATH+"\\ImpBfcpTLS\\server.pem",i=APP_DATA_PATH+"\\ImpBfcpTLS\\server_key.pem");case 38:e.next=53;break;case 40:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=53;break}if(d=window.path.join(window.APP_DATA_PATH,"deviceCertificate"),!fs.existsSync(d)||!fs.lstatSync(d).isDirectory()){e.next=53;break}if(p=window.path.join(d,"p4bfcp.txt"),g=window.path.join(d,"server.pem"),m=window.path.join(d,"server_key.pem"),!(fs.existsSync(p)&&fs.existsSync(g)&&fs.existsSync(m))){e.next=53;break}return v=fs.readFileSync(p).toString(),e.next=50,coreSecurity.decryptKMC(v);case 50:C=e.sent,I=C&&C.param&&C.param.PlainText||"",I&&(_.info("using refreshing device certificate"),r=I,a=d,o=g,i=m);case 53:if(!window.CLIENTCONFIG.ISMOBILE){e.next=83;break}if(_.info(" mobile 使用导入的证书"),w=$getState().login,S=w.mProveName,E=w.mSelectProve,E||""===S){e.next=83;break}return N=window.EXEC_PATH+"/impBfcpTLS",T=window.EXEC_PATH+"/impBfcpTLS/server.pem",e.next=61,(0,h.verificationCertificateLogic)(T);case 61:if(O=e.sent,_.info(" mobile login for is impt vc vcFlag: ",O),!O){e.next=83;break}_.info(" prove is ok "),L=void 0,e.next=72;break;case 69:L=e.sent,e.next=73;break;case 72:L=appService.mReadImptP4BFCP(N+"/p4bfcp.txt");case 73:return e.next=75,coreSecurity.decryptKMC(L);case 75:n=e.sent,r=n&&n.param&&n.param.PlainText||"",_.info("mobile 使用导入的证书"),_.info("configBFCPForTLS mode : "+t+" path: "+N),_.info("configBFCPForTLS bfcpTLSP decrytp: "+(""===r?"failed":"success")),a=window.EXEC_PATH+"/impBfcpTLS/",o=window.EXEC_PATH+"/impBfcpTLS/server.pem",i=window.EXEC_PATH+"/impBfcpTLS/server_key.pem";case 83:return A=t?1:0,y=6,x=0,R={bfcp_tls_param:{bfcp_tls_ctrl_mode:A,tls_version:y,tls_verify_mode:x,root_cert_path:a,srv_cert_file:o,srv_private_kfile:i,srv_private_kfile_pw:r,clt_cert_file:o,clt_private_kfile:i,clt_private_kfile_pw:r}},e.abrupt("return",R);case 88:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=window.CLIENTCONFIG,t=$getState().login,n=t.fireWallMode,r=!1;constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===n&&(r=!0);var a=parseInt(e["Device.ComCfg.Media.VideoNetRat"]),o=parseInt(e["Device.ComCfg.Media.VideoKeyFrameIntervalNetRat"]),i=r?0:parseInt(e["Device.ComCfg.Media.VideoHarq"]);window.CLIENTCONFIG.ISMOBILE&&(a=20,o=150);var s={video_errorcorrecting:e.VIDEO_CONFIG_MEDIA_VIDEO_ERRORCORRECTING,video_arq:parseInt(e["Device.ComCfg.Media.VideoArq"]),video_harq:i,ec_pkt_in_rtp:parseInt(e["Device.ComCfg.Media.EcPktInRtp"]),net_lossrate:a,keyframe_interval:o};return _.info(" media:视频抗丢包配置参数 media =",(0,f.default)(s)),s}),S=(t.initVideoHardCodeParam=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,t=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=14;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=6,coreTup.getCallInstance();case 6:return r=e.sent,e.next=9,r.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 9:a=e.sent,0===a.result?(_.info("hard code mediaGetHdaccelerate success, hdencoder = "+a.param.hdaccelerate.hdencoder),t=a.param.hdaccelerate.hdencoder):_.error("hard code mediaGetHdaccelerate failed, result = "+a.result),n=T(t);case 12:e.next=23;break;case 14:if(!window.CLIENTCONFIG.ISMOBILE){e.next=23;break}return e.next=17,coreTup.getCallInstance();case 17:return o=e.sent,e.next=20,o.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 20:i=e.sent,0===i.result?(_.info("hard code mediaGetHdaccelerate success, hdencoder = "+i.param.hd_accelerate.hdencoder),t=i.param.hd_accelerate.hdencoder):_.error("hard code mediaGetHdaccelerate failed, result = "+i.result),n=T(t);case 23:return s={},u=0,window.CLIENTCONFIG.ISMOBILE&&1===t&&n>256&&(u=1),l=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.CLIENTCONFIG.ISMOBILE?s.video_hdaccelerate={hd_encoder:u,hd_decoder:0}:(s.video_hdaccelerate={hd_encoder:u,hd_decoder:l},_.info("media:is hddecoder:"+l)),_.info("media:is hdencoder:"+u),_.info("media: media =",(0,f.default)(s)),e.abrupt("return",s);case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.initVideoSettingParam=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u,l,d,p,h,g,m,v,C,I,w,S,E,N;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=void 0,n=void 0,r=void 0,a=void 0,o=void 0,i=void 0,s=void 0,t=coreCommon.isHuaweiCloud($getState().login.serverAddress),n=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_LEVEL,r=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_MBPS,a=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,o=window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_FS,i=4096,s=0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=21;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=18;break}return e.next=12,coreTup.getCallInstance();case 12:return u=e.sent,e.next=15,u.mediaGetHdaccelerate({hdaccelerate:{hdencoder:0,hddecoder:0}});case 15:l=e.sent,0===l.result?(_.info("[IT-Meeting] mediaGetHdaccelerate success, hdencoder = "+l.param.hdaccelerate.hdencoder),s=l.param.hdaccelerate.hdencoder):_.error("[IT-Meeting] mediaGetHdaccelerate failed, result = "+l.result),i=T(s);case 18:_.info("The default bandWidth is: "+i),e.next=31;break;case 21:if(!window.CLIENTCONFIG.ISMOBILE){e.next=30;break}return e.next=24,coreTup.getCallInstance();case 24:return d=e.sent,e.next=27,d.mediaGetHdaccelerate({hd_accelerate:{hdencoder:0,hddecoder:0}});case 27:p=e.sent,0===p.result?(_.info("mediaGetHdaccelerate success, hdencoder = "+p.param.hd_accelerate.hdencoder),s=p.param.hd_accelerate.hdencoder):_.error("mediaGetHdaccelerate failed, result = "+p.result),i=T(s);case 30:_.info("The default bandWidth is: "+i);case 31:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(i<1e3||window.netWorkType===constant.NETWORK_TYPE.TYPE_2G)&&(window.linkSmcIsVideo=!1,_.info("[IT-Meeting] bandwidth < 1000, join conference in audio",window.linkSmcIsVideo)),h=1500,constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===$getState().login.fireWallMode&&(h=1280),!window.CLIENTCONFIG.ISMOBILE&&i>=1024&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==$getState().login.fireWallMode&&(n=40),!window.CLIENTCONFIG.ISWIN){e.next=45;break}return n=40,e.next=39,coreConf.registerNativeWndEvent();case 39:return e.next=41,coreConf.getNativeInterface().notifyGetSystemInfo();case 41:return g=e.sent,e.next=44,coreConf.unregisterNativeWndEvent();case 44:g&&(window.cpu_core_num=g.cpu_core_num,window.cpu_proc_num=g.cpu_proc_num,window.cpu_freq_mhz=g.cpu_freq_mhz,2===window.cpu_core_num&&(2===window.cpu_proc_num||window.cpu_freq_mhz<2e3)?(n=21,r=18400,o=920):2===window.cpu_core_num&&4===window.cpu_proc_num&&(n=32),_.info("set decode level by cpu cores and cpu freq:",n));case 45:return window.CLIENTCONFIG.ISMOBILE&&(n=30,r=72e3,o=3600,(t||window.CLIENTCONFIG.ENABLE_IT_MEETING)&&(n=21,r=18400,o=920)),m={video_level:{level:n,max_mbps:r,max_br:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_MAX_BR,max_fs:o},sdp_ct:i,video_svc_enable:window.CLIENTCONFIG.USE_MEETING?1:0,data_video_svc_cap:{pktmode:2},video_mtu:h,video_datarate:{max_bw:i},clarity_fluency_enable:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_CLARITY_FLUENCY_ENABLE,video_tatic:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_VIDEO_TATIC,video_h264_force_single_pt:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_H264_FORCE_SINGLE_PT,sec_version:{sec10:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec20:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec21:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION,sec30:window.CLIENTCONFIG.VIDEO_CONFIG_MEDIA_SEC_VERSION},video_port_range:{min_port:10004,max_port:65530}},v=void 0,C=void 0,I=void 0,w=void 0,S=void 0,I=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.TmmbrControl"]),w=0,window.CLIENTCONFIG.ISMOBILE?(v={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},1===s&&i>256&&(w=1),C=w?{table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:544,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:1280},{band_width:448,width:640,height:368,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:272,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:32,adjust_bit_rate:400},{band_width:128,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:320,height:176,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}:{table_num:11,param_set:[{band_width:1984,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2304,min_bit_rate:448,adjust_bit_rate:900},{band_width:1856,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:2176,min_bit_rate:448,adjust_bit_rate:900},{band_width:1472,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1792,min_bit_rate:448,adjust_bit_rate:900},{band_width:1408,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1728,min_bit_rate:448,adjust_bit_rate:900},{band_width:960,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:1260,min_bit_rate:448,adjust_bit_rate:900},{band_width:704,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:896,min_bit_rate:448,adjust_bit_rate:900},{band_width:448,width:640,height:360,max_frame_rate:20,min_frame_rate:15,max_bit_rate:640,min_bit_rate:448,adjust_bit_rate:900},{band_width:320,width:480,height:270,max_frame_rate:20,min_frame_rate:15,max_bit_rate:448,min_bit_rate:320,adjust_bit_rate:640},{band_width:192,width:320,height:180,max_frame_rate:20,min_frame_rate:15,max_bit_rate:320,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:192,min_bit_rate:32,adjust_bit_rate:200},{band_width:64,width:176,height:98,max_frame_rate:20,min_frame_rate:15,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]}):(v={is_video_bw_include_audio:1,is_video_bw_subduct_aux:1,is_h264_hp_same_with_bp:1,is_video_bw_subduct_aux_recv:0},C={table_num:11,param_set:[{band_width:1984,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2304,min_bit_rate:896,adjust_bit_rate:2304},{band_width:1856,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:2176,min_bit_rate:896,adjust_bit_rate:2176},{band_width:1472,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1792,min_bit_rate:896,adjust_bit_rate:1792},{band_width:1408,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1728,min_bit_rate:896,adjust_bit_rate:1728},{band_width:960,width:1280,height:720,max_frame_rate:30,min_frame_rate:22,max_bit_rate:1280,min_bit_rate:896,adjust_bit_rate:1433},{band_width:704,width:960,height:540,max_frame_rate:30,min_frame_rate:22,max_bit_rate:896,min_bit_rate:640,adjust_bit_rate:900},{band_width:448,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:640,min_bit_rate:192,adjust_bit_rate:900},{band_width:320,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:512,min_bit_rate:192,adjust_bit_rate:640},{band_width:192,width:768,height:432,max_frame_rate:25,min_frame_rate:10,max_bit_rate:384,min_bit_rate:192,adjust_bit_rate:400},{band_width:128,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:192,min_bit_rate:96,adjust_bit_rate:200},{band_width:64,width:512,height:288,max_frame_rate:15,min_frame_rate:10,max_bit_rate:96,min_bit_rate:32,adjust_bit_rate:100}]},E=window.localStorage.getItem("svc_video_level_tbl_id"),isNullOrEmpty(E)&&(E=0),(E<0||E>=3)&&(E=0),S=constant.SvcResolutionPCTable[E],window.CLIENTCONFIG.ISWIN&&2===window.cpu_core_num&&2===window.cpu_proc_num&&(S=constant.SvcResolutionPCTable[constant.SVCResolutionLevel.STANDARD])),m.video_resolution_table=C,window.CLIENTCONFIG.ISBIGWIN||(m.svc_resolution_table=S),m.video_resolution_adj_num=4,m.fluid_control=I,m.bandwidth_calc_policy=v,N=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,m.video_hdaccelerate={hd_encoder:w,hd_decoder:N},window.CLIENTCONFIG.ISMOBILE?m.video_hdaccelerate={hd_encoder:w,hd_decoder:0}:(m.video_hdaccelerate={hd_encoder:w,hd_decoder:N},_.info("media:视频配置参数(设置降档表相关) media hard code:"+N)),_.info("media:视频配置参数(设置降档表相关) media =",(0,f.default)(m)),e.abrupt("return",m);case 61:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),E=function(){var e=window.CLIENTCONFIG,t=$getState().login,n=t.serverAddress,r=coreCommon.isHuaweiCloud(n),a=r?0:parseInt(e["Device.ComCfg.Media.VideoShaping"]),o={rtp_hdr_ext:1,video_ars:{ars:parseInt(e["Device.ComCfg.Media.VideoARS"]),ars_ctrl_framesize:parseInt(e["Device.ComCfg.Media.VideoARSFrameSize"]),ars_ctrl_framerate:parseInt(e["Device.ComCfg.Media.VideoARSFrameRate"]),ars_ctrl_bitrate:parseInt(e["Device.ComCfg.Media.VideoARSBitRate"]),ars_ctrl_fec:parseInt(e["Device.ComCfg.Media.VideoArsFec"]),ars_data_shaping:a}};return _.info("media:自动降速配置参数 media =",(0,f.default)(o)),o},N=function(){var e={h264_quality_level_table:{param_setnumber:4,quality_level_param_set:[{codec_name:"",pt:105,profile_idc:66,packet_mode:1,level_asymmetry:1,priority:3},{codec_name:"",pt:106,profile_idc:66,packet_mode:0,level_asymmetry:1,priority:4},{codec_name:"",pt:107,profile_idc:100,packet_mode:1,level_asymmetry:1,priority:1},{codec_name:"",pt:108,profile_idc:100,packet_mode:0,level_asymmetry:1,priority:2}]}};return _.info("media:BP/HP参数 media =",(0,f.default)(e)),e},T=(t.reConfigVideoAndDataSetting=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},e.next=3,S();case 3:return t.media=e.sent,e.next=6,coreTup.getCallInstance();case 6:return n=e.sent,e.next=9,n.config(t);case 9:return e.next=11,v();case 11:return r=e.sent,e.next=14,n.config(r);case 14:"android"===window.CLIENTCONFIG.PLATFORM&&(a=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,_.info("android hard decoder enter 1",a),window.isHardDecodeToNative(a));case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.restoreMAAConfControl=function(){var e=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return _.info("restoreMAAConfControl"),t={conf:{use_maa_confctrl:1}},e.next=6,coreTup.getCallInstance();case 6:n=e.sent,n.config(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=4096,n=window.netWorkType;return _.info("The current network type is: "+n+", bSupport Hdacc:"+e),n===constant.NETWORK_TYPE.TYPE_WIFI?t=parseInt(g["Device.ComCfg.Media.Mobile.WifiSoftCodedTotalBandwidth"]):n===constant.NETWORK_TYPE.TYPE_4G?t=parseInt(g["Device.ComCfg.Media.Mobile.4GTotalBandwidth"]):n===constant.NETWORK_TYPE.TYPE_3G&&(t=parseInt(g["Device.ComCfg.Media.Mobile.3GTotalBandwidth"])),t}),b=function(){_.info("getPFourbfcpLogic");try{var e=window.fs;if(e){var t=APP_DATA_PATH+"/ImpBfcpTLS",n=t+"/p4bfcp.txt";if(e.existsSync(n))return e.readFileSync(n).toString()}}catch(e){_.error("getPFourbfcpLogic",e.toString())}};t.serPointPickupCfg=function(){var e={service:{server_right:{type:7,active_accesscode:g["Device.ComCfg.Service.pointPickupActive"],deactive_accesscode:"",register:0,right:0}}};return _.info("serPointPickupCfg =",(0,f.default)(e)),e},t.serGroupPickupCfg=function(){var e={service:{server_right:{type:6,active_accesscode:g["Device.ComCfg.Service.groupPickupActive"],deactive_accesscode:"",register:0,right:0}}};return _.info("serGroupPickupCfg =",(0,f.default)(e)),e}},235:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.buildStg=t.startPortDetect=t.startFireWallDetect=t.checkStgReConnect=t.updateStgAuthInfo=t.portDetect=t.fireWallDetect=t.destroyStgTunnel=t.buildStgTunnel=t.updateFireWallAndSipInfo=t.updateStgInfo=t.stgTunnelDisconnected=void 0;var a=n(69),o=r(a),i=n(127),s=r(i),c=n(3),u=r(c),f=n(141),l=r(f),d=n(1),p=r(d),h=n(2),_=r(h),g=(t.startFireWallDetect=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a,o=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ startFireWallDetect ]  svnUri: "+t),e.next=3,(0,m.getLoginModel)();case 3:return n=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return r=e.sent,a=new u.default(function(e,a){var i=function(){var t=(0,_.default)(p.default.mark(function t(r){var i;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:i=r.param,i&&0===i.result?(C.info("[ fireWallDetectResult ] success. The fireWall mode is  ",i.fire_wall_mode),n.fireWallDetectResult=i,e(i)):(C.error("[ fireWallDetectResult ] failed."),a((0,s.default)({},r,{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:m.ErrorType.uportal})));case 2:case"end":return t.stop()}},t,o)}));return function(e){return t.apply(this,arguments)}}();r.setNotifyFunc(360463,i),E(t)}),e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.startPortDetect=function(){var e=(0,_.default)(p.default.mark(function e(t,n){var r,a,i,c=this;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ startPortDetect ] svnUri : "+t+", detectport"+n),e.next=3,(0,m.getLoginModel)();case 3:return r=e.sent,e.next=6,coreTup.getUportalInstance();case 6:return a=e.sent,i=new u.default(function(e,r){var i=function(){var t=(0,_.default)(p.default.mark(function t(n){var a;return p.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:C.info("[ portDetectResult ]"),a=n.param,a?(C.info("portDetectResultdetect success. The fireWall mode is  "+(0,o.default)(a)),e(a)):(C.error("port detect failed."),r((0,s.default)({},n,{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:m.ErrorType.uportal})));case 3:case"end":return t.stop()}},t,c)}));return function(e){return t.apply(this,arguments)}}();a.setNotifyFunc(360475,i),N(t,n)}),e.abrupt("return",i);case 9:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),t.buildStg=function(){var e=(0,_.default)(p.default.mark(function e(){var t,n,r,a,o,i,c,f,l,d,h;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:if(t=e.sent,n=t.stgUri,r=t.stgAccount,a=t.useIM,o=t.fireWallMode,i=t.maaProxyAddress,c=t.isSupportProxy,!t.isHWUC){e.next=6;break}return e.abrupt("return",u.default.resolve());case 6:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.ISBIGWIN){e.next=8;break}return e.abrupt("return",u.default.resolve());case 8:if(!coreCommon.isMobile()){e.next=12;break}return C.info("[ buildStg ] mobile can not buildStg"),i&&!c&&(C.info("[ buildStg ] mobile use tls"),t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",u.default.resolve());case 12:if(f=!1,void 0===n||""===n||";"===n||";;"===n||";;;"===n){e.next=38;break}if(C.info("[ buildStg ] uportal has stg stgUri;"),!c&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP!==o&&constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN!==o){e.next=33;break}return e.next=18,coreSecurity.getPasswordManager();case 18:return l=e.sent,e.next=21,l.getPassword("stgPassword");case 21:return d=e.sent,e.next=24,S({stgUri:n,stgAccount:r,stgPassword:d});case 24:if(h=e.sent,h.result){e.next=27;break}return e.abrupt("return",(0,m.LoginError)((0,s.default)({},h,{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR,errorType:m.ErrorType.uportal})));case 27:return f=!0,t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return",h);case 33:t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),C.info("[ buildStg ]no need to buildStg, only build stg for im mode or fireWallMode is 0 or 1; useIM:"+a+" fireWallMode:"+o);case 36:e.next=42;break;case 38:return C.info("[ buildStg ]no stgUri, no need to buildStg"),t.socketMode=f?constant.IM_STG_MODE.USE_STG:constant.IM_STG_MODE.NO_STG,i&&!c&&(t.socketMode=constant.IM_STG_MODE.USE_TLS),e.abrupt("return");case 42:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()),m=n(164),v=n(220),C=coreLogger.getLogger("login")("stg"),I=t.stgTunnelDisconnected=function(){var e=(0,_.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("stgTunnelDisconnected"),e.next=3,(0,m.getLoginModel)();case 3:t=e.sent,t.set({isBuildStgSuc:!1}),window.dispatchEvent(new Event("stgTunnelDisconnected"));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),w=t.updateStgInfo=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,d,h,_,g,v,I,w;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ updateStgInfo ]"),e.next=3,(0,m.getLoginModel)();case 3:if(n=e.sent,r=t.address,a=0===t.result,o=n.stgUri,i=n.eserverStgUri,s=0,c="",!a){e.next=27;break}if(u=i.split(";"),f=o.split(";"),d=f.length,r){e.next=18;break}c=u[0],s=0,e.next=27;break;case 18:h=0;case 19:if(!(h<d)){e.next=27;break}if(-1===f[h].indexOf(r)){e.next=24;break}return c=u[h],s=h,e.abrupt("break",27);case 24:h++,e.next=19;break;case 27:return _=c.split(":"),g=(0,l.default)(_,2),v=g[0],I=g[1],w={stgUriUsed:r,currentNum:s,isBuildStgSuc:a,eServerAddress:v,eServerPort:parseInt(I)},n.set(w),e.abrupt("return",w);case 31:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=(t.updateFireWallAndSipInfo=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,d,h,_,g,v,I,w,S,E,N,T,b,O,L,A,y,x;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ updateFireWallAndSipInfo ]"),e.next=3,(0,m.getLoginModel)();case 3:n=e.sent,r=n.svnUri,a=n.sipStgUri,o=n.sipUri,i=r.split(";"),s=a.split(";"),c=o.split(";"),u="",u=constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_ONLY_HTTP===t?s:constant.FIREWALL_MODE.LOGIN_E_FIREWALL_MODE_HTTP_AND_SVN===t?i:c,f=u[0]?u[0].split(":"):["",0],d=(0,l.default)(f,2),h=d[0],_=d[1],g=u[1]?u[1].split(":"):["",0],v=(0,l.default)(g,2),I=v[0],w=v[1],S=u[2]?u[2].split(":"):["",0],E=(0,l.default)(S,2),N=E[0],T=E[1],b=u[3]?u[3].split(":"):["",0],O=(0,l.default)(b,2),L=O[0],A=O[1],y=!0,x={sipServerAddress:h,sipServerPort:parseInt(_),sipServerBackup1:I,sipServerPortBackup1:w,sipServerBackup2:N,sipServerPortBackup2:T,sipServerBackup3:L,sipServerPortBackup3:A,fireWallMode:t,isGetFirewallRes:y},n.set(x);case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.buildStgTunnel=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,d,h,_,g,S,E,N,T,b=t.stgUri,O=t.stgAccount,L=t.stgPassword;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(C.info("[ buildStgTunnel ]"),C.info("<account_login><5_build_stg>begin"),n=b.split(";"),r=n.length,a=new Array,o=0;o<r;o++)i=n[o].split(":"),s=(0,l.default)(i,2),c=s[0],u=s[1],f={server_uri:c,server_port:parseInt(u)},a.push(f);return d=window.EXEC_PATH,h={stg_num:r,stg_servers:a,user_name:O,password:L,ca_path:""},e.next=10,coreTup.getUportalInstance();case 10:return _=e.sent,_.setNotifyFunc(360466,I),g=PromiseObject(),e.next=15,(0,m.getLoginModel)();case 15:return S=e.sent,S.shouldBuildStg=!0,e.next=19,_.buildStgTunnel(h,function(e){g.resolve(e)});case 19:return e.next=21,g;case 21:if(E=e.sent,N=E.param,0!==N.result){e.next=35;break}return e.next=26,(0,v.stopLocalServer)();case 26:return e.next=28,w(N);case 28:return T=e.sent,S.set({isBuildStgSuc:!0}),C.info("<account_login><5_build_stg>end ok"),C.info("buildStg build success."),e.abrupt("return",{result:!0,stgInfo:T});case 35:return S.set({isBuildStgSuc:!1}),C.info("<account_login><5_build_stg>end failed"),C.error("buildStg build fail."),e.abrupt("return",{result:!1,errorCode:m.UErrorCode.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR});case 39:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),E=(t.destroyStgTunnel=function(){var e=(0,_.default)(p.default.mark(function e(){var t,n,r,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:return t=e.sent,C.info("[ destroyStgTunnel ]"),e.next=6,coreTup.getUportalInstance();case 6:return n=e.sent,r=PromiseObject(),n.destroyStgTunnel(function(e){r.resolve(e)}),e.next=11,r;case 11:if(a=e.sent,o=a.param,0!==o.result){e.next=19;break}return t.set({isBuildStgSuc:!1}),C.info("destroyStgTunnel success."),e.abrupt("return",{result:!0});case 19:C.error("destroyStgTunnel fail.");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.fireWallDetect=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("[ fireWallDetect ]"),n=T(t,0),e.next=4,coreTup.getUportalInstance();case 4:r=e.sent,r.fireWallDetect(n);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),N=t.portDetect=function(){var e=(0,_.default)(p.default.mark(function e(t,n){var r,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=T(t,n),e.next=3,coreTup.getUportalInstance();case 3:a=e.sent,a.portDetect(r);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),T=function(e,t){for(var n=e.split(";"),r=n.length,a=new Array,o=0;o<r;o++){var i=n[o].split(":"),s=(0,l.default)(i,2),c=s[0],u=(s[1],{server_uri:c,server_port:t>0?t:0});a.push(u)}return{server_num:r,servers:a}};t.updateStgAuthInfo=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a=t.account,o=t.password;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={user_name:a,password:o},e.next=3,coreTup.getUportalInstance();case 3:r=e.sent,r.updateStgAuthInfo(n);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkStgReConnect=function(){var e=(0,_.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("checkStgReConnect "),e.next=3,(0,m.getLoginModel)();case 3:if(t=e.sent,t.isBuildStgSuc){e.next=15;break}return C.info("enter buildStg"),e.prev=6,e.next=9,g();case 9:e.next=15;break;case 11:throw e.prev=11,e.t0=e.catch(6),C.error("buildStg error"),"reconnect stg error";case 15:case"end":return e.stop()}},e,void 0,[[6,11]])}));return function(){return e.apply(this,arguments)}}()},241:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){return B.info("[ checkHasProxyAndStgurl ]"),(0,x.getLoginModel)(function(e){return e.isSupportProxy&&!e.stgUri?(0,x.LoginError)({errorCode:R.UErrorCode.LOGIN_ERR_HAS_PROXY_NO_STG,errorType:constant.LOGIN_ERROR_TYPE.uportal}):s.default.resolve()})}function o(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];B.info("enableAutoLogin",e),window.CLIENTCONFIG.ISMOBILE?window.stroage.setFastLogin(e):remote.getGlobal("remoteVars").disable_auto_login=!e}Object.defineProperty(t,"__esModule",{value:!0}),t.checkShowPrivacy=t.ipLogin=t.checkForceSwtichAccount=t.initLoginInfo=t.reLogineServer=t.login=t.promiseToString=t.cancelLogin=t.makeLoginCancelable=t.loginPromise=void 0;var i=n(3),s=r(i),c=n(1),u=r(c),f=n(69),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ initServices ]"),e.next=3,(0,x.getLoginModel)();case 3:if(t=e.sent,n=t.useIM,r=t.useSip,a=t.isMultiDeviceLogined,o=t.useEsight,i=t.isMobile,B.info("login success initServices: ",{useIM:n,useSip:r,isMultiDeviceLogined:a,isMobile:i,useEsight:o}),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=13;break}return e.next=13,(0,P.resetSipResumeFlag)();case 13:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=26;break}if(e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=19;break}return e.next=18,window.isFloatWindow;case 18:e.t0=e.sent;case 19:if(!(s=e.t0)){e.next=24;break}B.info("the window is float "),e.next=26;break;case 24:return B.error("has no activity, login err!!!!!"),e.abrupt("return",(0,x.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 26:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ checkDuplicateLogin ]"),e.next=3,(0,x.getLoginModel)();case 3:if(t=e.sent,!t.loginDisable||t.isTempLogin){e.next=8;break}return e.abrupt("return",(0,x.LoginError)({errorCode:"duplicateLogin",errorType:constant.LOGIN_ERROR_TYPE.common}));case 8:return t.setLoginStatus(!0),e.abrupt("return",s.default.resolve(t));case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,i,c,f,l,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ prepareLogin ]"),B.info("<account_login><1_prepareLogin>begin"),window.mutiLanguage="FALSE",e.next=5,(0,x.getLoginModel)();case 5:if(t=e.sent,!t.isTempLogin){e.next=20;break}return B.info("prepareLogin: handle tempLogin info"),t.isTempLogin=!0,t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,n=$getState(),r=n.conf,a=r.confTempAcsAccount,i=r.confTempAcsUportalAddress,c=r.confTempAcsUportalPort,e.next=14,coreSecurity.getPasswordManager();case 14:return f=e.sent,e.next=17,f.getPassword("password");case 17:l=e.sent,t.set({account:a,displayAccount:a,password:l,serverAddress:i,serverPort:c}),t.set({password:l});case 20:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({serverAddress:window.getLinkSmcUportalAddress,serverPort:window.getLinkSmcUportalPort})):(d=appService.getItUserInfo(),p=window.CLIENTCONFIG.DEFAULT_UPORTAL_SERVER,window.getUportalServer()&&(p=window.getUportalServer()),t.useIM=!1,window.CLIENTCONFIG.USE_IM=!1,t.set({loginAccount:d.contactsId,password:"*******",serverAddress:p,serverPort:8443}))),window.CLIENTCONFIG.ISMOBILE||o(!1),B.info("[ prepareLogin ] ok! "),B.info("<account_login><1_prepareLogin>end ok"),!window.CLIENTCONFIG.ISMOBILE){e.next=28;break}return e.abrupt("return",window.getCurrentNetWorkType());case 28:return e.abrupt("return",s.default.resolve(0));case 29:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f,l,d,p,h,_,g;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(B.info("[ checkLoginInfo ]"),B.info("<account_login><2_checkLoginInfo>begin"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return e.abrupt("return");case 4:return e.next=6,(0,x.getLoginModel)();case 6:if(t=e.sent,1!==(n=t.authType)){e.next=12;break}return B.info("oAuth no need checkLoginInfo"),B.info("<account_login><2_checkLoginInfo>end ok"),e.abrupt("return");case 12:if(r=t.displayAccount,a=t.account,o=t.password,i=t.serverAddress,s=t.serverPort,c=t.isResume,f=t.isTempLogin,l=t.status,d=void 0,!c&&!l){e.next=22;break}return e.next=17,coreSecurity.getPasswordManager();case 17:return p=e.sent,e.next=20,p.getPassword("password");case 20:d=e.sent,t.password=d;case 22:if(window.CLIENTCONFIG.ISBIGWIN||window.isPluginEnv){e.next=30;break}if(h=d||t.password,r&&h){e.next=27;break}return B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,x.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c}));case 27:if(-1===r.indexOf(" ")){e.next=30;break}return B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,x.LoginError)({result:!1,errorCode:"LOGIN_ACCOUNT_HAS_SPACE",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c}));case 30:if(coreUt.utConfigAccountInfo({configAccount:r}),i&&s){e.next=34;break}return B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,x.LoginError)({result:!1,errorCode:"LOGIN_ADDRESS_OR_PORT_EMPTY",errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:c}));case 34:return t.isOAuth=!1,t.OAuthUrl="",t.serverPort=parseInt(s),e.next=39,coreSecurity.getPasswordManager();case 39:if(_=e.sent,e.t0=o,!e.t0){e.next=44;break}return e.next=44,_.setPassword("password",o);case 44:return e.next=46,coreHttp.initHttpTrans();case 46:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||!window.noactivity){e.next=60;break}if(e.t1=window.CLIENTCONFIG.ISMOBILE,!e.t1){e.next=52;break}return e.next=51,window.isFloatWindow;case 51:e.t1=e.sent;case 52:if(!(g=e.t1)){e.next=57;break}B.info("the window is float "),e.next=60;break;case 57:return B.error("has no activity, login err!!!"),B.info("<account_login><2_checkLoginInfo>end failed"),e.abrupt("return",(0,x.LoginError)({result:!1,errorCode:"webView has hide",errorType:constant.LOGIN_ERROR_TYPE.common}));case 60:B.info("[ checkLoginInfo ] ok! "),B.info("<account_login><2_checkLoginInfo>end ok");case 62:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=3;break}return B.info("is big win can not doDetectFireWall"),e.abrupt("return");case 3:if(!coreCommon.isMobile()){e.next=6;break}return B.info("[ doDetectFireWall ] mobile can not doDetectFireWall"),e.abrupt("return");case 6:return B.info("[ doDetectFireWall ]"),B.info("<account_login><4_firewall>begin"),e.next=10,(0,x.getLoginModel)();case 10:return t=e.sent,t.isInDetectFireWall=!0,e.next=14,(0,O.checkDetectFireWall)();case 14:return n=e.sent,t.isInDetectFireWall=!1,coreCommon.dispatchModuleEvent("login",{event:"detectFirewall",code:0}),B.info("<account_login><4_firewall>end ok"),e.abrupt("return",n);case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:return t=e.sent,t.isInBuildStg=!0,e.next=6,(0,A.buildStg)();case 6:return n=e.sent,t.isInBuildStg=!1,coreCommon.dispatchModuleEvent("login",{event:"buildStg",code:0}),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ loginSuccess ]"),e.next=3,(0,x.getLoginModel)();case 3:t=e.sent,window.retryUportalLoginTimes=0,window.shouldStopRertyLogin=!0,window.baseTimeInterval=0,t.sipLoginOnly||(B.info("[ loginSuccess ] not sipLoginOnly, enableautologin!"),o()),t.isTempLogin||($(t.account,window.isHubEnv).then(function(){B.info("[maxhub] go into setLoginRecord"),(0,L.setLoginRecord)()}),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(n=window.getRoute(),isNullOrEmpty(window.handleJoinTempConfNoNameURL)),t.isMobile&&document.addEventListener("pause",k.storeAppCache,!1)),coreCommon.dispatchModuleEvent("login",{event:"uportal",code:0}),(0,k.storeAppCache)(),t.clearPassword(),coreIm.initChangeShowRecentInfo(),B.info("[ loginSuccess ] ok! "),t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.FINISH;case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=6;break}return B.info("[IT-Meeting] no need to loadConfigFromDB"),e.abrupt("return");case 6:return B.info("[ loadConfigFromDB ]"),t.isInLoadConfigFromDB=!0,e.next=10,(0,y.loadUserConfigFromDB)();case 10:t.isInLoadConfigFromDB=!1,window.CLIENTCONFIG.ISBIGWIN?(coreSetting.saveChrUploadState(!0),B.info("big win or maxhub chr is AUTO!")):window.isHubEnv&&coreSetting.saveChrUploadState(!0),B.info("[ loadConfigFromDB ] ok! ",handlePhoneNumber(t.account));case 13:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:if(t=e.sent,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!t.isTempLogin){e.next=6;break}return B.info("[IT-Meeting] no need to initPrivateDB"),e.abrupt("return");case 6:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=9;break}return B.info("[bigwin] no need to initPrivateDB"),e.abrupt("return");case 9:return B.info("[ initPrivateDB ]"),t.isInInitPrivateDB=!0,e.next=13,coreDb.initSQLitePrivateDB({account:t.account});case 13:t.isInInitPrivateDB=!1,B.info("[ initPrivateDB ] ok! ",handlePhoneNumber(t.account));case 15:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),E=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:t=e.sent,window.CLIENTCONFIG.ISMOBILE&&(B.info("[ initMobileNative ]",handlePhoneNumber(t.account)),window.initMobileNative());case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:return t=e.sent,isNullOrEmpty(t.real_user_account)||isNullOrEmpty(t.authToken)||(0,G.checkUpgrade)(!1,t.authToken,t.real_user_account),B.info("[ serviceReadyLoadData ]"),B.info("serviceReadyLoadData, set isOffline false"),window.isOffline=!1,t.setLoginStatus(!1,!0),(0,k.storeAppCache)(),n={key:"confPageShowType",value:"true"},e.next=12,coreDb.saveUserConfig(n);case 12:return r=t.isSupportAS,a={key:"asInfo",value:(0,l.default)(r)},e.next=16,coreDb.saveUserConfig(a);case 16:return coreCommon.dispatchModuleEvent("login",{event:"total",code:0}),e.next=19,(0,x.getLoginModel)();case 19:return o=e.sent,i=handlePhoneNumber(o.displayAccount),s=handlePhoneNumber(o.show_account),c=handlePhoneNumber(o.account),f={displayAccount:"",showAccount:"",account:""},isNullOrEmpty(i)||(f.displayAccount=i),isNullOrEmpty(s)||(f.showAccount=s),isNullOrEmpty(c)||(f.account=c),appService.debugInfoPrint(f),e.next=30,coreDb.queryUserConfigList({key:"hasOpenPush"});case 30:return d=e.sent,(isNullOrEmpty(d)||"true"===d[0].value)&&E(),e.next=34,(0,P.registerResumeEvent)();case 34:return(0,k.storeAppCache)(),B.info("serviceReadyLoadData, status = "+t.status),window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv||$getState().login.sipLoginOnly||(0,U.checkHuaweiPhonePushSetting)(),B.info("[ serviceReadyLoadData ] ok! "),e.abrupt("return",{result:!0});case 39:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.enableAutoLogin=o;var T=n(211),b=n(228),O=n(220),L=n(166),A=n(235),y=n(408),x=n(136),R=n(164),M=n(289),k=n(185),P=n(221),D=n(293),U=(n(260),n(310),n(411)),F=n(229),G=n(292),B=coreLogger.getLogger("logic")("login"),W=t.loginPromise={loginPromise:null,sipLoginPromise:null,eserverLoginPromise:null,umserverLoginPromise:null},V=t.makeLoginCancelable=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.LOGIN_PROMISE_KEY.main_login;B.info("<account_login_cancel>track start:"+t);var r=new PromiseObject;switch(n){case constant.LOGIN_PROMISE_KEY.main_login:W.loginPromise=r;break;case constant.LOGIN_PROMISE_KEY.sip_login:W.sipLoginPromise=r;break;case constant.LOGIN_PROMISE_KEY.eserver_login:W.eserverLoginPromise=r;break;case constant.LOGIN_PROMISE_KEY.umserver_login:W.umserverLoginPromise=r}return e.then(function(e){(0,x.getLoginModel)().then(function(n){B.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+n.hasLoginCanceled),n.hasLoginCanceled?r.reject({isCanceled:!0}):r.resolve(e)})}).catch(function(e){(0,x.getLoginModel)().then(function(n){B.info("<account_login_cancel>track end -> name:"+t+", hasCanceled : "+n.hasLoginCanceled),n.hasLoginCanceled?r.reject({isCanceled:!0}):r.reject(e)})}),r},H=(t.cancelLogin=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:if(t=e.sent,t.hasLoginCanceled=!0,B.info("<account_login_cancel>do cancel start: "+H(W.loginPromise)+","+H(W.sipLoginPromise)+","+H(W.eserverLoginPromise)+","+H(W.umserverLoginPromise)),e.prev=5,isNullOrEmpty(W.loginPromise)){e.next=9;break}return e.next=9,W.loginPromise;case 9:if(isNullOrEmpty(W.sipLoginPromise)){e.next=12;break}return e.next=12,W.sipLoginPromise;case 12:if(isNullOrEmpty(W.eserverLoginPromise)){e.next=15;break}return e.next=15,W.eserverLoginPromise;case 15:if(isNullOrEmpty(W.umserverLoginPromise)){e.next=18;break}return e.next=18,W.umserverLoginPromise;case 18:B.info("<account_login_cancel>do cancel end"),e.next=24;break;case 21:e.prev=21,e.t0=e.catch(5),B.info("<account_login_cancel>do cancel end. "+(0,l.default)(e.t0));case 24:case"end":return e.stop()}},e,void 0,[[5,21]])}));return function(){return e.apply(this,arguments)}}(),t.promiseToString=function(e){return"("+!isNullOrEmpty(e)+","+(isNullOrEmpty(e)?"undefined":e.status)+")"});t.login=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,o,i=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:return t=e.sent,e.next=5,(0,x.getMyInfo)();case 5:return n=e.sent,t.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.LOGINING,t.isResume=i,t.isTempLogin=s,t.desc=c,r=(0,b.getUportalApi)().loginToUportal,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=(0,b.getUportalApi)().uportalAllonline,window.pcLoginState()&&(t.isMultiDeviceLogined=!0)),window.CLIENTCONFIG.ENABLE_IT_MEETING||((0,D.initService)("pre login"),!0===(o=n.isOffToLine)||i||coreUi.initAvatarMap()),e.abrupt("return",_().then(function(){return V(g(),"prepareLogin")}).then(function(){return V(m(),"checkLoginInfo")}).then(function(){return V(r(),"loginAuth")}).then(function(){return V(a(),"checkHasProxyAndStgurl")}).then(function(){return V(q(),"checkShowPrivacy")}).then(function(){return V(S(),"initPrivateDB")}).then(function(){return V(I(),"loginSuccess")}).then(function(){return V(v(),"doDetectFireWall")}).then(function(){return V(C(),"doBuildStg")}).then(function(){return V(w(),"loadConfigFromDB")}).then(function(){return V(h(),"initServices")}).then(function(){return V(N(),"serviceReadyLoadData")}).catch(M.handleLoginError));case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reLogineServer=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:return t=e.sent,B.info("[ reLogineServer ]",handlePhoneNumber(t.account)),e.abrupt("return",coreIm.reLoginToeServer().then(function(){return coreIm.registerEvent()}).then(function(){return B.info("[ reLogineServer ] ok! ",handlePhoneNumber(t.account)),!0}).catch(function(e){return!1}));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();window.startCallout=(0,p.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.dealStartCall(),B.info("startCallout, set isOffline false"),window.isOffline=!1,window.webView.switchToFront();case 4:case"end":return e.stop()}},e,void 0)})),window.handlePluginOneKeyConf=function(){var e=(0,p.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.handleJoinTempConfNoName(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),window.handlePluginTempUserInfo=(0,p.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:B.info("deal temp get user info 10"),t="",n=JSON.parse(t),window.oneKeyConfTempUserInfo(n);case 5:case"end":return e.stop()}},e,void 0)})),window.oneKeyConfTempUserInfo=function(){var e=(0,p.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n={},!t||void 0===t.result&&void 0===t.reslut?n=t:(n.param=t,void 0!=t.reslut&&(n.param.result=t.reslut)),(0,F.handletempsipconfinfo)(n);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var $=function(){var e=(0,p.default)(u.default.mark(function e(t,n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=8;break}return B.info("start maxhub init"),r={isAutoLogin:!0,isRememberPassword:!0},e.next=5,(0,x.getLoginModel)();case 5:a=e.sent,a.set(r),coreConf.initAsPairServer();case 8:return e.abrupt("return",s.default.resolve(0));case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),Y=(t.initLoginInfo=function(){var e=(0,p.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("[ initLoginInfo ]"),e.next=3,(0,L.loadLoginSetting)();case 3:return e.next=5,(0,L.loadLoginRecordList)();case 5:return t=e.sent,e.next=8,Y();case 8:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=12;break}if(!window.anonymousJoinConf){e.next=12;break}return e.next=12,coreConf.resumeDeviceInfo();case 12:return e.abrupt("return",t);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkForceSwtichAccount=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,x.getLoginModel)();case 2:t=e.sent,n=t.switchAccount,isNullOrEmpty(n)||isNullOrEmpty(n.tempAccount)||(r={displayAccount:n.tempAccount,account:n.tempAccount,password:"",serverAddress:n.tempServerAddress,serverPort:n.tempServerPort},t.set(r),a={},t.switchAccount=a);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());window.handleSwitchAccount=function(){var e=(0,p.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.account,r=t.serverAddress,a=t.serverPort,o=t.noNeedLogout,e.next=3,(0,x.getLoginModel)();case 3:if(i=e.sent,window.anonymousJoinConf||o){e.next=7;break}return e.next=7,(0,D.logout)(!0,!0);case 7:B.info("handleSwitchAccount update login info"),s={account:n,displayAccount:n,password:"",serverAddress:r,serverPort:a},c={tempAccount:n,tempServerAddress:r,tempServerPort:a},i.set(s),i.switchAccount=c;case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var q=(t.ipLogin=function(){var e=(0,p.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return B.info("debug info ipLogin begin"),coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),coreCall.registerCallEvent(),e.next=7,(0,O.ipCallConfig)();case 7:throttle((0,p.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case 1:case"end":return e.stop()}},e,void 0)})),1e3)(),B.info("debug info ipLogin end");case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkShowPrivacy=function(){var e=(0,p.default)(u.default.mark(function e(){var t,n,r,a,o,i,s,c,f,l,d,p,h,_;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=PromiseObject(),!window.CLIENTCONFIG.ISMOBILE){e.next=14;break}if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=8;break}return e.next=5,appService.isLaunchFromPush();case 5:e.t0=e.sent,e.next=9;break;case 8:e.t0=!1;case 9:if(n=e.t0,!window.CLIENTCONFIG.ISMOBILE||!n){e.next=14;break}return B.info("[checkShowPrivacy] skip for isLaunchFromPush : "+n),t.resolve(!0),e.abrupt("return",t);case 14:return e.next=16,(0,x.getLoginModel)();case 16:if(r=e.sent,a=r.account,o=r.isCheckPrivacy,i=r.isTempLogin,s=r.privacy_version,!(window.isHubEnv||o||window.CLIENTCONFIG.ISBIGWIN||i||window.CLIENTCONFIG.ENABLE_IT_MEETING||window.isPluginEnv)){e.next=22;break}return B.error("this is maxhub environment or resume, uncheck privacy"),t.resolve(!0),e.abrupt("return",t);case 22:return e.prev=22,B.info("[checkShowPrivacy] start"),r.set({isCheckPrivacy:!0}),e.next=27,coreDb.queryLoginSetting({key:"firstLoginAccount"});case 27:return c=e.sent.value,e.next=30,coreDb.queryLoginSetting({key:a+"_privacyVersion"});case 30:if(f=e.sent.value,l=!!f,f=f||"V01.00",s=s||"V01.00",d=f.split("V")[1],p=s.split("V")[1],h={oprEvent:constant.OPR_EVENT_TYPE.PRIVACY,privacyver:s},void 0!==c){e.next=46;break}return e.next=40,coreDb.saveLoginSetting({key:"firstLoginAccount",value:a});case 40:return e.next=42,coreDb.saveLoginSetting({key:a+"_privacyVersion",value:s});case 42:(0,T.recordPrivacy)(h),t.resolve(!0),e.next=47;break;case 46:c!==a&&!l||p>d?(B.info("[checkShowPrivacy] show privacy"),_=function(){(0,T.recordPrivacy)(h),r.setLoginStatus(!0),p>=d&&coreDb.saveLoginSetting({key:a+"_privacyVersion",value:s}),t.resolve(!0)},delegate(_,"onAgreePrivacy"),r.setLoginStatus(!1,!0),window.goRoute("firstLoginPrivacy")):t.resolve(!0);case 47:return e.abrupt("return",t);case 50:return e.prev=50,e.t1=e.catch(22),B.error("[checkShowPrivacy] error",e.t1.toString()),t.resolve(!0),e.abrupt("return",t);case 55:case"end":return e.stop()}},e,void 0,[[22,50]])}));return function(){return e.apply(this,arguments)}}())},248:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.SvcAttendanceManager=t.dealWithWatchConfList=t.handleSvcShowAttChangeMobile=t.handleSvcShowAttChange=t.handleSvcClickJSPage=t.handleSvcWatchChange=t.handleSvcLockWatch=t.handleSSRCURL=t.loggerPrintSSRC=t.loggerPrint=void 0;var a,o,i=n(401),s=r(i),c=n(4),u=r(c),f=n(123),l=r(f),d=n(69),p=r(d),h=n(1),_=r(h),g=n(2),m=r(g),v=n(647),C=coreLogger.getLogger("conf")("logic/video/svcAttendanceManager");window.hasDealAttendeeUpdateEvent=0,window.isChangeOfBroadcast=!1;window.multiStreamPageInfoChangeNotify=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,v,I,S,N,T,b,L,A,y,x,R,M,k,P;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("NativeToJS select watch case multiStreamMode="+t.multiStreamMode+",pageNo="+t.pageNo+",LargeVedioStatus="+t.LargeVedioStatus+",broadcastBeforeStatus="+t.broadcastBeforeStatus+",focusVedio="+handlePhoneNumber(t.focusVedio)),$dispatch(coreUi.changeSvcNativeToJS(t)),n=$getState().conf,r=n.svcMobileConfHandles,a=n.svcRecallorNot,o=n.ssrcRange,i=n.svcOnLineAttendances,s=n.svcSelfNumber,c=n.svcBandMode,u=n.svcMobileHandleNum,f=n.svcMaxWatchResolution,!a){e.next=6;break}return C.info("No Need send watch request"),e.abrupt("return");case 6:if(l=!1,d=$getState().call.callId,2!==t.multiStreamMode){e.next=16;break}return p=[{number:"",ssrc:0,width:0,height:0}],C.info("dataMode,setAllSvcVideoWindows,multiStreamMode=2, stop watch muiltivideo."),-2===t.pageNo&&(p[0].number="",p[0].ssrc=o.min,p[0].width=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360.width,p[0].height=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360.height,C.info("is in background, sendWatchRequest")),h={attendeeList:p,selfNum:s},e.next=15,coreConf.sendWatchSvcRequestService(h);case 15:return e.abrupt("return");case 16:return isNullOrEmpty(t.focusVedio)||1!==t.LargeVedioStatus||($dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:t.focusVedio}))),0===t.LargeVedioStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))),2===t.LargeVedioStatus&&(l=!0,1===t.broadcastBeforeStatus&&($dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeSvcSelectWatchInfo({number:""})))),g={callid:d,infoid:0},e.next=22,coreTup.getCallInstance();case 22:return m=e.sent,e.next=25,m.getBasicCallInfo(g);case 25:if(v=e.sent,I=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,S=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,C.info("is support hd-encoder(0:NO, 1: YES) ",v.param.call_info.svc_is_support_hd_encoder),0===v.param.call_info.svc_is_support_hd_encoder?(I=$getState().conf.svcMobileSpeakerModeMaxLook,S=$getState().conf.svcMobileDivideModeMaxLook):(I=$getState().conf.svcHighPerformanceMobileSpeakerModeMaxLook,S=$getState().conf.svcHighPerformanceMobileDivideModeMaxLook),N=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,isNullOrEmpty(f)||(N.width=f.width,N.height=f.height),C.info("Nego level-id limit max resolution:",N),0!==t.multiStreamMode){e.next=53;break}return C.info("MaxSpeakerMode, eSight load max resolution= ",I),isNullOrEmpty(I)||(N=O.getRealResolution(N,I)),T=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,C.info("Nego Bandwidth limit max resolution:",T),isNullOrEmpty(T)||(N=O.getRealResolution(N,T)),C.info("send request watch resolution:",N),b={render:r.remoteLargeViewIdx,ssrc_id:o.min,width:N.width,height:N.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},L=new Array,L.push(b),e.next=45,E(i[0],0,N,1,l,t.focusVedio);case 45:if(A=e.sent,C.info("handleSvcWatchChang result",A.result),0!==A.result){e.next=51;break}return e.next=50,coreCall.setAllSvcVideoWindows(1,d,L);case 50:$dispatch(coreUi.changeOldDidivePagerNo(0));case 51:e.next=83;break;case 53:if(1!==t.multiStreamMode){e.next=83;break}if(C.info("divideMode, eSight load max resolution= ",S),isNullOrEmpty(S)||(N=O.getRealResolution(N,S)),y=c<2?constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,C.info("Nego Bandwidth limit max resolution:",y),isNullOrEmpty(y)||(N=O.getRealResolution(N,y)),C.info("send request watch resolution:",N),x=window.CLIENTCONFIG.SVC_WINDOW_MAX_DIVIDE_NUM_PHONE,u&&(x=u),C.info("modelength",x),i=i.slice(1),R=t.pageNo,M=R%2,k=R%2,R===$getState().conf.svcOldDidivePagerNo?(M=3,$dispatch(coreUi.changeOldDidivePagerNo(0))):$dispatch(coreUi.changeOldDidivePagerNo(R)),!(R>=1)){e.next=83;break}if(P="",!(i.length>=R*x+1)){e.next=78;break}return P=i.slice((R-1)*x,R*x),e.next=74,E(P,1,N,M,!1,"",R);case 74:return e.next=76,w(P.length,d,N,M,k);case 76:e.next=83;break;case 78:return P=i.slice((R-1)*x),e.next=81,E(P,1,N,M,!1,"",R);case 81:return e.next=83,w(P.length,d,N,M,k);case 83:$dispatch(coreUi.changeConfViewMode(t.multiStreamMode)),$dispatch(coreUi.changeSvcShowPage(t.pageNo));case 85:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var I=t.loggerPrint=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a="";if(t&&!isNaN(t.length)&&t.length>0)for(var o=0;o<t.length;o++)!0===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):!1===n?a=a+";number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"PC"===n?a=a+";name:"+(t[o].name?t[o].name.substr(0,1)+"**"+t[o].name.substr(-1):"")+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):""):"SSRC"===n&&(a=a+";ssrc:"+t[o].ssrc+",number:"+(t[o].number?t[o].number.substr(0,3)+"****"+t[o].number.substr(-3):"")+",width="+t[o].width+",height="+t[o].height);C.info(e,a,r)};t.loggerPrintSSRC=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r="";if(t&&!isNaN(t.length)&&t.length>0){for(var a=0;a<t.length;a++)isNullOrEmpty(t[a].number)||(t[a].number=handlePhoneNumber(t[a].number));r=(0,p.default)(t)}C.info(e+r+n)};window.removeSvcVideoWindows=(0,m.default)(_.default.mark(function e(){var t,n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("svcCloseOrResumeCameta"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,m.default)(_.default.mark(function e(){var t,n,r,a,o;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call.callId,C.info("window.removeSvcVideoWindows"),!r){e.next=12;break}if(!(n.windowArray&&n.windowArray.length>=1)){e.next=12;break}o=0;case 6:if(!(o<n.windowArray.length)){e.next=12;break}return e.next=9,coreCall.removeSvcVideoWindow(a,0,n.windowArray[o].ssrc_id,!0);case 9:o++,e.next=6;break;case 12:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)})),window.reSetSvcVideoWindows=(0,m.default)(_.default.mark(function e(){var t,n;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("svcCloseOrResumeCameta"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf,n=t.svcVideoWindows,r=t.isSvcConf,a=$getState().call,o=a.callId,i=a.currentCamera,C.info("window.reSetSvcVideoWindows"),!r){e.next=20;break}if(window.CLIENTCONFIG.ISMOBILE,!0){e.next=16;break}if(s=$getState().call,c=s.isOpenCamera,u=s.currentCallId,f=s.isOpenCameraDe,C.info("Camera isOpenCamera = "+c),!c){e.next=13;break}return e.next=10,coreCall.setVideoIndex(i);case 10:C.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f),e.next=14;break;case 13:C.info("Camera isOpenCamera = "+c+",callId = "+u+" isOpenCameraDe = "+f);case 14:e.next=20;break;case 16:return e.next=18,coreCall.setVideoIndex(i);case 18:return e.next=20,coreCall.setAllSvcVideoWindows(n.count,o,n.windowArray);case 20:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)}));var w=t.handleSSRCURL=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,m=arguments.length>1&&void 0!==arguments[1]?arguments[1]:$getState().call.callId,v=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180,I=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,w=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("addSvcVideoWindow start",t),n=new Array,r=$getState().conf,a=r.svcMobileConfHandles,o=r.usedSsrcList,i=r.svcBandMode,s=r.ssrcRange,c=s.min+1,-1===t)u=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,C.info("NumLength = -1 init ,lookRatio = ",u),0!==u.width&&0!==u.height||(C.info("NumLength = -1 lookRatio width or height is 0"),u={width:640,height:360}),f={render:a.remoteLargeViewIdx,ssrc_id:$getState().conf.ssrcRange.min,width:u.width,height:u.height,bSharpness:window.CLIENTCONFIG.SVC_SHARPENING_SWITCH?1:0},n.push(f);else for(l=1===w?0:3,d=0,1===I?d=0:0===I?d=3:3===I&&(d=6),p=s.min+t+d,p>s.max&&(d=0),0!==v.width&&0!==v.height||(C.info("lookRatio width or height is 0"),v={width:320,height:180}),h=0;h<t;h++)g={render:a.remoteViewIdx[h+l],ssrc_id:c+h+d,width:v.width,height:v.height,bSharpness:0},n.push(g);return e.next=7,coreCall.setAllSvcVideoWindows(n.length,m,n);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),S=t.handleSvcLockWatch=function(e,t){C.info("handleSvcLockWatch",e,t.number?t.number.substr(0,3)+"****"+t.number.substr(-3):"");var n=$getState().conf.isBigConf,r=coreConf.isConfChairMan();if(n&&!r)return void C.info("handleSvcLockWatch in bigConf not ChairMan can not lockWatch");var a={mode:e,watchInfo:t};$dispatch(coreUi.changeSvcControlMode(e));var o=(0,l.default)({},t);$dispatch(coreUi.changeSvcSelectWatchInfo(o)),1===e?$dispatch(coreUi.changeIsSvcSelectMode(!0)):$dispatch(coreUi.changeIsSvcSelectMode(!1)),window.CLIENTCONFIG.ISMOBILE&&window.SvcLockWatch(a)},E=t.handleSvcWatchChange=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,v,w,S,E,b,O,L,A,y,x=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,R=arguments.length>2&&void 0!==arguments[2]?arguments[2]:constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360,M=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,k=arguments.length>4&&void 0!==arguments[4]&&arguments[4],P=(arguments.length>5&&void 0!==arguments[5]&&arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:0);return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=new Array,r=$getState().conf,a=r.svcSelectWatchInfo,o=r.svcControlMode,i=r.svcViewMode,s=r.ssrcRange,c=r.usedSsrcList,u=r.broadCastInfo,f=r.svcSelfNumber,l=r.svcOnLineAttendances,d=r.isSameGradeMcu,p=null,0!==x){e.next=9;break}if(1!==o||k){if(h="",0===d&&l.length>1){for(g=0,m=0;m<l.length;m++)1===l[m].is_same_grade_mcu&&g++;1===g&&(h="M255T0",C.info("numberT enter"))}p={number:h,ssrc:s.min,width:R.width,height:R.height},k?C.info("sendWatchSvcRequest broad"):C.info("sendWatchSvcRequest spk")}else p={number:a.number,ssrc:s.min,width:R.width,height:R.height},C.info("sendWatchSvcRequest lock watch");n.push(p),T([]),e.next=28;break;case 9:if(1!==x){e.next=28;break}for(v=0,1===M?v=0:0===M?v=3:3===M&&(v=6),w=s.min+t.length+v,w>s.max&&(v=0),S="",E=$getState().conf.isBigConf,b=0;b<t.length;b++)S=1===P&&E?"":t[b].number,p={number:S,ssrc:s.min+1+b+v,width:R.width,height:R.height},n.push(p);O=!1,L=0;case 19:if(!(L<n.length)){e.next=26;break}if(1!==M&&3!==M||"M255T0"!==n[L].number){e.next=23;break}return O=!0,e.abrupt("break",26);case 23:L++,e.next=19;break;case 26:T(O?n:[]),C.info("sendWatchSvcRequest average");case 28:return I("sendWatchSvcRequest parameter：watchAttendees=",n,!1,f.substr(0,3)+"****"+f.substr(-3)),A={attendeeList:n,selfNum:f},e.next=32,coreConf.sendWatchSvcRequestService(A);case 32:return y=e.sent,0===y.result&&N(n),e.abrupt("return",y);case 35:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),N=(t.handleSvcClickJSPage=function(e){window.SvcClickJSPageNum(e)},t.handleSvcShowAttChange=function(e){$dispatch(coreUi.changeSvcShowAttendances(e))}),T=t.handleSvcShowAttChangeMobile=function(e){$dispatch(coreUi.changeSvcShowAttendancesMobile(e))},b=t.dealWithWatchConfList=function(){var e=constant.ACTIVE_USER.MOBILE,t=$getState().conf.svcOnLineAttendances;if(0===t.length)return void C.info("currentOnLineAttendances is empty return");var n=$getState().conf.svcActiveAttendances;C.info("dealWithWatchConfList  before currentOnLineAttendances  ",t.length);var r=[];0===n.length?r=(0,l.default)([],t):(r=sortPreAndOrigiArray(n,t),n=[]),n=r.length>e?(0,l.default)([],r.slice(0,e)):(0,l.default)([],r);for(var a=0;a<r.length;a++){var o=r[a];if(1===o.is_self){r.splice(a,1),r.unshift(o);break}}$dispatch(coreUi.changeSvcOnLineAttendances(r)),$dispatch(coreUi.changeSvcActiveAttendances(n)),C.info("dealWithWatchConfList  after currentOnLineAttendances  ",$getState().conf.svcOnLineAttendances.length)},O=t.SvcAttendanceManager=(o=a=function e(){(0,u.default)(this,e)},a.handleSvcAttendancesUpdateEvent=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("start handle svc Attendances update event",t.length),n=$getState().conf,r=n.ssrcRange,a=n.svcBigPicInfo,0!==window.hasDealAttendeeUpdateEvent||a.hasOwnProperty("ssrc")||(C.info("start handle svc Attendances handleSvcWatchIndNotify is not received!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:r.min}))),window.hasDealAttendeeUpdateEvent=1,window.isChangeOfBroadcast=!1,e.next=7,O.dealSvcAttendanceList(t);case 7:if(!(o=e.sent)||window.CLIENTCONFIG.ISMOBILE){e.next=18;break}if(C.info("svcShowAttendances is changed!"),i=$getState().conf,s=i.svcShowAttendances,c=i.svcViewMode,u=i.ssrcRange,f=i.svcBigPicInfo,l=i.svcOnLineAttendances,1===c&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize()),!(l.length>1)){e.next=15;break}return e.next=15,O.sendWatchSvcRequest(s);case 15:return e.next=17,O.setSvcVideoRender(s,"true");case 17:O.calcBigCanvasRatio();case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handleSvcModeSwitch=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("Switch to svcViewMode:"+p+",maxSizeForPage:"+h),t=$getState().conf,n=t.svcOnLineAttendances,r=t.isSvcShareMode,a=t.svcBigPicInfo,$dispatch(coreUi.changeConfViewMode(p)),1!==p&&(o=O.calcCanvas16And9Size(),$dispatch(coreUi.changeBigWinStyle(o)),C.info("changeBigWinStyle, canvasSize is ",o)),e.next=6,coreCall.closeAllSvcRemoteSocket();case 6:if($dispatch(coreUi.changeMaxSizeForPage(h)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),0!==p&&1!==p){e.next=20;break}return O.initSvcShowAttendances(n,h),1===p&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize()),i=$getState().conf.svcShowAttendances,e.next=15,O.sendWatchSvcRequest(i);case 15:return e.next=17,O.setSvcVideoRender(i);case 17:r&&0===p&&-3===a.ssrc&&(s=coreCall.getBigContainerSize(),s={width:s.width,height:s.height-54},coreCall.setSvcBFCPVideoRender(s)),e.next=38;break;case 20:c=null,u=new Array,f=0;case 23:if(!(f<n.length)){e.next=30;break}if(1!==n[f].is_self){e.next=27;break}return c=n[f],e.abrupt("break",30);case 27:f++,e.next=23;break;case 30:return l=O.constructSvcShowAttendanceInfo(c),l&&u.push(l),N(u),r&&-3===a.ssrc&&(d=coreCall.getBigContainerSize(),d={width:d.width,height:d.height-54},coreCall.setSvcBFCPVideoRender(d)),e.next=36,O.sendWatchSvcRequest(u);case 36:return e.next=38,O.setSvcVideoRender([]);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcSelect=function(){var e=(0,m.default)(_.default.mark(function e(t,n){var r,a,o,i,s,c,u,f,d,p,h,g,m;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("Select attendance name:,viewMode = "+n),r=$getState().conf,a=r.svcOnLineAttendances,o=r.ssrcRange,i=r.isSvcShareMode,s=r.svcShowPage,c=r.svcBandMode,u=r.svcBigPicInfo,f={number:t.number,is_mute:t.is_mute,name:t.name},d=(0,l.default)({},t),d.ssrc=o.min,0!==n){e.next=20;break}return u.hasOwnProperty("ssrc")&&-3===u.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),!i||0!==s||-3!==u.ssrc&&-2!==u.ssrc||(N([]),$dispatch(coreUi.changeUsedSvcSSRCList([])),O.initSvcShowAttendances(a,$getState().conf.maxSizeForPage)),p=$getState().conf.svcShowAttendances,e.next=16,O.sendWatchSvcRequest(p);case 16:return e.next=18,O.setSvcVideoRender(p);case 18:e.next=41;break;case 20:return e.next=22,coreCall.closeAllSvcRemoteSocket();case 22:return h=new Array,h.push(o.min),g=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===c&&(g=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(g)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeSvcBigPicInfo(d)),N([]),$dispatch(coreUi.changeUsedSvcSSRCList(h)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeIsSvcSelectMode(!0)),$dispatch(coreUi.changeSvcSelectWatchInfo(f)),O.initSvcShowAttendances(a,g),m=$getState().conf.svcShowAttendances,e.next=39,O.sendWatchSvcRequest(m);case 39:return e.next=41,O.setSvcVideoRender(m);case 41:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.handleSvcShareClick=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShareData;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("handleSvcShareClick :svcBroadcastData:",s),t=$getState().conf,n=t.ssrcRange,r=t.svcOnLineAttendances,a=t.maxSizeForPage,o=t.shareScreenWH,$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeSvcBigPicInfo(s)),$dispatch(coreUi.changeUsedSvcSSRCList([])),O.initSvcShowAttendances(r,a),e.next=8,O.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,O.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:i={lastheight:o.lastheight+1,lastwidth:o.lastwidth+1},$dispatch(coreUi.changeShareScreenWH(i)),$dispatch(coreUi.changeIsShowMainScreen(!1));case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleSvcBFCClick=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().conf,n=t.ssrcRange,r=t.isSvcShareMode,a=t.svcBigPicInfo,o=t.svcShareData,i=t.svcOnLineAttendances,s=t.maxSizeForPage,c=t.svcViewMode,C.info("handleSvcBFCClick :svcBroadcastData:",o),$dispatch(coreUi.changeSvcBigPicInfo(o)),coreCall.resetBFCStatus($getState().call.callId,1),e.next=6,coreCall.closeSvcRemoteSocket(n.min);case 6:return $dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeSvcControlMode(1)),$dispatch(coreUi.changeUsedSvcSSRCList([])),O.initSvcShowAttendances(i,s),e.next=12,O.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 12:return e.next=14,O.setSvcVideoRender($getState().conf.svcShowAttendances);case 14:r&&(0,v.refreshShareSize)(a.ssrc);case 15:case"end":return e.stop()}},e,void 0)})),a.stopSvcShareOrBfcp=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("stopSvcShareOrBfcp"),t=$getState().conf,n=t.svcBigPicInfo,r=t.svcViewMode,a=t.svcShowPage,o=t.maxSizeForPage,i=t.ssrcRange,s=t.svcOnLineAttendances,c=t.isSvcShareMode,u=t.svcShareData,f=t.isShowMainScreen,!c){e.next=10;break}return $dispatch(coreUi.changeIsSvcShareMode(!1)),$dispatch(coreUi.changeSvcShareData({})),f?0===r&&0===a&&(C.info("stopSvcShareOrBfcp no need switch to video!"),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),O.initSvcShowAttendances(s,o)):(C.info("stopSvcShareOrBfcp need switch to video!"),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min,name:""})),$dispatch(coreUi.changeSvcControlMode(0)),l=O.getBigCanvasSize(),$dispatch(coreUi.changeBigWinStyle(l)),C.info("stopSvcShareOrBfcp reset big containerSize is "+(0,p.default)(l)),$dispatch(coreUi.changeIsShowMainScreen(!0))),e.next=8,O.sendWatchSvcRequest($getState().conf.svcShowAttendances);case 8:return e.next=10,O.setSvcVideoRender($getState().conf.svcShowAttendances);case 10:case"end":return e.stop()}},e,void 0)})),a.receviceSvcShareOrBfcp=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,f=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("receviceSvcShareOrBfcp"),t=$getState().conf,n=t.svcViewMode,r=t.svcShowAttendances,a=t.svcOnLineAttendances,o=t.svcBandMode,i=t.ssrcRange,1===n&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===o&&(s=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(s)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeUsedSvcSSRCList([])),$dispatch(coreUi.changeSvcShowAttendances([])),O.initSvcShowAttendances(a,s),r=$getState().conf.svcShowAttendances),$dispatch(coreUi.changeIsShowMainScreen(!1)),$dispatch(coreUi.changeIsSvcShareMode(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeSvcControlMode(1)),c=0===u?-2:-3,$dispatch(coreUi.changeSvcShareData({ssrc:c,name:f})),$dispatch(coreUi.changeSvcBigPicInfo({ssrc:c,name:f})),e.next=12,coreCall.closeSvcRemoteSocket(i.min);case 12:return e.next=14,O.sendWatchSvcRequest(r);case 14:return e.next=16,O.setSvcVideoRender(r);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.resizeBfcWindow=function(){C.info("resizeBfcWindow");var e=$getState().conf.svcViewMode,t=coreCall.getBigContainerSize(),n=t.height-54;2===e&&(n=t.height),t={width:t.width,height:n},coreCall.setSvcBFCPVideoRender(t)},a.resizeBigSvcWindow=function(){C.info("resizeBigSvcWindow");var e=$getState().conf,t=e.ssrcRange;e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(t.min)){var n=O.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(n));var r=t.min+"_frame_share";C.info("resizeBigSvcWindow,bigCanvasSize is ",n),coreCall.setSvcRemoteVideoRender(t.min,r,n)}},a.resizeLocalBigWindow=function(){C.info("resizeBigSvcWindow");var e=$getState().conf;e.ssrcRange,e.isSvcShareMode,e.svcOnLineAttendances;if(coreCall.getSvcRender(-1)){var t=O.calcBigCanvasRatio();$dispatch(coreUi.changeBigWinStyle(t)),C.info("resizeBigSvcWindow,bigCanvasSize is ",t),coreCall.setSvcLocalVideoRender(t)}},a.changeSvcWindowSize=function(e,t){if(-1===e)coreCall.setSvcLocalVideoRender(t);else{var n=e+"_frame_share";coreCall.setSvcRemoteVideoRender(e,n,t)}},a.handleSvcSpeakerNotify=function(){for(var e=$getState().conf,t=e.confSpeaker,n=e.svcShowAttendances,r=(0,l.default)([],n),a=0;a<r.length;a++)r[a].is_speaker=!1;var o=!1;if(t.speaker.length>0)for(var i=t.speaker[0].number,s=0;s<r.length;s++)if(i===r[s].number){r[s].is_speaker=!0,o=!0;break}o&&N(r)},a.dealSvcAttendanceList=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,g,m,v,w,E,N,T,L,A,y,x,R,M;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("dealSvcAttendanceList start"),n=$getState().conf,r=n.svcControlMode,a=n.svcSelectWatchInfo,o=n.broadCastInfo,i=n.isSvcConf,s=n.svcOnLineAttendances,c=n.svcRecallorNot,u=n.serialMcuMemberList,f=n.isSameGradeMcu,l=n.svcViewMode,d=n.svcOldDidivePagerNo,h=n.isBigConf,g=n.svcActiveAttendances,m=O.getOnLineAttendances(t),h&&g&&g.length>0?(v=sortPreAndOrigiArray(g,m),$dispatch(coreUi.changeSvcOnLineAttendances(v))):$dispatch(coreUi.changeSvcOnLineAttendances(m)),"NOSelfNOWatch"!==(m=$getState().conf.svcOnLineAttendances)){e.next=7;break}return e.abrupt("return");case 7:if(w=new Array,E="",N="",window.CLIENTCONFIG.ISMOBILE)for(1===r&&(0,p.default)(m).indexOf(a.number)<0&&S(0,{number:a.number}),o.isBroadCast&&(0,p.default)(m).indexOf(o.broadCastList[0].number)<0&&(T={isBroadCast:!1,broadCastList:[]},$dispatch(coreUi.changeBroadCastInfo(T))),L=0;L<m.length;L++)E={name:m[L].name,number:m[L].number,role:m[L].role,is_mute:m[L].is_mute,is_self:m[L].is_self,is_same_grade_mcu:m[L].is_same_grade_mcu},N=N+","+m[L].number,w.push(E);else w=m;if($dispatch(coreUi.changeSvcOnLineAttendances(w)),!window.CLIENTCONFIG.ISMOBILE||!i){e.next=23;break}return A=$getState().conf.isBigConf,A&&(b(),w=$getState().conf.svcOnLineAttendances),c&&(I("recall updateVideoView",w),window.updateVideoView(w,!0),$dispatch(coreUi.changesvcRecallorNot(!1))),y=$getState().conf,x=!O.checkSerialConf(y),x&&$dispatch(coreUi.changeOldDidivePagerNo(1)),R={multiStreamMode:1,pageNo:1,LargeVedioStatus:-1,broadcastBeforeStatus:0,focusVedio:""},x&&0===f&&"0"!==y&&1===d&&1===l&&(C.info("send grade watch info"),window.multiStreamPageInfoChangeNotify(R),$dispatch(coreUi.changeMobileSerialNumber("0"))),(0,p.default)(w)!==(0,p.default)(s)&&(I("updateVideoView01",w),window.updateVideoView(w,!1)),e.abrupt("return");case 23:return e.next=25,O.handlePCSvcBroadcast(m);case 25:return M=e.sent,e.abrupt("return",M);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.handlePCSvcBroadcast=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=!1,O.dealSvcBroadcastUpdate(t),0!==t.length){e.next=5;break}return C.info("onLineAttendances length is zero,please check."),e.abrupt("return",n);case 5:if(r=$getState().conf.svcViewMode,1===r&&t.length<3&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===$getState().conf.svcBandMode&&(a=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0)),$dispatch(coreUi.changeMaxSizeForPage(a))),o=$getState().conf,i=o.svcShowAttendances,s=o.maxSizeForPage,c=o.svcViewMode,2!==c){e.next=24;break}u=null,f=new Array,l=0;case 12:if(!(l<t.length)){e.next=19;break}if(1!==t[l].is_self){e.next=16;break}return u=t[l],e.abrupt("break",19);case 16:l++,e.next=12;break;case 19:d=O.constructSvcShowAttendanceInfo(u),d&&f.push(d),N(f),e.next=25;break;case 24:1===c?0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=O.initSvcShowAttendances(t,s)):n=O.updateDivideShowAttendances(t,i):0===c&&(0===i.length?($dispatch(coreUi.changeSvcShowPage(0)),n=O.initSvcShowAttendances(t,s)):n=O.updateBigSmallShowAttendances(t,i));case 25:return window.isChangeOfBroadcast&&(n=!0),e.abrupt("return",n);case 27:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.dealSvcPageSwitch=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,l,d,p,h,g,m,I,w,S,E=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowPage;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(C.info("dealSvcPageSwitch svcShowPage : "+E),$dispatch(coreUi.changeSvcShowPage(E)),t=$getState().conf,n=t.svcShowAttendances,r=t.svcViewMode,a=t.maxSizeForPage,o=t.svcOnLineAttendances,i=t.svcBigPicInfo,s=t.isSvcShareMode,c=t.svcShareData,u=new Array,f=O.getCanUseAttendancesPos(r,E,a,s),l=new Array,d=f;d<o.length;d++)l.push(o[d]);p=0;case 8:if(!(p<n.length)){e.next=15;break}return h=n[p].ssrc,e.next=12,coreCall.closeSvcRemoteSocket(h);case 12:p++,e.next=8;break;case 15:for(0!==r&&$dispatch(coreUi.changeUsedSvcSSRCList([])),g=a,0===r&&0===E?s&&-2!==i.ssrc&&-3!==i.ssrc&&(g-=1):1===r&&E>0&&(u.push(n[0]),g-=1),m=Math.min(g,l.length),I=0;I<m;I++)(w=O.constructSvcShowAttendanceInfo(l[I]))&&u.push(w);if(0===r)for(S=0;S<n.length;S++)O.removeSvcSSRC(n[S].ssrc);return N(u),1===r&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize()),0!==E||1!==n.length||!s||-2!==i.ssrc&&-3!==i.ssrc||(0,v.refreshShareSize)(i.ssrc),e.next=26,O.sendWatchSvcRequest(u);case 26:return e.next=28,O.setSvcVideoRender(u,"true","true");case 28:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.initSvcShowAttendances=function(e,t){C.info("initSvcShowAttendances start");var n=$getState().conf,r=n.isSvcShareMode,a=n.svcBigPicInfo,o=new Array,i=!1;r&&-2!==a.ssrc&&-3!==a.ssrc&&(t-=1);for(var s=Math.min(t,e.length),c=0;c<s;c++){var u=O.constructSvcShowAttendanceInfo(e[c]);u&&o.push(u),i=!0}return N(o),I("initSvcShowAttendances end,newSvcShowAttendances:",o),i},a.updateBigSmallShowAttendances=function(e,t){I("updateBigSmallShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcViewMode,a=n.maxSizeForPage,o=n.svcShowPage,i=n.svcBigPicInfo,s=(n.isSvcBroadcastMode,n.svcBroadcastData,n.isSvcShareMode),c=!1,u=O.getCanUseAttendancesPos(r,o,a,s),f=(0,l.default)([],t),d=new Array,p=0;if(0===o){s&&-2!==i.ssrc&&-3!==i.ssrc&&(a-=1);if(1!==f[0].is_self&&1===e[0].is_self){I("updateBigSmallShowAttendances: add local attendance to svcShowAttendance",[e[0]],!1);var h=O.constructSvcShowAttendanceInfo(e[0]);f.splice(0,0,h),c=!0}for(var _=0;_<1;_++)d.push(f[_]);p=1}for(var g=O.getCanUseAttendances(u,e,f),m=p;m<f.length;m++){var w=$getState().conf,S=w.isSameGradeMcu,E=w.serialMcuMemberList;if(0===S&&0===f[m].is_same_grade_mcu){O.checkSerialConf(f[m].number)||(c=!0),E.length>0?d.push(f[m]):(!1,O.removeSvcSSRC(f[m].ssrc),c=!0)}else if(O.isOnline(f[m]))I("updateBigSmallShowAttendances:push old inline",[f[m]],!1),d.push(f[m]);else if(g.length>0){C.info("updateBigSmallShowAttendances:update old offline "+f[m].number.substr(0,3)+"****"+f[m].number.substr(-3)+" to inline "+g[0].number.substr(0,3)+"****"+g[0].number.substr(-3));var T=O.updateSvcShowAttendanceInfo(f[m],g[0]);d.push(T),g.splice(0,1),c=!0}else O.removeSvcSSRC(f[m].ssrc),c=!0}for(var b=0;b<g.length;b++)if(d.length<a){var L=O.constructSvcShowAttendanceInfo(g[b]);L&&(d.push(L),c=!0)}for(;d.length>a;)O.removeSvcSSRC(d[d.length-1].ssrc),d.pop(),c=!0;return 0!==d.length?N(d):($dispatch(coreUi.changeSvcShowPage(0)),O.initSvcShowAttendances(e,a),s&&(0,v.refreshShareSize)(i.ssrc)),I("updateBigSmallShowAttendances end,newSvcAttendancesTemp:",d),c},a.addRemoveBroadcast=function(e,t,n,r){C.info("addRemoveBroadcast",e);var a=!1;if(e){if(1!==n[0].is_broadcast||1===n[0].is_self){I("addRemoveBroadcast: add broadcast to svsShowAttendance",[r[0]],"PC");var o=O.constructSvcShowAttendanceInfo(r[0]);n.splice(0,0,o),a=!0}else if(n[0].number!==t.number){I("addRemoveBroadcast: update broadcast to attendance",[r[0]],"PC");var i=O.updateSvcShowAttendanceInfo(n[0],r[0]);n[0]=i,a=!0}}else 1===n[0].is_broadcast&&0===n[0].is_self&&(I("addRemoveBroadcast: delete broadcast from svsShowAttendance",[n[0]]),O.removeSvcSSRC(n[0].ssrc),n.splice(0,1),a=!0);return a},a.updateDivideShowAttendances=function(e,t){I("updateDivideShowAttendances start,svcShowAttendances:",t);var n=$getState().conf,r=n.svcShowPage,a=n.maxSizeForPage,o=n.svcViewMode,i=!1,s=(0,l.default)([],t),c=O.getCanUseAttendancesPos(o,r,a),u=O.getCanUseAttendances(c,e,t),f=new Array;if(e.length>0&&1===e[0].is_self&&O.isInSvcShowAttendances(e[0])<0){var d=O.constructSvcShowAttendanceInfo(e[0]);d&&f.push(d),i=!0}for(var p=0;p<s.length;p++){var h=(s[p].number,$getState().conf),_=h.isSameGradeMcu,g=h.serialMcuMemberList;if(0===_&&0===s[p].is_same_grade_mcu){O.checkSerialConf(s[p].number)||(i=!0),g.length>0?f.push(s[p]):(!1,O.removeSvcSSRC(s[p].ssrc),i=!0)}else if(O.isOnline(s[p]))I("updateDivideShowAttendances:push old inline",[s[p]],!1),f.push(s[p]);else if(u.length>0){C.info("updateDivideShowAttendances:update old offline "+handlePhoneNumber(s[p].number)+" to inline "+handlePhoneNumber(u[0].number));var m=O.updateSvcShowAttendanceInfo(s[p],u[0]);f.push(m),u.splice(0,1),i=!0}else O.removeSvcSSRC(s[p].ssrc),i=!0}for(var v=0;v<u.length&&f.length<a;v++){var w=O.constructSvcShowAttendanceInfo(u[v]);w&&(f.push(w),i=!0)}for(;f.length>a;)O.removeSvcSSRC(f[f.length-1].ssrc),f.pop(),i=!0;return f.length>1?N(f):($dispatch(coreUi.changeSvcShowPage(0)),O.initSvcShowAttendances(e,a)),I("updateDivideShowAttendances end --- newSvcAttendancesTemp:",f),i},a.setSvcVideoRender=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u,f,l,d,h,g,m,v,I,w,S,E,N,T,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"true",L=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false";return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcViewMode,a=n.svcBigPicInfo,o=n.svcDivideWinSize,i=n.ssrcRange,s=n.svcRenders,c=n.isSvcShareMode,u=n.svcShareData,f=n.svcOnLineAttendances,l=n.isOppsite,d=n.isShowMainScreen,C.info("setSvcVideoRender start, svcViewMode="+r+", old svcRenders length is "+s.length+",divisize w="+o.width+",h="+o.height),h=new Array,g={width:127,height:70},m=coreCall.getBigContainerSize(),0===r||2===r?m=O.calcBigCanvasRatio():1===r&&(g=O.handleRealCanvasSize(o.width,o.height)),v=void 0,(2!==r||!l)&&a.hasOwnProperty("ssrc")||"false"!==L){e.next=13;break}return e.next=10,coreCall.setSvcLocalVideoRender(m);case 10:v=e.sent,e.next=16;break;case 13:return e.next=15,coreCall.setSvcLocalVideoRender(g);case 15:v=e.sent;case 16:if(I={render:v,ssrc:-1},v&&(C.info("[SVC TupRender2]setSvcVideoRender,renderURI = local_frame_share "),h.push(I)),!(f.length>=2)){e.next=37;break}if(2!==f.length||c){e.next=23;break}C.info("no need set small render"),e.next=37;break;case 23:w=0;case 24:if(!(w<t.length)){e.next=37;break}if(1!==t[w].is_self){e.next=27;break}return e.abrupt("continue",34);case 27:return S=t[w].ssrc,E=t[w].ssrc+"_frame_share",1===r&&t[w].svcDivideCanvasSize&&0!==t[w].svcDivideCanvasSize.width&&0!==t[w].svcDivideCanvasSize.height&&(g=t[w].svcDivideCanvasSize),e.next=32,coreCall.setSvcRemoteVideoRender(S,E,g);case 32:v=e.sent,v&&(C.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+E+",newRenderSize is "+(0,p.default)(g)),I={render:v,ssrc:t[w].ssrc},h.push(I));case 34:w++,e.next=24;break;case 37:if(0!==r&&2!==r||"NoBig"===b){e.next=50;break}if(N=i.min,T=i.min+"_frame_share",2!==r||!l){e.next=46;break}return e.next=43,coreCall.setSvcRemoteVideoRender(N,T,g);case 43:v=e.sent,e.next=49;break;case 46:return e.next=48,coreCall.setSvcRemoteVideoRender(N,T,m);case 48:v=e.sent;case 49:v&&(C.info("[SVC TupRender2]setSvcVideoRender,renderURI = "+T+",newRenderSize is "+(0,p.default)(m)),I={render:v,ssrc:N},h.push(I));case 50:if(d||!c||!u.hasOwnProperty("ssrc")||-3!==u.ssrc||"false"!==L){e.next=53;break}return e.next=53,coreCall.setSvcBFCPVideoRender(m);case 53:O.clearOldRenders(s,h),"true"===b&&h.length!==s.length&&coreCall.svcRedistributeVideoTmmbr($getState().call.callId),C.info("setSvcVideoRender end,new svcRenders.length ="+h.length+",flag="+b);case 56:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.clearOldRenders=function(){var e=(0,m.default)(_.default.mark(function e(t,n){var r,a,o;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("clearOldRenders start,oldRenders length = "+t.length+",newRenders length = "+n.length),r=0;case 2:if(!(r<t.length)){e.next=19;break}a=!1,o=0;case 5:if(!(o<n.length)){e.next=12;break}if(t[r].ssrc!==n[o].ssrc){e.next=9;break}return a=!0,e.abrupt("break",12);case 9:o++,e.next=5;break;case 12:if(a){e.next=16;break}return C.info("clearOldRenders, close ssrc is "+t[r].ssrc),e.next=16,coreCall.closeSvcRemoteSocket(t[r].ssrc);case 16:r++,e.next=2;break;case 19:$dispatch(coreUi.changeSvcRenders(n));case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),a.setSvcLocalRender=(0,m.default)(_.default.mark(function e(){var t,n,r,a;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("setSvcLocalRender start"),t=new Array,n=O.calcBigCanvasRatio(),$dispatch(coreUi.changeBigWinStyle(n)),e.next=6,coreCall.setSvcLocalVideoRender(n);case 6:r=e.sent,r&&(a={render:r,ssrc:-1},C.info("setSvcLocalRender,setSvcLocalVideoRender,renderURI = local_frame_share"),t.push(a),$dispatch(coreUi.changeSvcRenders(t))),C.info("setSvcLocalRender end");case 9:case"end":return e.stop()}},e,void 0)})),a.setDesktopMaxEncodeResolution=(0,m.default)(_.default.mark(function e(){var t,n,r;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().conf.svcDesktopMaxEncode,!(isNullOrEmpty(t)||0===t.width&&0===t.height)){e.next=3;break}return e.abrupt("return");case 3:return"win"!==window.CLIENTCONFIG.PLATFORM&&"mac"!==window.CLIENTCONFIG.PLATFORM||(window.cpus&&window.cpus>=4?(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),C.info("Svc_Esight_Config_CPUS")):(1===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS||0===window.CLIENTCONFIG.SVC_WATCH_BITES_BY_CPUS&&t.width>=constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540.width)&&(t=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_540),C.info("Svc_Esight_Config_CPUS"))),n={svc_max_enc_res:{width:t.width,height:t.height}},C.info("Svc_Esight_Config setDesktopMaxEncodeResolution start, media= ",n),e.next=8,coreTup.getCallInstance();case 8:return r=e.sent,e.next=11,r.configSvcEncodeParam(n);case 11:case"end":return e.stop()}},e,void 0)})),a.setMobileMaxEncodeResolution=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s,c,u;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.svcMobileMaxSoftEncode,a=n.svcMobileMaxHardEncode,!isNullOrEmpty(r)&&0!==r.width&&0!==r.height||!isNullOrEmpty(a)&&0!==a.width&&0!==a.height){e.next=4;break}return C.info("Svc_Esight_Config setMobileMaxEncodeResolution return"),e.abrupt("return");case 4:return o={callid:t,infoid:0},e.next=7,coreTup.getCallInstance();case 7:return i=e.sent,e.next=10,i.getBasicCallInfo(o);case 10:if(s=e.sent,0!==s.result){e.next=15;break}C.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo success"),e.next=17;break;case 15:return C.info("Svc_Esight_Config setMobileMaxEncodeResolution getBasicCallInfo failed"),e.abrupt("return");case 17:if(c=void 0,0===s.param.call_info.svc_is_support_hd_encoder?(c=$getState().conf.svcMobileMaxSoftEncode,C.info("Svc_Esight_Config setMobileMaxEncodeResolution soft maxEncode= ",c)):(c=$getState().conf.svcMobileMaxHardEncode,C.info("Svc_Esight_Config setMobileMaxEncodeResolution hard maxEncode= ",c)),!(isNullOrEmpty(c)||0===c.width&&0===c.height)){e.next=21;break}return e.abrupt("return");case 21:return u={svc_max_enc_res:{width:c.width,height:c.height}},C.info("Svc_Esight_Config setMobileMaxEncodeResolution start"),e.next=25,i.configSvcEncodeParam(u);case 25:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setMaxWatchResolutionByLevelId=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,s;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n={callid:t,infoid:2},r=void 0,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=11;break}return e.next=5,coreTup.getCallInstance();case 5:return a=e.sent,e.next=8,a.getBasicCallInfo(n);case 8:r=e.sent,e.next=14;break;case 11:return e.next=13,coreCall.getBasicCallInfoNew(n);case 13:r=e.sent;case 14:if(0!==r.result){e.next=18;break}C.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo success"),e.next=20;break;case 18:return C.info("Svc_Esight_Config setMaxWatchResolutionByLevelId getBasicCallInfo failed"),e.abrupt("return");case 20:o=r.param.tx_main_video.width,i=r.param.tx_main_video.height,s={width:0,height:0},1280===o&&720===i?(s.width=1280,s.height=720):704===o&&576===i?(s.width=640,s.height=360):C.error("level-id info acheived is error"),0!==s.width&&0!==s.height&&$dispatch(coreUi.changeSvcMaxWatchResolution(s)),C.info("Svc_Esight_Config setMaxWatchResolutionByLevelId maxWatchResolution",s);case 26:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.sendWatchSvcRequest=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n,r,a,o,i,s,c,u,f,d,p,h,g,m,v,w,S,E,N,T,b,L,A=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$getState().conf.svcShowAttendances;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new Array,n={},r=$getState().conf,a=r.svcBigPicInfo,o=r.svcViewMode,i=r.ssrcRange,s=r.usedSsrcList,c=r.svcOnLineAttendances,u=r.svcControlMode,f=r.isSvcShareMode,d=r.isBigConf,p=r.svcShowPage,h=r.isSameGradeMcu,g=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_720),m=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180),v=c.length>0?c[0].number:"0",w=0;case 7:if(!(w<c.length)){e.next=14;break}if(!c[w].is_self){e.next=11;break}return v=c[w].number,e.abrupt("break",14);case 11:w++,e.next=7;break;case 14:if(S=$getState().conf.svcDesktopSpeakerBigMaxLook,E=$getState().conf.svcMaxWatchResolution,isNullOrEmpty(S)||0===S.width||0===S.height||(g.width=S.width,g.height=S.height,C.info("Svc_Esight_Config sendWatchSvcRequest esight change, bigWatchAttendeeSize= ",g)),g=O.getRealResolution(g,E),m=O.getSmallWatchAttendeeSize(),N=null,0!==o&&2!==o||(C.info("sendWatchSvcRequest,add bigPic watch attendance start"),T="",1===u?a.ssrc>0?(O.isOnline(a)||O.checkSerialConf(a.number)?T=a.number:($dispatch(coreUi.changeSvcBigPicInfo({ssrc:i.min})),$dispatch(coreUi.changeSvcControlMode(0)),$dispatch(coreUi.changeIsSvcSelectMode(!1))),2!==c.length||f||($dispatch(coreUi.changeIsSvcSelectMode(!1)),T=""),N={number:T,ssrc:i.min,width:g.width,height:g.height},t.push(N),C.info("sendWatchSvcRequest,add bigPic watch attendance "+T.substr(0,3)+"****"+T.substr(-3))):-2!==a.ssrc&&-3!==a.ssrc||(N={number:T,ssrc:0,width:g.width,height:g.height},t.push(N),C.info("sendWatchSvcRequest,add share watch attendance "+T.substr(0,3)+"****"+T.substr(-3))):(N={number:T,ssrc:i.min,width:g.width,height:g.height},t.push(N),C.info("sendWatchSvcRequest,add bigPic watch attendance "+T.substr(0,3)+"****"+T.substr(-3)))),!(c.length>=2)){e.next=35;break}if(2!==c.length||f){e.next=26;break}C.info("no need send small watch request"),e.next=35;break;case 26:b=0;case 27:if(!(b<A.length)){e.next=35;break}if(1!==A[b].is_self){e.next=30;break}return e.abrupt("continue",32);case 30:0===h&&0===A[b].is_same_grade_mcu?N={number:"M255T0",ssrc:A[b].ssrc,width:m.width,height:m.height}:(d&&0===p&&(A[b].number=""),N={number:A[b].number,ssrc:A[b].ssrc,width:m.width,height:m.height}),t.push(N);case 32:b++,e.next=27;break;case 35:I("sendWatchSvcRequest watchAttendees is ",t,"SSRC"),L={attendeeList:t,selfNum:v},coreConf.sendWatchSvcRequestService(L);case 38:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.handleWinResize=function(){var e=(0,m.default)(_.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("handleWinResize"),t=$getState().conf.svcShowAttendances,1===n&&(O.handleDivideModeWinSize(),O.dealDivideCanvasSize(),O.setSvcVideoRender(t));case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),a.dealDivideCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;C.info("dealDivideCanvasSize");for(var t=O.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_16_B_9),n=O.calcCanvas16And9Size(e,constant.VIDEO_SIZE_BITE.SIZE_9_B_16),r=$getState().conf.svcShowAttendances,a=0;a<r.length;a++)r[a].svcDivideCanvasSize&&r[a].svcDivideCanvasSize.width<r[a].svcDivideCanvasSize.height?r[a].svcDivideCanvasSize=n:r[a].svcDivideCanvasSize=t;N(r)},a.handleRealCanvasSize=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:9;C.info("handleRealCanvasSize",e,t);var a=e,o=t,i=n,s=r,c=e/i,u=t/s,f={width:0,height:0};return c>u?(a=Math.floor(i*u),f={width:a,height:t}):(o=Math.floor(s*c),f={width:e,height:o}),f},a.getBigCanvasSize=function(){C.info("getBigCanvasSize");var e=$getState().conf,t=e.isSvcShareMode,n=e.svcOnLineAttendances,r=e.svcViewMode,a=coreCall.getBigContainerSize();return 0===r?t?n.length<=1?a.height=a.height-54:a.height=a.height-54-74:n.length<=2?a.height=a.height-54:a.height=a.height-54-74:2===r&&(a.height=a.height-54),a},a.calcBigCanvasRatio=function(){C.info("calcBigCanvasRatio");var e=$getState().conf,t=(e.isSvcShareMode,e.svcOnLineAttendances,e.svcViewMode,$getState().call.bigWinStyle),n=O.getBigCanvasSize();return n=t.width<t.height?O.handleRealCanvasSize(n.width,n.height,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.width,constant.VIDEO_SIZE_BITE.SIZE_9_B_16.height):O.handleRealCanvasSize(n.width,n.height),$dispatch(coreUi.changeBigWinStyle(n)),n},a.calcCanvas16And9Size=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.VIDEO_SIZE_BITE.SIZE_16_B_9;C.info("calcCanvas16And9Size");var n=$getState().conf,r=n.svcDivideWinSize,a=n.svcViewMode,o=0,i=0;if(1===a)o=r.width,i=r.height;else{var s=O.getBigCanvasSize();o=s.width,i=s.height}var c=o,u=i,f=t.width,l=t.height;e&&0!==e.width&&0!==e.height&&(f=e.width,l=e.height);var d=O.handleRealCanvasSize(c,u,f,l);return d.width-=2,d.height-=2,d},a.handleDivideModeCanvasSize=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;C.info("handleDivideModeCanvasSize,originalWidth is "+t+",originalHeight is "+n);var r=$getState().conf.svcDivideWinSize,a=r.width,o=r.height,i=a,s=o,c=a/t,u=o/n,f={width:0,height:0};c>u?(i=Math.floor(t*u),f={width:i,height:o}):(s=Math.floor(n*c),f={width:a,height:s}),f.width-=2,f.height-=2;for(var l=$getState().conf.svcShowAttendances,d=0;d<l.length;d++)if(l[d].ssrc===e){l[d].svcDivideCanvasSize=f;var p=l[d].ssrc+"_frame_share";coreCall.setSvcRemoteVideoRender(l[d].ssrc,p,f);break}N(l)},a.handleDivideModeWinSize=function(){C.info("handleDivideModeWinSize");var e=$getState().conf.svcShowAttendances,t=coreCall.getBigContainerSize(),n={width:0,height:0};t={width:t.width,height:t.height-54-50},e.length>20?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/5)):e.length>16?(n.width=Math.floor(t.width/5),n.height=Math.floor(t.height/4)):e.length>12?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/4)):e.length>9?(n.width=Math.floor(t.width/4),n.height=Math.floor(t.height/3)):e.length>6?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/3)):e.length>4?(n.width=Math.floor(t.width/3),n.height=Math.floor(t.height/2)):e.length>2?(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height/2)):2===e.length&&(n.width=Math.floor(t.width/2),n.height=Math.floor(t.height)),$dispatch(coreUi.changeDivideWinSize(n))},a.constructSvcShowAttendanceInfo=function(e){if(C.info("constructSvcShowAttendanceInfo attendance number is "+e.number.substr(0,3)+"****"+e.number.substr(-3)),e){var t=$getState().conf,n=t.ssrcRange,r=t.usedSsrcList,a=-1;if(0===e.is_self){for(a=n.max;r.indexOf(a)>=0;)a--;if(a<n.min)return C.info("constructSvcShowAttendanceInfo ssrc "+a+" is not include in ssrcRange "+n.min+"-"+n.max),null;O.addSvcSSRC(a)}return{name:e.name,number:e.number,is_self:e.is_self,is_speaker:e.is_speaker,role:e.role,is_broadcast:e.is_broadcast,is_same_grade_mcu:e.is_same_grade_mcu,ssrc:a}}},a.updateSvcShowAttendanceInfo=function(e,t){var n="name:"+t.name.substr(0,1)+"**"+t.name.substr(-1)+",number:"+t.number.substr(0,3)+"****"+t.number.substr(-3);C.info("updateSvcShowAttendanceInfo oldAttendance:"+e.number.substr(0,3)+"****"+e.number.substr(-3)+", newAttendance:"+n);var r=(0,l.default)({},e);return r.name=t.name,r.number=t.number,r.is_self=t.is_self,r.role=t.role,r.is_same_grade_mcu=t.is_same_grade_mcu,r},a.getOnLineAttendances=function(e){for(var t=$getState().conf.isSameGradeMcu,n=new Array,r=$getState().conf.svcShowAttendances,a=!1,o=!1,i=new Array,s={name:"",number:"M255T0",is_self:0,is_broadcast:0,is_same_grade_mcu:0,role:0},c=0;c<e.length;c++){var u=0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[c].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(5===e[c].state&&u){if(0===t&&0===e[c].is_same_grade_mcu&&0===e[c].is_self){1===e[c].is_broadcast&&(s.is_broadcast=1,s.number=e[c].number),o=!0,i.push({number:e[c].number,is_mute:e[c].is_mute});continue}1===e[c].is_self?(a=!0,window.CLIENTCONFIG.ISMOBILE&&$dispatch(coreUi.changeSvcSelfNumber(e[c].number)),$dispatch(coreUi.changeSvcSelfName(e[c].name)),n.splice(0,0,e[c])):5===e[c].state&&u&&n.push(e[c])}for(var f=0;f<r.length;f++)r[f].number===e[c].number&&r[f].name!==e[c].name&&e[c].name&&(r[f].name=e[c].name)}return o?($dispatch(coreUi.changeSerialMemberList(i)),n.splice(1,0,s)):$dispatch(coreUi.changeSerialMemberList([])),N(r),I("getOnLineAttendances end,onLineAttendances:",n,"PC"),a?n:"NOSelfNOWatch"},a.dealSvcBroadcastUpdate=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i,c,u,f,l,d,p;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("dealSvcBroadcastUpdate start"),n=$getState().conf,r=n.isSvcBroadcastMode,a=n.svcBroadcastData,o=n.svcBigPicInfo,i=n.ssrcRange,c=n.svcViewMode,u=n.svcBandMode,0!==t.length){e.next=4;break}return e.abrupt("return");case 4:f=!1,l=0;case 6:if(!(l<t.length)){e.next=15;break}if(f=1===t[l].is_broadcast&&1!==t[l].is_self){e.next=10;break}return e.abrupt("continue",12);case 10:return(0,s.default)(a).length>0&&a.number===t[l].number?C.info("dealSvcBroadcastUpdate: the broadcast is the same"):(C.info("dealSvcBroadcastUpdate: control mode to broadcast mode"),d={name:t[l].name,number:t[l].number,is_self:t[l].is_self,is_speaker:t[l].is_speaker,role:t[l].role,ssrc:i.min,is_same_grade_mcu:t[l].is_same_grade_mcu},o.hasOwnProperty("ssrc")&&-3===o.ssrc&&coreCall.resetBFCStatus($getState().call.callId,0),$dispatch(coreUi.changeIsShowMainScreen(!0)),$dispatch(coreUi.changeIsSvcSelectMode(!1)),$dispatch(coreUi.changeIsSvcBroadcastMode(!0)),$dispatch(coreUi.changeSvcBroadcastData(d)),$dispatch(coreUi.changeSvcBigPicInfo(d)),$dispatch(coreUi.changeSvcControlMode(0)),1===c&&(C.info("dealSvcBroadcastUpdate: switch control mode to broadcast mode and switch layout mode to BigAndSmall mode"),p=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC,1===u&&(p=window.CLIENTCONFIG.SVC_WINDOW_MAX_NUM_BIGSMALL_PC_MIN),$dispatch(coreUi.changeMaxSizeForPage(p)),$dispatch(coreUi.changeSvcShowPage(0)),$dispatch(coreUi.changeConfViewMode(0))),window.isChangeOfBroadcast=!0),e.abrupt("break",15);case 12:l++,e.next=6;break;case 15:!f&&r&&(o.number===a.number&&(C.info("dealSvcBroadcastUpdate: control mode to mute mode"),$dispatch(coreUi.changeSvcControlMode(0))),C.info("dealSvcBroadcastUpdate: cancel broadcast mode"),$dispatch(coreUi.changeIsSvcBroadcastMode(!1)),$dispatch(coreUi.changeSvcBroadcastData({})),window.isChangeOfBroadcast=!0);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.isOnline=function(e){for(var t=$getState().conf.svcOnLineAttendances,n=!1,r=e.number,a=0;a<t.length;a++)if(r===t[a].number){n=!0;break}return n},a.isInSvcShowAttendances=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=$getState().conf.svcShowAttendances;t.length>0&&(n=t);for(var r=-1,a=0;a<n.length;a++){e.number;if(0===$getState().conf.isSameGradeMcu&&0===e.is_same_grade_mcu&&"M255T0",n[a].number===e.number){r=a;break}}return r},a.getCanUseAttendancesPos=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];C.info("getCanUseAttendancesPos maxSizeForPage:"+n+",isSvcShareMode:"+r);var a=0,o=$getState().conf.svcBigPicInfo;return 1===e?t>0&&(a=t*(n-1)+1):0===e&&(a=r&&o.hasOwnProperty("ssrc")&&-2!==o.ssrc&&-3!==o.ssrc?Math.max(0,t*n-1):t*n),a},a.getCanUseAttendances=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];C.info("getCanUseAttendances startPos:"+e);for(var r=!1,a=$getState().conf.isSameGradeMcu,o=0;o<n.length;o++)if(0===a&&0===n[o].is_same_grade_mcu){r=!0;break}for(var i=new Array,s=e;s<t.length;s++)r&&0===t[s].is_same_grade_mcu||0===t[s].is_self&&O.isInSvcShowAttendances(t[s],n)<0&&i.push(t[s]);return I("getCanUseAttendances end,canUseOnLineAttendances:",i,"PC"),i},a.addSvcSSRC=function(e){C.info("addSSRC: "+e,e);var t=$getState().conf.usedSsrcList,n=(0,l.default)([],t);n.push(e),$dispatch(coreUi.changeUsedSvcSSRCList(n))},a.removeSvcSSRC=function(){var e=(0,m.default)(_.default.mark(function e(t){var n,r,a,o,i;return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(C.info("removeSSRC: "+t,t),-1!==t){e.next=3;break}return e.abrupt("return");case 3:n=$getState().conf,r=n.usedSsrcList,a=n.svcRenders,o=(0,l.default)([],r),i=o.indexOf(t),o.splice(i,1),$dispatch(coreUi.changeUsedSvcSSRCList(o));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.getSmallWatchAttendeeSize=function(){C.info("getSmallWatchAttendeeSize");var e=$getState().conf,t=e.svcShowAttendances,n=e.svcViewMode,r=t.length-1,a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);if(1===n)if(r>=2&&r<=6){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_360);var o=$getState().conf.svcDesktopDivideModeMaxLook2_6;a=O.getRealResolution(a,o)}else if(r>=7&&r<=16){a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var i=$getState().conf.svcDesktopDivideModeMaxLook7_16;a=O.getRealResolution(a,i)}else{a=(0,l.default)({},constant.MUTI_WATCH_RATIO.MUTI_WATCH_RATIO_180);var s=$getState().conf.svcDesktopDivideModeMaxLook17_24;a=O.getRealResolution(a,s)}else{var c=$getState().conf.svcDesktopSpeakerModeSmallMaxLook;a=O.getRealResolution(a,c)}var u=$getState().conf.svcMaxWatchResolution;return a=O.getRealResolution(a,u)},a.getRealResolution=function(e,t){var n=e;return!isNullOrEmpty(t)&&(t.width>0||t.height>0)&&n.width>t.width&&n.height>t.height&&(n.width=t.width,n.height=t.height,C.info("[getRealResolution]Svc_Esight_Config Destop esightConfigRes is worked,watchSize= ",n)),n},a.checkSerialConf=function(e){for(var t=!1,n=$getState().conf.serialMcuMemberList,r=0;r<n.length;r++)if(n[r].number===e){t=!0;break}return t},o)},249:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(e){var t=0===e.param.ret;return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_EXTEND,extraTrackKey:null,resultParams:t?[1]:[0,e.param.ret]}),m.handleGetDataPostponeConf(e)}Object.defineProperty(t,"__esModule",{value:!0}),t.isMemberListNull=t.isUserEndConf=t.getInfoOfConf=t.getSsrcRange=t.isSvcConf=t.isDataConf=t.isVideoConf=t.getIsAvcMultiViewBroadcast=t.setIsAvcMultiViewBroadcast=t.getCurrentConfId=t.getSavedRecallInfo=t.getUpdatedParticipants=t.getIsRecall=t.setIsFirstEnterConf=t.getIsFirstEnterConf=t.setIsSmcFirstRequestCharimanRest=t.getIsSmcFirstRequestCharimanRest=t.cloudRecordRequest=t.changeActiveDirection=t.confctrlWatchAttendee=t.sendWatchSvcRequest=t.updateConfMemberList=t.handleTransToConfResult=t.handleSvcSeessionModify=t.handleCallEndedPostConf=t.handleConfEnded=t.broadcastAttendee=t.leaveConf=t.getConfMemberListContent=t.acceptConf=t.rejectConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.handleConfBeTransferToConf=t.handleConfIncoming=t.handleConfInfoNotify=t.handleConfConnected=t.handleGetConfInfoRes=t.getConfInfoService=t.transferChairman=t.cancelConf=t.unSubscribeConfList=t.subscribeConfList=t.getConfList=t.getVRMList=t.setConfNotifyFunc=t.changeConfSelfRole=t.requestChairman=t.releaseChairman=t.handupService=t.postponeConf=t.lockConf=t.muteConf=t.muteAttendee=t.removeAttendee=t.callAttendee=t.hangupAttendee=t.addAttendee=t.reInviteAttendee=t.endConf=t.p2pTransferConf=t.isConfChairMan=t.isNeedUpdate2DataConf=t.isInConf=t.upgradeConf=t.createConf=t.confctrlInit=t.bookConf=void 0;var i=n(69),s=a(i),c=n(1),u=a(c),f=n(2),l=a(f),d=n(649),p=a(d),h=n(226),_=n(403),g=n(152),m=r(g),v=n(208),C=r(v),I=n(186),w=r(I),S=coreLogger.getLogger("confModel")("index"),E=null,N=constant.MEETING_NET_TYPE.MEDIAX_MEETING,T=null,b=(t.bookConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new p.default(t,!1),e.next=3,n.bookConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.start_time,t.conf_len,t.time_zone,t.noPassword,t.vmrConfId);case 3:return r=e.sent,n=null,S.info("bookConf,set confService null"),e.abrupt("return",r);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confctrlInit=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:t=e.sent,n=t.isSupportAS,S.info("confctrlInit getConfList or subscribeConfList, isSupportAS = "+n);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return S.error("conf service is not null"),e.abrupt("return");case 3:return E=new p.default(t),e.next=6,E.createConf(t.confSubject,t.groupUri,t.isMultiStream,t.mediaType,t.userType,t.noPassword,t.deviceSet,t.vmrConfId);case 6:return n=e.sent,r=n.errorCode,0!==r&&(E=null,S.error("createConf fail ,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.upgradeConf=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.error("upgradeConf start"),null!==E){e.next=4;break}return S.error("no conf service exist，can not upgradeConf"),e.abrupt("return");case 4:return w.setIsAutoStartScreenShare(!0),e.next=7,E.upgradeConf();case 7:return e.abrupt("return",e.sent);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInConf=function(){return!(null===E)},t.isNeedUpdate2DataConf=function(){return null===E||null!==E&&!w.confInfoNotifyParamsExist()&&E.confInfo.mediaType<=16},t.isConfChairMan=function(){return null!==E&&1===E.confInfo.confRole},t.p2pTransferConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return S.error("conf service is not null"),e.abrupt("return");case 3:return E=new p.default(t),void 0!==t.isAutoScreenShare?w.setIsAutoStartScreenShare(t.isAutoScreenShare):w.setIsAutoStartScreenShare(!1),e.next=7,E.p2pTransferConf(t);case 7:return n=e.sent,r=n.errorCode,0!==r&&(S.error("confService.p2pTransferConf fail,set confService null"),E=null),e.abrupt("return",n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("endConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.endConf();case 5:return t=e.sent,S.info("endConf set confService null, res = "+t),E=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reInviteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("reInviteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.reInviteAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.addAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("addAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.addAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.hangupAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("hangupAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.hangupAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.callAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("callAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.callAttendee(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.removeAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("removeAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.removeAttendee(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("muteAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.muteAttendee(t.isMute,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.muteConf=function(){var e=(0,l.default)(u.default.mark(function e(t,n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("muteConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.muteConf(t,n);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.lockConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("lockConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.lockConf(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.postponeConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("postponeconf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.postponeConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handupService=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("handupService no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.handup(t.isHandup,t.attendee);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.releaseChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("releaseChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.releaseChairman(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("requestChairman no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.requestChairman(t.chairmanPwd,t.reqNumber);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.changeConfSelfRole=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==E&&(S.info("changeConfSelfRole "+t),E.confInfo.confRole=t,window.CLIENTCONFIG.ISMOBILE&&(S.info("notifyIsSelfChairManToNative "+t),window.notifyIsSelfChairManToNative(t)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.setConfNotifyFunc=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("set confctrl service callback func"),e.next=3,coreTup.getConfCtrlInstance();case 3:t=e.sent,t.setMultiNotifyFunc(491564,V),t.setNotifyFunc(491525,$),t.setNotifyFunc(491577,Y),t.setNotifyFunc(491538,K),t.setNotifyFunc(491545,j),t.setNotifyFunc(491556,J),t.setNotifyFunc(491544,re),t.setNotifyFunc(491563,B),t.setNotifyFunc(491600,W),t.setNotifyFunc(491566,H),t.setNotifyFunc(491580,G),t.setNotifyFunc(491595,F),t.setNotifyFunc(491552,X),t.setNotifyFunc(491553,z),t.setNotifyFunc(491554,o),t.setNotifyFunc(491578,Z),t.setNotifyFunc(491567,D),t.setNotifyFunc(491579,U),t.setNotifyFunc(491535,ee),t.setNotifyFunc(491531,M),t.setNotifyFunc(491529,Q),t.setNotifyFunc(491548,k),t.setNotifyFunc(491598,R),t.setNotifyFunc(491533,ae),t.setNotifyFunc(491534,oe),t.setNotifyFunc(491599,P),t.setNotifyFunc(491562,te),t.setNotifyFunc(491557,ne),t.setNotifyFunc(491550,x),t.setNotifyFunc(491582,b),t.setNotifyFunc(491581,y),t.setNotifyFunc(491588,ie),t.setNotifyFunc(491570,ce),t.setNotifyFunc(491589,ue),t.setNotifyFunc(491603,q),t.setNotifyFunc(491601,A),t.setNotifyFunc(491571,le),t.setNotifyFunc(491609,fe),t.setNotifyFunc(491610,se);case 43:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("AudientResult",e)}),O=function(e){for(var t=0,n=0,r=0;r<e.length;r++)t=e.charCodeAt(r),10===t?n+=2:t<127?n+=1:t>=128&&t<=2047?n+=2:t>=2048&&t<=65535&&(n+=3);return n},L=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=$getState().myInfo,r=n.account,a=n.name,S.info("confSignRequest attendee",t.substr(0,3)+"**"+t.substr(5,t.length)),S.info("confSignRequest account",r.substr(0,3)+"**"+r.substr(5,r.length)),S.info("confSignRequest name",a.substr(0,3)+"**"+a.substr(5,a.length)),o=parseInt((new Date).getTime()/1e3),S.info("confSignRequest date",o),e.next=8,E.confSignRequest(t,r,O(r),a,O(a),o);case 8:i=e.sent,S.info("confSignRequest",i),i&&0===i.result?window.CLIENTCONFIG.ISMOBILE?(S.info("mobile sign success"),setTimeout(function(){$dispatch(coreUi.createConfTipMsg([language.SIGNSUCCESS]))},3e3)):(S.info("window sign success"),s=$getState().conf.videoFrameHwnd,c=C.getAvcFrameHandles(),window.CLIENTCONFIG.ISWIN&&(f={frameHwnd:0!==s?s:c,dialog_type:1,content_id:"SIGNSUCCESS"},setTimeout(function(){(0,h.showMessageBox)(f)},3e3)),"mac"===window.CLIENTCONFIG.PLATFORM&&setTimeout(function(){window.Toast(language.SIGNSUCCESS,2,!1,"pcToast","")},3e3)):S.info("confSignRequest failed",i.result);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),A=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("confSignRequest data ",t),n=t.param.event_info,r=[],0===n.event_type&&0===n.open_switch&&(T=setInterval(function(){if(r=$getState().conf.memberListInfo,r.length>0)for(var e in r)if(r[e].is_self){L(r[e].number),clearInterval(T);break}},1e3));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=function(e){coreCommon.Observer.publish("ChangeDirectionResult",e)},x=function(e){var t=JSON.parse((0,s.default)(e));if(void 0!==t.param.number){var n="";n=t.param.number,t.param.number=handlePhoneNumber(n)}if(S.info("呼叫其他号码结果",t),E&&e.param&&e.param.reason){var r=E.localRemoveAttendee(e.param.number);r&&r.userInfo&&(e.param.userInfo=r.userInfo)}coreCommon.Observer.publish("callAttendeeResult",e)},R=function(e){coreCommon.Observer.publish("McuConfType",e)},M=function(e){coreCommon.Observer.publish("BroadcaseResult",e)},k=function(e){coreCommon.Observer.publish("inviteAttendeeResult",e)},P=function(e){coreCommon.Observer.publish("transferChairman",e)},D=function(e){coreCommon.Observer.publish("UportalBookConfResult",e)},U=function(e){coreCommon.Observer.publish("handleSvcWatchInd",e.param)},F=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("NonChairCtrlcaps",t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),G=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("handleSpeakerReport",t),7!==t.param.result&&115!==t.param.result||window.isSupportiDo||coreCommon.Observer.publish("UportalTokenErr",t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),B=(t.getVRMList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,coreTup.getConfCtrlInstance();case 4:return t=e.sent,e.next=7,coreAccount.getLoginModel();case 7:return n=e.sent,r=n.serverUportalAddress,a=n.serverUportalPort,e.next=12,t.getVRMList(r,a);case 12:o=e.sent,o&&0===o.result?S.info("get vmr list success"):S.info("get vmr list failed, result = "+o.result);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!((n=t.sipLoginOnly)||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN)){e.next=7;break}return S.info("get conflist is it smc metting or bigwin or sipLoginOnly, return."),e.abrupt("return");case 7:return S.info("get conflist"),r={account_id:$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING?"":$getState().myInfo.account,conf_right:2,include_end:0,page_index:1,page_size:20},e.next=11,coreTup.getConfCtrlInstance();case 11:a=e.sent,a.getConfList(r);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.subscribeConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return S.warn("subscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 7:return S.info("subscribe conf list ,as"),e.next=10,coreTup.getConfCtrlInstance();case 10:r=e.sent,r.subscribeConfList();case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unSubscribeConfList=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,!(n=t.sipLoginOnly)&&!window.CLIENTCONFIG.ISBIGWIN){e.next=7;break}return S.warn("unSubscribeConfList is sipLoginOnly or bigwin, so return"),e.abrupt("return");case 7:return S.info("unsubscribe conf list ,as"),e.next=10,coreTup.getConfCtrlInstance();case 10:r=e.sent,r.unSubscribeConfList();case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.cancelConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("cancel the meeting,[coreConf]"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.cancelConf(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.transferChairman=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("transfer chairman"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.transferChairman(t.confHandle,t.attendeeInfo);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfInfoService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("get confInfo"),e.next=3,coreTup.getConfCtrlInstance();case 3:n=e.sent,n.getConfInfo(t);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(S.info("handleGetConfListRes: "+e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void(window.CLIENTCONFIG.ENABLE_IT_MEETING&&e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED?window.refreshImToken():coreCommon.Observer.publish("UportalTokenErr",e));coreCommon.Observer.publish("ConfList",e.param)}),W=function(e){0!=e.param.result&&S.info("subscribe ConfList fail,error code= ",e.param.result)},V=t.handleGetConfInfoRes=function(e){if(S.info("handleGetConfInfoRes",e.param.result),e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_AUTH_FAILED||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_TIMEOUT||e.param.result===constant.MEDIA_X_ERROR_CODE.CONFCTRL_E_ERR_SERVICE_ERROR)return void coreCommon.Observer.publish("UportalTokenErr",e);if(coreCommon.Observer.publish("ConfInfo",e.param),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){var t=e.param?e.param.get_conf_info_result:null,n=t?t.conf_list_info:null;if(n&&n.guest_join_uri&&S.info("handleGetConfInfoRes has guest_join_uri = "+handlePhoneNumber(n.guest_join_uri)),n&&n.chairman_pwd&&S.info("handleGetConfInfoRes has chairman_pwd is "+n.chairman_pwd.substr(0,1)+"****"),t&&t.num_of_addendee>0){for(var r=t.attendee,a="",o=0;o<r.length;o++)a=a+r[o].name.substr(0,1)+"**"+r[o].name.substr(-1)+", ";S.info("handleGetConfInfoRes has attendee_name = "+a)}}constant.PAIR_STATE.PAIR_SUCCESS===$getState().synergismInfo.pairState&&(S.info("confinfo  end = "+(0,s.default)(e.param)),coreConf.getPairConfPasResult(e.param))},H=function(e){if(S.info("handleVMRConfResult: "+e.param.result),7===e.param.result)return window.CLIENTCONFIG.ENABLE_IT_MEETING?void 0:void coreCommon.Observer.publish("UportalTokenErr",e);coreCommon.Observer.publish("VMRConfResult",e.param)},$=function(e){E&&E.handleConfMTnumber(e)},Y=(t.handleConfConnected=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return e.next=3,E.handleConfConnected(t);case 3:e.next=11;break;case 5:if(S.error("confService is null, handleConfConnected"),!(t&&t.param&&t.param.handle)){e.next=11;break}return e.next=9,coreTup.getConfCtrlInstance();case 9:n=e.sent,n.leaveConf(t.param.handle);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if($getState().synergismInfo.inPairConf)return S.info("in pair conf, start handleConfRightResult"),void coreCommon.Observer.publish("pairInviteJoinConf",e);E&&E.handleConfRightResult(e)}),q=(t.handleConfInfoNotify=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info(" confinfonotify."),!E){e.next=6;break}return e.next=4,E.handleConfInfoNotify(t);case 4:e.next=12;break;case 6:if(S.info(" confinfonotify confservice is null"),!(t&&t.param&&t.param.handle)){e.next=12;break}return e.next=10,coreTup.getConfCtrlInstance();case 10:n=e.sent,n.leaveConf(t.param.handle);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("enter handleBigConfInfo"),E&&t.param&&t.param.type&&(S.info(" handleBigConfInfo data.param.type = "+t.param.type),E.handleBigConfInfo(t.param.type));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),j=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState().conf,r=n.isSameGradeMcu,a=n.isSvcConf,o=n.isAudience,0!==t.param.conf_status.num_of_participant||!a&&0!==r&&o){e.next=4;break}return S.info("don't attendeeListUpdate, isSvcConf = "+a+", isSameGradeMcu = "+r+", isAudience = "+o),e.abrupt("return");case 4:if(7!==t.param.result){e.next=9;break}if(S.error("CONFCTRL_E_EVT_ATTENDEE_LIST_UPDATE_IND,error result = 7"),window.isSupportiDo){e.next=9;break}return coreCommon.Observer.publish("UportalTokenErr",t),e.abrupt("return");case 9:if(!E||!E.isFirstGetMemberList||N!==constant.MEETING_NET_TYPE.SMC_MEETING){e.next=20;break}if(!t||0==(t.param.conf_status.media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)){e.next=14;break}E.isFirstGetMemberList=!1,e.next=20;break;case 14:if(!window.CLIENTCONFIG.ISBIGWIN||window.isSupportiDo){e.next=20;break}return coreConf.NotifyJoinConfFailed(0),$getState().bigwinBuried.buried.postHasSent||(coreCommon.BigwinObserver.publish("OnJoinConfFailed"),coreCommon.BigwinObserver.publish("OnChangeHasSent",!0)),S.error("is Not DataConf, leave conf, confHandle=",confHandle),e.next=20,(0,g.actionLeaveConf)();case 20:E&&E.handleConfAttendeeListUpdate(t);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),K=function(e){E&&E.handleConfBroadCastLocal(e)},J=function(e){E&&E.handleMuteAttendeeResult(e)},z=function(e){E&&E.handleReleaseChairmanResult(e)},X=function(e){E&&E.handleReqChairmanResult(e)},Q=function(e){E&&E.handleEnterPwdToChairmanResult(e)},Z=(t.handleConfIncoming=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.confctrlInitAtomic.wait();case 2:if(null===E){e.next=11;break}if(S.error("already has conf, reject it"),!(t&&t.param&&t.param.handle)){e.next=10;break}return e.next=7,coreTup.getConfCtrlInstance();case 7:return n=e.sent,e.next=10,n.rejectConf(t.param.handle);case 10:return e.abrupt("return");case 11:return e.next=13,coreAccount.getLoginModel();case 13:r=e.sent,a=r.deployMode,a===constant.MEETING_NET_TYPE.SMC_MEETING?(S.info("conf incoming, handle = "+t.param.handle+", caller is "+handlePhoneNumber(t.param.conf_incoming_ind.number)+", mediaType is "+t.param.conf_incoming_ind.media_type),o={passcode:t.param.conf_incoming_ind.conf_id,confId:t.param.handle,callId:t.param.call_id,confSubject:t.param.conf_incoming_ind.subject,groupUri:t.param.conf_incoming_ind.group_uri,compereNumber:t.param.conf_incoming_ind.number,mediaType:t.param.conf_incoming_ind.media_type},E=new p.default(o)):E=new p.default,i=E.handleConfIncoming(t),i||(E=null,S.error("handleConfIncoming error, set confService null"));case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfBeTransferToConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("CONFCTRL_E_EVT_BE_TRANS_TO_CONF_IND,call transfer to conf, handle = "+t.param.handle+", mediaType is "+t.param.conf_info.media_type),null!==E){e.next=12;break}if(!(coreCall.getCallCount()>1||coreCall.getCallCount()<1)){e.next=10;break}if(S.warn("more than one call or no call, can not transfer to conf,getCallCount = "+coreCall.getCallCount()),!(t&&t.param&&t.param.handle)){e.next=9;break}return e.next=7,coreTup.getConfCtrlInstance();case 7:n=e.sent,n.leaveConf(t.param.handle);case 9:return e.abrupt("return");case 10:E=new p.default(null),E.setIsCallTransToConfTrue();case 12:return e.next=14,E.handleConfBeTransferToConf(t);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,_.confctrlInitAtomic.wait();case 2:if(null===E){e.next=6;break}return S.error("conf service is not null in oneKeyEnterConfService"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),e.abrupt("return",!1);case 6:return E=new p.default(null),e.next=9,E.oneKeyEnterConf(t.confAcs,t.confId,t.confPwd,t.isVideo,t.deviceSet,t.isVMR);case 9:return n=e.sent,n||(E=null,S.error("oneKeyEnterConfService res = "+(0,s.default)(n)+"set confService null")),e.abrupt("return",n);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return S.error("conf service is not null in enterConfInConfList"),e.abrupt("return",!1);case 3:return E=new p.default(null),e.next=6,E.enterConfInConfList(t.confId,t.cycle_conf_id);case 6:return n=e.sent,n||(E=null,S.error("enterConfInConfListService fail,set confService null")),e.abrupt("return",n);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===E){e.next=3;break}return S.error("conf service is not null in enterConfByIdOnlyService"),e.abrupt("return",!1);case 3:return E=new p.default(null),e.next=6,E.enterConfByIdOnly(t.confId,t.confPas,t.deviceSet);case 6:return n=e.sent,r=n.errorCode,0!==r&&(E=null,S.error("enterConfByIdOnlyService fail,set confService null")),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("rejectConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.rejectConf(t);case 5:if(!(n=e.sent)||0!==n.result){e.next=12;break}return S.info("reject conf success,set confservice null"),E=null,e.abrupt("return",!0);case 12:return E=null,S.info("reject conf failed,set confservice null"),e.abrupt("return",!1);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.acceptConf=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("acceptConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.acceptConf(t.confHandle,t.isVideoType);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getConfMemberListContent=function(){return null===E?void S.error("getConfMemberListContent no conf service exist"):E.getConfMemberListContent()},t.leaveConf=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("leaveConf no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.leaveConf(n);case 5:return t=e.sent,t&&0===t.result?(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_LEAVE,params:[1]}),coreConf.getConfInfoFromDb(),S.info("leave conf success,set confservice null")):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_LEAVE,params:[0,t.result]}),S.info("leave conf failed,set confservice null")),E=null,e.abrupt("return",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.broadcastAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("broadcastAttendee no conf service exist"),e.abrupt("return");case 3:return $dispatch(coreUi.changeIsBroadByChairman(t.isBroadcast)),S.info("broadcastAttendee,isBroadcast is "+t.isBroadcast+",number is "+handlePhoneNumber(t.number)),e.next=7,E.broadcastAttendee(t.isBroadcast,t.number);case 7:if(!(n=e.sent)||0!==n.result){e.next=13;break}return S.info("broadcastAttendee success"),e.abrupt("return",n);case 13:return S.info("broadcastAttendee failed"),e.abrupt("return");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleConfEnded=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.info("handleConfEnded confservice is null"),e.abrupt("return");case 3:return e.next=5,E.handleConfEnded(t);case 5:n=e.sent,n&&(w.beLeaveDataConf(),E=null,S.info("handleConfEnded,set confservice null"),coreConf.getConfInfoFromDb());case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleCallEndedPostConf=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!E){e.next=5;break}return e.next=3,E.handleCallEndedForOneKeyEnterConf(t);case 3:n=e.sent,n?(E=null,S.info("handleCallEndedPostConf,set confservice null")):S.warn("handleCallEndedPostConf callid is differ, no need to deal");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.handleSvcSeessionModify=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("handleSvcSeessionModify no conf service exist"),e.abrupt("return");case 3:E.handleSvcSeessionModify(t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){coreCommon.Observer.publish("HandleSvcConfWatchRet",e)}),ee=function(e){E?E.handleVideoWatchResult(e):S.error("handleVideoWatchResult,confService is null")},te=function(e){E?E.handleLockConfResult(e):S.error("handleLockConfResult,confService is null")},ne=function(e){E?E.handleHandupAttendeeResult(e):S.error("handleHandupAttendeeResult,confService is null")},re=function(e){if(7===e.param.result&&!window.isSupportiDo)return void coreCommon.Observer.publish("UportalTokenErr",e);E&&E.handleConfSpeakerNotify(e)},ae=(t.handleTransToConfResult=function(e){E&&E.handleTransToConfResult(e)},t.updateConfMemberList=function(e){E&&E.updateConfMemberList(e)},t.sendWatchSvcRequest=function(e){if(E)return E.sendWatchSvcRequest(e.attendeeList,e.selfNum);S.info("sendWatchSvcRequest confService is null,selfNum="+handlePhoneNumber(e.selfNum))},t.confctrlWatchAttendee=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("confctrlWatchAttendee no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.confctrlWatchAttendee(t);case 5:if(n=e.sent,r=de(),!n||0!==n.result){e.next=13;break}return coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,extraTrackKey:t,params:[r,handlePhoneNumber(t)]}),S.info("confctrlWatchAttendee success"),e.abrupt("return",n);case 13:return a=[r,handlePhoneNumber(t),0],n&&a.push(n.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_ATTENDEE,params:a}),S.info("confctrlWatchAttendee failed"),e.abrupt("return");case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){S.info("handleMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",e.param)}),oe=function(e){S.info("handleCancelMultiViewBroadcast start"),coreCommon.Observer.publish("onMultiViewBroadcast",-1)},ie=(t.changeActiveDirection=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("changeActiveDirection no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.changeActiveDirection(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.cloudRecordRequest=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==E){e.next=3;break}return S.error("cloudRecordRequest no conf service exist"),e.abrupt("return");case 3:return e.next=5,E.cloudRecordRequest(t.messageId,t.switchType);case 5:if(n=e.sent,S.info("reacrd cloudRecordRequest[3] res:",(0,s.default)(n)),!n||0!==n.result){e.next=12;break}return S.info("reacrd success"),e.abrupt("return",n);case 12:S.info("reacrd failed",n.rsp),m.handleShowErrorMsgBox(language.START_PAUSE_RECORDING_FAILED);case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){S.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("setRecordVideoResult",e)}),se=function(e){S.info("reacrd start/stop reacrd result [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoResult",e)},ce=function(e){S.info("reacrd handleConfStateDirectBroadCastIndresult [1]",(0,s.default)(e)),coreCommon.Observer.publish("confStateDirectBroadCastIndresult",e)},ue=function(e){S.info("reacrd handleRecordVideoStatusChairmanIndResult [1]",(0,s.default)(e)),coreCommon.Observer.publish("recordVideoStatusChairmanIndResult",e)},fe=function(e){coreCommon.Observer.publish("cancelConf",e)},le=(t.getIsSmcFirstRequestCharimanRest=function(){return null!==E&&E.getIsSmcFirstRequestCharimanRest()},t.setIsSmcFirstRequestCharimanRest=function(e){null!==E?E.setIsSmcFirstRequestCharimanRest(e):S.error("setIsSmcFirstRequestCharimanRest conservice is null")},t.getIsFirstEnterConf=function(){return null!==E&&E.getIsFirstEnterConf()},t.setIsFirstEnterConf=function(e){null!==E?E.setIsFirstEnterConf(e):S.error("setIsFirstEnterConf conservice is null")},t.getIsRecall=function(){return null!==E&&E.getIsRecall()},t.getUpdatedParticipants=function(){if(null!==E)return E.getUpdatedParticipants()},t.getSavedRecallInfo=function(){return null===E?"":E.getSavedRecallInfo()},function(e){E?E.handleConfstateLock(e):S.error("handleConfstateLock, confService is null")}),de=t.getCurrentConfId=function(){if(null===E)return"";var e=E.getCurrentConfId();return isNullOrEmpty(e)&&(e=""),e};t.setIsAvcMultiViewBroadcast=function(e){if(null===E)return void S.error("confctrlWatchAttendee no conf service exist");E.setIsAvcMultiViewBroadcast(e)},t.getIsAvcMultiViewBroadcast=function(){return null!==E&&E.getIsAvcMultiViewBroadcast()},t.isVideoConf=function(){return!!E&&E.isVideoConf()},t.isDataConf=function(){return!!E&&E.isDataConf()},t.isSvcConf=function(){return!!E&&E.getIsSvc()},t.getSsrcRange=function(){return E?E.getSsrcRange():{}},t.getInfoOfConf=function(e){return E?E.getConfInfo(e):null},t.isUserEndConf=function(){return!!E&&E.isUserEndConf()},t.isMemberListNull=function(){return!E||E.isMemberListNull()}},250:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.NotifyGetUpdateFiles=t.NotifyShareResult=t.NotifySkipLogin=t.NotifySipRegisterd=t.NotifySharingType=t.NotifyAppStared=t.NotifyLoginFailedEx=t.NotifyJoinConfFailedEx=t.NotifyDeviceListReady=t.NotifyCameraListUpdate=t.NotifySharingAppClouse=t.NotifyLocalCameraStatus=t.NotifyLocalCameraPull=t.NotifyLocalSpkPull=t.NotifyLocalMicPull=t.NotifyLocalSpkVolue=t.NotifyLocalMicVolue=t.NotifyLocalSPKStatus=t.NotifyLocalMICStatus=t.NotifyJoinConfFailed=t.NotifyMyLeaveConf=t.NotifyMyJoinConf=t.NotifyLocalStopSharing=t.NotifyLocalStartSharing=t.NotifyStopSharing=t.NotifyStartSharing=t.NotifyMyKickedOut=t.NotifyConfNoStart=t.NotifyConfTermination=t.NotifyLoginFailed=t.NotifyLoginSuccess=t.initMaxhubAPI=t.initBigWinAPI=t.clkAPIWebSocket=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(69),u=r(c),f=n(357),l=r(f),d=coreLogger.getLogger("api")("clkapi"),p=t.clkAPIWebSocket=null,h=function(e){var t=e.cmd;if(null!==p)switch(t){case 1601:d.info("CloudLink Login message"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),p.postRpsMessage(e,0);break;case 1621:coreCommon.BigwinObserver.publish("OnReloginCloudLink",e),p.postRpsMessage(e,0),d.info("CloudLink Relogin message");break;case 1602:d.info("Stop cloudlink message: ",e),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),p.postRpsMessage(e,0);break;case 1603:d.info("Join conference message"),coreCommon.BigwinObserver.publish("OnJoinConference",e),p.postRpsMessage(e,0);break;case 1604:d.info("Leave conference message: ",e),coreCommon.BigwinObserver.publish("OnLeaveConference",e),p.postRpsMessage(e,0);break;case 1605:d.info("Start sharing message: ",e),coreCommon.BigwinObserver.publish("OnStartSharing",e),p.postRpsMessage(e,0);break;case 1606:d.info("Stop sharing message: ",e),coreCommon.BigwinObserver.publish("OnStopSharing",e),p.postRpsMessage(e,0);break;case 1607:var n={hWnd:851978};p.postRpsParamMessage(e,n,0);break;case 1608:p.postRpsMessage(e,0);break;case 1609:var r={user_name:""};coreCommon.BigwinObserver.publish("OnGetSharingUsername",r),d.info("sharing User name is: ",r.user_name),p.postRpsParamMessage(e,r,0);break;case 1610:d.info("ctrl local camera message: ",e),coreCommon.BigwinObserver.publish("OnCtrlLocalCamera",e),p.postRpsMessage(e,0);break;case 1611:coreCommon.BigwinObserver.publish("onBigWinVideoHwnd",e);break;case 1612:case 1613:p.postRpsMessage(e,0);break;case 1614:coreCommon.BigwinObserver.publish("OnSetMicValue",e),p.postRpsMessage(e,0);break;case 1615:coreCommon.BigwinObserver.publish("OnSetSpkValue",e),p.postRpsMessage(e,0);break;case 1616:var a={device_type:e.param.device_type,device_list:[]};coreCommon.BigwinObserver.publish("ongetDeviceList",e,a),p.postRpsParamMessage(e,a,0);break;case 1617:coreCommon.BigwinObserver.publish("OnSetDevice",e),p.postRpsMessage(e,0);break;case 1618:coreCommon.BigwinObserver.publish("onBigWinDataSharingHwnd",e);break;case 1619:var o={vol:""};coreCommon.BigwinObserver.publish("ongetMicValue",o),d.info("getMicValue ="+(0,u.default)(o)),p.postRpsParamMessage(e,o,0);break;case 1620:var i={vol:""};coreCommon.BigwinObserver.publish("ongetSpkValue",i),d.info("getMicValue ="+(0,u.default)(i)),p.postRpsParamMessage(e,i,0);break;case 1622:d.info("CloudLink SET RECV SHARE PARAM message: ",(0,u.default)(e)),coreCommon.BigwinObserver.publish("OnSetRecvShareParam",e),p.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}},_=(t.initBigWinAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=p=e.sent,null!==p?(p.setCmdFunc(1601,h),p.setCmdFunc(1602,h),p.setCmdFunc(1603,h),p.setCmdFunc(1604,h),p.setCmdFunc(1605,h),p.setCmdFunc(1606,h),p.setCmdFunc(1607,h),p.setCmdFunc(1608,h),p.setCmdFunc(1609,h),p.setCmdFunc(1610,h),p.setCmdFunc(1611,h),p.setCmdFunc(1612,h),p.setCmdFunc(1613,h),p.setCmdFunc(1614,h),p.setCmdFunc(1615,h),p.setCmdFunc(1616,h),p.setCmdFunc(1617,h),p.setCmdFunc(1618,h),p.setCmdFunc(1619,h),p.setCmdFunc(1620,h),p.setCmdFunc(1621,h),p.setCmdFunc(1622,h),d.info("initBigWinAPI : Create WebSocket success.")):d.info("initBigWinAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=e.cmd;if(null!==p)switch(t){case 1601:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_RUN_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnRunCloudLink",e),p.postRpsMessage(e,0);break;case 1604:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LEAVE_CONFERENCE"),coreCommon.BigwinObserver.publish("OnLeaveConference",e),p.postRpsMessage(e,0);break;case 1623:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_LOGOUT"),coreCommon.BigwinObserver.publish("OnLogout",e),p.postRpsMessage(e,0);break;case 1624:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_CHANGE_LANGUAGE"),coreCommon.BigwinObserver.publish("OnChangeLanguage",e),p.postRpsMessage(e,0);break;case 1625:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_GET_MAIN_WND"),coreCommon.BigwinObserver.publish("OnGetMainWnd",e);break;case 1626:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_SHOW_OR_HIDE_MAIN_WND"),coreCommon.BigwinObserver.publish("OnShowOrHideMainWnd",e),p.postRpsMessage(e,0);break;case 1605:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_START_SHARING"),coreCommon.BigwinObserver.publish("OnStartSharing",e),p.postRpsMessage(e,0);break;case 1606:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_SHARING"),coreCommon.BigwinObserver.publish("OnStopSharing",e),p.postRpsMessage(e,0);break;case 1602:d.info("maxhubHttpAPICmdCallback: CLIENT_CMD_STOP_CLOUDLINK"),coreCommon.BigwinObserver.publish("OnStopCloudLink",e),p.postRpsMessage(e,0);break;case 1627:coreCommon.BigwinObserver.publish("OnEncryptValue",e);break;case 1628:coreCommon.BigwinObserver.publish("OnDecryptValue",e);break;case 1629:coreCommon.BigwinObserver.publish("OnCleanValue",e);break;case 1630:coreCommon.BigwinObserver.publish("OnWorkplaceLogin",e),p.postRpsMessage(e,0);break;default:d.error("can not support cmd ",(0,u.default)(e))}}),g=(t.initMaxhubAPI=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new l.default;case 2:t.clkAPIWebSocket=p=e.sent,null!==p?(p.setCmdFunc(1601,_),p.setCmdFunc(1604,_),p.setCmdFunc(1623,_),p.setCmdFunc(1624,_),p.setCmdFunc(1625,_),p.setCmdFunc(1626,_),p.setCmdFunc(1605,_),p.setCmdFunc(1606,_),p.setCmdFunc(1602,_),p.setCmdFunc(1627,_),p.setCmdFunc(1628,_),p.setCmdFunc(1629,_),p.setCmdFunc(1630,_),d.info("initMaxHubAPI : Create WebSocket success.")):d.info("initMaxHubAPI : Create WebSocket failed.");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.NotifyLoginSuccess=function(){var e={description:"NotifyLoginSuccess",nty:1701,result:0};null!==p&&(d.info("clk_NotifyLoginSuccess ",(0,u.default)(e)),p.postNotifyMessage(e))},t.NotifyLoginFailed=function(e){var t={description:"NotifyLoginFailed",nty:1702,result:e};null!==p&&(d.info("clk_NotifyLoginFailed ",(0,u.default)(t)),p.postNotifyMessage(t))}),m=(t.NotifyConfTermination=function(e){var t={description:"NotifyConfTermination",nty:1703,result:e};null!==p&&(d.info("clk_NotifyConfTermination ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyConfNoStart=function(e){var t={description:"NotifyConfNoStart",nty:1704,result:e};null!==p&&(d.info("clk_NotifyConfNoStart ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyMyKickedOut=function(e){var t={description:"NotifyMyKickedOut",nty:1705,result:e};null!==p&&(d.info("clk_NotifyMyKickedOut ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyStartSharing=function(e,t){var n={description:"NotifyStartSharing",nty:1706,result:e,param:{user_name:t}};null!==p&&(d.info("clk_NotifyStartSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyStopSharing=function(e,t){var n={description:"NotifyStopSharing",nty:1707,result:e,param:{user_name:t}};null!==p&&(d.info("clk_NotifyStopSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalStartSharing=function(e,t){var n={description:"NotifyLocalStartSharing",nty:1708,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifyLocalStartSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalStopSharing=function(e,t){var n={description:"NotifyLocalStopSharing",nty:1709,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifyLocalStopSharing ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyMyJoinConf=function(e,t){var n={description:"NotifyMyJoinConf",nty:1710,result:e,param:{sip_number:t}};null!==p&&(d.info("clk_NotifyMyJoinConf ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyMyLeaveConf=function(e){var t={description:"NotifyMyLeaveConf",nty:1711,result:e};null!==p&&(d.info("clk_NotifyMyLeaveConf ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyJoinConfFailed=function(e){var t={description:"NotifyJoinConfFailed",nty:1712,result:e};null!==p&&(d.info("clk_NotifyJoinConfFailed ",(0,u.default)(t)),p.postNotifyMessage(t))});t.NotifyLocalMICStatus=function(e,t){var n={description:"NotifyLocalMICStatus",nty:1713,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalMICStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalSPKStatus=function(e,t){var n={description:"NotifyLocalSPKStatus",nty:1714,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalSPKStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalMicVolue=function(e,t){var n={description:"NotifyLocalMicVolue",nty:1715,result:e,param:{vol:t}};null!==p&&(d.info("clk_NotifyLocalMicVolue ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalSpkVolue=function(e,t){var n={description:"NotifyLocalSpkVolue",nty:1716,result:e,param:{vol:t}};null!==p&&(d.info("clk_NotifyLocalSpkVolue ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyLocalMicPull=function(e,t,n){var r={description:"NotifyLocalMicPull",nty:1717,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalMicPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalSpkPull=function(e,t,n){var r={description:"NotifyLocalSpkPull",nty:1718,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalSpkPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalCameraPull=function(e,t,n){var r={description:"NotifyLocalCameraPull",nty:1719,result:e,param:{device_id:t,device_name:n}};null!==p&&(d.info("clk_NotifyLocalCameraPull ",(0,u.default)(r)),p.postNotifyMessage(r))},t.NotifyLocalCameraStatus=function(e,t){var n={description:"NotifyLocalCameraStatus",nty:1720,result:e,param:{status:t}};null!==p&&(d.info("clk_NotifyLocalCameraStatus ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifySharingAppClouse=function(e,t){var n={description:"NotifyLocalCameraPull",nty:1721,result:e,param:{wnd:t}};null!==p&&(d.info("clk_NotifySharingAppClouse ",(0,u.default)(n)),p.postNotifyMessage(n))},t.NotifyCameraListUpdate=function(e){var t={description:"NotifyCameraListUpdate",nty:1722,result:e};null!==p&&(d.info("clk_NotifyCameraListUpdate ",(0,u.default)(t)),p.postNotifyMessage(t))},t.NotifyDeviceListReady=function(){var e={description:"NotifyDeviceListReady",nty:1723,result:0};null!==p&&(d.info("clk_NotifyDeviceListReady ",(0,u.default)(e)),p.postNotifyMessage(e))},t.NotifyJoinConfFailedEx=function(e){m(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyLoginFailedEx=function(e){g(e),window.anonymousJoinConf&&window.bigWinCommonLogOut()},t.NotifyAppStared=function(e){var t={description:"NotifyAppStared",nty:1724,result:e};d.info("NotifyAppStared: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifySharingType=function(e,t){var n={description:"NotifySharingType",nty:1725,result:e,param:{type:t}};d.info("NotifySharingType: ",(0,u.default)(n)),null!==p&&p.postNotifyMessage(n)},t.NotifySipRegisterd=function(e){var t={description:"NotifySipRegisterd",nty:1726,result:e,param:{ip:$getState().login.serverAddress,account:$getState().login.displayAccount}};d.info("NotifySipRegisterd: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifySkipLogin=function(e){var t={description:"NotifySkipLogin",nty:1727,result:e};d.info("NotifySkipLogin: ",(0,u.default)(t)),null!==p&&p.postNotifyMessage(t)},t.NotifyShareResult=function(e,t,n){var r={description:"NotifyShareResult",nty:1728,result:e,param:{param1:t,param2:n}};d.info("NotifyShareResult: ",(0,u.default)(r)),null!==p&&p.postNotifyMessage(r)},t.NotifyGetUpdateFiles=function(e,t){var n={description:"NotifyGetUpdateFiles",nty:1729,result:e,param:{paramStr:t}};d.info("NotifyGetUpdateFiles: ",(0,u.default)(n)),null!==p&&p.postNotifyMessage(n)}},255:function(e,t,n){n(31),n(22),n(23),n(256),n(257),n(258),n(259),e.exports=n(8).Set},256:function(e,t,n){"use strict";var r=n(180),a=n(149);e.exports=n(181)("Set",function(e){return function(){return e(this,arguments.length>0?arguments[0]:void 0)}},{add:function(e){return r.def(a(this,"Set"),e=0===e?0:e,e)}},r)},257:function(e,t,n){var r=n(10);r(r.P+r.R,"Set",{toJSON:n(182)("Set")})},258:function(e,t,n){n(183)("Set")},259:function(e,t,n){n(184)("Set")},260:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerPush=t.unRegisterPush=t.DB_KEY_HAS_OPEN_PUSH=t.DB_KEY_APNS_CER_TYPE=t.DB_KEY_IOS_VOIP_TOKEN=t.DB_KEY_IOS_PUSH_TOKEN=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME=t.DB_KEY_HW_PUSH_TOKEN=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(136),l=(n(166),n(310)),d=coreLogger.getLogger("login")("push"),p=t.DB_KEY_HW_PUSH_TOKEN="hwPushToken",h=t.DB_KEY_HW_PUSH_BADGE_CLASS_NAME="hwPushBadgeClassName",_=t.DB_KEY_IOS_PUSH_TOKEN="iosPushToken",g=t.DB_KEY_IOS_VOIP_TOKEN="voipToken",m=t.DB_KEY_APNS_CER_TYPE="apnsCerType",v=t.DB_KEY_HAS_OPEN_PUSH="hasOpenPush";window.registerHWPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:p});case 4:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(a=n.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:h});case 9:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(o=r.value);case 11:return e.next=13,C(2,1,a,o,"","",t);case 13:return e.next=15,(0,l.registerEServerClientPush)(2,1,a,o,"","",t);case 15:coreDb.saveLoginSetting({key:p,value:a}),coreDb.saveLoginSetting({key:h,value:o});case 17:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterHWClientPush=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=window.webView.getLocalIp()||"0.0.0.0",r=void 0,a=void 0,e.next=5,coreDb.queryLoginSetting({key:p});case 5:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value),e.next=9,coreDb.queryLoginSetting({key:h});case 9:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(a=i.value),e.next=13,C(2,3,r,a,"","",n,"5",t);case 13:return e.next=15,(0,l.registerEServerClientPush)(2,3,r,a,"","",n);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.unRegisterPush=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("android"!==window.CLIENTCONFIG.PLATFORM){e.next=5;break}return e.next=3,window.unRegisterHWClientPush(t);case 3:e.next=8;break;case 5:if("ios"!==window.CLIENTCONFIG.PLATFORM){e.next=8;break}return e.next=8,window.unRegisterIosPush(t);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();window.registerIosPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(a){var o,i,c;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:_});case 3:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(t=o.value);case 5:if(!isNullOrEmpty(n)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:g});case 8:i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(n=i.value);case 10:if(!isNullOrEmpty(r)){e.next=15;break}return e.next=13,coreDb.queryLoginSetting({key:m});case 13:c=e.sent,isNullOrEmpty(c)||!c.hasOwnProperty("key")||!c.hasOwnProperty("value")||isNullOrEmpty(c.key)||isNullOrEmpty(c.value)||(r=c.value);case 15:return e.next=17,C(1,1,"","",t,n,a,r);case 17:return e.next=19,(0,l.registerEServerClientPush)(1,1,"","",t,n,a,r);case 19:coreDb.saveLoginSetting({key:_,value:t}),coreDb.saveLoginSetting({key:g,value:n});case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterIosPush=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=void 0,a=void 0,o="5",e.next=5,coreDb.queryLoginSetting({key:_});case 5:return i=e.sent,isNullOrEmpty(i)||!i.hasOwnProperty("key")||!i.hasOwnProperty("value")||isNullOrEmpty(i.key)||isNullOrEmpty(i.value)||(r=i.value),e.next=9,coreDb.queryLoginSetting({key:g});case 9:return c=e.sent,isNullOrEmpty(c)||!c.hasOwnProperty("key")||!c.hasOwnProperty("value")||isNullOrEmpty(c.key)||isNullOrEmpty(c.value)||(a=c.value),e.next=13,coreDb.queryLoginSetting({key:m});case 13:return u=e.sent,isNullOrEmpty(u)||!u.hasOwnProperty("key")||!u.hasOwnProperty("value")||isNullOrEmpty(u.key)||isNullOrEmpty(u.value)||(o=u.value),e.next=17,C(1,3,"","",r,a,n,o,t);case 17:return e.next=19,(0,l.registerEServerClientPush)(1,3,"","",r,a,n,o);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var C=t.registerPush=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,i,c,u){var l,p,h,_,g,m,C,I,w,S,E,N,T,b,O,L,A,y,x,R,M=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5",k=arguments.length>8&&void 0!==arguments[8]&&arguments[8];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info(" [ registerPush ] "),e.next=3,(0,f.getLoginModel)();case 3:return l=e.sent,p=l.account,h=l.authToken,_=l.serverAddress,g=l.serverPort,m=l.pushgwUri,e.next=7,coreSecurity.getPasswordManager();case 7:return C=e.sent,e.next=10,C.getPassword("password");case 10:if(I=e.sent,w=1,S="00:00",E="00:00",!isNullOrEmpty(r)||!isNullOrEmpty(i)){e.next=17;break}return d.info(" [ registerPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 17:return isNullOrEmpty(a)&&(a=""),N="",N=l.isSupportAS?"https://"+m+"/PushAgent/push/registerpush":"https://"+_+":"+g+"/pushAgent/registerpush",T={user:p,deviceToken:1===t?i:r,pushType:t,flag:n,clientIP:u,language:window.langShortName,noPushStartTime:S,noPushEndTime:E,apnsServerType:1,apnsCerType:M,pushByTimeSwitch:w,heart_beat_time:30,android_token:1===t?i:r,appId:"1",pushClassName:a,voipToken:c,appMode:1,push_mode:1,imPushMode:1,callPushMode:0,pushIMActive:"welink://welinksoftclient/h5page?page=imDetail",pushCallActive:"welink://welinksoftclient/h5page?page=call"},e.next=23,coreHttp.sendSyncRequest({url:N,type:constant.REQUEST_TYPE.POST,header:{Authorization:"Basic "+h,"Content-Type":"application/json"},body:(0,o.default)(T),cipherlist:[50331695,50331701,50331708,50331709]});case 23:if(b=e.sent,O=b.param,L=O.recv_body,A=O.resp_code,y=O.result,!A){e.next=43;break}if(200!==(x=parseInt(A))){e.next=39;break}if(L=JSON.parse(L),!L.error){e.next=32;break}return d.error(" [ registerPush ] failed, errorCode:"+L.error+", info:"+L.error_description),e.abrupt("return");case 32:R=!0,1===n?R=!0:3===n&&(R=!1),(3===n&&k||1===n)&&coreDb.saveUserConfigList({key:v,value:R.toString()}),$dispatch(coreUi.changeHasOpenPush(R)),d.info(" [ registerPush ] result:",L),e.next=41;break;case 39:return d.error(" [ registerPush ] failed, request error, status code: "+A+", result: "+y),e.abrupt("return");case 41:e.next=44;break;case 43:d.error(" [ registerPush ] failed, status code:"+A);case 44:case"end":return e.stop()}},e,this)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}()},261:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var r=n(412),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.verifyCertificate=a.verifyCertificate,t.checkCertificateOverdue=a.checkCertificateOverdue,t.detectInit=a.detectInit,t.detectUnInit=a.detectUnInit,t.detectStartClient=a.detectStartClient,t.detectStopClient=a.detectStopClient,t.detectStartClientContinue=a.detectStartClientContinue,t.detectStopClientContinue=a.detectStopClientContinue,t.detectStartServer=a.detectStartServer,t.detectStopServer=a.detectStopServer,t.setCmptEvent=a.setCmptEvent},272:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.MyInfo=t.resetMyInfo=t.getMyInfo=void 0;var a=n(119),o=r(a),i=n(4),s=r(i),c=n(5),u=r(c),f=n(120),l=r(f),d=n(121),p=r(d),h=n(1),_=r(h),g=n(2),m=r(g),v=void 0,C=(t.getMyInfo=function(){var e=(0,m.default)(_.default.mark(function e(){return _.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return v||(v=new I(C)),e.abrupt("return",v);case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resetMyInfo=function(){v=null},{language:"",languageCode:"",isReminder:!0,closeAppWays:"minimizeApp",isAutoCollectLogs:!0,hasAllowCollectLogs:!1,isAutoAcceptConf:!1,isAutoStart:!1,statusDesc:"",statusOptions:[],selectIndex:1,signature:"",isAutoResponseConf:!1,isOffToLine:!1,isAutoLeave:!0,account:"",address:"",age:"",bind_no:"",birthday:"",compareAccount:"",dept_id:"",dept_name_cn:"",dept_name_en:"",desc:"",email:"",espacenumber:"",etag:"",fax:"",gender:0,home_phone:"",image_id:"",image_sync_time:"",ip_phone:"",is_security:0,mobile:"",modify_time:"",name:"",native_name:"",office_phone:"",office_phone2:"",old_account:"",other_mobiles:"",other_phone:"",other_phone2:"",postcode:"",q_pin_yin:"",result_code:"",short_phone:"",staff_id:0,staff_no:"",state:"0",status:1,title:"",type:"0",uri:"",user_type:"0",voip:"",website:"",selfUserUri:"",show_account:""}),I=t.MyInfo=function(e){function t(e){return(0,s.default)(this,t),(0,l.default)(this,(t.__proto__||(0,o.default)(t)).call(this,e))}return(0,p.default)(t,e),(0,u.default)(t,[{key:"notifyChanged",value:function(e){$dispatch(coreUi.updateMyInfo(e)),e&&e.languageCode&&coreCommon.dispatchModuleEvent("changeLanguage",e.languageCode)}}]),t}(coreCommon.ModuleCache)},273:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DCONF_STATUS={NONE:0,JOINING:1,IN_CONF:2,JOIN_FAIL:3,LEAVING:4,LEFT:5},t.DFPLATFORM={platform:window.CLIENTCONFIG.PLATFORM,isWin:window.CLIENTCONFIG.ISWIN,isBigWin:window.CLIENTCONFIG.ISBIGWIN,isMac:window.CLIENTCONFIG.ISMAC,isMobile:window.CLIENTCONFIG.ISMOBILE,isPc:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISMAC||window.CLIENTCONFIG.ISBIGWIN,isWinBase:window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISBIGWIN},t.IID_COMPONENT={BASE:0,DS:1,AS:2,WB:512},t.NATIVE_DATA_PARAMTYPE={CREATE_DOC_PAGE:0,SET_CURRENT_PAGE:1,SET_BG_COLOR:2,DELETE_PAGE:3,DELETE_DOC:4,SET_CANVAS_SIZE:5,SET_APP_BG_COLOR:6},t.DATA_FIREWALL_MODE={STG:0,SVN:1,SBC:2,NULL:3}},286:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.dealWithSipNumber=t.setUnreadNumber=t.handleChangeBroadCastInfo=t.revertMemberToMuteState=t.setMemberToMuteState=t.calcMemberCount=t.dealWithConfSpeakerList=t.searchContactName=t.searchContact=t.updateMemberDetail=t.searchMemberDetail=t.attendeeSortFunc=t.unique=t.svcConfAttendeeSortFunc=t.dealWithMemberListDataRest=t.dealWithMemberListDataiDo=t.dealItShortNumber=void 0;var a=n(129),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=n(248),_=n(165),g=n(152),m=coreLogger.getLogger("conf")("logic/memberlist"),v=t.dealItShortNumber=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,u;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=34;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=3;break}return e.abrupt("return");case 3:for(r=$getState().myInfo,a={},o=0;o<t.length;o++)i="",t[o].userInfo&&(i=t[o].userInfo.account),t[o].number&&t[o].number.indexOf("@")>0&&(t[o].number=t[o].number.split("@")[0]),i&&t[o].userInfo.espacenumber&&t[o].userInfo.short_phone&&t[o].userInfo.espacenumber!==t[o].userInfo.short_phone&&t[o].number===t[o].userInfo.espacenumber&&(a[i]||(a[i]={},a[i].userInfo=t[o].userInfo));if(!n){e.next=18;break}e.t0=l.default.keys(a);case 8:if((e.t1=e.t0()).done){e.next=16;break}if(s=e.t1.value,a[s].userInfo.short_phone!==n.number){e.next=14;break}return m.info("data conf list -+--------already have this memeber:"+handlePhoneNumber(n.number)),n="",e.abrupt("return",!1);case 14:e.next=8;break;case 16:e.next=33;break;case 18:e.t2=l.default.keys(a);case 19:if((e.t3=e.t2()).done){e.next=33;break}c=e.t3.value,u=0;case 22:if(!(u<t.length)){e.next=31;break}if(t[u].number!==a[c].userInfo.short_phone){e.next=28;break}return a[c].userInfo.name=t[u].name,m.info("data+--------- findX---"+handlePhoneNumber(t[u].number)),t.splice(u,1),e.abrupt("break",31);case 28:u++,e.next=22;break;case 31:e.next=19;break;case 33:m.info("data conf list-+---------"+t.length);case 34:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),C=(t.dealWithMemberListDataiDo=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=C(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,e.abrupt("return",t);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithMemberListDataRest=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p,h,_;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,u.default)([],$getState().conf.memberListInfo),r=$getState().conf.selfRole,a=I(t,n),o=a.enterMemberNames,i=a.leaveMemberNames,s=t.filter(function(e){return!n.some(function(t){return t.number===e.number})}),c=!1,0===n.length&&s.length>0&&!r&&(c=!0),e.next=8,w(s,n);case 8:return f=e.sent,d=f.addMemberNames,window.CLIENTCONFIG.ENABLE_IT_MEETING&&v(n),p=d?d.substring(0,d.length-1):"",h=o?o.substring(0,o.length-1):"",_=i?i.substring(0,i.length-1):"",E(c,p,h,_),e.abrupt("return",{currentMemberList:n});case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,new Array),a=!1,o=e?e.length:0,i=0;i<o;++i){e[i].is_self&&($dispatch(coreUi.changeSelfNumInconf(e[i].number)),$dispatch(coreUi.changeConfMicMute(e[i].is_mute)),1===e[i].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[i].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0))),e[i].is_mute&&(e[i].is_speaking=!1,e[i].speak_valume=0);var s=S(e[i].state);e[i].state=s;for(var c=0;c<t.length;c++){t[c];e[i].number===t[c].number&&(!0,t[c].userInfo.name=e[i].name,e[i].userInfo=t[c].userInfo)}if(isNullOrEmpty(e[i].userInfo)){var u={name:e[i].name,number:e[i].number,account:void 0,email:"",sms:""};window.CLIENTCONFIG.ENABLE_IT_MEETING&&A(e[i].number,e[i].name),e[i].userInfo=u}var f=0!=(e[i].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[i].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[i].is_broadcast&&f){var l={name:e[i].name,number:e[i].number,is_speaker:e[i].is_speaking,role:e[i].role,is_mute:e[i].is_mute,is_self:e[i].is_self};r.push(l),a=!0,!1===$getState().conf.broadCastInfo.isBroadCast&&$dispatch(coreUi.changeSvcSelectWatchInfo({number:""}))}}window.CLIENTCONFIG.ENABLE_IT_MEETING&&(v(e),$getState().login.isSupportAS||function(){for(var n=/^\+(86|991)/,r=0;r<t.length;r++){(function(r){var a=t[r]&&t[r].number?t[r].number:"";if(""===a)return"continue";a=a.replace(n,""),!e.some(function(e){var t=e&&e.number?e.number:"";return""!==(t=t.replace(n,""))&&t===a})&&(t[r].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,e.push(t[r]))})(r)}}());var d={isBroadCast:a,broadCastList:r};return m.info("isBroadCast ido =",a),P(d),{enterMemberNames:"",leaveMemberNames:"",memberList:e}}),I=function(e,t){for(var n=$getState().conf.selfRole,r=($getState().login.sipLoginOnly,""),a="",o=new Array,i=!1,s=!1,c=t?t.length:0,u=0;u<c;++u){var f=0,l=e?e.length:0;s=!1;for(var d=0;d<l;++d){if(t[u].number===e[d].number){s=!0;var p=S(e[d].state);t[u].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||p!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||e[d].is_self||(m.info("member entry: ",handlePhoneNumber(t[u].number)),r+=t[u].userInfo.name+","),t[u].hand_state=e[d].hand_state,t[u].is_deaf=e[d].is_deaf,t[u].is_mute=e[d].is_mute,t[u].media_type=e[d].media_type,t[u].role=e[d].role,t[u].state=p,t[u].is_self=e[d].is_self,t[u].participant_id=e[d].participant_id,t[u].is_broadcast=e[d].is_broadcast,t[u].userInfo.name=e[d].name;var h=0!=(e[d].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_VIDEO)||0!=(e[d].media_type&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_HDVIDEO);if(1===e[d].is_broadcast&&h){var _={name:e[d].name,number:e[d].number,is_speaker:e[d].is_speaking,role:e[d].role,is_mute:e[d].is_mute,is_self:e[d].is_self};o.push(_),i=!0}e[d].is_self&&($dispatch(coreUi.changeSelfNumInconf(e[d].number)),$dispatch(coreUi.changeConfMicMute(e[d].is_mute)),1===e[d].role&&1!==n?($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1)):1===n&&1!==e[d].role&&($dispatch(coreUi.changeConfRole(0)),coreConf.changeConfSelfRole(0))),e[d].is_mute&&(t[u].is_speaking=!1,t[u].speak_valume=0);break}f++}f>=l&&(t[u].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&(m.info("member leave: ",handlePhoneNumber(t[u].number)),a+=t[u].userInfo.name+","),t[u].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[u].is_speaking=!1,t[u].speak_valume=0,s=!0),!1===s&&(t[u].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,t[u].is_speaking=!1,t[u].speak_valume=0)}var g={isBroadCast:i,broadCastList:o};return m.info("isBroadCast= rest ",i),P(g),{enterMemberNames:r,leaveMemberNames:a}},w=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,c,u,f,d,p;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r="",a=$getState().conf.selfRole,t)for(o=0;o<t.length;++o)m.info("member added: ",handlePhoneNumber(t[o].number)),t[o].is_self&&($dispatch(coreUi.changeConfMicMute(t[o].is_mute)),1===t[o].role&&1!==a&&($dispatch(coreUi.changeConfRole(1)),coreConf.changeConfSelfRole(1))),i={name:t[o].name,account:void 0,email:"",sms:""},A(t[o].number,t[o].name),c=S(t[o].state),c!==constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF||t[o].is_self||(r+=i.name+","),u={name:t[o].name,number:t[o].number,userInfo:i,role:t[o].role,is_mute:t[o].is_mute,is_deaf:t[o].is_deaf,state:c,hand_state:t[o].hand_state,media_type:t[o].media_type,is_self:t[o].is_self,is_speaking:!1,speak_volume:0,participant_id:t[o].participant_id,is_broadcast:0},v(n,u)&&(m.info("data conf list add------------"+handlePhoneNumber(u.number)),n.push(u)),t[o].is_self&&$dispatch(coreUi.changeConfMicMute(t[o].is_mute));if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(f=$getState().conf.confServerId,window.confConnectInfo&&f&&1===window.confConnectInfo[f])){for(window.confConnectInfo[f]=2,d=[],p=0;p<n.length;p++)d[p]={},d[p].contactsId=n[p].userInfo.account,d[p].calleeNumber=n[p].number,d[p].displayName=n[p].name,n[p].userInfo.name&&(d[p].displayName=n[p].userInfo.name),m.info("data conf list add------------"+handlePhoneNumber(d[p].displayName));window.confRecordNotify(f,$getState().conf.confSubject,"","",(0,s.default)(d))}return e.abrupt("return",{addMemberNames:r});case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),S=function(e){return 0===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:1===e||2===e?constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT},E=function(e,t,n,r){var a="",i=$getState(),s=i.conf.msgList,c=[].concat((0,o.default)(s));e&&t?(a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_IN_CONFERENCE},c.find(function(e){return e.type===a.type})?m.info("repeat msg, ignor..."):(N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(language.YOU_JOIN_CONFERENCE,2,null,!1))):t&&(m.info("new add member: ",handlePhoneNumber(t)),a={attendees:t,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},c.find(function(e){return e.type===a.type})?m.info("repeat new add msg, ignor..."):(N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(t+language.JOINED_MEETING,2,null,!1))),n&&(a={attendees:n,type:constant.CONF_MSG_TYPE.TYPE_ENTER_CONFERENCE},N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(n+language.JOINED_MEETING,2,null,!1)),r&&(a={attendees:r,type:constant.CONF_MSG_TYPE.TYPE_LEAVE_CONFERENCE},N(a,c),window.CLIENTCONFIG.ISMOBILE&&window.Toast(r+language.LEAVE_CONFERENCE,2,null,!1)),$dispatch(coreUi.updateConfMessage(c))},N=function(e,t){t.length>=3&&t.shift(),t.push(e)},T=(t.svcConfAttendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.is_self<t.is_self?1:n&&e.state>t.state?1:-1},t.unique=function(e){var t={};return e.reduce(function(e,n){return t[n.number]||(t[n.number]=e.push(n)),e},[])},t.attendeeSortFunc=function(e,t){var n=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,r=e.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING||t.state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING;e.userInfo.q_pin_yin&&t.userInfo.q_pin_yin;return e.role>t.role?-1:e.role<t.role?1:e.is_self>t.is_self?-1:e.is_self<t.is_self?1:n&&e.state>t.state?1:n&&e.state<t.state?-1:r&&e.state<t.state?1:r&&e.state>t.state?-1:b(e,t)},function(e){var t="";try{e&&e.charCodeAt(0)<122&&e.charCodeAt(0)>48&&(t=e)}catch(e){m.error("checkPinYin error =",e)}return t}),b=function(e,t){var n=e.userInfo.name.charCodeAt(0)<122&&e.userInfo.name.charCodeAt(0)>48,r=t.userInfo.name.charCodeAt(0)<122&&t.userInfo.name.charCodeAt(0)>48;if(n>r)return-1;if(n<r)return 1;if(n)return O(e.userInfo.name,t.userInfo.name);var a=window.CLIENTCONFIG.ENABLE_IT_MEETING,o=a?T(e.userInfo.q_pin_yin):e.userInfo.q_pin_yin,i=a?T(t.userInfo.q_pin_yin):t.userInfo.q_pin_yin;return L(e.userInfo.name,t.userInfo.name,o,i)},O=function(e,t){var n=e.toLowerCase(),r=t.toLowerCase();return n>r?1:n<r?-1:0},L=function(e,t,n,r){n||(n=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.pinyinUtil.getNamePinyin(e):window.pinyinUtil.getPinyin(e)),r||(r=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?window.pinyinUtil.getNamePinyin(t):window.pinyinUtil.getPinyin(t));var a=n&&r;return a&&n>r?1:a&&n<r?-1:e>t?-1:e<t?1:0},A=t.searchMemberDetail=function(e,t){var n=void 0;x(e,t).then(function(r){r&&1<=r.length&&(n=(0,u.default)({},r[0]),y(n,e,t))})},y=t.updateMemberDetail=function(e,t,n){var r=[].concat((0,o.default)($getState().conf.memberListInfo)),a=r.findIndex(function(e){return e.number!==e.name&&e.number===t&&(""===n||""!==n&&e.name===n)});-1!==a?(m.info("update userInfo after find: "+handlePhoneNumber(t)),(0,u.default)(r[a],{userInfo:e}),$dispatch(coreUi.changeMemberListInfo(r)),coreConf.updateConfMemberList(r),isNullOrEmpty($getState().conf.searchText)||(0,g.searchMemberList)($getState().conf.searchText,r)):m.info("can not find member in memberlist"+handlePhoneNumber(t))},x=t.searchContact=function(){var e=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=t.split("@")[0].replace("sip:",""),m.info("query contact from local by number: "+handlePhoneNumber(t)),e.next=4,coreDb.queryContactByNumber(t);case 4:if(r=e.sent,a=!1,r&&r.length>0?(m.info("query from local success: "+r.length),n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1?r=[]:r.length<1&&(a=!0)):a=!0,!a){e.next=15;break}return m.info("can not find in local, query contact from server"),e.next=11,coreContact.searchServerContact(t);case 11:o=e.sent,i=o.userInformationList,s=i,s&&(m.info("query contact from server success: "+s.length),(0,u.default)(r,s),n&&n!==t&&(r=r.filter(function(e){return e.name===n})),r.length>1&&(r=[]));case 15:return e.abrupt("return",r);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),R=(t.searchContactName=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.toString(),r=t.toString(),!window.skipLogin){e.next=4;break}return e.abrupt("return",r);case 4:return e.next=6,coreDb.queryContactByPhonenumberAccurate(t);case 6:if(!(a=e.sent)||!a[0]){e.next=13;break}m.info("find in local success"),r=a[0].name,a.length>1&&a.forEach(function(e){""===e.account&&(r=e.name)}),e.next=19;break;case 13:return m.info("can not find in local, query contact from server"),e.next=16,coreContact.queryServerContact(t);case 16:o=e.sent,i=o.param.name,i&&(r=i);case 19:return e.abrupt("return",r);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.dealWithConfSpeakerList=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a,o,i,s,c,f,d,p,v,C;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=$getState(),r=n.conf.memberListInfo,0!==r.length){e.next=3;break}return e.abrupt("return");case 3:for(a="",void 0===t.speaker&&(0,u.default)(t,{speaker:[]}),M(r);t.speaker.length>2;)t.speaker.pop();o=0;case 8:if(!(o<t.speaker.length)){e.next=34;break}if(!(t&&t.speaker[o]&&isNullOrEmpty(t.speaker[o].number))){e.next=12;break}return m.warn("speaker num is null, so continue"),e.abrupt("continue",31);case 12:i=!1,s=0;case 14:if(!(s<r.length)){e.next=23;break}if(t.speaker[o].number!==r[s].number){e.next=20;break}return(0,u.default)(t.speaker[o],{name:r[s].userInfo.name?r[s].userInfo.name:r[s].name,account:r[s].userInfo.account,isSelf:r[s].is_self}),r[s]=(0,u.default)({},r[s],{is_speaking:t.speaker[o].is_speaking,speak_valume:t.speaker[o].speak_valume}),i=!0,e.abrupt("break",23);case 20:s++,e.next=14;break;case 23:if(i){e.next=29;break}return m.info("conf member list do not have speaker detail, search it, numer is "+handlePhoneNumber(t.speaker[o].number)),e.next=27,x(D(t.speaker[o].number));case 27:c=e.sent,c&&1<=c.length&&(f=$getState(),d=f.myInfo.account,(0,u.default)(t.speaker[o],{name:c[0].name,account:c[0].account,isSelf:d===c[0].account}));case 29:(0,u.default)(t.speaker[o],{isToMuted:!1}),a+=handlePhoneNumber(t.speaker[o].number)+"#"+t.speaker[o].name.substr(0,1)+"**"+t.speaker[o].name.substr(-1)+" # ";case 31:o++,e.next=8;break;case 34:m.info("dealWithConfSpeakerList: "+a),$dispatch(coreUi.updateConfSpeaker(t)),window.CLIENTCONFIG.ISMOBILE&&$getState().conf.isSvcConf&&window.SvcSpeakerToNative(t),window.CLIENTCONFIG.ISMOBILE&&(p=R(t),isNullOrEmpty(p)?window.showCallTips(""):(v=language.ON_SPEAKING.format(p),window.showCallTips(v))),$dispatch(coreUi.changeMemberListInfo(r)),$getState().conf.isSvcConf&&(C=R(t),window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.ISWIN?_.SvcAtdManager.handleSpeakerNotify(C):h.SvcAttendanceManager.handleSvcSpeakerNotify()),isNullOrEmpty($getState().conf.searchText)||(0,g.searchMemberList)($getState().conf.searchText,r);case 41:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){if(e){var t=void 0;return 0!==e.num_of_speaker&&e.speaker instanceof Array&&(t=e.speaker[0].name),t}}),M=function(e){for(var t=0;t<e.length;t++)e[t]=(0,u.default)({},e[t],{is_speaking:!1,speak_valume:0})},k=(t.calcMemberCount=function(e){for(var t=0,n=0;n<e.length;n++)e[n].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF&&t++;m.info("calcMemberCount in "),_.SvcAtdManager.setConfUserInfo(t);var r=t.toString()+"/"+e.length.toString();$dispatch(coreUi.changeMeetingMembers(r)),m.info("current member count: "+r)},t.setMemberToMuteState=function(e,t){var n=$getState(),r=n.conf.memberListInfo,a=(0,u.default)([],r);m.info("set attendee tomute state, attendee="+handlePhoneNumber(e)+", isMute="+t);for(var o=0;o<a.length;++o)if(a[o].number===e){a[o].is_mute=t?constant.MUTE_STATE.MUTE_STATE_TOMUTE:constant.MUTE_STATE.MUTE_STATE_TOUNMUTE;break}$dispatch(coreUi.changeMemberListInfo(a)),isNullOrEmpty($getState().conf.searchText)||(0,g.searchMemberList)($getState().conf.searchText,a)},t.revertMemberToMuteState=function(e){var t=$getState(),n=t.conf.memberListInfo,r=(0,u.default)([],n);m.info("revert attendee tomute state, isMute="+e);for(var a=0;a<r.length;++a)r[a].is_mute>1&&(r[a].is_mute=e?constant.MUTE_STATE.MUTE_STATE_UNMUTE:constant.MUTE_STATE.MUTE_STATE_MUTE);$dispatch(coreUi.changeMemberListInfo(r)),isNullOrEmpty($getState().conf.searchText)||(0,g.searchMemberList)($getState().conf.searchText,r)},function(e,t){var n="";if(t.isBroadCast)if(t.broadCastList&&!isNaN(t.broadCastList.length)&&t.broadCastList.length>0)for(var r=0;r<t.broadCastList.length;r++)n=n+";ssrc"+(t.broadCastList[r].name.length>1?t.broadCastList[r].name.substr(0,1)+"**"+t.broadCastList[r].name.substr(-1):"**")+",number:"+handlePhoneNumber(t.broadCastList[r].number)+",is_self:"+t.broadCastList[r].is_self;else n=!1;m.info(e,n)}),P=t.handleChangeBroadCastInfo=function(e){if(window.CLIENTCONFIG.ISMOBILE){k("handleChangeBroadCastInfo",e);var t=$getState().conf.broadCastInfo,n=!1;if(t.isBroadCast!==e.isBroadCast?n=!0:t.broadCastList.length>0&&e.broadCastList.length>0?t.broadCastList[0].number!==e.broadCastList[0].number&&(n=!0):t.broadCastList.length!==e.broadCastList.length&&(n=!0),m.info("handleChangeBroadCastInfo flag ",n),n){var r=JSON.parse((0,s.default)(e));if(void 0!==r.broadCastList){var a="",o="";r.broadCastList.forEach(function(e){void 0!==e.name&&(a=e.name,e.name=handlePhoneNumber(a)),void 0!==e.number&&(o=e.number,e.number=handlePhoneNumber(o))})}if(m.info("handleChangeBroadCastInfo broadCastInfo ",(0,s.default)(r)),e.isBroadCast)for(var i=0;i<e.broadCastList.length;i++){var c=language.SVC_BROAD_CAST.format(e.broadCastList[i].name);m.info("JSToNativeToast isself  tempLanguage ",c.substr(0,5)+"***");var u=$getState().conf.isSvcConf;window.CLIENTCONFIG.ISMOBILE&&u&&window.JSToNativeToast(2e3,c),1!==e.broadCastList[i].is_self&&window.broadCastInfo(e)}else window.broadCastInfo(e)}}if(window.CLIENTCONFIG.ISMAC){var f=$getState().conf.broadCastInfo,l=!1;if(f.isBroadCast!==e.isBroadCast?l=!0:f.broadCastList.length>0&&e.broadCastList.length>0?f.broadCastList[0].number!==e.broadCastList[0].number&&(l=!0):f.broadCastList.length!==e.broadCastList.length&&(l=!0),e.isBroadCast&&l)for(var d=0;d<e.broadCastList.length;d++){var p=language.SVC_BROAD_CAST.format(e.broadCastList[d].name),h=$getState().conf.isSvcConf;h&&(m.info("mac broad toast message : ",p),window.Toast(p,5,!1,"pcToast",""))}}$dispatch(coreUi.changeBroadCastInfo(e))},D=(t.setUnreadNumber=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{account:"",group_id:""},t=arguments[1];if(coreConf.isInConf()||!(coreCall.getCallCount()<=0)){var n=$getState(),r=n.conf.groupId,a=n.call,o=a.userInfo,i=a.screenState,s=n.recent.currentRecentInfo,c=e.account,u=e.group_id;r&&u&&r===u?(s&&s.group&&s.group.group_id===r&&("min"!==i&&"extra"!==i||(t=0)),m.info("set conf page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0))):c&&o&&c===o.account&&(s&&s.contact&&s.contact.account===c&&("min"!==i&&"extra"!==i||(t=0)),m.info("set call page unread num:"+t),0===t?$dispatch(coreUi.changeHasUnreadMsg(!1)):$dispatch(coreUi.changeHasUnreadMsg(!0)))}},t.dealWithSipNumber=function(e){if(isNullOrEmpty(e))return m.warn("number is empty. "),"";var t=e.toString();return-1!==t.indexOf("sip:")&&(t=t.substring(4)),-1!==t.indexOf("@")&&(t=t.split("@")[0]),t})},287:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.itmeetingSmallWin=t.itmeetingExtendConf=t.itmeetingChairman=t.itmeetingAcceptSharing=t.itmeetingShareScreen=t.itmeetingCreateConf=t.itmeetingJoinConf=t.meetingHWsetCaptureCamera=t.meetingHWcameraOnOrOff=t.meetingHWmicrophoneOnOrOff=t.meetingHWspeakerOnOrOff=t.meetingHWreCallTimeOut=t.startCallFailed=t.firstQosReport=t.meetingHWLeaveConf=t.sipRegisterFailed=t.uportalLoginFailed=t.qosAlertSend=t.meetingHWsaveIpParam=t.meetingHWJoinConf=void 0;var a=n(123),o=r(a),i=n(1),s=r(i),c=n(69),u=r(c),f=n(2),l=r(f),d=null,p=null,h="",_=null,g=!0,m=coreLogger.getLogger("logic")("meetingHWBuried"),v=function(){d=null,p=null,h="",g=!0,clearInterval(_)},C=function(){d=!0,p=null,g=!0},I=(t.meetingHWJoinConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_join_success",n="加入会议成功",m.info("joinConfData: ",h),r=$getState().conf.isVideoConf,window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||(h.isVideoConf=r),a="string"==typeof h?h:(0,u.default)(h),C(),I(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(t,n,a):E(t,n,a);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.meetingHWsaveIpParam=function(e){h=e},t.qosAlertSend=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,f,l,h,_,g;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.isVideoConf,n=$getState().call.mediaInfo,r=n.audio,a=n.video,o={audioRecvBitRate:r.recv.bitRate,audioSendBitRate:r.send.bitRate,audioRecvLossFraction:r.recv.lost,audioSendLossFraction:r.send.lost,audioRecvDelay:r.recv.delay,audioSendDelay:r.send.delay,audioRecvJitter:r.recv.jitter,audioSendJitter:r.send.jitter},i={videoRecvBitRate:a.recv.bitRate,videoSendBitRate:a.send.bitRate,videoRecvResolutionRatio:a.recv.frameSize,videoSendResolutionRatio:a.send.frameSize,videoRecvFrameRate:a.recv.frameRate,videoSendFrameRate:a.send.frameRate,videoRecvLossFraction:a.recv.lost,videoSendLossFraction:a.send.lost,videoRecvDelay:a.recv.delay,videoSendDelay:a.send.delay,videoRecvJitter:a.recv.jitter,videoSendJitter:a.send.jitter},d&&null===p&&(c="string"==typeof o?o:(0,u.default)(o),f="Telepresence_qos_audio_alarm",l="通信音频状态Qos信息告警",t?(h="Telepresence_qos_video_alarm",_="通信视频状态Qos信息告警",g="string"==typeof i?i:(0,u.default)(i),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(S(f,l,c),S(h,_,g)):(E(f,l,c),E(h,_,g))):window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(f,l,c):E(f,l,c),p=!0,setTimeout(function(){p=null},6e4));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.uportalLoginFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_uportal_login_fail",r="uPortal登录失败",a={reason:t},o=(0,u.default)(a),S(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sipRegisterFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_sip_register_fail",r="SIP注册失败",a={reason:t},o=(0,u.default)(a),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,o):E(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWLeaveConf=function(){var e=(0,l.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t="Telepresence_leave",n="离开会议",v(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(t,n,""):E(t,n,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:d&&(_=setInterval(function(){w()},3e5));case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),w=(t.firstQosReport=function(){var e=(0,l.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:g&&(m.info("firstQosReport"),w());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().conf.sharePersonNum,t=$getState().call.mediaInfo,n=t.audio,r=t.video,a=t.bfcp,o=$getState().call.callStatus,i=0,s=0,c={audioRecvBitRate:n.recv.bitRate,audioSendBitRate:n.send.bitRate,audioRecvLossFraction:n.recv.lost,audioSendLossFraction:n.send.lost,audioRecvDelay:n.recv.delay,audioSendDelay:n.send.delay,audioRecvJitter:n.recv.jitter,audioSendJitter:n.send.jitter};for(var f in c)"- -"!==c[f]&&"--"!==c[f]&&(i+=1);if(8===i){var l="string"==typeof c?c:(0,u.default)(c);window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S("Telepresence_qos_audio_info","通话音频状态Qos信息",l):E("Telepresence_qos_audio_info","通话音频状态Qos信息",l),g=!1}if("VIDEO_CONNECTED"===o){var d={videoRecvBitRate:r.recv.bitRate,videoSendBitRate:r.send.bitRate,videoRecvResolutionRatio:r.recv.frameSize,videoSendResolutionRatio:r.send.frameSize,videoRecvFrameRate:r.recv.frameRate,videoSendFrameRate:r.send.frameRate,videoRecvLossFraction:r.recv.lost,videoSendLossFraction:r.send.lost,videoRecvDelay:r.recv.delay,videoSendDelay:r.send.delay,videoRecvJitter:r.recv.jitter,videoSendJitter:r.send.jitter};for(var p in d)"- -"!==d[p]&&"--"!==d[p]&&(s+=1);if(12===s){var h="string"==typeof d?d:(0,u.default)(d);window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S("Telepresence_qos_video_info","通话视频状态Qos信息",h):E("Telepresence_qos_video_info","通话视频状态Qos信息",h)}}if(""!==e){var _={dataRecvBitRate:a.recv.bitRate&&"--"!==a.recv.bitRate?a.recv.bitRate:-1,dataSendBitRate:a.send.bitRate&&"--"!==a.send.bitRate?a.send.bitRate:-1,dataRecvResolutionRatio:a.recv.frameSize&&"--"!==a.recv.frameSize?a.recv.frameSize:-1,dataSendResolutionRatio:a.send.frameSize&&"--"!==a.send.frameSize?a.send.frameSize:-1,dataRecvFrameRate:a.recv.frameRate&&"--"!==a.recv.frameRate?a.recv.frameRate:-1,dataSendFrameRate:a.send.frameRate&&"--"!==a.send.frameRate?a.send.frameRate:-1,dataRecvLossFraction:a.recv.lost&&"--"!==a.recv.lost?a.recv.lost:-1,dataSendLossFraction:a.send.lost&&"--"!==a.send.lost?a.send.lost:-1,dataRecvDelay:a.recv.delay&&"--"!==a.recv.delay?a.recv.delay:-1,dataSendDelay:a.send.delay&&"--"!==a.send.delay?a.send.delay:-1,dataRecvJitter:a.recv.jitter&&"--"!==a.recv.jitter?a.recv.jitter:-1,dataSendJitter:a.send.jitter&&"--"!==a.send.jitter?a.send.jitter:-1},m="string"==typeof _?_:(0,u.default)(_),v="Telepresence_qos_data_info";window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(v,"通话辅流状态Qos信息",m):E(v,"通话辅流状态Qos信息",m)}}),S=(t.startCallFailed=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_make_call_fail",r="makeCall失败",a={reason:t},o=(0,u.default)(a),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,o):E(n,r,o);case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWreCallTimeOut=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_abnormal_break",r="异常掉会",a={reason:t},o=(0,u.default)(a),v(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,o):E(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWspeakerOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_speaker",r="免提开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWmicrophoneOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_microphone",r="MIC开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWcameraOnOrOff=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="摄像头开关",n+=t?"_on":"_off",window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.meetingHWsetCaptureCamera=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="Telepresence_camera",r="",1===t?(n+="_back",r="切换为前置摄像头"):(n+="_front",r="切换为后置摄像头"),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?S(n,r,""):E(n,r,"");case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="win",""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:""+window.linkSmcAccessCode,meetingId:""+window.linkSmcPasscode,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.meetingWHBuriedReport(t,n,r);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),E=(t.itmeetingJoinConf=function(){m.info("IT_MEETING joinconf bury point");var e={from:"workplace",version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE},t=(0,u.default)(e);E("Telepresence_join","加入会议",t)},t.itmeetingCreateConf=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING createConf bury point"),n=$getState().conf.isVideoConf,r="创建会议",a="Telepresence_create_conf",o={actionType:t,isVideoConf:n},i=(0,u.default)(o),E(a,r,i);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingShareScreen=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING shareScreen bury point"),n="Telepresence_share",r="",t?(n+="_start",r="屏幕共享"):(n+="_stop",r="停止共享"),E(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingAcceptSharing=function(){m.info("IT_MEETING acceptSharing");E("Telepresence_receive_share","接收共享","")},t.itmeetingChairman=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING applyOrReleaseChairman bury point"),n="Telepresence_chairman",r="",t?(n+="_apply",r="申请主席"):(n+="_release",r="释放主席"),E(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingExtendConf=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING extendConf bury point"),n="Telepresence_extend_conf",r="延长会议",a={time:t},o=(0,u.default)(a),E(n,r,o);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.itmeetingSmallWin=function(){var e=(0,l.default)(s.default.mark(function e(t){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:m.info("IT_MEETING smallWin bury point"),n="Telepresence_smallwin",r="",t?(n+="_open",r="显示小画面"):(n+="_close",r="隐藏小画面"),E(n,r,"");case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(s.default.mark(function e(t,n,r){var a,i,c,f,l,d,p,h,_,g;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=2;break}return e.abrupt("return");case 2:a=$getState(),i=a.login.sipImpi,c=a.conf.confSubject,i.indexOf("@")&&(i=i.split("@")[0]),i=""+i,c=c||"",f="win",l=$getState().conf.currentConfInfo,d=l.access_number,p=l.vmr_id,h=l.conf_id,_=isNullOrEmpty(d)?"":d,_&&_.indexOf("+")>-1&&(_=_.replace("+","00")),g=isNullOrEmpty(p)?h:p,g=isNullOrEmpty(g)?"":g,""!==r?(r=JSON.parse(r),r=(0,o.default)({},r,{accessCode:_,meetingId:g,meetingName:c,platform:f,sipNo:i}),r=(0,u.default)(r)):(r={accessCode:_,meetingId:g,meetingName:c,platform:f,sipNo:i},r=(0,u.default)(r)),window.ITMeetingBuriedReport(t,n,r);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}())},288:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sipLoginAtomicReset=t.sipLoginAtomic=t.sipserverLogin=t.loginToRegSipServer=t.loginToSipServer=void 0;var a=n(123),o=r(a),i=n(3),s=r(i),c=n(69),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98305,N);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new coreTup.getCallInstance;case 2:t=e.sent,t.setNotifyFunc(98691,g);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,coreUt.utHandleServerError({isLocalError:n.isLocalError,requestId:n.requestId,serverName:n.serverName,serverApiName:n.serverApiName,errorCode:n.errorCode,errorDescription:n.errorDescription});case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),m=t.loginToSipServer=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S=s,w.info("[ loginToSipServer ] _ignoreSipResult "+s),w.info("<account_login><7_sip>begin"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,params:[constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER]}),e.next=6,(0,v.getLoginModel)();case 6:if(t=e.sent,n=t.isMultiDeviceLogined,r=t.isMobile,a=t.stgUri,o=t.sipLoginOnly,(0,C.registerSipResultCallback)(),
//! 移动端因为存在多终端登录场景，不在这里进行Sip注册了，在eServer登录完成后，获取到多终端登录的通知后，进行Sip注册；PC端不变；
w.info("[ loginToSipServer ] isMultiDeviceLogined:"+n+", isMobile:"+r+", sipLoginOnly:"+o),n&&r&&(w.info("[ loginToSipServer ] end login:"),t.setLoginStatus(!1,!0)),n&&r&&!o){e.next=24;break}return h(),e.next=15,E(t.isTempLogin);case 15:if(i=e.sent,w.info("[ confctrlInit ] start"),!t.useMetting||window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=20;break}return e.next=20,coreConf.confctrlInit();case 20:return w.info("[ confctrlInit ] end"),e.abrupt("return",i);case 24:return e.abrupt("return",{result:!1});case 25:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=(t.loginToRegSipServer=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h(),e.next=3,E(!1);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(136)),C=n(185),I=n(230),w=coreLogger.getLogger("logic")("login/sipLogin"),S=!1,E=t.sipserverLogin=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,c,f,d,p,h,g,m,C,S,E,N,T,b,O,L,A,y,x,R,M,k,P,D,U,F,G,B,W,V,H,$,Y,q,j,K,J,z,X,Q,Z,ee,te,ne,re,ae=arguments.length>0&&void 0!==arguments[0]&&arguments[0],oe=arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(oe)){e.next=4;break}return e.next=3,(0,v.getLoginModel)();case 3:oe=e.sent;case 4:return t=oe,n=t.sipImpi,r=t.sipAccount,a=t.sipLoginOnly,o=t.serverAddress,i=t.serverPort,c=t.deployMode,f=t.tempsipserverAddress,d=t.tempsipserverPort,oe.isInSipLogin=!0,e.next=8,coreSecurity.getPasswordManager();case 8:return p=e.sent,h=p.getPassword("sipPassword"),a&&(o=f,i=d),(window.CLIENTCONFIG.ISBIGWIN||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING)&&(window.isSupportiDo=!0),e.next=14,new coreTup.getCallInstance;case 14:return g=e.sent,e.next=17,_();case 17:if(window.CLIENTCONFIG.ISMOBILE&&(window.sendToTupConfig(),w.info("[bfcp] sendToTupConfig success")),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}w.info("[IT-Meeting] tup service multiuser model open"),e.next=24;break;case 24:return e.next=26,g.initForMultiuser();case 26:return e.next=28,g.setEnableMutiUsed(1);case 28:return m={account:{account_enable_sip:1}},e.next=31,g.config(m);case 31:return e.next=33,g.setAccountIdEnable(0);case 33:return e.next=35,g.registerProcessNotifyForAccount(0);case 35:return e.next=37,g.setTupCallLogParams(3,5e3,1,window.LOG_PATH);case 37:return e.next=39,(0,I.configHMELog)();case 39:C=e.sent,w.info("sip server login configHmeInfo=",C),g.setHMELog(C),e.next=45;break;case 45:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=119;break}return e.next=48,(0,I.configSip)(ae);case 48:return S=e.sent,e.next=51,g.config(S);case 51:return e.next=54,coreSetting.initMediaDevice();case 54:return E=(0,I.configCall)(),e.next=57,g.config(E);case 57:return N=(0,I.configRejectCallType)(),e.next=60,g.config(N);case 60:return T=(0,I.serPointPickupCfg)(),w.info("pointPickup + "+(0,u.default)(T)),e.next=64,g.config(T);case 64:return b=(0,I.serGroupPickupCfg)(),w.info("groupPickup + "+(0,u.default)(b)),e.next=68,g.config(b);case 68:return e.next=70,(0,I.configMKI)();case 70:return O=e.sent,e.next=73,g.config(O);case 73:return e.next=75,(0,I.configRTP)();case 75:return L=e.sent,e.next=78,g.config(L);case 78:return e.next=80,(0,I.configVideo)();case 80:return A=e.sent,e.next=83,g.config(A);case 83:return e.next=85,(0,I.configBFCP)();case 85:return y=e.sent,e.next=88,g.config(y);case 88:return"android"===window.CLIENTCONFIG.PLATFORM&&(x=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(x)),w.info("debug info config bfcp sip config"),R=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),M=!1,R!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&R!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(M=!0),e.next=95,(0,I.configBFCPForTLS)({bForceTLSMode:M});case 95:return k=e.sent,e.next=98,g.configBFCPTLSParam(k);case 98:return e.next=100,(0,I.configSessionTimer)();case 100:return P=e.sent,e.next=103,g.config(P);case 103:return e.next=105,(0,I.configBandwidthLimit)();case 105:return D=e.sent,e.next=108,g.config(D);case 108:if(w.info("First issue CHR config to call"),ae){e.next=114;break}return e.next=112,coreSetting.issuedChrConfigToCall();case 112:return e.next=114,coreSetting.issuedTerminalConfig();case 114:w.info("sip server login sipAccount=",handlePhoneNumber(r)),-1!==r.indexOf("sip:")&&(r=r.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(w.info("set capRotateCtrlMode"),g.setCapRotateCtrlMode(1)),e.next=182;break;case 119:return U=[],e.next=122,(0,I.configSip)(ae);case 122:return F=e.sent,U.push(g.config(F)),e.next=127,coreSetting.initMediaDevice();case 127:return G=(0,I.configVideo)(),B=(0,I.configBFCP)(),W=(0,I.configCall)(),U.push(g.config(W)),V=(0,I.configRejectCallType)(),U.push(g.config(V)),H=(0,I.serPointPickupCfg)(),w.info("pointPickup + "+(0,u.default)(H)),U.push(g.config(H)),$=(0,I.serGroupPickupCfg)(),w.info("groupPickup + "+(0,u.default)($)),U.push(g.config($)),e.next=141,(0,I.configMKI)();case 141:return Y=e.sent,U.push(g.config(Y)),e.next=145,(0,I.configRTP)();case 145:return q=e.sent,U.push(g.config(q)),e.next=149,G;case 149:return j=e.sent,U.push(g.config(j)),e.next=153,B;case 153:return K=e.sent,U.push(g.config(K)),"android"===window.CLIENTCONFIG.PLATFORM&&(J=void 0!==window.isConfHardCode?parseInt(window.isConfHardCode,10):1,window.isHardDecodeToNative(J)),w.info("debug info config bfcp sip config"),z=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.BFCPMode"]),X=!1,z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_TLS&&z!==constant.BFCP_TRANS_TYPE.BFCP_TRANS_UDP||(X=!0),e.next=162,(0,I.configBFCPForTLS)({bForceTLSMode:X});case 162:return Q=e.sent,e.next=165,g.configBFCPTLSParam(Q);case 165:return e.next=167,(0,I.configSessionTimer)();case 167:return Z=e.sent,U.push(g.config(Z)),e.next=171,(0,I.configBandwidthLimit)();case 171:if(ee=e.sent,U.push(g.config(ee)),w.info("First issue CHR config to call"),ae){e.next=177;break}return e.next=177,s.default.all([coreSetting.issuedChrConfigToCall(),coreSetting.issuedTerminalConfig()]);case 177:return w.info("sip server login sipAccount=",handlePhoneNumber(r)),-1!==r.indexOf("sip:")&&(r=r.substring(4)),window.CLIENTCONFIG.ISMOBILE&&(w.info("set capRotateCtrlMode"),g.setCapRotateCtrlMode(1)),e.next=182,s.default.all(U);case 182:if(window.confCtrlLoaded||!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=185;break}return e.next=185,coreConf.confctrlInit();case 185:return e.next=187,h;case 187:if(te=e.sent,w.info("sip server login"),ne=void 0,!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=199;break}return re={sip_account_id:0,account:{account_auth_sip:{account:r,user_name:n,passwd:te}}},e.next=194,g.config(re);case 194:return e.next=196,g.registerForAccount(0);case 196:ne=e.sent,e.next=202;break;case 199:return e.next=201,g.register(n,r,te);case 201:ne=e.sent;case 202:if(w.info("hwTupCall.register sip",ne),0!==ne.result){e.next=209;break}return w.info("sip register execute success."),$dispatch(coreUi.changeDoSipReg(!0)),e.abrupt("return",{result:!0});case 209:return window.CLIENTCONFIG.ISBIGWIN?(coreConf.NotifyLoginFailedEx(1),w.info("big win login failed")):window.isHubEnv&&(coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),w.info("maxhub sipserverLogin login failed")),w.error("sip register execute fail."),e.abrupt("return",{result:!1});case 212:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),N=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("[sip register]"),e.next=3,(0,v.getLoginModel)();case 3:n=e.sent,window.dispatchEvent((0,o.default)(new Event("sipRegResultEvent"),{registerState:t.param.register_state,reasonCode:t.param.reason_code})),w.info("[sip register] is_deregister: "+t.param.is_deregister+"->0:login,1:logout; reason_code:"+t.param.reason_code),n.sipRegisterState=t.param.register_state,constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED===t.param.register_state&&0===t.param.reason_code?(w.info("[sip register] ok"),w.info("<account_login><7_sip>end ok"),n.setLoginStatus(!1,!0),coreConf.initTupPairClient(),n.isInSipLogin=!1,T.resolve(),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[1,n.isResume?1:0],isTrackTimeCosts:!0})):constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING===t.param.register_state?(w.info("[sip register] registering"),n.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERING):(n.setLoginStatus(!1,!0),constant.SIP_REGISTER_STATE.SIP_REGISTER_BUTT!==t.param.register_state&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&0!==t.param.reason_code&&coreConf.sipRegisterFailed(t.param.reason_code),$getState().login.sipLoginOnly&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(r=n.loginHistoryList,a=n.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:r,loginRecordList:a})):(n.displayAccount="",n.password="")),w.error("[sip register] sip register not ok，sip offline"),n.sipRegisterState=constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER,0===t.param.is_deregister&&(w.info("<account_login><7_sip>end failed"),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGIN,extraTrackKey:constant.UT_LOGIN_SERVER_NAME.UT_SIP_SERVER,resultParams:[0,t.param.reason_code,n.isResume?1:0],isTrackTimeCosts:!1}),S?(n.isInSipLogin=!1,T.resolve()):(n.isInSipLogin=!1,T.reject({errorType:constant.LOGIN_ERROR_TYPE.sip,errorCode:"register_fail"})))),coreCommon.dispatchModuleEvent("sipRegResultEvent",t);case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=PromiseObject();t.sipLoginAtomic=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,v.getLoginModel)().then(function(t){if(w.debug("[sipLoginAtomic]  status:"+t.sipRegisterState+" status: "+T.status),t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_REGISTERED)w.debug("[sipLoginAtomic]  already registered ");else if(t.sipRegisterState===constant.SIP_REGISTER_STATE.SIP_REGISTER_UNREGISTER)try{return T=PromiseObject(),w.debug("[sipLoginAtomic] do sip login "),m(e),w.debug("[sipLoginAtomic] finish sip login "),T}catch(e){w.error("[sipLoginAtomic] exception: "+e.toString())}else w.debug("[sipLoginAtomic]  already registering ");return T})},t.sipLoginAtomicReset=function(){T=PromiseObject()}},289:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getErrorTips=t.handleLoginError=t.handleCommonLoginFailed=t.handleUportalLoginFailed=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(195),l=n(221),d=n(290),p=coreLogger.getLogger("login")("uportal"),h=(coreLogger.getLogger("login")("sip"),coreLogger.getLogger("login")("eab"),coreLogger.getLogger("login")("common")),_=t.handleUportalLoginFailed=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i,c,u,_=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:n=e.sent,r=n.isResume,h.info("handleUportalLoginFailed isResume "+r),a=function(e){return p.error((r?"Resume UportalLoginError":"UportalLoginError")+": ["+e+"]")},o=!1,i=!1,c=void 0,e.t0=_,e.next="LOGIN_ADDRESS_OR_PORT_EMPTY"===e.t0?11:"LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"===e.t0?15:"LOGIN_ACCOUNT_HAS_SPACE"===e.t0?19:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?23:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?29:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?35:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?38:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?43:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?48:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?52:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?55:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?58:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?61:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?64:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?67:71;break;case 11:return c=language.LOGIN_ADDRESS_OR_PORT_EMPTY,a("LOGIN_ADDRESS_OR_PORT_EMPTY"),o=!0,e.abrupt("break",74);case 15:return c=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,a("LOGIN_ACCOUNT_OR_PASSWORD_EMPTY"),o=!0,e.abrupt("break",74);case 19:return c=language.LOGIN_ACCOUNT_HAS_SPACE,a("LOGIN_ACCOUNT_HAS_SPACE"),o=!0,e.abrupt("break",74);case 23:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 26:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_REQUEST_FAILED"),e.abrupt("break",74);case 29:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_DNS_ERROR"),e.abrupt("break",74);case 32:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SERVICE_ERROR"),e.abrupt("break",74);case 35:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_SEARCH_SERVER_FAIL"),e.abrupt("break",74);case 38:return o=!0,i=!0,c=language.LOGIN_USERPWD_ERROR,a("LOGIN_ERR_AUTH_FAILED"),e.abrupt("break",74);case 43:return o=!0,i=!0,c=language.LOGIN_USERPWD_ERROR,a("LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR"),e.abrupt("break",74);case 48:return o=!0,c=language.LOGIN_ERR_ACCOUNT_LOCKED,a("LOGIN_ERR_ACCOUNT_LOCKED"),e.abrupt("break",74);case 52:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_STG_TUNNEL_BUILD_ERROR"),e.abrupt("break",74);case 55:return c=language.CALL_CALLING_FAILED,a("LOGIN_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 58:return c=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,a("LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR"),e.abrupt("break",74);case 61:return c=language.CALL_CALLING_FAILED,a("LOGIN_E_ERR_NETWORK_ERROR"),e.abrupt("break",74);case 64:return c=language.LOGIN_E_ERR_AUTH_ERROR,a("LOGIN_ERR_HAS_PROXY_NO_STG"),e.abrupt("break",74);case 67:return o=!0,i=!0,c=language.RENEW_EXPIRED_REMINDER,a("LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE"),e.abrupt("break",74);case 71:return c=language.CALL_CALLING_FAILED,a("Unhandle errorCode:["+_+"]"),e.abrupt("break",74);case 74:if(h.info("logLoginError msg :",c),window.CLIENTCONFIG.ISMOBILE&&window.stroage.isFastLogin()&&!r&&(window.stroage.setFastLogin(!1),navigator.splashscreen&&navigator.splashscreen.hide(),window.goRoute("loginCtn")),o&&i&&(0,d.checkAndEndCall)().then(function(){h.info("up login check and end call ",i)}),!r||o){e.next=81;break}n.setLoginStatus(!1,!1),e.next=108;break;case 81:if(!r||i){e.next=87;break}return e.next=84,(0,l.stopResume)("handleUportalLoginFailed1");case 84:n.setLoginStatus(!1,!1),e.next=108;break;case 87:if(window.CLIENTCONFIG.ISBIGWIN){e.next=107;break}if(!window.isHubEnv){e.next=94;break}n.setLoginStatus(!1,!1),n.maxhubLoginError={serverType:0,errorCode:_},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&delegate.logout(),e.next=105;break;case 94:if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=99;break}u=c||"unknow error",window.itWeLinkNotifyCallEnded(0,u),e.next=105;break;case 99:if(n.setLoginStatus(!1,!1),h.info("handleUportalLoginFailed",c||"unknow error"),!r||!i){e.next=104;break}return e.next=104,(0,l.stopResume)("handleUportalLoginFailed2");case 104:alert(c||"unknow error").then(function(){h.info("resetDisableLogin"),window.getRoute()&&"login"!==window.getRoute()&&"login/joinConfSIPOnly"!==window.getRoute()&&"login/noLoginJoinConference"!==window.getRoute()&&!1===window.CLIENTCONFIG.ISMOBILE&&delegate.logout(),window.CLIENTCONFIG.ISMOBILE&&i&&window.getRoute()&&"loginCtn"!==window.getRoute()&&delegate.logout()});case 105:e.next=108;break;case 107:n.setLoginStatus(!1,!1);case 108:return e.abrupt("return",c);case 109:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),g=t.handleCommonLoginFailed=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o=t.errorCode;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:n=e.sent,r=n.isResume,a=function(e){return h.error((r?"Resume Login Error":"Login Error")+": "+e)},e.t0=o,e.next="duplicateLogin"===e.t0?8:"fistLoginReject"===e.t0?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?12:17;break;case 8:return a("[ DuplicateLogin ] login oper failed, there is a login oper now..."),e.abrupt("break",18);case 10:return a("[ FistLoginReject ] fist login rejected, after changepassword will relogin..."),e.abrupt("break",18);case 12:return a("[ IWB2MaxHub ] this is maxhub tegrate enviroument, the account is not iwb account"),n.setLoginStatus(!1,!1),n.maxhubLoginError={serverType:0,errorCode:o},window.getRoute()&&"maxhubLogin"!==window.getRoute()&&delegate.logout(),e.abrupt("break",18);case 17:return e.abrupt("break",18);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();t.handleLoginError=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("[ handleLoginError ]"+(0,o.default)(t)),h.info("<account_login><10_error>"+(0,o.default)(t)),e.next=4,(0,f.getLoginModel)();case 4:n=e.sent,$getState().login.sipLoginOnly&&("Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?(r=n.loginHistoryList,a=n.loginRecordList,coreAccount.showLoginInfo({loginInfo:a[0],loginHistoryList:r,loginRecordList:a})):(n.displayAccount="",n.password="")),n.clearInLoginState(),t&&t.errorType?(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(n.isResume?h.info("[IT-Meeting] login failed, resume login."):(h.info("[IT-Meeting] login failed, go back."),window.switchToBackMode(),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))),t.errorType===constant.LOGIN_ERROR_TYPE.common?(window.CLIENTCONFIG.ISBIGWIN?coreConf.NotifyLoginFailedEx(1):window.isHubEnv&&("LOGIN_ERR_IWB_MAXHUB_ACCOUNT"===t.errorCode?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK),h.info("maxhub handleLoginError LOGIN_ERROR_TYPE.common errcode: "+t.errorCode)),g(t)):t.errorType===constant.LOGIN_ERROR_TYPE.uportal?(_(t),n.curPortalState=constant.CUR_PORTAL_LOGIN_STATE.INIT,window.CLIENTCONFIG.ISBIGWIN?(window.shouldStopRertyLogin=!1,window.bigwinReTryLogin()):window.isHubEnv&&(t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_BAD_ACCESS_DURING_UPGRADE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_INVALID_URL?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_NETWORK):t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_USER_NOT_EXISTS||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY||t.errorCode===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_ACC_OR_PAS):coreConf.NotifyLoginFailed(constant.WORKPLACE_LOGIN_ERROR_TYPE.ERR_OTHER),h.info("maxhub handleLoginError LOGIN_ERROR_TYPE.uportal errcode: "+t.errorCode))):(t.errorType,constant.LOGIN_ERROR_TYPE.eabserver),coreCommon.dispatchModuleEvent("login",{event:t.errorType,code:t.errorCode})):(h.error("no exact error handle",t),n.setLoginStatus(!1,!1));case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getErrorTips=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("get error tips, server=",t+", errorCode=",n),r="",0!==t){e.next=44;break}e.t0=n,e.next=e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?6:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?8:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT?10:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED?12:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DNS_ERROR?14:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SERVICE_ERROR?16:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_SEARCH_SERVER_FAIL?18:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_AUTH_FAILED?20:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR?22:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_ACCOUNT_LOCKED?24:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_STG_TUNNEL_BUILD_ERROR?26:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_NETWORK_ERROR?28:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR?30:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_NETWORK_ERROR?32:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_HAS_PROXY_NO_STG?34:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_ACCOUNT_DIACTIVE?36:e.t0===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_IWB_MAXHUB_ACCOUNT?38:40;break;case 6:return r=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",42);case 8:return r=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",42);case 10:case 12:case 14:case 16:case 18:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 20:case 22:return r=language.LOGIN_USERPWD_ERROR,e.abrupt("break",42);case 24:return r=language.LOGIN_ERR_ACCOUNT_LOCKED,e.abrupt("break",42);case 26:case 28:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 30:return r=language.LOGIN_ERR_DOWNLOAD_CA_CERT_ERROR,e.abrupt("break",42);case 32:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 34:return r=language.LOGIN_E_ERR_AUTH_ERROR,e.abrupt("break",42);case 36:return r=language.RENEW_EXPIRED_REMINDER,e.abrupt("break",42);case 38:return r=language.MAXHUB_INVALID_ACCOUTN,e.abrupt("break",42);case 40:return r=language.CALL_CALLING_FAILED,e.abrupt("break",42);case 42:e.next=74;break;case 44:if(1!==t){e.next=74;break}e.t1=n,e.next=e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ADDRESS_OR_PORT_EMPTY?48:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY?50:e.t1===constant.ESERVER_LOGIN_ERROR.LOGIN_LOCALIP_GET_FAILED?52:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_TIMEOUT?54:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_PASSWORD_ERROR?56:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_FAILED?58:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_NOT_EXIST?60:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NEED_NEW_VERSION?62:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_NOT_ACTIVE?64:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_SUSPEND?66:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_LOCKED?68:e.t1===constant.ESERVER_LOGIN_ERROR.IM_E_LOGING_RESULT_ACCOUNT_EXPIRE?70:72;break;case 48:return r=language.LOGIN_ADDRESS_OR_PORT_EMPTY,e.abrupt("break",74);case 50:return r=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY,e.abrupt("break",74);case 52:case 54:return r=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 56:case 58:case 60:return r=language.LOGIN_USERPWD_ERROR,e.abrupt("break",74);case 62:return r=language.LOGIN_NEED_NEW_VERSION,e.abrupt("break",74);case 64:case 66:case 68:case 70:return r=language.LOGIN_ACCOUNT_ERROR,e.abrupt("break",74);case 72:return r=language.CALL_CALLING_FAILED,e.abrupt("break",74);case 74:return e.abrupt("return",r);case 75:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()},290:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.endCurrentCall=t.checkAndEndCall=t.checkBeforeSetOffline=t.checkBeforeLogout=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(136),u=coreLogger.getLogger("logic")("login/checkBeforeLogout"),f=(t.checkBeforeLogout=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u.debug("checkBeforeLogout"),e.next=4,f(t);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",n);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=20;break}return e.next=10,p(t);case 10:if(n=e.sent,u.info("checkResult checkFileTransFer"+n),n&&!1!==n.ret){e.next=14;break}return e.abrupt("return",!1);case 14:return e.next=16,d(t,r);case 16:if(n=e.sent,u.info("checkResult checkEditor :"+n),n){e.next=20;break}return e.abrupt("return",n);case 20:return e.abrupt("return",n);case 23:return e.prev=23,e.t0=e.catch(0),u.error("checkBeforeLogout",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 27:case"end":return e.stop()}},e,void 0,[[0,23]])}));return function(t){return e.apply(this,arguments)}}(),t.checkBeforeSetOffline=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u.debug("checkBeforeSetOffline"),e.next=4,f(t,r);case 4:if(n=e.sent){e.next=7;break}return e.abrupt("return",n);case 7:if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=10,p(t,r);case 10:if(n=e.sent){e.next=13;break}return e.abrupt("return",n);case 13:return e.abrupt("return",n);case 16:return e.prev=16,e.t0=e.catch(0),u.error("checkBeforeSetOffline",{type:t,e:e.t0.toJSON()}),e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,void 0,[[0,16]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getLoginModel)();case 2:if(t=e.sent,u.info(" checklogin : isInUportalLogin:"+t.isInUportalLogin+", isInInitPrivateDB:"+t.isInInitPrivateDB+", isInDetectFireWall:"+t.isInDetectFireWall+", isInLoadConfigFromDB:"+t.isInLoadConfigFromDB+", isInEserverLogin:"+t.isInEserverLogin+", isInSipLogin:"+t.isInSipLogin),!(t.isInUportalLogin||t.isInInitPrivateDB||t.isInDetectFireWall||t.isInLoadConfigFromDB||t.isInEserverLogin||t.isInSipLogin)){e.next=8;break}return n=language.COMMON_CHECK_LOGOUT_LOGINEXIST,alert(n),e.abrupt("return",!1);case 8:return e.abrupt("return",!0);case 9:case"end":return e.stop()}},e,void 0)}))}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u.info("checkCall"),!(coreCall.getCallCount()>0)){e.next=33;break}if(!(window.CLIENTCONFIG.ISBIGWIN||window.isHubEnv||window.isPluginEnv)){e.next=9;break}return e.next=6,l();case 6:window.endCallPromise=null,e.next=33;break;case 9:if(n="",r="LANG_NATIVE_CONFIRM_TITLE",t===constant.LOGOUT_TYPE.LOGOUT?n=language.COMMON_CHECK_LOGOUT_CALLEXIST:t===constant.LOGOUT_TYPE.EXIT?n=language.COMMON_CHECK_QUIT_CALLEXIST:t===constant.LOGOUT_TYPE.SETOFFLINE&&(n=language.COMMON_CHECK_QUIT_OFFLINE),!n){e.next=33;break}if(a=!1,!i){e.next=26;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=21;break}return e.next=18,window.confirm(n);case 18:a=e.sent,e.next=24;break;case 21:return e.next=23,window.confirm(n,r,!0);case 23:a=e.sent;case 24:e.next=27;break;case 26:a={ret:!0};case 27:if(!a.ret){e.next=32;break}return window.CLIENTCONFIG.ISMOBILE||appService.resetTrayMenu(),e.next=31,l();case 31:window.endCallPromise=null;case 32:return e.abrupt("return",a.ret);case 33:return"CALL_INCOMING"===$getState().call.callStatus&&coreUi.stopRing(),e.abrupt("return",!0);case 37:return e.prev=37,e.t0=e.catch(0),u.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,void 0,[[0,37]])}));return function(t){return e.apply(this,arguments)}}()),l=(t.checkAndEndCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,u.info("checkAndEndCall"),!(coreCall.getCallCount()>0)){e.next=4;break}return e.abrupt("return",l());case 4:return e.abrupt("return",!0);case 7:return e.prev=7,e.t0=e.catch(0),u.error("checkAndEndCall",{e:e.t0.toJSON()}),e.abrupt("return",!0);case 11:case"end":return e.stop()}},e,void 0,[[0,7]])}));return function(){return e.apply(this,arguments)}}(),t.endCurrentCall=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.endCallPromise=new PromiseObject,setTimeout(function(){null!==window.endCallPromise&&window.endCallPromise.resolve()},5e3),t=$getState(),n=t.conf,r=n.confHandle,a=n.selfRole,i=t.call.callId,coreConf.isInConf()){e.next=9;break}return u.info("ConfrimNotify end call, callId=",i),e.next=7,coreCall.callHangup(i);case 7:e.next=12;break;case 9:return u.info("ConfrimNotify leave conf, confHandle=",r),e.next=12,coreConf.actionLeaveConf();case 12:return coreUi.selectBoxCancelDataNWin(),window.CLIENTCONFIG.ISMOBILE&&"mConfMemberPage"===(s=window.getRoute())&&window.goRoute("main/conference"),e.abrupt("return",window.endCallPromise);case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),d=function(e,t){try{var n=language.PRE_EXIT_CHECK_EDITOR,r=!0;return e===constant.LOGOUT_TYPE.LOGOUT&&(r=!0,n=language.PRE_LOGOUT_CHECK_EDITOR),t?coreIm.checkEditorBeforeLogout({showInfo:n,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:r}):coreIm.checkEditor({showInfo:n,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:r})}catch(e){return u.error("checkEditor check异常，强制通过",{e:e.toJSON()}),!0}},p=function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];try{var n=language.PRE_EXIT_CHECK_FILE_TRANSFER;e===constant.LOGOUT_TYPE.LOGOUT&&(n=language.PRE_LOGOUT_CHECK_FILE_TRANSFER);return coreIm.checkFileTransFer({showInfo:n,languageKey:"LANG_NATIVE_CONFIRM_TITLE",isShowCloseBtn:!0,isShowAlert:t})}catch(e){return u.error("checkFileTransFer  check异常，强制通过",{e:e.toJSON()}),!0}}},291:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.actionGetCorpResourceAtomic=t.getVerifyCodeAndSetUi=t.sendCaptchaResultAndSetUi=t.getCaptchaAndSetUi=t.getVerifyCode=t.sendCaptchaResult=t.getCaptcha=t.clearLocalDNSIp=t.setLocalDNSIp=t.getLocalDNSIp=t.frogetPassword=t.verifyVerificationCode=t.requestVerificationCode=t.queryUserAccount=t.recordPrivacy=t.actionGetUploadInfo=t.actionRefreshToken=t.changeLoginPassword=t.queryMediaXaddrFromServer=t.resumeUportalService=t.resetLoginInfo=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=encodeURIComponent(n),r=encodeURIComponent(r),a=r,e.next=5,(0,_.getLoginModel)();case 5:return o=e.sent,i=o.middleEndAddress,s=o.crypt_token,c="https://"+i+"/mcloud/mag/ProxyForText/wemiddle/api/v1/sso/personal_password_modify",I.info("change it pd url = :",c),e.next=12,coreHttp.sendSyncRequest({url:c,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded",lang:"en",Cookie:"token="+s},body:"account="+t+"&oldPasswd="+n+"&newPasswd="+r+"&confirmPasswd="+a});case 12:return f=e.sent,e.abrupt("return",f);case 14:case"end":return e.stop()}},e,this)}));return function(t,n,r){return e.apply(this,arguments)}}(),p=n(118),h=r(p),_=n(136),g=n(164),m=n(228),v=n(126),C=coreCommonComponent.Icon,I=coreLogger.getLogger("login")("uportal");window.refreshUportalToken=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nil;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t={},t.param={},t.param.result=0,t.param.refresh_token_result={},!window.webView||n){e.next=8;break}t.param.refresh_token_result.auth_token=window.webView.getImToken(),e.next=13;break;case 8:if(!(n&&n.indexOf("@")>0)){e.next=12;break}return e.next=11,coreSecurity.encode64(n);case 11:n=e.sent;case 12:t.param.refresh_token_result.auth_token=n;case 13:t.param.refresh_token_result.stg_account="",t.param.refresh_token_result.stg_pwd="",(0,m.getUportalApi)().refreshTokenCallback(t);case 16:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.resetLoginInfo=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={authToken:"",sipAccount:"",sipImpi:"",sipPassword:"",sipPasswordType:0,sipOutgoingAccCode:null,sipServerAddress:"",sipServerPort:0,sipDomain:"",sipServerBackup1:"",sipServerPortBackup1:0,sipServerBackup2:"",sipServerPortBackup2:0,sipServerBackup3:"",sipServerPortBackup3:0,eabUri:"",groupServer:"",eServerAddressAll:"",eServerAddress:"",eServerPort:0,sipUri:"",svnUri:"",httpsProxyAll:"",httpsProxy:"",stgUri:"",stgAccount:"",sipStgUri:"",eserverStgUri:"",umHttpServerUri:"",umHttpsServerUri:"",stgUriUsed:"",isBuildStgSuc:!1,isGetFirewallRes:!1,fireWallMode:3,smcUri:"",maaProxyAddress:"",maaProxyPort:0,maaProxyUrlAll:""},e.next=3,coreSecurity.getPasswordManager();case 3:return n=e.sent,e.next=6,n.setPassword("stgPassword","");case 6:return e.next=8,n.setPassword("sipPassword","");case 8:return e.next=10,(0,_.getLoginModel)();case 10:r=e.sent,r.set(t);case 12:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.resumeUportalService=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360459,(0,m.getUportalApi)().refreshTokenCallback);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.queryMediaXaddrFromServer=function(e,t){return new s.default(function(){var n=(0,l.default)(u.default.mark(function n(r,a){var o,i,s,c,f;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,e.setNotifyFunc(360486,E),n.next=4,(0,_.getLoginModel)();case 4:o=n.sent,i=o.serverAddress,s=o.serverPort,c=function(e){if(e&&e.param&&0===e.param.result){if(isNullOrEmpty(e.param.mediax_result))return void r({result:1});var n=void 0,a=e.param.mediax_result.server_uri,o=e.param.mediax_result.cms_uri;if(a&&o)n=t?o:a,I.info("cmsAddr:",o,"mediaxAddr:",a,"is_cms_addr:",t);else if(a)n=a,t=0,I.info("mediaxAddr:",a);else{if(!o)return I.error("queryMediaXaddrFromServer mediaX address is empty!"),void r({result:1});n=o,t=1,I.info("cmsAddr:",o)}var s=n.split(":");I.info("queryMediaXaddrFromServer mediaX address success"),(0,_.getLoginModel)().then(function(e){e.tempMediaxAddress=s[0],e.tempMediaxPort=s[1]}),r({result:0,mediaxAddr:s[0],mediaxPort:parseInt(s[1]),isCmsAddr:t})}else e&&e.param&&e.param.result===constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_TIMEOUT&&N(i),I.error("queryMediaXaddrFromServer notify failed,errorcode:",e.param.result),r({result:1})},f=window.setTimeout(function(){I.error("queryMediaXaddrFromServer 6s time out"),r({result:1}),N(i)},6e3),S(i).then(function(t){isNullOrEmpty(t)||(i=t),e.getMediaxAccessAddr(i,parseInt(s),c).then(function(e){window.clearTimeout(f),e&&0!==e.result&&(I.error("queryMediaXaddrFromServer failed"),r({result:1}))})}),n.next=16;break;case 12:n.prev=12,n.t0=n.catch(0),I.error("queryMediaXaddrFromServer",{e:n.t0.toJSON()}),r({result:1});case 16:case"end":return n.stop()}},n,void 0,[[0,12]])}));return function(e,t){return n.apply(this,arguments)}}())};window.getDnsResult=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n="",t&&(r=JSON.parse(t),r.loginOnCurrentDnsResult&&(n=r.loginOnCurrentDnsResult,E(n)));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}();var w=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,I.info("change [password] checkCall"),!$getState().call.showCallToolBar&&"VIDEO_OUT"!==$getState().call.callStatus&&"VIDEO_CONNECTED"!==$getState().call.callStatus){e.next=16;break}if(t="LANG_NATIVE_CONFIRM_TITLE",n=language.COMMON_CHECK_CHANGEPASSWORD_CALLEXIST,r=!1,!window.CLIENTCONFIG.ISMOBILE){e.next=12;break}return e.next=9,window.confirm(n);case 9:r=e.sent,e.next=15;break;case 12:return e.next=14,window.confirm(n,t,!0);case 14:r=e.sent;case 15:return e.abrupt("return",!1);case 16:return e.abrupt("return",!0);case 19:return e.prev=19,e.t0=e.catch(0),I.error("checkCall",{e:e.t0.toJSON()}),e.abrupt("return",!1);case 23:case"end":return e.stop()}},e,void 0,[[0,19]])}));return function(){return e.apply(this,arguments)}}();t.changeLoginPassword=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s,c,f,p,g,m,S,E,N;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return a=e.sent,e.next=5,w();case 5:if(o=e.sent){e.next=8;break}return e.abrupt("return");case 8:if(window.navigator.onLine){e.next=11;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 11:if(i=PromiseObject(),s=void 0,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME){e.next=27;break}return c=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,I.info("change [pass]word result: "+n.result),s&&window.clearTimeout(s),n&&0===n.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.CLIENTCONFIG.ISMOBILE?window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)}):window.alert(language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),coreUi.showModal(h.default.createElement("div",{className:"loading-icon-bg"},h.default.createElement(C,{type:v.iconTypeMap.Loading,size:v.iconSizeMap.CLS_40,color:v.iconColorMap.COL_FFFFFF})),!1),i.resolve(!0)})):(r=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[r],2),i.resolve(!1));case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,c),e.next=18,(0,_.getLoginModel)();case 18:return f=e.sent,p=f.serverUportalAddress,g=f.serverUportalPort,e.next=23,a.changeLoginUportalPassword(t,n,r,p,g);case 23:m=e.sent,0!==m.result?(I.error("change lg in pd result:"+m.result),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1)):s=window.setTimeout(function(){I.error("request  10s timeout"),i.resolve(!1)},1e4),e.next=31;break;case 27:return e.next=29,d(t,n,r);case 29:S=e.sent;try{S&&S.param&&S.param.recv_body?(E=JSON.parse(S.param.recv_body),I.info("change it pd result "+E.result+" errcode "+E.errorCode),"success"===E.result?(coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset(),window.alert(""+language.CHANGE_PASSWORD_SUCCESS,!0).then(function(){delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT,!0),i.resolve(!0)})):(N=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[E.errorCode]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[N],2),i.resolve(!1))):(I.error("change it pd callback is error"),window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),i.resolve(!1))}catch(e){window.ToastNew(language.CHANGE_PASSWORD_FAILED,2),I.error("change it pd error. ",S)}case 31:return e.abrupt("return",i);case 32:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}();window.doingRefreshUportalToken=!1;var S=(t.actionRefreshToken=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(I.info("[ actionRefreshToken ]"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=5;break}window.refreshImToken(),e.next=20;break;case 5:return e.next=7,(0,_.getLoginModel)();case 7:if(t=e.sent,n=t.curPortalState,I.info("[ actionRefreshToken ] curPortalState = ",n),window.doingRefreshUportalToken||n===constant.CUR_PORTAL_LOGIN_STATE.LOGINING){e.next=19;break}return window.doingRefreshUportalToken=!0,e.next=14,coreTup.getUportalInstance();case 14:r=e.sent,r.refreshToken(),setTimeout(function(){window.doingRefreshUportalToken=!1},2e4),e.next=20;break;case 19:I.info("refreshing uportal token. return don't send");case 20:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.actionGetUploadInfo=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("actionGetUploadInfo"),e.next=3,coreTup.getUportalInstance();case 3:return r=e.sent,a=PromiseObject(),o=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,0!==n.result?(I.error("get upload info fail, result:"+n.result),a.resolve(n)):a.resolve(n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),r.setNotifyFunc(360491,o),i={req_info:{file_name:t,file_type:n}},e.next=10,r.getUploadInfo(i);case 10:return s=e.sent,0!==s.result&&(I.error("actionGetUploadInfo fail, result:"+s.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},1e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.recordPrivacy=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l,d,p=t.oprEvent,h=t.privacyver,g=t.chrtype;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("[ recordPrivacy ]"),e.next=3,(0,_.getLoginModel)();case 3:return n=e.sent,r=n.account,a=n.serverUportalAddress,o=n.serverUportalPort,e.next=7,coreTup.getUportalInstance();case 7:return i=e.sent,s=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,c=(new Date).format("yyyy-MM-dd hh:mm"),f={record_user:r,record_version:s,record_time:c,record_oprevent:p,server_url:a,port_num:parseInt(o),record_other:{}},h&&(f.record_other.privacyver=h),void 0!==g&&(f.record_other.chrtype=g),e.next=15,i.recordPrivacy(f);case 15:l=e.sent,0!==l.result&&I.error("record fail, result:"+l.result+"oprEvent:"+p),d=function(e){if(e&&0===e.param.result)return I.info("record success, oprEvent:"+p);I.error("record fail, result:"+e.param.result+"oprEvent:"+p)},i.setNotifyFunc(360481,d);case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.queryUserAccount=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return n=e.sent,r=n.serverPort,a=n.serverUportalAddress,e.next=7,coreTup.getUportalInstance();case 7:return o=e.sent,I.info("tup init"),e.next=11,(0,m.getUportalApi)().setLoginProxy(o);case 11:return i=PromiseObject(),n.forgetPwdAccount!==t&&(n.forgetPwdAccount=t,n.isFrogetRedriect=!1),s=function(){var e=(0,l.default)(u.default.mark(function e(s){var c,f,l,d,p,h,_,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(c=s.param,38!==c.result||""===c.query_result.redirect_url){e.next=20;break}if(n.isFrogetRedriect=!0,f=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(l=f.exec(c.query_result.redirect_url))){e.next=11;break}d=l[1],p=l[2],h=l[3],a=d||p,r=h&&h||0,e.next=12;break;case 11:return e.abrupt("return",(0,g.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 12:return n.FrogetPwdUrl=a,n.FrogetPwdUrlPort=r,_={query_user_info:{server_url:a,server_port:parseInt(r),user_account:t}},e.next=17,o.queryUserAccount(_);case 17:m=e.sent,e.next=21;break;case 20:0!==c.result?(I.error("query user account fail, result:"+c.result),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[c.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[c.result]],2):window.ToastNew(language.REQUEST_ERROR,2),i.resolve(c)):i.resolve(c);case 21:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.setNotifyFunc(360482,s),c={query_user_info:{server_url:a,server_port:parseInt(r),user_account:t}},e.next=18,o.queryUserAccount(c);case 18:return f=e.sent,0!==f.result&&(I.error("query user account fail, result:"+f.result),window.ToastNew(language.REQUEST_ERROR,2),i.resolve("request failed")),setTimeout(function(){i.resolve("request timeout")},1e4),e.abrupt("return",i);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.requestVerificationCode=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return a=e.sent,o=a.serverPort,i=a.serverUportalAddress,c=void 0,a.isFrogetRedriect&&(i=a.FrogetPwdUrl,o=a.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return f=e.sent,e.abrupt("return",new s.default(function(e,a){var s=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,I.info("request verification code result: "+r.result),c&&window.clearTimeout(c),0!==r.result&&r.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_CHANGEPWD_INVALID_TOKEN&&r.result!==constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_RESEND_WITHIN_3MIN_NOT_ALLOWED?(void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(r)):e(r);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();f.setNotifyFunc(360483,s);var d=constant.USER_AGENT.MOBILE;window.CLIENTCONFIG.ISMOBILE||(d="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC);var p={req_info:{server_url:i,server_port:parseInt(o),user_account:t,user_agent:d,send_mode:n,lang_type:r}};f.requestVerificationCode(p).then(function(t){0!==t.result?(I.error("requestVerificationCode fail, result:"+t.result),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):c=window.setTimeout(function(){I.error("request verification 5s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),t.verifyVerificationCode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return r=e.sent,a=r.serverPort,o=r.serverUportalAddress,i=void 0,r.isFrogetRedriect&&(o=r.FrogetPwdUrl,a=r.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return c=e.sent,e.abrupt("return",new s.default(function(e,r){var s=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,I.info("verify verification code result: "+r.result),i&&window.clearTimeout(i),0!==r.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(r)):e(r);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();c.setNotifyFunc(360484,s);var f={verify_info:{server_url:o,server_port:parseInt(a),user_account:t,verification_code:n}};c.verifyVerificationCode(f).then(function(t){0!==t.result?(I.error("verify verification code fail, result:"+t.result),coreUi.hideModal(),window.ToastNew(language.REQUEST_ERROR,2),e("request failed")):i=window.setTimeout(function(){I.error("verify verification 10s time out"),e("request timeout")},1e4)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.frogetPassword=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a,o){var i,c,f,d,p;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return i=e.sent,c=void 0,f=i.serverPort,d=i.serverUportalAddress,i.isFrogetRedriect&&(d=i.FrogetPwdUrl,f=i.FrogetPwdUrlPort),e.next=9,coreTup.getUportalInstance();case 9:return p=e.sent,e.abrupt("return",new s.default(function(e,i){var s=function(){var t=(0,l.default)(u.default.mark(function t(n){var r;return u.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=n.param,I.info("froget request listener result: "+r.result),c&&window.clearTimeout(c),0!==r.result?(coreUi.hideModal(),void 0!==constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]?window.ToastNew(language[constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[r.result]],2):window.ToastNew(language.REQUEST_ERROR,2),e(r)):e(r);case 4:case"end":return t.stop()}},t,void 0)}));return function(e){return t.apply(this,arguments)}}();p.setNotifyFunc(360485,s);var h={pwd_info:{server_url:d,server_port:parseInt(f),user_account:t,new_pwd:n,pwd_type:r,lang_type:a,token:o}};p.frogetPassword(h).then(function(t){0!==t.result?(I.error("froget request fail, result:"+t.result),coreUi.hideModal(),e("request failed")):c=window.setTimeout(function(){I.error("froget pass word 15s time out"),e("request timeout")},15e3)})}));case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),t.getLocalDNSIp=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return I.warn("getLocalDNSIp domain is null"),e.abrupt("return");case 3:return e.next=5,coreDb.queryLoginSetting({key:"DNS:"+t});case 5:if(!(n=e.sent)||!n.value){e.next=11;break}return I.info("getLocalDNSIp suc"),e.abrupt("return",n.value);case 11:return I.info("getLocalDNSIp fail"),e.abrupt("return","");case 13:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),E=t.setLocalDNSIp=function(e){return e&&e.param&&0===e.param.result&&e.param.dns_result?isNullOrEmpty(e.param.dns_result.domain_addr)||isNullOrEmpty(e.param.dns_result.ip_addr)?void I.warn("setLocalDNSIp domain or ip is null"):(I.info("tup report setLocalDNSIp"),void coreDb.saveLoginSetting({key:"DNS:"+e.param.dns_result.domain_addr,value:e.param.dns_result.ip_addr})):void I.warn("dns result is null, res = "+(0,o.default)(e))},N=t.clearLocalDNSIp=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return I.warn("clearLocalDNSIp ip is null"),e.abrupt("return");case 3:return I.info("clearLocalDNSIp"),n=[],e.next=7,coreDb.queryAllLoginSetting();case 7:r=e.sent,r.forEach(function(e){e.value===t&&-1!==e.key.indexOf("DNS:")&&n.push(e.key)}),I.info("clearLocalDNSIp server addr length = "+n.length),n.length>0&&n.forEach(function(e){coreDb.saveLoginSetting({key:e,value:""})});case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,i,s,c,f,l,d,p=t.method,h=void 0===p?"post":p,g=t.path,m=void 0===g?"":g,v=t.body,C=void 0===v?{}:v;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return n=e.sent,r=n.serverUportalAddress,a=n.serverUportalPort,i=n.isFrogetRedriect,s=n.FrogetPwdUrl,c=n.FrogetPwdUrlPort,f="https://"+r+":"+a+m,i&&(f="https://"+s+":"+c+m),l=constant.USER_AGENT.MOBILE,window.CLIENTCONFIG.ISMOBILE||(l="Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC),d={url:f,type:"post"===h?constant.REQUEST_TYPE.POST:constant.REQUEST_TYPE.PUT,header:{"Content-Type":"application/json","User-Agent":l},body:(0,o.default)(C)},e.abrupt("return",d);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),b=t.getCaptcha=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("before getCaptcha"),n="/rest/usg/sso/v1/auth/slideverifycode/send",r=coreCommon.isMobile()?6:5,a=1,o={user:t,clientType:r,checkType:a},e.next=7,T({path:n,body:o});case 7:return i=e.sent,e.next=10,coreHttp.sendSyncRequest(i);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.sendCaptchaResult=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a){var o,i,s,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("before sendCaptchaResult"),o="/rest/usg/sso/v1/auth/slideverifycode/check",i=coreCommon.isMobile()?6:5,s=1,c={user:t,clientType:i,token:n,pointX:r,slideTime:a,checkType:s},e.next=7,T({method:"put",path:o,body:c});case 7:return f=e.sent,e.next=10,coreHttp.sendSyncRequest(f);case 10:return e.abrupt("return",e.sent);case 11:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),L=t.getVerifyCode=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("before getVerifyCode"),r="/rest/usg/ap/v1/verifycode/send",a="2052"===window.langcode?"zh-CN":"en-US",o={user:t,language:a,token:n},e.next=6,T({path:r,body:o});case 6:return i=e.sent,e.next=9,coreHttp.sendSyncRequest(i);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),A=(t.getCaptchaAndSetUi=function(){var e=(0,l.default)(u.default.mark(function e(t){var n,r,a,o,i,s,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return window.ToastNew(language.PC_PHONE_NUMBER_OR_ACCOUNT_NUMBER_CAN_NOT_EMPTY,2),e.abrupt("return");case 3:return e.next=5,b(t);case 5:if((n=e.sent)&&0===n.result){e.next=9;break}return I.info("getCaptcha result, tup result : ",n&&n.result),e.abrupt("return");case 9:if(r=n.param,a=r.recv_body,o=r.resp_code,I.info("getCaptcha result, server resp_code : ",o),i=a&&JSON.parse(a),s=i.data,c=i.returnMessage,f=i.requestId,I.info("getCaptcha result, requestId: ",f,", returnMessage: ",c),200!==o){e.next=19;break}return s.sliderResult=!1,e.next=17,(0,_.getLoginModel)();case 17:l=e.sent,l.manMachineCode=s;case 19:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.sendCaptchaResultAndSetUi=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a,o,i,s){var c,f,l,d,p,h,g,m,v,C,w,S,E;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O(t,n,r,a);case 2:if(c=e.sent,f=c.param,l=f.recv_body,d=f.resp_code,I.info("sendCaptcha result, tup result : ",c.result),I.info("sendCaptcha result, server resp_code : ",d),p=l&&JSON.parse(l),h=p.returnCode,g=p.returnMessage,m=p.requestId,v=p.data,I.info("sendCaptcha result, requestId: ",m,", returnMessage : ",g),200!==d){e.next=16;break}return C="000000000"===h,w="000000000"===h?v.token:"",S=!0,e.next=14,(0,_.getLoginModel)();case 14:E=e.sent,E.manMachineCode={verificationSuccess:C,sliderResult:S,shadowImage:o,cutImage:i,token:w,oldPointY:s};case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),t.getVerifyCodeAndSetUi=function(){var e=(0,l.default)(u.default.mark(function e(t,n){var r,a,o,i,s,c,f,l,d,p,h,g,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,L(t,n);case 2:if(r=e.sent,a=r.param,o=a.recv_body,i=a.resp_code,I.info("getVerifyCode result, tup result : ",r.result),I.info("getVerifyCode result, server resp_code : ",i),s=o&&JSON.parse(o),c=s.returnCode,f=s.returnMessage,l=s.requestId,d=s.data,I.info("getVerifyCode result, requestId: ",l,", returnMessage : ",f),"000000000"!==c&&"206030004"!==c){e.next=19;break}return p=$getState().login.forgetPwdAccount,h=p.type===constant.FORGETPWDACCOUNTTYPE.ACCOUNT&&isNullOrEmpty(d.bindPhone),g={account:p.account,email:p.email,showaccount:h?d.bindEmail:p.showaccount,timeout:d.expire||d.sendLeftTime,type:h?constant.FORGETPWDACCOUNTTYPE.ACCOUNT_WITH_EMAL:p.type,useCaptcha:!0,bindPhone:d.bindPhone,bindEmail:d.bindEmail},e.next=14,(0,_.getLoginModel)();case 14:m=e.sent,m.forgetPwdAccount=g,window.CLIENTCONFIG.ISMOBILE?"SetNewPassword"!==window.getRoute()&&window.goRoute("/SetNewPassword"):"login/ResetPassword"!==window.getRoute()&&window.goRoute("/login/ResetPassword"),e.next=20;break;case 19:void 0!==constant.CLOUDUSG_ERROR_TIPS[c]?window.ToastNew(language[constant.CLOUDUSG_ERROR_TIPS[c]],2):window.ToastNew(language.REQUEST_ERROR,2);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(){var t,n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return I.info("[ actionGetCorpResource ]"),t=void 0,e.next=4,coreTup.getUportalInstance();case 4:return n=e.sent,e.abrupt("return",new s.default(function(e,r){var a=function(){var n=(0,l.default)(u.default.mark(function n(r){var a,o;return u.default.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:if(!r||0!==r.param.result){n.next=10;break}return t&&window.clearTimeout(t),a=r.param,n.next=5,(0,_.getLoginModel)();case 5:o=n.sent,o.canRecordConf=a.corp_resource.conf_rec_right,e(coreCommon.ATOMIC_ACTION_RESULT.SUCCESS),n.next=12;break;case 10:I.error("actionGetCorpResource fail, result:"+r.param.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED);case 12:case"end":return n.stop()}},n,void 0)}));return function(e){return n.apply(this,arguments)}}();n.setNotifyFunc(360492,a),n.getCorpResource().then(function(n){0!==n.result?(I.error("actionGetCorpResource fail, result:"+n.result),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)):t=window.setTimeout(function(){I.error("actionGetCorpResource 10s time out"),e(coreCommon.ATOMIC_ACTION_RESULT.FAILED)},1e4)})}));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.actionGetCorpResourceAtomic=new coreCommon.AtomicAction("actionGetCorpResource",A)},292:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.compareVersion=t.dealUpdateVersionClickEx=t.hideProgressBarModal=t.dealInstallFailed=t.startInstallNewVer=t.getInCallingState=t.clearBarPageSet=t.showUpdateHintsOrBar=t.clickConfirmUpdate=t.dealDownloadFailed=t.downloadProcessNotify=t.clearDownloadClick=t.checkUpgrade=t.reStartUpgrade=t.clearAllUpdataState=t.changeUpdataState=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(123),u=r(c),f=n(69),l=r(f),d=n(118),p=r(d),h=n(211),_=n(136),g=n(164),m=coreLogger.getLogger("login")("upgrade"),v={clickDownload:!1,clickTimer:null,downloadResume:!1},C=t.changeUpdataState=function(e){m.info("change updata state, obj=",(0,l.default)(e)),(0,u.default)(v,e),m.info("updataState=",(0,l.default)(v))},I=(t.clearAllUpdataState=function(){v.clickTimer&&clearTimeout(v.clickTimer),v={clickDownload:!1,clickTimer:null,downloadResume:!1},m.info("clear updata state, updataState=",(0,l.default)(v))},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,c,u,f=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:return r=e.sent,a=PromiseObject(),i=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.param,360488===t.notify?T(n):360489===t.notify&&b(n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),r.setNotifyFunc(360488,i),r.setNotifyFunc(360489,i),c={download_info:{download_timeout:300,version_path:t,file_path:n,keep_download:f,local_file_size:l}},e.next=10,r.downloadUpgradeFile(c);case 10:return u=e.sent,0!==u.result&&(m.error("send downloadUpgradeFile fail, result:"+u.result),a.resolve("request failed")),setTimeout(function(){a.resolve("request timeout")},35e4),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),w=function(){return m.info("current platform is :win"),"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?"workplace-windows":"cloudlink-windows"},S=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,c,u,f,l,d,p,v=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",C=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return n=e.sent,r=n.serverAddress,a=n.serverPort,i=n.serverUportalAddress,c=n.serverUportalPort,e.next=6,coreTup.getUportalInstance();case 6:return u=e.sent,m.info("[check upgrade]tup init"),e.next=10,(0,h.setLoginProxy)(u);case 10:return f=PromiseObject(),l=function(){var e=(0,s.default)(o.default.mark(function e(n){var i,s,c,l,d,p,h,_;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i=n.param)||38!==i.result||!i.query_version_result||""===i.query_version_result.redirect_url){e.next=17;break}if(s=/(?:https\:\/\/)?(?:(\d+\.\d+\.\d+\.\d+)|((?:[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+[.])+[0-9a-zA-Z\u4E00-\u9FA5\uF900-\uFA2D]+))(?:\:(\d+))+/,!(c=s.exec(i.query_version_result.redirect_url))){e.next=10;break}l=c[1],d=c[2],p=c[3],r=l||d,a=p&&p||0,e.next=11;break;case 10:return e.abrupt("return",(0,g.LoginError)({result:!1,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_ERR_REQUEST_FAILED,errorType:constant.LOGIN_ERROR_TYPE.uportal,isResume:isResume}));case 11:return h={query_ver_info:{server_url:r,server_port:parseInt(a),user_account:t,software_type:w(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE}},e.next=14,u.queryVersionInfo(h);case 14:_=e.sent,e.next=18;break;case 17:0!==i.result?(m.error("query version fail, result:"+i.result),f.resolve(i)):f.resolve(i);case 18:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),u.setNotifyFunc(360487,l),d={query_ver_info:{server_url:isNullOrEmpty(v)?isNullOrEmpty(C.server_url)?n.serverAddress:C.server_url:i,server_port:isNullOrEmpty(v)?isNullOrEmpty(C.port)?parseInt(n.serverPort):parseInt(C.port):parseInt(c),user_account:t,software_type:w(),current_version:window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,token:v}},m.info("[check upgrade] queryVersionInfo: "),e.next=17,u.queryVersionInfo(d);case 17:return p=e.sent,setTimeout(function(){f.resolve("request timeout")},1e4),e.abrupt("return",f);case 20:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),E=(t.reStartUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:t=e.sent,n=t.isWaitUpgrade,r=t.isPortalAfterCallUpgrade,!0===n&&!0===r&&(m.info("Soft start to upgrade after call ended"),t.isPortalAfterCallUpgrade=!1,window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():G());case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.checkUpgrade=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]&&arguments[0],a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreCommon.TaskQueue.getInstance("checkUpgrade"),n=coreCommon.TaskOptions.defaultOptions(),t.addTask((0,s.default)(o.default.mark(function e(){var t,n,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("[check upgrade] start"),!window.CLIENTCONFIG.ENABLE_IT_MEETING){e.next=4;break}return m.info("the app is ENABLE_IT_MEETING is true, can not update by usg"),e.abrupt("return");case 4:if(!window.isHubEnv){e.next=6;break}return e.abrupt("return");case 6:if(!window.isPluginEnv){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,(0,_.getLoginModel)();case 10:if(t=e.sent,isNullOrEmpty(a)||!t.sipLoginOnly){e.next=14;break}return m.info("[check upgrade] end: anonyumous join conference don't need deal non-forced upgrade"),e.abrupt("return");case 14:if(!window.webView||!window.IsGooglePlayPkg()){e.next=17;break}return m.info("[check upgrade] end: Android pkg check, the app is from google play, can not update by usg"),e.abrupt("return");case 17:if(!isNullOrEmpty(a)||t.isReqAddrChanged||r){e.next=20;break}return m.info("[check upgrade] end: addr not change, no need to query"),e.abrupt("return");case 20:if(!isNullOrEmpty(a)||!t.isAutoLogin){e.next=23;break}return m.info("[check upgrade] end: auto login no need to query"),e.abrupt("return");case 23:if(t.showContentType!==constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING){e.next=26;break}return m.info("[check upgrade] end: now is downloading, no need to query"),e.abrupt("return");case 26:return t.isReqAddrChanged=!1,e.next=29,S(i,a);case 29:if(n=e.sent,0===n.result){e.next=33;break}return m.info("[check upgrade] end: queryVersionInfo res",n),e.abrupt("return");case 33:if(s=n,!1===t.isPortalUpgrade&&(m.info("[check upgrade]isPortalUpgrade become true"),t.isPortalUpgrade=!0),!s.query_version_result.is_consistent){e.next=38;break}return m.info("[check upgrade] end: current version is the newest"),e.abrupt("return");case 38:if(Y(s.query_version_result.upgrading_version)){e.next=41;break}return m.info("[check upgrade] end: compareVersion false"),e.abrupt("return");case 41:t.isForceUpdate=s.query_version_result.is_force_upgrade,t.set({whatsNewCHN:s.query_version_result.version_description,whatsNewENG:s.query_version_result.version_description,downloadVersion:s.query_version_result.version_description,downloadUrl:s.query_version_result.version_path}),t.isForceUpdate?t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS:t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.WHATSNEWHINTS,isNullOrEmpty(a)||(t.isWaitUpgrade=!0),c=F(),c&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.FINISH&&t.curPortalState!==constant.CUR_PORTAL_LOGIN_STATE.INIT?m.info("[check upgrade] end: User is in calling, not show hints"):(m.info("[check upgrade] end: User is not calling, start to show update hints"),R());case 47:case"end":return e.stop()}},e,void 0)})),n,null);case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.clearDownloadClick=function(){m.info("clearDownloadClick in"),v.clickTimer&&clearTimeout(v.clickTimer),v.clickTimer=null,C({clickDownload:!1})}),N=function(){return!window.webView||!window.IsGooglePlayPkg()||(m.info("Android pkg check, the app is from google play, can not update by usg"),!1)},T=(function(){var e=(0,s.default)(o.default.mark(function e(t,n){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.info("run at updateFileDownload"),!v.clickDownload){e.next=6;break}return m.info("userClick confirm download"),v.downloadResume?(U(t,!0),C({downloadResume:!1})):U(t),E(),e.abrupt("return");case 6:setTimeout(function(){m.info("start to show hints"),!1!==N()&&(0,_.getLoginModel)().then(function(e){e.isForceUpdate=n,e.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,e.isWaitUpgrade=!0})},3e3);case 7:case"end":return e.stop()}},e,void 0)}))}(),t.downloadProcessNotify=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,m.info("start set download process ",(0,l.default)(t)),n=parseFloat(t.progress_info.total_file_size),r=parseFloat(t.progress_info.cur_file_size),!isNaN(n)&&!isNaN(r)){e.next=7;break}return m.error("size data error"),e.abrupt("return");case 7:return a=n<=0?0:parseInt(Math.round(r/n*1e4)/100),e.next=10,(0,_.getLoginModel)();case 10:i=e.sent,i.progressPercent=a,e.next=17;break;case 14:e.prev=14,e.t0=e.catch(0),m.error("downloadProcessNotify, error:",e.t0);case 17:case"end":return e.stop()}},e,void 0,[[0,14]])}));return function(t){return e.apply(this,arguments)}}()),b=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("get download result, params",(0,l.default)(t)),e.next=3,(0,_.getLoginModel)();case 3:n=e.sent,0===t.result?(m.info("download update file success"),G()):(m.info("download update file failed, result=",t.result+", info=",t.FaultString),C({downloadResume:!1}),O());case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),O=t.dealDownloadFailed=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!0,t.isUpdateErrorEx=!0,t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,R();case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),L=t.clickConfirmUpdate=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("userClick confirm download update version"),e.next=3,(0,_.getLoginModel)();case 3:t=e.sent,n=t.isUpdateErrorEx,r=t.showContentType,a=t.progressPercent,!n&&~a?(m.info("downloding, no need restart"),t.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,R()):(i=t.downloadUrl,U(i));case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),A=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().common.modalContent,m.info("modalContent : ",t),e.next=4,(0,_.getLoginModel)();case 4:if(n=e.sent,isNullOrEmpty(t)||"progressbar"===t.key){e.next=11;break}if(m.info("model is not empty, [key]=",t.key),"addConf"!==t.key){e.next=11;break}return e.next=10,coreConf.toggleChangeConfAcsPas("");case 10:coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN);case 11:r=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getProgressBar}),coreUi.showModal(p.default.createElement(r,{key:"progressbar"}),!0,"",!1);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),y=function(){appService.openUrl("itms-apps://itunes.apple.com/cn/app/%E5%8D%8E%E4%B8%BA%E4%BC%9A%E8%AE%AE/id1354340495?mt=8")},x=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:t=e.sent,n=t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH?language.LOG_OUT:language.LANG_NATIVE_CONFIRM_CANCEL,t.isForceUpdate?coreCommon.isIos()?window.notifyIosUpdateAlert("VERSION_UPDATE_TITLE",{buttonText:language.UPDATE_NOW}).then(function(e){e.ret&&(y(),R())}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:n,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?L():(m.info("userClick exit download update version ",t.curPortalState),t.curPortalState===constant.CUR_PORTAL_LOGIN_STATE.FINISH&&delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT))}):window.notifyUpdateConfirm("VERSION_UPDATE_TITLE",{leftButton:language.UPDATE_LATER,rightButton:language.UPDATE_NOW}).then(function(e){e.ret?coreCommon.isIos()?y():L():m.info("userClick cancel download update version")});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=t.showUpdateHintsOrBar=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=4;break}A(),e.next=8;break;case 4:return e.next=6,(0,_.getLoginModel)();case 6:t=e.sent,constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING===t.showContentType?window.goRoute("mUpdateVersionInfo"):x();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),M=function(e){try{if(window.fs){window.fs.readdirSync(e).forEach(function(t){var n=e+"/"+t;window.fs.statSync(n).isDirectory()||window.fs.unlinkSync(n)})}}catch(e){m.error("delete file error",e)}},k=function(e){var t=[];if(window.fs){window.fs.readdirSync(e).forEach(function(n){t.push(e+"/"+n)})}return t},P=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t="",n="";if(window.fs)if(t=window.path.join(window.APP_DATA_PATH,"update/").replace(/\\/g,"/"),window.fs.existsSync(t))if(e){var r=k(t);n=Array.isArray(r)&&1===r.length&&r[0]||"",m.info("this is resume download, find old update file=",n),""===n&&(m.info("not found valid file, delete all files"),M(t))}else m.info("not resume download, delete old update files"),M(t);else m.info("creat new update file"),window.fs.mkdir(t);else window.webView&&(t=window.UPGRADE_APK_PATH,e&&(n=window.getProcessFileName(t)));return{upgradeDir:t,fileNamePath:n}},D=t.clearBarPageSet=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:t=e.sent,t.isUpdateError=!1,t.isUpdateErrorEx=!1,t.progressPercent=-1;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),U=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,_.getLoginModel)();case 2:return n=e.sent,m.info("start update download, iskeep=",s),m.info("start request software version check"),r=P(s),a=r.upgradeDir,i=r.fileNamePath,m.info("confirm download, set update file path=",a),""!==a&&(""!==i?(m.info("get old file path=",i),coreCwmp.getComPressFileSize({filePath:i}).then(function(e){var n=e.fileSize;m.info("get old update file size=",n),I(t,a,!0,n)})):I(t,a)),e.next=10,D();case 10:n.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.DOWNLOADING,R();case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),F=t.getInCallingState=function(){var e=$getState().call.callStatus;return"VIDEO_CONNECTED"===e||"VIDEO_OUT"===e||"CALL_OUT"===e||"CALL_CONNECTED"===e},G=t.startInstallNewVer=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=F()){e.next=6;break}m.info("User is not calling, start install soft version now"),setTimeout(function(){window.CLIENTCONFIG.ISMOBILE?window.webView&&window.upgradeSoftVersion():B()},3e3),e.next=11;break;case 6:return e.next=8,(0,_.getLoginModel)();case 8:n=e.sent,m.info("User is in calling, save the state and wait for the call end"),n.isPortalAfterCallUpgrade=!0;case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),B=function(){if(window.fs){for(var e=window.path.join(window.APP_DATA_PATH,"update").replace(/\\/g,"/"),t=window.fs.readdirSync(e),n=0;n<t.length;n++){var r=t[n];if(-1!==(0,l.default)(r).indexOf(".exe")){m.info("start execute software upgrade file, upgrade file name=",r);return void V(e+"/"+r)}}m.info("software update file is not exist"),H(language.DID_NOT_FIND_THE_AVAILABLE_UPGRADE_FILE)}},W=function(e){var t=window.process.env.APPDATA+"\\CloudLink\\log\\language.txt";window.fs.writeFile(t,window.langcode,"utf8",function(t){t&&window.log("writeFile quiteInstallFile error =",t),window.spawn(e,["/verysilent","/suppressmsgboxes","/norestart"]).on("error",function(e){m.info("execute update file error, err=",e),H(language.PC_FILE_DAMAGE_DOWN_AGAIN)})})},V=function(e){try{var t=window.APP_DATA_PATH;appService.writeFile(t,"configfile.ini","language = "+window.langcode.toString()+"\r\npackageversion = "+window.CLIENTCONFIG.NEW_APP_NAME).then(function(n){m.info("set update tip language success, file=",n);var r=t+"/ShowInstallTip.exe";appService.isFileExist(r).then(function(n){if(n){m.info("execute ShowInstallTip");var r=t.slice(0,2),a=r+" && cd "+t+" && ShowInstallTip.exe";window.exec(a),W(e)}else m.info("update tip file does not exit"),W(e)})},function(t){m.info("set update tip language failed, err:"+t),W(e)})}catch(e){m.error("install update file error:",e),H(language.PC_FILE_DAMAGE_DOWN_AGAIN)}},H=t.dealInstallFailed=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("intsall update file error, show download again prompt"),e.next=3,(0,_.getLoginModel)();case 3:n=e.sent,window.exec("taskkill /f /im ShowInstallTip.exe"),$(),n.showContentType=constant.UPDATE_MODEL_CONTENT_TYPE.NEWHINTS,window.confirm(""+t,!0).then(function(e){e.ret&&(m.info("userClick to download update file again"),U(n.downloadUrl))});case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),$=t.hideProgressBarModal=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().common.modalContent,isNullOrEmpty(t)||"progressbar"!==t.key?m.info("not update model, [key]=",t.key):(m.info("hide update model"),coreUi.hideModal());case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),Y=(t.dealUpdateVersionClickEx=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return m.info("userClick, show soft update state btn"),e.next=3,(0,_.getLoginModel)();case 3:t=e.sent,!1===t.isWaitUpgrade?(m.info("this is the latest software version"),window.CLIENTCONFIG.ISMOBILE?window.ToastNew(language.SOFT_UPGRADE_LATEST,2):(n=coreCommonComponent.lazyLoadPage({getComponentProm:HwLazyUiPage.getSoftVersionHint}),coreUi.showModal(p.default.createElement(n,null)))):R();case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.compareVersion=function(e){var t=window.CLIENTCONFIG.ACS_SOFTWAREVERSION_VALUE,n=t.split("."),r=e.split("."),a=Math.max(n.length,r.length);if(t===e)return!1;for(var o=0;o<a;o++){var i=o>=r.length?0:parseInt(r[o],10),s=o>=n.length?0:parseInt(n[o],10);if(i>s)return!0;if(i<s)return!1}return!1})},293:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(){M.info("hideAlertAndConfirm"),window.hideConfirm&&window.hideConfirm(),window.hideAlert&&window.hideAlert(),window.hideNotifyConfirm&&window.hideNotifyConfirm(),window.clearDialogQueue&&window.clearDialogQueue()}function o(){return(0,S.getLoginModel)().then(function(e){return e.isBuildStgSuc?(0,C.destroyStgTunnel)():s.default.resolve(0)})}Object.defineProperty(t,"__esModule",{value:!0}),t.deRegisterService=t.clearState=t.quickLogout=t.logout=t.setOffline=t.doLogout=t.resetAllAtomicAction=t.initService=void 0;var i=n(3),s=r(i),c=n(132),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("clearObserversAndEvents"),e.next=3,coreConf.unregisterConfEvent();case 3:coreCommon.Observer.unsubsribleAll(),coreConf.getRegisterConfEventAtomic().reset(),coreConf.getSubScribeConfListAndInfoResAtomic().reset();case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),_=function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r=t.isBackLogin,a=t.isClearLoginRecord;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("logout success"),e.next=3,(0,S.getLoginModel)();case 3:n=e.sent,coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable()),coreCommon.isMobile()&&(n.logoutDisable=!1),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:""}),r&&(window.isConfLogOut=a,window.ifLogOut=!0,n.showPwd=!1,n.sipOnlyType=0,window.isLoadLoginRecord=!0,!window.CLIENTCONFIG.ISMOBILE&&delegate.winHide(),!window.CLIENTCONFIG.ISMOBILE&&(0,O.initImportCertificate)(),window.CLIENTCONFIG.ISMOBILE&&(0,O.initMImportCertificate)(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?(M.info("[IT-Meeting] IS_LINK_IT_SMC_MEETING go main"),window.goRoute("callMain"),M.info("[IT-Meeting] shutDownTupServer"),window.shutDownTupServer()):window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login")),coreCommon.isMobile()&&(n.logoutDisable=!1),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable());case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.error("logout failed"),e.next=3,(0,S.getLoginModel)();case 3:t=e.sent,coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,resultParams:[0],isTrackTimeCosts:!0}),coreUt.utConfigAccountInfo({configAccount:""}),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.goRoute(window.CLIENTCONFIG.ISMOBILE?"loginCtn":window.isHubEnv?"maxhubLogin":"login"),coreCommon.isMobile()&&(t.logoutDisable=!1),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable());case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("start deRegisterTupService"),e.next=3,(0,S.getLoginModel)();case 3:if(t=e.sent,window.CLIENTCONFIG.ISBIGWIN){e.next=11;break}return e.next=7,coreConf.endPairWithPeripherals();case 7:return e.next=9,coreConf.serverCloseAllPair();case 9:coreConf.uninitAsPairServer(),coreConf.handlePairClosed();case 11:if(!(n=t.isSupportAS)){e.next=15;break}return e.next=15,coreConf.unSubscribeConfList();case 15:return e.next=17,coreTup.getUportalInstance();case 17:return r=e.sent,e.next=20,r.uportalLogout();case 20:return e.next=22,coreConf.unInitConfCtrl();case 22:if(!window.CLIENTCONFIG.ISMOBILE){e.next=26;break}if(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return e.next=26,(0,I.unEnableBFCP)();case 26:return e.next=28,(0,I.sipserverDeregister)();case 28:return e.next=30,coreCwmp.stopCwmpServerAndUnInit();case 30:return e.next=32,coreContact.eaddrUnint();case 32:if(o||!t.useIM){e.next=40;break}return a=$getState().recent.showRecentInfo.toString(),e.next=36,coreDb.saveUserConfig({key:"userInfoStatus",value:a});case 36:return e.next=38,coreIm.eserverLogout();case 38:return e.next=40,coreIm.umserverLogout();case 40:M.info("deRegisterTupService success");case 41:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),v=t.deRegisterService=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n=(!(arguments.length>0&&void 0!==arguments[0])||arguments[0],arguments.length>1&&void 0!==arguments[1]&&arguments[1]);return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,M.info("start deRegisterService"),M.info("deRegisterService, set isOffline true"),window.isOffline=!0,window.CLIENTCONFIG.ISMOBILE){e.next=9;break}return e.next=7,coreSecurity.getHWTupSupport();case 7:t=e.sent,t.addCallBack({closeSupportSocket:function(){M.info(" closeSupportSocket set null")}});case 9:return window.isLoadLoginRecord=!1,(0,N.enableAutoLogin)(!1),e.next=13,m(n);case 13:return M.info("deRegisterService success"),e.abrupt("return",!0);case 17:return e.prev=17,e.t0=e.catch(0),M.error("setOffline error",e.t0.toJSON&&e.t0.toJSON()),e.abrupt("return",s.default.resolve(!1));case 21:case"end":return e.stop()}},e,this,[[0,17]])}));return function(){return e.apply(this,arguments)}}(),C=n(211),I=n(220),w=n(229),S=n(136),E=n(290),N=n(185),T=n(221),b=n(361),O=n(166),L=n(260),A=n(272),y=n(230),x=n(288),R=n(241),M=coreLogger.getLogger("logic")("logout"),k=t.initService=function(e){coreIm.initImModelService(e),coreIm.initRecentService(e),coreIm.initOpenRecentData(e),coreContact.initTaskQueue({info:e}),coreIm.localTimeService.initLocalTimeService(e)},P=t.resetAllAtomicAction=function(){coreConf.getVmrInfoToDbAtomic().reset(),coreConf.getAsInfoToDbAtomic().reset(),(0,x.sipLoginAtomicReset)()},D=(t.doLogout=delegate(function(){var e=(0,p.default)(l.default.mark(function e(t){var n,r,a=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("doLogout"),e.next=3,(0,R.cancelLogin)();case 3:return e.next=5,(0,S.getLoginModel)();case 5:return n=e.sent,coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(n.logoutDisable=!0),coreCommon.isPc()&&(0,w.clearFireWallStore)(),e.next=11,(0,E.checkBeforeLogout)(t);case 11:if(!(r=e.sent)){e.next=17;break}return e.next=15,(0,y.restoreMAAConfControl)();case 15:return e.next=17,D(a);case 17:return coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable()),coreCommon.isMobile()&&(n.logoutDisable=!1),n.isPortalUpgrade=!1,n.isReqAddrChanged=!1,e.abrupt("return",r);case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),"doLogout"),t.setOffline=function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o=arguments.length>0&&void 0!==arguments[0]&&arguments[0],i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("do setOffline"),e.next=3,(0,R.cancelLogin)();case 3:return e.next=5,(0,S.getLoginModel)();case 5:return t=e.sent,t.hasLoginCanceled=!1,e.next=9,(0,S.getMyInfo)();case 9:return n=e.sent,e.next=12,(0,E.checkBeforeSetOffline)(constant.LOGOUT_TYPE.SETOFFLINE,c);case 12:if(!0!==(r=e.sent)&&!0!==r.ret){e.next=34;break}return o&&(0,O.changeAutoLogin)(o),t.setAppState(constant.APP_STATE.DISCONNECTED),a=n.account,$dispatch(coreUi.updateContactStatusMap((0,u.default)({},a,{status:constant.ONLINE_STATUS.OFFLINE,desc:"",client_type:0}))),n.status=constant.ONLINE_STATUS.OFFLINE,$dispatch(coreUi.subscriptionAccountList([])),M.info("setOffline, change status is offline"),coreUi.clearLinkageStatusLogic(),e.next=24,h();case 24:return P(),e.next=27,(0,T.clearResumeService)();case 27:return e.next=29,(0,T.stopResume)("setOffline");case 29:return M.info("setOffline, set isOffline true"),window.isOffline=!0,e.abrupt("return",v(i));case 34:return e.abrupt("return",s.default.resolve(!1));case 35:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.logout=delegate(function(){var e=(0,p.default)(l.default.mark(function e(){var t,n,r,i=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],s=arguments.length>1&&void 0!==arguments[1]&&arguments[1],c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],u=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a(),e.next=3,(0,S.getLoginModel)();case 3:return t=e.sent,coreUt.utEventStart({eventId:constant.EVENT_ID.UT_LOGOUT,extraTrackKey:null,params:[]}),n=$getState(),r=n.conf.confTempAcsAccount,isNullOrEmpty(r)||($dispatch(coreUi.changeConfTempAcsAccount("")),t.displayAccount=""),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable()),coreCommon.isMobile()&&(t.logoutDisable=!0),window.stroage.setFastLogin(!1),e.prev=10,M.info("[ logout ] isBackLogin:"+i+",isKickout:"+s),coreCommon.isPc()&&appService.resetTrayMenu(),window.CLIENTCONFIG.ISMOBILE&&appService.cancelAllNotification(),e.next=16,(0,L.unRegisterPush)(!1);case 16:return window.skipLogin=!1,e.next=19,(0,T.clearResumeService)();case 19:return e.next=21,(0,T.stopResume)("logout");case 21:return(0,b.getMiddleEndApi)().stopRefreshMiddleEndToken(),e.next=24,h();case 24:return coreCall.exitFullScreen(),P(),e.next=28,coreConf.unInit();case 28:C.actionGetCorpResourceAtomic.reset(),!s&&(0,N.storeAppCache)(),$dispatch(coreUi.toggleMobileNetTip(!0)),t.isMobile&&document.removeEventListener("pause",N.storeAppCache,!1),e.next=39;break;case 34:return e.prev=34,e.t0=e.catch(10),M.error("logout exception: "+e.t0.toString()),M.error("logout handle cache error:",e.t0),e.abrupt("return",g());case 39:return e.abrupt("return",v(!0,u).then((0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o(),e.next=3,(0,C.resetLoginInfo)();case 3:return e.next=5,U();case 5:return e.abrupt("return",{isBackLogin:i,isClearLoginRecord:c});case 6:case"end":return e.stop()}},e,void 0)}))).then(_).catch(function(e){M.error("logout handle cache error:",e),g()}));case 40:case"end":return e.stop()}},e,void 0,[[10,34]])}));return function(){return e.apply(this,arguments)}}(),"logout")),U=(t.quickLogout=delegate((0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("[ quickLogout ]"),e.next=3,coreCwmp.stopCwmpServerAndUnInit();case 3:case"end":return e.stop()}},e,void 0)})),"quickLogout"),t.clearState=function(){var e=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:M.info("clearState"),coreSearch.clearGlobalData(),coreUi.clearReduxState(),k("logout clearState"),coreUi.initAvatarMap(),coreUi.hideModal(),(0,S.resetLoginModel)(),(0,A.resetMyInfo)();case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}())},308:function(e,t,n){"use strict";(function(e){function r(e){return e&&e.__esModule?e:{default:e}}function a(){return window.prompt({title:language.PROXY_TITLE,label:"Proxy UserName :",value:"username",inputAttrs:{type:"url"},type:"input"})}function o(){return window.prompt({title:language.PROXY_TITLE,label:"Proxy Password :",value:"password",inputAttrs:{type:"password"},type:"input"})}Object.defineProperty(t,"__esModule",{value:!0}),t.getOAuthAccount=t.getOAuthTicket=void 0;var i=n(1),s=r(i),c=n(2),u=r(c),f=(function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,i;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return t=e.sent,e.next=5,a();case 5:if(n=e.sent){e.next=8;break}return e.abrupt("return");case 8:return e.next=10,o();case 10:if(r=e.sent){e.next=13;break}return e.abrupt("return");case 13:return t.proxyAccount=n,e.next=16,coreSecurity.getPasswordManager();case 16:return i=e.sent,e.next=19,i.setPassword("proxyPassword",r);case 19:return e.next=21,(0,l.setProxyInfo)({isSupportProxy:!0,proxyAddress:t.proxyAddress,proxyPort:t.proxyPort,proxyAccount:n,proxyPassword:r});case 21:return e.abrupt("return",!0);case 22:case"end":return e.stop()}},e,this)}))}(),n(136)),l=n(166),d=coreLogger.getLogger("login")("IT-ticket");t.getOAuthTicket=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o,i,c,u,l,p,h,_,g;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info(" [ getOAuthTicket ] "),t=PromiseObject(),e.next=4,(0,f.getLoginModel)();case 4:return n=e.sent,r=n.OAuthClinetID,a=n.OAuthUrl,o=n.account,e.next=9,coreSecurity.getPasswordManager();case 9:return i=e.sent,e.next=12,i.getPassword("password");case 12:return c=e.sent,c=encodeURIComponent(c),e.next=16,coreHttp.sendSyncRequest({url:a,type:constant.REQUEST_TYPE.POST,header:{"Content-Type":"application/x-www-form-urlencoded"},body:"username="+o+"&password="+c+"&grant_type=password&client_id="+r,cipherlist:[50331695,50331701,50331708,50331709]});case 16:return u=e.sent,l=u.param,p=l.recv_body,h=l.resp_code,_=l.result,h?(g=parseInt(h),200===g?(p=JSON.parse(p),p.error&&(d.error(" [ getOAuthTicket ] failed, errorCode:"+p.error+", info:"+p.error_description),t.reject({result:!1,errorCode:f.UErrorCode.LOGIN_ERR_AUTH_FAILED,errorType:f.ErrorType.uportal,isResume:n.isResume})),t.resolve(n.user_ticket=p.access_token),d.info(" [ getOAuthTicket ] result")):(d.error(" [ getOAuthTicket ] failed, request error, status code: "+h+", result: "+_),t.reject({result:!1,errorCode:f.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:f.ErrorType.uportal,isResume:n.isResume}))):t.reject({result:!1,errorCode:f.UErrorCode.LOGIN_ERR_REQUEST_FAILED,errorType:f.ErrorType.uportal,isResume:n.isResume}),e.abrupt("return",t);case 20:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.getOAuthAccount=function(){var t=(0,u.default)(s.default.mark(function t(n){var r,a,o;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(d.info(" [ getO[Auth]Account ] "),!((r=n.split("."))instanceof Array)){t.next=8;break}return a=JSON.parse(new e(r[1],"base64").toString()),d.info(" [ getO[Auth]Account ] result",a.preferred_username.length>4?a.preferred_username.substr(0,3)+"******"+a.preferred_username.substr(-4):"****"),t.abrupt("return",a.preferred_username);case 8:return o=PromiseObject(),t.abrupt("return",o.reject("server config error"));case 10:case"end":return t.stop()}},t,this)}));return function(e){return t.apply(this,arguments)}}()}).call(t,n(131).Buffer)},309:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.firstTimeLoginChangePassword=t.firstLoginChangePassword=t.checkIsFirstLogin=t.setFistLoginInfo=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreSecurity.getPasswordManager();case 2:return n=e.sent,e.next=5,n.setPassword("password",t);case 5:return e.next=7,(0,u.getLoginModel)();case 7:r=e.sent,r.password=t;case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),u=n(195),f=n(166),l=coreLogger.getLogger("login")("firstLogin"),d={};t.setFistLoginInfo=function(e,t){d={is_first_login:e.uportal_authorize_result&&e.uportal_authorize_result.is_first_login,account:t,auth_token:e.uportal_authorize_result.auth_token}},t.checkIsFirstLogin=function(){return d.is_first_login},t.firstLoginChangePassword=function(){l.info("firstLoginChange[Password] enter."),window.CLIENTCONFIG.ISMOBILE?(window.goRoute("loginCtn"),navigator.splashscreen&&navigator.splashscreen.hide(),window.goRoute("/loginCtn/firstTimeChangePassword")):window.confirm(language.FIRST_LOGIN_CHANGE_PASSWORD,"SETTING_CHANGE_PASSWORD",!0).then(function(e){e.ret?coreSetting.showChangePassword(!0):coreDb.saveUserConfig({key:"isRemindNotNotify",value:"true"})})},t.firstTimeLoginChangePassword=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r){var a,i,d,p,h,_;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.navigator.onLine){e.next=3;break}return alert(language.LOGIN_RESUME_NETWORK_ERROR),e.abrupt("return");case 3:return e.next=5,coreTup.getUportalInstance();case 5:return a=e.sent,i=PromiseObject(),d=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.param,l.info("change [pass]word result: "+n.result),!n||0!==n.result){e.next=13;break}if(!window.CLIENTCONFIG.ISMOBILE){e.next=7;break}window.alert(""+language.CHANGE_PASSWORD_SUCCESS_FIRST).then(function(e){c(r).then(function(){return i.resolve(!0)})}),e.next=11;break;case 7:return e.next=9,coreSecurity.getPasswordManager();case 9:a=e.sent,window.confirm(language.CHANGE_PASSWORD_SUCCESS_RELOGIN,!0).then(function(e){coreSetting.showChangePassword(!1),c(r).then(function(){e.ret?(l.info("[password] change success, reLogin"),i.resolve(!0)):(l.info("[password] change success, not login"),a.setPassword("password","").then(function(e){var t={isRememberPassword:!1,isAutoLogin:!1};(0,f.setLoginInfo)(t),(0,u.getLoginModel)().then(function(e){e.password=""}),document.getElementById("password").value="",i.resolve(!1)}))})});case 11:e.next=16;break;case 13:s=constant.UPORTAL_LOGIN_FORGET_PWD_ERROR_LOG_INFO[n.result]||"CHANGE_PASSWORD_FAILED",window.ToastNew(language[s],2),i.resolve(!1);case 16:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),a.setNotifyFunc(360449,d),e.next=11,(0,u.getLoginModel)();case 11:return p=e.sent,h=p.serverUportalAddress,_=p.serverUportalPort,a.changeLoginUportalPassword(t,n,r,h,_),e.abrupt("return",i);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()},310:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.registerEServerClientPush=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(195),l=coreLogger.getLogger("push")("index");window.registerEServerHWPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=window.webView.getLocalIp()||"0.0.0.0",!isNullOrEmpty(a)){e.next=6;break}return e.next=4,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 4:n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)||(a=n.value);case 6:if(!isNullOrEmpty(o)){e.next=11;break}return e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:r=e.sent,isNullOrEmpty(r)||!r.hasOwnProperty("key")||!r.hasOwnProperty("value")||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)||(o=r.value);case 11:return e.next=13,d(2,1,a,o,"","",t);case 13:coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_TOKEN,value:a}),coreDb.saveLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME,value:o});case 15:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerHWClientPush=(0,u.default)(s.default.mark(function e(){var t,n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.webView.getLocalIp()||"0.0.0.0",n=void 0,r=void 0,e.next=5,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_TOKEN});case 5:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(n=a.value),e.next=9,coreDb.queryLoginSetting({key:DB_KEY_HW_PUSH_BADGE_CLASS_NAME});case 9:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value),e.next=13,d(2,3,n,r,"","",t);case 13:case"end":return e.stop()}},e,void 0)})),window.registerEServerIosPush=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(r){var a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=5;break}return e.next=3,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 3:a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(t=a.value);case 5:if(!isNullOrEmpty(n)){e.next=10;break}return e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(n=o.value);case 10:return e.next=12,d(1,1,"","",t,n,r);case 12:coreDb.saveLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN,value:t}),coreDb.saveLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN,value:n});case 14:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.unRegisterEServerIosPush=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.updateLocalIp().then(function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=void 0,r=void 0,e.next=4,coreDb.queryLoginSetting({key:DB_KEY_IOS_PUSH_TOKEN});case 4:return a=e.sent,isNullOrEmpty(a)||!a.hasOwnProperty("key")||!a.hasOwnProperty("value")||isNullOrEmpty(a.key)||isNullOrEmpty(a.value)||(n=a.value),e.next=8,coreDb.queryLoginSetting({key:DB_KEY_IOS_VOIP_TOKEN});case 8:return o=e.sent,isNullOrEmpty(o)||!o.hasOwnProperty("key")||!o.hasOwnProperty("value")||isNullOrEmpty(o.key)||isNullOrEmpty(o.value)||(r=o.value),e.next=12,d(1,3,"","",n,iosVoipToken,t);case 12:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());case 1:case"end":return e.stop()}},e,void 0)}));var d=t.registerEServerClientPush=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r,a,i,c,u){var d,p,h,_,g,m,v,C,I,w,S,E,N,T=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"5";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return");case 2:if(!isNullOrEmpty(r)||!isNullOrEmpty(i)){e.next=5;break}return l.info(" [ registerClientPush ] androidToken and iosDeviceToken is null"),e.abrupt("return");case 5:return isNullOrEmpty(a)&&(a=""),e.next=8,(0,f.getLoginModel)();case 8:return d=e.sent,p=d.account,h=d.authToken,_=d.serverAddress,g=d.serverPort,m=d.proxyAddress,v=d.proxyPort,C=d.proxyAccount,I=1,w="00:00",S="00:00",E={user:p,device_token:1===t?i:r,push_type:t,opt:n,client_ip:u,language:window.langShortName,no_push_start_time:w,no_push_end_time:S,apns_server:1,apns_cert:T,push_by_time_switch:I,heart_beat_time:30,android_token:1===t?i:r,app_id:"1",push_class_name:a,voip_token:c,app_mode:1,push_mode:1,im_push_mode:1,call_push_mode:0,push_im_active:"welink://welinksoftclient/h5page?page=imDetail",push_call_active:"welink://welinksoftclient/h5page?page=call"},l.info("registerClientPush","registerClientPush"),e.next=17,coreIm.registerPush(E);case 17:N=e.sent,l.info("registerClientPush","registerClientPush result : "+(0,o.default)(N));case 19:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}();window.openConversationByMobile=function(){var e=(0,u.default)(s.default.mark(function e(t){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreIm.openImDetailByUrl(t);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},311:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkLoginInfo=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=(t.checkLoginInfo=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("checkLoginInfo 登录前check"),e.next=3,u.getLoginModel();case 3:return t=e.sent,n=/[`~!#$^&*()+=|\\\[\]\{\}:;'\,<>\/?]|[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,r=/[\u4E00-\u9FA5]|[\uFE30-\uFFA0]|[^\x00-\xff]/g,e.abrupt("return",!(n.test(t.displayAccount)||r.test(t.password)));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),n(136)),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=coreLogger.getLogger("logic")("login/loginPreCheck")},312:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.iosCursorDeal=t.checkOffLineIsInCall=t.getIsReminder=t.getCloseType=t.getCloseAppWays=t.setLocalOfflineStatus=t.publishStatus=t.loadEserverSignature=t.loadMyInfo=t.updateCurUser=t.checkLocalHasMyinfo=void 0;var a=n(132),o=r(a),i=n(69),s=r(i),c=n(127),u=r(c),f=n(129),l=r(f),d=n(1),p=r(d),h=n(2),_=r(h),g=n(185),m=n(195),v=n(363),C=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(v),I=n(136),w=coreLogger.getLogger("logic")("main/myInfo"),S=(t.checkLocalHasMyinfo=function(){var e=(0,_.default)(p.default.mark(function e(){var t,n,r,a,o;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(w.info("start checkLocalHasMyinfo"),!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return e.abrupt("return",!1);case 3:return e.next=5,(0,m.getLoginModel)();case 5:return t=e.sent,e.next=8,coreDb.queryLoginSetting({key:"myinfo"});case 8:if(n=e.sent,isNullOrEmpty(n)||!n.hasOwnProperty("key")||!n.hasOwnProperty("value")||isNullOrEmpty(n.key)||isNullOrEmpty(n.value)){e.next=20;break}if(r=n.value,isNullOrEmpty(r)){e.next=20;break}if(a=JSON.parse(r),isNullOrEmpty(a)||t.account!==a.compareAccount){e.next=20;break}return w.info(" checkLocalHasMyinfo : has local myinfo last copy"),e.next=17,(0,I.getMyInfo)();case 17:return o=e.sent,o.set(a),e.abrupt("return",!0);case 20:return w.info(" checkLocalHasMyinfo : no copy"),e.abrupt("return",!1);case 22:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.updateCurUser=function(){var e=(0,_.default)(p.default.mark(function e(t){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getMyInfo)();case 2:n=e.sent,t&&(n.name=t),n.set.apply(n,(0,l.default)(n));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadMyInfo=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a,o,i,c,f,l,d,h,_,g,v,C;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,m.getLoginModel)();case 2:return n=e.sent,e.next=5,(0,I.getMyInfo)();case 5:if(r=e.sent,w.info("loadMyInfo"),a=n.sipImpi,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),!window.CLIENTCONFIG.ENABLE_IT_MEETING||window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=26;break}return i=window.getUportalRes(),c={},c.account=i.param.uportal_authorize_result.real_user_account,e.next=15,coreContact.getUserInfo(c.account);case 15:if(f=e.sent,l=f.param,!isNullOrEmpty(l)){e.next=24;break}return w.error("myinfo is null"),d=c.account.split("@")[0],r.account=c.account,r.name=d,r.bind_no=a,e.abrupt("return");case 24:return r.set((0,u.default)({},l)),e.abrupt("return");case 26:return e.next=28,coreContact.getUserInfo(t);case 28:if(h=e.sent,_=h.param,!isNullOrEmpty(_)){e.next=37;break}return w.error("myinfo is null"),g=n.displayAccount.split("@")[0],r.account=t,r.name=r.name||g,r.bind_no=a,e.abrupt("return");case 37:n.isSupportAS&&(_.account=n.account),_.dept_name_cn=_.dept_name_cn.replace(/\*/g,"-"),_.dept_name_en=_.dept_name_cn.replace(/\*/g,"-"),v=(0,u.default)({},_,{compareAccount:t}),C=(0,s.default)(v),coreDb.saveLoginSetting({key:"myinfo",value:C}),r.set(v);case 44:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.loadEserverSignature=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("query eserver sig start"),e.next=3,coreContact.queryEserverSignature(t);case 3:if(n=e.sent,isNullOrEmpty(n)||1!==n.result){e.next=7;break}return w.info("query eserver sig-nature failed"),e.abrupt("return");case 7:return e.next=9,(0,I.getMyInfo)();case 9:r=e.sent,r.set(n);case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),null),E=(t.publishStatus=function(){var e=(0,_.default)(p.default.mark(function e(t){var n,r,a,o,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,m.getLoginModel)();case 3:return n=e.sent,e.next=6,(0,I.getMyInfo)();case 6:if(r=e.sent,n.useIM){e.next=10;break}return w.info("publishStatus, now is te mode,not do publishStatus"),e.abrupt("return");case 10:if(a=window.CLIENTCONFIG.ISMOBILE?1:0,w.info("publishStatus,status:",t,"desc:",handlePhoneNumber(i)),t!==constant.ONLINE_STATUS.OFFLINE){e.next=24;break}return e.next=15,(0,g.setOffline)();case 15:if(!(o=e.sent)){e.next=21;break}return b(),e.abrupt("return",!0);case 21:return e.abrupt("return",!1);case 22:e.next=35;break;case 24:if(!window.isOffline){e.next=34;break}if(!n.loginDisable){e.next=28;break}return w.info("publishStatus, now loginDisable,not do login again"),e.abrupt("return",!1);case 28:return t===constant.ONLINE_STATUS.ONLINE&&(r.isOffToLine=!0),$dispatch(coreUi.updateUnreadSystemBulletin(0)),e.next=32,(0,g.login)(!1,!1,t,i);case 32:r.isOffToLine=!1,C.checkStatusOptions();case 34:return e.abrupt("return",E(t,i,a));case 35:e.next=41;break;case 37:return e.prev=37,e.t0=e.catch(0),w.error("publishStatus",e.t0),e.abrupt("return",!1);case 41:case"end":return e.stop()}},e,void 0,[[0,37]])}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,_.default)(p.default.mark(function e(t,n,r){var a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!coreIm.checkEServerOnlineNoToast("publishStatus")){e.next=6;break}return e.next=3,N(t,n,r);case 3:return e.abrupt("return",e.sent);case 6:return coreIm.setUserLoginStatus({status:t,desc:n}),a=PromiseObject(),S&&(w.info("publishStatus remove pre _addedEServerLoginSuccessFunction"),window.removeEventListener("eServerLoginSuccess",S),S=null),S=function(){var e=(0,_.default)(p.default.mark(function e(){var o,i;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("publishStatus _addedEServerLoginSuccessFunction",(0,s.default)({status:t,desc:n})),window.removeEventListener("eServerLoginSuccess",S),S=null,o=coreIm.getUserLoginStatus(),e.next=6,N(o.status,o.desc,r);case 6:i=e.sent,a.resolve(i);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),window.addEventListener("eServerLoginSuccess",S),w.info("publishStatus add eServerLoginSuccess callback",(0,s.default)({status:t,desc:n})),setTimeout(function(){return a.resolve(!1)},35e3),e.abrupt("return",a);case 14:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),N=function(){var e=(0,_.default)(p.default.mark(function e(t,n,r){var a,i,c,u;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,I.getMyInfo)();case 2:if(a=e.sent,"number"!==Object.type(t)&&"string"!==Object.type(t)){e.next=19;break}return w.info("pushStatusToEServer",(0,s.default)({status:t,desc:n,client_type:r})),e.next=7,(0,m.getLoginModel)();case 7:return i=e.sent,e.next=10,coreIm.publishStatusToServer({status:t,desc:n});case 10:if(!(c=e.sent)||0!==c.result){e.next=19;break}return u=i.account,i.status=t,$dispatch(coreUi.updateContactStatusMap((0,o.default)({},u,{status:t,desc:n,client_type:r}))),a.status=t,a.statusDesc=n,T(t),e.abrupt("return",!0);case 19:return e.abrupt("return",!1);case 20:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),T=function(e){coreSetting.checkAutoLeave(e),$getState().setting.shouldResetTray&&appService.initMainTray()},b=t.setLocalOfflineStatus=function(){var e=(0,_.default)(p.default.mark(function e(){var t;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return w.info("setLocalOfflineStatus"),e.next=3,(0,I.getMyInfo)();case 3:t=e.sent,t.status=constant.ONLINE_STATUS.OFFLINE,coreIm.dealOfflineFileSendOrReceiveFail(),t.statusDesc="",t.selectIndex=4,$dispatch(coreUi.cleanContactStatusMap());case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}();t.getCloseAppWays=function(){var e=(0,_.default)(p.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:w.info("userClick  main page quit btn"),t?coreCommon.quickCloseApp():coreCommon.closeApp();case 2:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.getCloseType=function(){return window.localStorage.getItem("closeWays")},t.getIsReminder=function(){return window.localStorage.getItem("isReminder")},t.checkOffLineIsInCall=function(){var e=(0,_.default)(p.default.mark(function e(){var t,n,r,a;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,w.info("click OffLint for checkAndEndCall"),t=$getState().call,n=t.showCallToolBar,r=t.callStatus,!n&&"VIDEO_CONNECTED"!==r&&"VIDEO_OUT"!==r&&"CALL_OUT"!==r&&"CALL_CONNECTED"!==r){e.next=7;break}return a=language.COMMON_EXIT_THE_PROMPT,window.CLIENTCONFIG.ISMOBILE||window.alert(a),e.abrupt("return",!1);case 7:return e.abrupt("return",!0);case 10:return e.prev=10,e.t0=e.catch(0),w.error("click OffLint for checkAndEndCall"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0,[[0,10]])}));return function(){return e.apply(this,arguments)}}(),t.iosCursorDeal=function(){var e=(0,_.default)(p.default.mark(function e(t){var n;return p.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:"ios"===window.CLIENTCONFIG.PLATFORM&&0===t.target.value.length&&(n=document.activeElement,"input"===n.nodeName.toLocaleLowerCase()&&setTimeout(function(){""===n.style.textShadow?n.style.textShadow="rgba(0, 0, 0, 0) 0 0 0":n.style.textShadow=""},20));case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},329:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.EncoderAdpt=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("conf")("logic/video/svcManager"),u={LEVEL_INVALID:-1,LEVEL_LOW:0,LEVEL_HIGH:1},f={REQUEST_KEEP:0,REQUEST_CLOSE:1,REQUEST_OPEN:2},l={OFF:0,ON:1},d=[{width:1280,height:720,framerate:30,bitrate:2795},{width:960,height:540,framerate:20,bitrate:1430},{width:640,height:360,framerate:20,bitrate:730}],p=80,h=90,_=function(){function e(){(0,o.default)(this,e),this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1,this.cameraRequest=f.REQUEST_KEEP,this.cameraStatus=l.ON,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraIsForceClose=!1,this.cameraAutoCloseEnable=!0,this.adpt_threshold=p,this.close_camera_threshold=h}return(0,s.default)(e,[{key:"clear",value:function(){this.continuousTime=0,this.continuousLevel=u.LEVEL_INVALID,this.punishTime=0,this.encoderLevel=0,this.punishCheck=-1,this.clearPunishCheck=!1,this.cameraRequest=f.REQUEST_KEEP,this.cameraStatus=l.ON,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraIsForceClose=!1,this.cameraAutoCloseEnable=!0,this.adpt_threshold=p,this.close_camera_threshold=h}},{key:"onNotifyCameraStatus",value:function(e){this.cameraIsForceClose&&e&&coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA_NOTIFY",1),this.cameraStatus=e?l.ON:l.OFF,this.cameraIsForceClose=!1,this.closeCameraReqCount=0,this.openCameraReqCount=0,this.cameraRequest=f.REQUEST_KEEP,this.cameraAutoCloseEnable=!1,c.info("onNotifyCameraStatus, cameraStatus: ",this.cameraStatus)}},{key:"calcLevel",value:function(e){return e>this.adpt_threshold?u.LEVEL_HIGH:u.LEVEL_LOW}},{key:"shouldDowngrade",value:function(){return this.continuousTime>=15&&this.continuousLevel===u.LEVEL_HIGH}},{key:"shouldUpgrade",value:function(){return this.continuousTime>=15+this.punishTime&&this.continuousLevel===u.LEVEL_LOW}},{key:"updateContinuousLevel",value:function(e){var t=this.calcLevel(e);return t!==this.continuousLevel?(this.continuousLevel=t,this.continuousTime=5):this.continuousTime+=5,e>this.close_camera_threshold?this.closeCameraReqCount++:this.closeCameraReqCount=0,e<70?this.openCameraReqCount++:this.openCameraReqCount=0,t}},{key:"check",value:function(e){var t=!1;return this.punishCheck>=0&&(this.punishCheck++,e>=this.adpt_threshold&&(this.punishTime=this.punishTime<480?2*(this.punishTime+15)-15:465,this.ResolutionDowngrade(),this.continuousTime=0,this.punishCheck=-1,t=!0,c.info("punish: ",this.punishTime)),this.punishCheck>=2&&(this.punishCheck=-1)),this.clearPunishCheck&&e<this.adpt_threshold&&(this.punishTime=0,this.clearPunishCheck=!1,t=!0,c.info("clear punish: ",this.punishTime)),t}},{key:"feed",value:function(e,t){if(3===t||4===t?(this.adpt_threshold=p+10,this.close_camera_threshold=h+10):(this.adpt_threshold=p,this.close_camera_threshold=h),c.info(">>>>>>>>>current cpu rate: ",e),this.updateContinuousLevel(e),this.closeCameraReqCount>=3&&this.cameraRequest===f.REQUEST_KEEP&&(this.cameraIsForceClose=!0,this.closeCameraReqCount=0),this.closeCameraReqCount>=3&&this.cameraRequest===f.REQUEST_CLOSE){if(this.cameraAutoCloseEnable)return this.closeCamera(),this.closeCameraReqCount=0,void(this.cameraRequest=f.REQUEST_OPEN);this.cameraStatus===l.ON&&this.closeCameraReqCount>8&&(coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA_NOTIFY",1),this.cameraIsForceClose=!0,this.closeCameraReqCount=0)}if(this.openCameraReqCount>=3&&this.cameraRequest===f.REQUEST_KEEP&&(this.openCameraReqCount=0,this.cameraIsForceClose=!1),this.openCameraReqCount>=3&&this.cameraRequest===f.REQUEST_OPEN&&(this.openCameraReqCount=0,this.cameraRequest=f.REQUEST_KEEP,this.cameraIsForceClose=!1),!this.check(e))if(this.shouldDowngrade())this.ResolutionDowngrade(),this.continuousTime=0;else if(this.shouldUpgrade()){var n=this.ResolutionUpgrade();this.continuousTime=0,n&&(this.punishCheck=0),this.punishTime&&(this.clearPunishCheck=!0)}}},{key:"ResolutionDowngrade",value:function(){if(c.info("resolution downgrade"),this.encoderLevel>=d.length-1)return c.info("can not downgrade encoder level"),this.cameraStatus===l.ON&&(this.cameraRequest=f.REQUEST_CLOSE),!1;this.encoderLevel++,this.encoderLevel>=d.length&&(this.encoderLevel=d.length-1),c.info("current encoder level[",this.encoderLevel,"]",d[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,d[this.encoderLevel].width,d[this.encoderLevel].height,d[this.encoderLevel].framerate,d[this.encoderLevel].bitrate),!0}},{key:"ResolutionUpgrade",value:function(){if(c.info("resolution upgrade"),this.cameraStatus===l.OFF)return void c.info("camera is off, can not upgrade resolution.");if(this.encoderLevel<=0)return c.info("can not upgrade encoder level"),!1;if(2===window.cpu_core_num&&2===window.cpu_proc_num&&d[this.encoderLevel].height>360)return c.info("2 core 2 logical processors cpu, can not upgrade encoder level"),!1;this.encoderLevel--,this.encoderLevel<=0&&(this.encoderLevel=0),c.info("current encoder level[",this.encoderLevel,"]",d[this.encoderLevel]);var e=$getState().call.callId;return coreCall.setEncoderMaxCap(e,d[this.encoderLevel].width,d[this.encoderLevel].height,d[this.encoderLevel].framerate,d[this.encoderLevel].bitrate),!0}},{key:"closeCamera",value:function(){c.info("[CpuAdaptive]: closeCamera"),coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_CLOSE_CAMERA",1),this.cameraStatus=l.OFF;var e=$getState().call,t=e.callStatus,n=e.cameraIsDisabled;!("VIDEO_OUT"!==t&&!n)||(coreCommon.CameraControl.getInstance().switchCameraStateAction(l.OFF),this.cameraIsForceClose=!0,c.info("[CpuAdaptive]: closeCamera ok"))}},{key:"openCamera",value:function(){c.info("[CpuAdaptive]: openCamera"),coreConf.getSvcAtdManager().alertBox("CPU_ADAPTIVE_OPEN_CAMERA",1),this.cameraStatus=l.ON;var e=$getState().call,t=e.callStatus,n=e.cameraIsDisabled;!("VIDEO_OUT"!==t&&!n)||(coreCommon.CameraControl.getInstance().switchCameraStateAction(l.ON),this.cameraIsForceClose=!1,c.info("[CpuAdaptive]: openCamera"))}}]),e}();t.EncoderAdpt=new _},330:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"callToConfFail",value:function(){}},{key:"confIncoming",value:function(){}},{key:"confInfoNotify",value:function(){}},{key:"svcSeessionModify",value:function(){}},{key:"acceptConfStart",value:function(){}},{key:"rejectConf",value:function(){}},{key:"closeConfPage",value:function(){}},{key:"showExitConfTip",value:function(){}},{key:"notifyPluginConfEnd",value:function(){}},{key:"notifyPluginLogout",value:function(){}},{key:"showErrorMsgBox",value:function(){}},{key:"showCallOutPage",value:function(){}},{key:"showVideoOutPage",value:function(){}},{key:"showVideoConnectedPage",value:function(){}},{key:"showCallConnectedPage",value:function(){}},{key:"changeAudioToVideo",value:function(){}},{key:"changeVideoToAudio",value:function(){}},{key:"changeIsSvcConfS",value:function(){}},{key:"dealMemberList",value:function(){}}]),e}();t.default=c},356:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.isInReCall=t.reCallSuc=t.reCallEnterConf=t.terminateReCall=t.reCallTerminate=t.reCallStart=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(702),u=r(c),f=n(249),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=coreLogger.getLogger("reCallModel")("index"),p=null,h=(t.reCallStart=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=3;break}return d.info("savedRecallInfo is null, no need recall"),e.abrupt("return");case 3:if(null===p){e.next=6;break}return d.info("is already deal recall"),e.abrupt("return");case 6:if(!l.isUserEndConf()){e.next=9;break}return d.info("is in user endConf, no deal recall"),e.abrupt("return");case 9:p=new u.default(t,h),p.startReCall();case 11:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.reCallTerminate=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,p.reCallTerminate();case 5:p=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.terminateReCall=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallStop"),e.abrupt("return");case 3:return e.next=5,p.terminateReCall();case 5:p=null;case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallEnterConf=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallEnterConf"),e.abrupt("return");case 3:p.reCallEnterConf();case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.reCallSuc=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==p){e.next=3;break}return d.info("reCallervice is null, not to deal reCallSuc"),e.abrupt("return");case 3:p.reCallSucToStopReCall(),p=null;case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.isInReCall=function(){return null!==p}},357:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("api")("clkapi"),p=null,h=null,_=new Array,g=function(e){null!==p&&p.sendToTup(e)},m=function(){function e(){var t=this;return(0,u.default)(this,e),h&&p&&0===p.readyState?(d.info("API WebSocket is connecting"),h):h=new s.default(function(e,n){p&&1===p.readyState?e(t):(p=new WebSocket("ws://localhost:"+(window.CLIENTCONFIG.API_PORT||"7685"),"clk_api_call_service_protocol"),p.onopen=function(){d.info("API WebSocket is opened"),e(t)},p.onclose=function(){d.info("API WebSocket is closed"),p=null},p.onerror=function(e){d.info("API WebSocket is error, e = "+(0,o.default)(e)),p=null},p.onmessage=function(e){var t=JSON.parse(e.data);1630===t.cmd?d.info("CloudLink Recive API message: CLIENT_CMD_WORKPLACE_LOGIN"):d.info("CloudLink Recive API message: ",t),t.cmd>0&&"function"==typeof _[t.cmd]&&_[t.cmd](t)})})}return(0,l.default)(e,[{key:"setCmdFunc",value:function(e,t){d.info("set cmd func, cmd = "+e),_[e]=t}},{key:"postRpsMessage",value:function(e,t){var n={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:t};g(n),d.debug("CloudLink Rsp to proxy: description = "+n.description+", rps = "+n.rps+", opt = "+n.opt+", call = "+n.call+", result = "+n.result)}},{key:"postRpsParamMessage",value:function(e,t,n){var r={description:e.description,rps:e.cmd,opt:e.opt,call:e.call,result:n,param:t};g(r),d.debug("CloudLink Rsp param to proxy: description = "+r.description+", rps = "+r.rps+", opt = "+r.opt+", call = "+r.call+", result = "+r.result+", param = "+r.param)}},{key:"postNotifyMessage",value:function(e){d.debug(e.description,e),g(e)}}]),e}();t.default=m},358:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("conf")("logic"),a=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.changeCreateMeetingSubject=function(e){return $dispatch(coreUi.changeCreateConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.toggleCreateVideoConf=function(e){return $dispatch(coreUi.changeCreateMeetingType(e))},t.toggleCreateMeetingPassword=function(e){return $dispatch(coreUi.changeCreateMeetingPassword(e))},t.toggleIsBookSendEmail=function(e){return $dispatch(coreUi.changeIsBookSendEmail(e))},t.toggleIsBookSendSMS=function(e){return $dispatch(coreUi.changeIsBookSendSMS(e))},t.toggleCreateMeetingPasswordDefault=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordDefault(e))},t.toggleCreateMeetingPasswordOption=function(e){return $dispatch(coreUi.changeCreateMeetingPasswordOption(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeTimeZone=function(e){return $dispatch(coreUi.updateTimeZone(e))}),o=t.changeConfLen=function(e){return $dispatch(coreUi.updateConfLen(e))},i=t.changeStartTime=function(e){return $dispatch(coreUi.updateStartTime(e))},s=t.changeStartTimeHour=function(e){return $dispatch(coreUi.updateStartTimeHour(e))},c=t.changeStartTimeMin=function(e){return $dispatch(coreUi.updateStartTimeMin(e))};t.changeStartTimeMobile=function(e){return $dispatch(coreUi.updateStartTimeMobile(e))},t.changeShowType=function(e){return $dispatch(coreUi.changeAttendeeShowType(e))},t.toggleIsReacrdSwitch=function(e){return $dispatch(coreUi.setIsReacrdSwitchType(e))},t.isShowReacrdTypeLogic=function(e){return $dispatch(coreUi.setIsShowReacrdType(e))},t.setRecordSchednameLogic=function(e){return $dispatch(coreUi.setRecordSchedname(e))},t.isReacrdLogic=function(e){r.info("createNewMeeting.isReacrdLogic() "+e),$dispatch(coreUi.setIsReacrd(e)),window.CLIENTCONFIG.ISMOBILE&&(r.info("mobile recording: "+e),window.setIsRecord(e))},t.haveRecordedLogic=function(e){return $dispatch(coreUi.setHaveReacorded(e))},t.clearRecordInfoLogic=function(){return $dispatch(coreUi.clearRecordInfo())},t.changeConfImmediatelyClearData=function(){var e=new Date,t={year:e.getFullYear(),month:e.getMonth(),day:e.getDate()};a(0),o([1,0]),i(t),s(""),c("")},t.getDefaultDate=function(){var e=new Date,t=e;23===e.getHours()&&e.getMinutes()>15&&(t=new Date(e.getTime()+864e5));var n={year:t.getFullYear(),month:t.getMonth(),day:t.getDate()};r.info("default date is",t),i(n)},t.returnTimeCur=function(){var e=new Date,t=void 0,n=void 0,r=e.getHours(),a=e.getMinutes()+15;return t=a>30?23===r?0:r+1:r,n=(a>60?a-60:a)>30?0:30,coreConf.changeStartTimeHour(t),coreConf.changeStartTimeMin(n),t=parseInt(t)<10?"0"+t:""+t,n=parseInt(n)<10?"0"+n:""+n,t+":"+n},t.resetDefaultValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf.isCreateMeetingPasswordDefault;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.changeCreateMeetingPassword(n)),$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.updateStartTimeMobile("")),$dispatch(coreUi.meetingTypeValue(0))},t.resetBookConfValue=function(){var e=window.getDefaultTimeZone(constant.TIME_ZONE_FLAG),t=$getState(),n=t.conf,r=n.isCreateMeetingPasswordDefault,a=n.vmrConfResult;coreConf.getDefaultDate(),$dispatch(coreUi.changeBookConfSubject("")),$dispatch(coreUi.updateTimeZone(e)),$dispatch(coreUi.updateConfLen([1,0])),coreConf.returnTimeCur(),$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),coreUi.clearSaveSelectBoxText(),$dispatch(coreUi.changeCreateMeetingPassword(r)),$dispatch(coreUi.setUseFixedConfIDState(!0)),$dispatch(coreUi.changeIsBookSendSMS(!0)),$dispatch(coreUi.changeIsBookSendEmail(!0)),$dispatch(coreUi.changeCurConfIDItem({idType:1,vmrId:a.vmr_id,confId:a.conf_id,confSubject:"",maxParties:0}))},t.resetCreateConfValue=function(){var e=$getState(),t=e.conf,n=t.isCreateMeetingPasswordDefault,r=(t.vmrConfResult,t.curCreateConfIDItem),a=t.isCreateUseFixedConfID;$dispatch(coreUi.changeCreateMeetingType(!0)),$dispatch(coreUi.setIsReacrdSwitchType(!1)),$dispatch(coreUi.changeCreateMeetingPassword(n)),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0)),$dispatch(coreUi.setCreateUseFixedConfIDState(a)),$dispatch(coreUi.changeCurCreateConfIDItem({idType:r.idType,vmrId:r.vmrId,confId:r.confId,confSubject:r.confSubject,maxParties:r.maxParties}))},t.resetJoinConfValue=function(){$dispatch(coreUi.changeConfAcsNum("")),$dispatch(coreUi.changeConfAcsId("")),coreConf.toggleChangeConfAcsPas(""),$dispatch(coreUi.setMicState(!0)),$dispatch(coreUi.setCamerState(!0))},t.currentAccountIsRole=function(e,t){var n=$getState(),r=n.myInfo,a=r.bind_no,o=r.account,i=e.filter(function(e){return e.acount_id===a})[0];return!(!i||1!==i.role)||t===o},t.getAttendee=function(e){return e.map(function(t,n){if(1===t.role){var r={acount_id:t.acount_id||"",email:"",is_mute:0,name:t.name||"",role:1,sms:"",type:0,number:t.number||"",user_account:t.user_account||"",attende_UUID:t.attende_UUID||""};e.splice(n,1),e.unshift(r)}}),e}},359:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.storeAppCache=t.recoverAppCache=void 0;var a=n(127),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(360),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d={myInfo:!0,menu:!0},p=(t.recoverAppCache=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.sysLogger.info("[ recoverAppCache ]"),e.next=3,l.get("reduxState");case 3:if(!(t=e.sent)){e.next=12;break}window.sysLogger.info("recoverAppCache 1");try{for(n in t)t.hasOwnProperty(n)&&d[n]&&($getState()[n]=t[n],"myInfo"===n&&(t[n].languageCode=window.langcode))}catch(e){window.sysLogger.info("recoverAppCache error")}return window.sysLogger.info("recoverAppCache 2"),window.sysLogger.info("[ recoverAppCache ] success"),e.abrupt("return",!0);case 12:return window.sysLogger.info("[ recoverAppCache ] no app cache"),e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.storeAppCache=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.sysLogger.info("[ storeAppCache ]"),t=$getState(),n={},r=p(t);for(a in r)r.hasOwnProperty(a)&&d[a]&&(n[a]=r[a]);return e.next=6,l.set("reduxState",n);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=(0,o.default)({},e);return t&&t.myInfo&&(t.myInfo.statusDesc=""),t&&t.setting&&(t.setting.shouldResetTray=!0),t&&t.menu&&(t.menu.rightMenuStyle.left="-9999px",t.menu.rightMenuStyle.top="-9999px"),t})},360:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.remove=t.set=t.get=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(136),l=coreLogger.getLogger("account")("appCache"),d=t.get=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return r=e.sent,e.next=5,coreDb.queryLoginSetting({key:n?t:r.account+"_"+t});case 5:return a=e.sent,e.prev=6,e.abrupt("return",JSON.parse(a.value));case 10:e.prev=10,e.t0=e.catch(6),l.error("query login sertting parse error",e.t0);case 13:case"end":return e.stop()}},e,void 0,[[6,10]])}));return function(t,n){return e.apply(this,arguments)}}(),p=t.set=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){var a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return a=e.sent,e.next=5,coreDb.saveLoginSetting({key:r?t:a.account+"_"+t,value:(0,o.default)(n)});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),h=t.remove=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,f.getLoginModel)();case 2:return r=e.sent,e.next=5,coreDb.saveLoginSetting({key:n?t:r.account+"_"+t,value:""});case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();window.appCache={get:d,set:p,remove:h}},361:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.getMiddleEndApi=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),_=r(h),g=n(136),m=n(410),v=r(m),C=coreLogger.getLogger("login")("MiddleEnd"),I=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("requestIDVerificationCode"),e.next=3,(0,g.getLoginModel)();case 3:return n=e.sent,a=n.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/v1/users/login/"+t+"/code",c=constant.REQUEST_TYPE.GET,e.abrupt("return",r._sendSyncRequest({url:s,type:c}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s,c,u=t.phoneNumber,f=t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("requestTenantUserList"),e.next=3,(0,g.getLoginModel)();case 3:return n=e.sent,a=n.middleEndAddress,s="https://"+a+"/mcloud/mag/FreeProxyForText/wemiddle/api/v1/mdmservice/pusers?phoneNumber="+u+"&vercode="+f,c=constant.REQUEST_TYPE.GET,e.abrupt("return",r._sendSyncRequest({url:s,type:c}));case 8:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,a,s,c,u,f,l,d=t.loginName,p=t.password,h=t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r.loginName=d,r.password=encodeURIComponent(p),r.tenantid=h,C.info("ssoLogin"),e.next=6,(0,g.getLoginModel)();case 6:return n=e.sent,a=n.middleEndAddress,s="WeLink-meeting",window.isHubEnv&&(a="cloudlinkworkplace-api.huaweicloud.com",s=constant.USER_AGENT.MAXHUB_WORKPLACE),c="https://"+a+"/mcloud/mag/LoginAutoReg",C.info("ssoLogin user_agent=",s),u={"User-Agent":s,"Content-Type":"application/x-www-form-urlencoded"},f="loginName="+d+"&password="+r.password+"&publicKeyFlag=df",isNullOrEmpty(h)||(f+="&tenantid="+h),l=constant.REQUEST_TYPE.POST,e.abrupt("return",r._sendSyncRequest({url:c,type:l,header:u,body:f}).then(function(e){if(e.result){var t=e.recv_body.refresh_expires_in,n=isNullOrEmpty(t)?7200:parseInt(t);r.startRefreshMiddleEndToken(.5*n)}return e}));case 17:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r._sendSyncRequest=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreHttp.sendSyncRequest(t);case 2:if(!(n=e.sent)||128!==n.result){e.next=12;break}return e.next=6,coreAccount.switchProxy();case 6:return e.next=8,coreHttp.sendSyncRequest(t);case 8:if(0===(n=e.sent)){e.next=12;break}return e.next=12,coreAccount.resetProxy();case 12:return e.abrupt("return",r.dealWithRequestResult(n));case 13:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r.stopRefreshMiddleEndToken(),C.info("start refresh middle-end [token], interval:",t),r.refreshTokenTimer=setInterval((0,s.default)(o.default.mark(function e(){var t,n,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.ssoLogin({loginName:r.loginName,password:r.password,tenantid:r.tenantid});case 2:if(t=e.sent,!t.result||!t.recv_body.access_token){e.next=14;break}return e.next=6,(0,g.getLoginModel)();case 6:return n=e.sent,n.user_ticket=t.recv_body.access_token||n.user_ticket,n.crypt_token=t.recv_body.crypt_token||n.crypt_token,C.info("refresh um crypttoken"),e.next=12,coreTup.getOfflineFileInstance();case 12:a=e.sent,a.refreshToken(n.crypt_token);case 14:case"end":return e.stop()}},e,i)})),1e3*t);case 3:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("stop refresh middle-end [token]"),r.refreshTokenTimer&&(clearInterval(r.refreshTokenTimer),r.refreshTokenTimer=null);case 2:case"end":return e.stop()}},e,i)})),r.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,a,s,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},u=c.company,f=void 0===u?"":u,l=c.account,d=void 0===l?"":l,p=c.clientType,h=void 0===p?1:p;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("requestOauthUrl"),e.next=3,(0,g.getLoginModel)();case 3:return t=e.sent,n=t.serverAddress,a="https://"+n+"/rest/usg/sso/v1/auth/authorizeInfo?domain="+f+"&username="+d+"&clientType="+h,s=constant.REQUEST_TYPE.GET,e.abrupt("return",coreHttp.sendSyncRequest({url:a,type:s}).then(function(e){return r.dealWithCloudPortalOauth(e)}));case 8:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=n.domain,a=n.userTicket,s=n.serverAddress,c=n.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("oAuthLogin"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.serverAddress=s,t.serverPort=c,t.domain=r,t.userTicket=a,t.authType=1,coreAccount.login({});case 10:case"end":return e.stop()}},e,i)}));return function(){return e.apply(this,arguments)}}(),r.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)){e.next=2;break}return e.abrupt("return","");case 2:return n=document.createElement("a"),n.href=t,e.abrupt("return",n.hostname||t);case 5:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.dealWithRequestResult=function(e){var t=0,n="",r=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=a.code||a.errorCode||0;break;case 302:t=302;break;default:t=-1}else t=-1;C.info("dealWithRequestResult: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){C.error("dealWithRequestResult",e.toString()),t=-1}switch(parseInt(t)){case-1:n=language.CALL_CALLING_FAILED;break;case 0:case 200:case 302:r=!0;break;case 1024:n=language.VERIFICATION_CODE_ERROR_SERVER;break;case 1101:n=language.LOGIN_ACCOUNT_OR_PASSWORD_EMPTY;break;case 1103:n=language.LOGIN_USERPWD_ERROR;break;case 1146:n=language.LOGIN_ERR_ACCOUNT_LOCKED;break;case 2e3:case 2030:n=language.VERIFICATION_CODE_ERROR_SERVER;break;case 3005:n=language.VERIFICATION_CODE_ERROR_FREQUENTLY;break;case 3007:n=language.VERIFICATION_CODE_ERROR_SMS_FAILED;break;case 3010:n=language.VERIFICATION_CODE_ERROR_NUMBER_INCORRECT;break;case 3008:n=language.VERIFICATION_CODE_ERROR;break;case 10005:n=language.VERIFICATION_CODE_ERROR_NUMBER_DISABLED;break;case 10008:n=language.LOGIN_E_ERR_USER_NOT_EXISTS;break;default:n=language.CALL_CALLING_FAILED}return C.info("dealWithRequestResult: code="+t+",message="+(a.message||a.errorMessage)),{code:t,result:r,message:n,recv_body:a}},r.dealWithCloudPortalOauth=function(e){var t=0,n="",r=!1,a={};try{if(0===e.result)switch(e.param.resp_code){case 200:a=JSON.parse(e.param.recv_body),t=parseInt(a.returnCode)||0;break;case 302:t=302;break;default:t=-1}else t=-1;C.info("dealWithCloudPortalOauth: resp_code="+(e.param&&e.param.resp_code)+",result="+e.result)}catch(e){C.error("dealWithCloudPortalOauth",e.toString()),t=-1}switch(t){case-1:n=language.CALL_CALLING_FAILED;break;case 0:n=language.EADDR_SUCCESS,r=!0;break;case 1:n=language.REQUEST_ERROR;break;case 2:n=language.INNER_ERROR;break;case 3:n=language.WITHDRAW_PARAMETER_ERROR;break;case 4:n=language.REQUEST_ILLEGAL;break;case 5:n=language.FORGET_PWD_E_ERR_BAD_ACCESS_DURING_UPGRADE;break;case 206010014:case 206010023:n=language.COMPANY_NO_EXIT;break;case 20603e4:n=language.USER_DOES_NOT_EXIST;break;default:n=language.CALL_CALLING_FAILED}return C.info("dealWithCloudPortalOauth: code="+t+",message="+a.returnMessage),{code:t,result:r,message:n,recv_body:a}},a=n,(0,p.default)(r,a)}return(0,_.default)(t,e),t}(v.default),w=void 0;t.getMiddleEndApi=function(){return isNullOrEmpty(w)&&(w=new I),w}},362:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}function o(){R.info("userClick  showSettingMenu  login setting");var e=window.remote.Menu,t=[{label:language.MOBILE_BASIC_SETTINGS,type:"normal",click:i},{label:language.COLLECT_LOG_FILES,type:"normal",click:s},{label:language.SOFT_COPYRIGHT_DESCRIPTION,type:"normal",click:c},{label:language.PRIVACY_TITLE,type:"normal",click:u}];window.CLIENTCONFIG.ISWIN&&t.push({label:language.NET_DETECT,type:"normal",click:w}),e.buildFromTemplate(t).popup(remote.getCurrentWindow())}function i(){R.info("goToLoginSetting"),window.goRoute("login/loginSetting")}function s(){R.info("collectLogsAndOpen"),coreLog.collectLogsAndOpen()}function c(){R.info("goToLoginCopyright"),window.goRoute("login/LoginCopyright")}function u(){R.info("goToLoginPrivacy"),window.goRoute("login/LoginPrivacy")}function f(){R.info("userClick click minimize btn"),appService.minimize()}function l(e,t){(0,x.getSyncLoginModel)().loginDisable||A.changeLoginInfo((0,_.default)({},e,t))}function d(e,t){t.target&&l(e,t.target.value||"")}function p(e){var t=$getState(),n=t.common,r=n.isShowModal,a=n.isShowNotifyModal,o=t.setting.isShowChangePassword,i=t.dialogModal.isShowDialog;e.altKey&&115===e.keyCode&&((0,O.getCloseAppWays)(),reactStopPropagation(e),e.preventDefault()),a||r||i||13!==e.keyCode||"login"!==window.getRoute()||o||I()}Object.defineProperty(t,"__esModule",{value:!0}),t.removeKeyDownListener=t.addKeyDownListener=t.forgetPwd=t.noLoginJoinConference=t.doLogin=void 0;var h=n(132),_=a(h),g=n(1),m=a(g),v=n(2),C=a(v),I=t.doLogin=function(){var e=(0,C.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("userClick  doLogin  login btn"),e.next=3,(0,x.getLoginModel)();case 3:if(t=e.sent,!(n=t.loginDisable)){e.next=8;break}return R.info("doLogin loginDisable",n),e.abrupt("return");case 8:return e.next=10,E.checkLoginInfo();case 10:if(r=e.sent,document.activeElement.blur(),!r){e.next=19;break}return t.authType=0,e.next=16,T.login();case 16:return e.abrupt("return",e.sent);case 19:a=language.ERROR_ACCOUNT_PWD,window.isHubEnv?t.maxhubLoginError={serverType:0,errorCode:constant.UPORTAL_LOGIN_ERROR.LOGIN_E_ERR_AUTH_NAME_OR_PWD_ERROR}:window.alert(language.ERROR_ACCOUNT_PWD);case 21:throw"";case 22:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,C.default)(m.default.mark(function e(){var t;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,y.initNetDetect)();case 2:if(t=e.sent){e.next=5;break}return e.abrupt("return");case 5:window.goRoute("login/NetDetection");case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.noLoginJoinConference=function(){var e=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("userClick noLoginJoinConference  login page join conf"),e.next=3,(0,b.getNickName)();case 3:return e.next=5,coreConf.getConfInfoFromDb();case 5:return e.next=7,coreConf.changeConfInfoCardState(!1);case 7:window.goRoute("login/noLoginJoinConference");case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.forgetPwd=function(){var e=(0,C.default)(m.default.mark(function e(){var t,n,r,a;return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return R.info("userCLick  forgetPwd  login page forget xx"),e.next=3,(0,x.getLoginModel)();case 3:t=e.sent,n=t.serverAddress,r=t.serverPort,a=n+":"+r,A.cannotLogin(a);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),t.addKeyDownListener=function(){var e=(0,C.default)(m.default.mark(function e(t){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:M=t,document.addEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}(),t.removeKeyDownListener=function(){var e=(0,C.default)(m.default.mark(function e(){return m.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:M=Noop,document.removeEventListener("keydown",p);case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}();t.showSettingMenu=o,t.miniApp=f,t.valueChange=l,t.inputValueChange=d;var S=n(311),E=r(S),N=n(185),T=r(N),b=n(229),O=n(312),L=n(166),A=r(L),y=n(364),x=n(164),R=coreLogger.getLogger("logic")("login/uiController"),M=Noop},363:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.checkStatusOptions=t.SaveSigInfoAndQuit=t.saveUserInfo=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(136),u=coreLogger.getLogger("logic")("main/myInfo"),f=(t.saveUserInfo=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return u.info("saveUserInfo"),e.abrupt("return",f(t));case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.SaveSigInfoAndQuit=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:u.info("userClick  tap myInfo signature save btn"),f(t),window.history.back();case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getMyInfo)();case 2:if(n=e.sent,t!==n.signature){e.next=5;break}return e.abrupt("return");case 5:return r=["account","staff_no","name","native_name","q_pin_yin","gender","birthday","age","bind_no","mobile","home_phone","office_phone","short_phone","other_phone","voip","ip_phone","fax","email","website","signature","desc","address","image_id","postcode","is_security","title","dept_id","dept_name_en","dept_name_cn","image_sync_time","old_account","state","modify_time","other_phone2","other_mobiles"],a={},r.forEach(function(e){a[e]=isNullOrEmpty(n[e])?"":n[e]}),a.signature=t,e.next=11,(0,c.getLoginModel)();case 11:if(i=e.sent,!(s=i.isSupportAS)){e.next=19;break}return e.next=16,coreContact.uploadUserInfo({signature:t});case 16:e.t0=e.sent,e.next=22;break;case 19:return e.next=21,coreIm.setUserInfo(a);case 21:e.t0=e.sent;case 22:u=e.t0,(u&&u.result===constant.ERROR_CODE.Success||s&&u)&&(n.signature=t,"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME&&coreContact.setSign(t));case 24:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.checkStatusOptions=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.getMyInfo)();case 2:return t=e.sent,e.next=5,coreDb.queryUserConfig({key:"CustomStatus"});case 5:n=e.sent,isNullOrEmpty(n)||(r=JSON.parse(n.value),t.statusOptions=r,u.info("check Status Options from storage sucess!"));case 7:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},364:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handleClearData=t.startDetect=t.stopDetect=t.handleDetectDataNotify=t.initNetDetect=t.updataBtns=void 0;var a=n(123),o=r(a),i=n(69),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(261),p=n(261),h=coreLogger.getLogger("logic")("login/loginNetDetect"),_=t.updataBtns=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:constant.BTN_STATUS.START,n=!1,r={cancel:{visible:!1,disabled:!1,class:"btn-cancel"},detect:{visible:!1,disabled:!1,class:"btn-detect"},retry:{visible:!1,disabled:!1,class:"btn-detect"},stop:{visible:!1,disabled:!1,class:"btn-stop"},done:{visible:!1,disabled:!1,class:"btn-detect"}};switch(t){case constant.BTN_STATUS.START:r.cancel.visible=!0,r.cancel.disabled=!1,r.detect.visible=!0,r.detect.disabled=!e,n=!0;break;case constant.BTN_STATUS.DETECTING:r.cancel.visible=!0,r.cancel.disabled=!0,r.stop.visible=!0,r.stop.disabled=!1,n=!0;break;case constant.BTN_STATUS.DONE:r.retry.visible=!0,r.retry.disabled=!1,r.done.visible=!0,r.done.disabled=!1,n=!0}n&&$dispatch(coreUi.setDetectBtns(r))},g=(t.initNetDetect=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("initNetDetect"),e.next=3,(0,d.detectInit)();case 3:if(t=e.sent,0===t.result){e.next=10;break}return h.info("initNetDetect detectInitRet ERR = "+t.result),e.next=8,(0,p.detectUnInit)();case 8:return S(t.result),e.abrupt("return",!1);case 10:return e.next=12,(0,d.setCmptEvent)({OnDetectDataNotify:m});case 12:return n={server_port:10100},e.next=15,(0,d.detectStartServer)(n);case 15:if(r=e.sent,0===r.result){e.next=24;break}return h.info("initNetDetect detectStartServerRet ERR = "+r.result),e.next=20,(0,p.detectStopServer)();case 20:return e.next=22,(0,p.detectUnInit)();case 22:return S(r.result,n.server_port),e.abrupt("return",!1);case 24:return e.abrupt("return",!0);case 25:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),-1),m=t.handleDetectDataNotify=function(e){h.info("handleDetectDataNotify data = "+(0,s.default)(e));var t=e.param,n=t.avg_delay_time,r=t.avg_jitter_time,a=t.avg_recv_loss_rate,o=t.avg_send_loss_rate,i=t.current_level,c=t.max_delay_time,u=t.max_jitter_time,f=t.max_recv_cont_loss_pkts,l=t.max_recv_loss_rate,d=t.max_send_cont_loss_pkts,p=t.max_send_loss_rate,m=(t.total_level,t.total_recv_pkt_loss_seconds),I=t.total_send_pkt_loss_seconds,w=$getState().common,S=w.curResLevel,E=w.ipDetectResList,N=w.netdetectMode,T=w.bandwidth,b=w.maxDelay,O=w.maxLoss,L=w.maxContinuousLoss,A=w.maxJitter,y=[].concat(E),x=N===constant.NET_DETECT_MODE.ADVANCED_MODE;if(x){c&&c>b&&(b=c,$dispatch(coreUi.setMaxDelay(b))),u&&u>A&&(A=u,$dispatch(coreUi.setMaxJitter(A)));var R=Math.max(d,f);R&&R>L&&(L=R,$dispatch(coreUi.setMaxContinuousLoss(L)));var M=Math.max(l,p);M&&M>O&&(O=M,$dispatch(coreUi.setMaxLoss(O)))}var k="  "+language.CALL_MEDIA_INFO_LOST+"(%):"+language.NET_DETECT_INFO_AVG+Math.max(a,o)+", "+language.NET_DETECT_INFO_MAX+Math.max(l,p)+" "+(x?"("+O+")":"")+"\n  "+language.LANG_QOS_DELAY+"  (ms):"+language.NET_DETECT_INFO_AVG+r+", "+language.NET_DETECT_INFO_MAX+u+" "+(x?"("+A+")":"")+"\n  "+language.LANG_QOS_JIITER+"  (ms):"+language.NET_DETECT_INFO_AVG+n+", "+language.NET_DETECT_INFO_MAX+c+" "+(x?"("+b+")":"")+"\n  "+language.NET_DETECT_INFO_MAX_CONTINUOUS_LOSS+": "+Math.max(f,d)+" "+(x?"("+L+")":"")+"\n  "+language.NET_DETECT_INFO_TOTAL_LOSS_CNT+": "+Math.max(m,I);if(N===constant.NET_DETECT_MODE.ADVANCED_MODE)clearTimeout(g),y[0].col=1,y[0].level=T,y[0].cont=k,$dispatch(coreUi.setIpDetectResList(y)),C=100,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+C+"%)")),g=setTimeout(function(){h.info("timeoutTimer curResLevel = "+S),v(!0)},2e4);else if(++S===i){clearTimeout(g),$dispatch(coreUi.setCurResLevel(i));for(var P=0;P<y.length;P++)if(y[P].level===i){if(y[P].cont===language.NET_DETECT_INFO_NOT_DETECT)return void h.info("停止检测后收到数据");5!==i&&(y[P+1].cont=language.NET_DETECT_INFO_DETECTING+"...",y[P+1].col=1),y[P].cont=k,y[P].col=1;break}$dispatch(coreUi.setIpDetectResList(y)),5===i?(_(!0,constant.BTN_STATUS.DONE),$dispatch(coreUi.setDisableIPInput(!1)),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT))):g=setTimeout(function(){h.info("timeoutTimer curResLevel = "+S),v(!0)},2e4)}},v=t.stopDetect=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,o,i,s=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("stopDetect detectStopClient"),t=$getState().common,n=t.curResLevel,r=t.ipDetectResList,a=t.netdetectMode,o=[].concat(r),clearTimeout(g),clearInterval(I),a!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStopClientContinue)();case 8:o[0].level!==n&&(o[0].cont=language.NET_DETECT_INFO_NOT_DETECT,o[0].col=0),e.next=15;break;case 11:if(a!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStopClient)();case 14:for(i=0;i<o.length;i++)s&&i===n?(o[i].cont=language.NET_DETECT_INFO_TIME_OUT,o[i].col=2):i>=n&&(o[i].cont=language.NET_DETECT_INFO_NOT_DETECT,o[i].col=0);case 15:$dispatch(coreUi.setIpDetectResList(o)),_(!0,constant.BTN_STATUS.START),$dispatch(coreUi.setipDetectTipCont(language.PROMPT_OPEN_NETDETECT)),$dispatch(coreUi.setDisableIPInput(!1));case 19:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=0,I=-1,w=(t.startDetect=function(){var e=(0,l.default)(u.default.mark(function e(){var t,n,r,a,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().common,n=t.ipValue,r=t.packetLen,a=t.bandwidth,i=t.netdetectMode,c={str_server_ip:n,server_port:10100,client_port:10102},i===constant.NET_DETECT_MODE.ADVANCED_MODE&&(c=(0,o.default)(c,{pkt_len:parseInt(r),level:parseInt(a)})),h.info("startDetect param = "+(0,s.default)(c)),f=-1,i!==constant.NET_DETECT_MODE.ADVANCED_MODE){e.next=11;break}return e.next=8,(0,p.detectStartClientContinue)(c);case 8:f=e.sent,e.next=15;break;case 11:if(i!==constant.NET_DETECT_MODE.NORMAL_MODE){e.next=15;break}return e.next=14,(0,p.detectStartClient)(c);case 14:f=e.sent;case 15:if(0===f.result){e.next=22;break}return h.info("startDetect detectStartClientRet ERR = "+f.result),e.next=19,(0,p.detectStopClient)();case 19:return l=c.client_port,S(f.result,l+"|"+(l+1)+"|"+(l+2)),e.abrupt("return",!1);case 22:clearTimeout(g),g=setTimeout(function(){var e=$getState().common.curResLevel;h.info("timeoutTimer curResLevel = "+e),0===e&&v(!0)},2e4),i===constant.NET_DETECT_MODE.ADVANCED_MODE?($dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxJitter(0)),$dispatch(coreUi.setMaxLoss(0)),$dispatch(coreUi.setMaxContinuousLoss(0)),C=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+C+"%)")),I=setInterval(function(){C<99?$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++C+"%)")):C>=100&&(C=0,$dispatch(coreUi.setipDetectTipCont(language.PROMPT_CONTINUOUS_DETECTION+"("+ ++C+"%)")))},100)):i===constant.NET_DETECT_MODE.NORMAL_MODE&&$dispatch(coreUi.setipDetectTipCont("")),_(!0,constant.BTN_STATUS.DETECTING),$dispatch(coreUi.setCurResLevel(0)),$dispatch(coreUi.setIpDetectResList(w())),$dispatch(coreUi.setDisableIPInput(!0)),$dispatch(coreUi.setMaxDelay(0)),$dispatch(coreUi.setMaxLoss(0));case 31:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){var e=$getState().common,t=e.netdetectMode,n=e.bandwidth;if(t===constant.NET_DETECT_MODE.ADVANCED_MODE){var r=1===n?"0.5M:":2===n?"1M:":3===n?"1.5M:":4===n?"2M:":5===n?"4M:":"8M:",a=n+1;return $dispatch(coreUi.setCurResLevel(n)),[{title:r,cont:"",col:1,level:a}]}for(var o=[],i=1;i<6;i++){var s="",c=language.NET_DETECT_INFO_PENDING_DETECT,u=i,f=0;5!==i?1===i?(s="512 Kbit/s:",c=language.NET_DETECT_INFO_DETECTING+"...",f=1):s=512*i+" Kbit/s:":s="4096 Kbit/s:",o.push({title:s,cont:c,col:f,level:u})}return o}),S=(t.handleClearData=function(){var e=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,p.detectStopClient)();case 2:return e.next=4,(0,p.detectStopServer)();case 4:return e.next=6,(0,p.detectUnInit)();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n="";switch(e){case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_UNINIT_ERROR:n=language.DETECT_UNINIT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_THREAD_ERROR:n=language.DETECT_THREAD_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_STARTED_ERROR:n=language.DETECT_STARTED_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_ERROR:n=language.DETECT_SOCKET_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_CONN_ERROR:n=language.DETECT_SOCKET_CONN_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SOCKET_BIND_ERROR:n=language.DETECT_SOCKET_BIND_ERROR_INFO+t;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_TIMEOUT_ERROR:n=language.DETECT_TIMEOUT_ERROR_INFO;break;case constant.EN_CMPT_DETECT_ERROR.EN_CMPT_DETECT_SRVBUSY_ERROR:n=language.DETECT_SRVBUSY_ERROR_INFO;break;default:n=language.DETECT_THREAD_ERROR_DEFOULT}window.alert(n)})},401:function(e,t,n){e.exports={default:n(695),__esModule:!0}},402:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"getDeployMode",value:function(){return $getState().login.deployMode}},{key:"getIsUseITBuried",value:function(){return!!window.CLIENTCONFIG.ISBIGWIN}},{key:"getInterfaceToOneKeyEnterConf",value:function(){return e.getDeployMode()===constant.MEETING_NET_TYPE.MEDIAX_MEETING}},{key:"getInterfaceToStartVipCall",value:function(){return!(!window.CLIENTCONFIG.ISBIGWIN||isNullOrEmpty(window.confVip))}},{key:"getEnterDataConfInAdvance",value:function(){return!!(window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||window.CLIENTCONFIG.ISBIGWIN&&window.isSupportiDo)}},{key:"changeMediaTypeToAudioData",value:function(){return!(!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&!window.CLIENTCONFIG.ISBIGWIN||!1!==window.linkSmcIsVideo&&!1!==window.bigConfIsVideo)}}]),e}();t.default=c},403:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshToken=t.confctrlInitAtomic=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(186),l=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(f),d=coreLogger.getLogger("conf")("ctrlinit"),p=function(){var e=(0,u.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.confCtrlLoaded=!0,e.next=3,s.default.all([v(),C(),I(),g()]);case 3:return e.next=5,w();case 5:return e.next=7,S();case 7:return e.next=9,_();case 9:return m(),e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=new coreCommon.AtomicAction("confctrlInit",p);t.confctrlInitAtomic=h;var _=(t.refreshToken=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("refresh[Token] tk length = "+desensitive(t.data.length)),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.setToken(t.data);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.stgAccount,r=t.stgUri,a=t.fireWallMode,i=t.deployMode,s="",e.next=10,coreSecurity.getPasswordManager();case 10:return c=e.sent,e.next=13,c.getPassword("stgPassword");case 13:return u=e.sent,r&&(s=r+","+n+","+u),d.info("initDataConf deployMode = "+i+",fireWallMode = "+a+",stgURL length = "+r.length),e.next=18,l.initDataConf(i,a,s);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()),g=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=11;break}return e.next=3,coreAccount.getLoginModel();case 3:return t=e.sent,n=t.authToken,d.info("setInit[Token], tk length = "+desensitive(n.length)),e.next=8,coreTup.getConfCtrlInstance();case 8:return r=e.sent,e.next=11,r.setToken(n);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),m=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login.isSupportCACertCheck,e.next=3,coreAccount.getLoginModel();case 3:if(n=e.sent,r=n.isSupportAS,d.info("confCertificateCheck isSupportCACertCheck = "+t+",isSupportAS = "+r),r&&t){e.next=9;break}return d.info("no need set cert for confctrl"),e.abrupt("return");case 9:return e.next=11,coreTup.getConfCtrlInstance();case 11:return a=e.sent,i=window.EXEC_PATH,s={ca_cert_path:i,client_cert_path:"",client_key_path:"",client_privkey_pwd:"",verify_mode:1,verify_server_mode:0},e.next=16,a.confCertificateCheck(s);case 16:c=e.sent,0!==c.result?d.info("conf certificate check fail"):d.info("conf certificate check success");case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),v=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.deployMode,r=t.isSupportAS,a=window.isSupportiDo?1:0,d.info("setInitParam, deployMode = "+n+",confctrl_ido = "+a),i={init_param:{wait_msgp_thread:1,batch_update:0,connect_call:1,confctrl_ido:a,save_participant_list:n===constant.MEETING_NET_TYPE.MEDIAX_MEETING?1:0,use_rest_and_ido:r?1:0}},e.next=10,coreTup.getConfCtrlInstance();case 10:return s=e.sent,e.next=13,s.confCtrlInit(i);case 13:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),C=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.deployMode,d.info("setConfEnvType, deployMode = "+n),r=n===constant.MEETING_NET_TYPE.SMC_MEETING?4:3,e.next=8,coreTup.getConfCtrlInstance();case 8:return a=e.sent,e.next=11,a.setConfEnvType(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f,l,p,h;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return t=e.sent,n=t.isSupportAS,r=t.serverUportalAddress,a=t.serverUportalPort,i=t.asAddress,s=t.tempsipserverAddress,c=t.sipLoginOnly,u=t.confctrlUri,f="",l="",p="",c&&!n?(d.info("set sipLoginOnly address to use"),f=s,p=f,l=8443):n&&!isNullOrEmpty(i)?(d.info("set asAddress to use"),f=i.split(":")[0],l=i.split(":")[1],p=isNullOrEmpty(u)?f:u):(d.info("set medixAddress to use"),f=r,l=a,p=f),d.info("conf ctrl init, isSupportAS = "+n+",serverUportalAddress = "+f+",confctrlAddr = "+p+",serverPort = "+l+",asAddress = "+i+",sipLoginOnly = "+c),e.next=11,coreTup.getConfCtrlInstance();case 11:return h=e.sent,e.next=14,h.setServerParams(f,p,l);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),w=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.isSupportiDo){e.next=3;break}return d.info("setLocalConfName is no need in rest"),e.abrupt("return");case 3:return e.next=5,coreAccount.getLoginModel();case 5:if(t=e.sent,n=t.sipLoginOnly,r=t.account,a="",!n){e.next=13;break}a=$getState().login.tempSipNick,e.next=17;break;case 13:return e.next=15,coreContact.getContactByAccount(r);case 15:i=e.sent,a=getContactName(i);case 17:return s="",isNullOrEmpty(a)||(s=a.length<=2?a.substr(0,1)+"**":a.substr(0,1)+"**"+a.substr(-1)),d.info("setLocalConfName, sipLoginOnly = "+n+",userName = "+s),e.next=22,coreTup.getConfCtrlInstance();case 22:c=e.sent,c.setLocalConfName(a);case 24:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n,r,a,i,s,c,u,f;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=$getState().login,n=t.isSupportProxy,r=t.proxyAddress,a=t.proxyPort,i=t.proxyAccount,e.next=3,coreSecurity.getPasswordManager();case 3:return s=e.sent,e.next=6,s.getPassword("proxyPassword");case 6:return c=e.sent,n||(d.info("is not support proxy"),r="",a="0",i="",c=""),u={port:parseInt(a),uri:r,user_name:i,password:c},d.info("proxy_param.uri = "+u.uri+",proxy_param.port = "+u.port),e.next=12,coreTup.getConfCtrlInstance();case 12:f=e.sent,f.confCtrlSetProxy(u);case 14:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},404:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.setBleDeviceList=function(e){$dispatch(coreUi.changeBleDeviceList(e))},t.setPairDeviceInfo=function(e){$dispatch(coreUi.changePairDeviceInfo(e))},t.cleanPairDeviceInfo=function(){$dispatch(coreUi.clearPairDeviceInfo())},t.setAutoPairSwitch=function(e){$dispatch(coreUi.changeAutoPairSwitch(e))},t.setPairedDeviceInfo=function(e){$dispatch(coreUi.changePairedDeviceInfo(e))},t.setPairType=function(e){$dispatch(coreUi.changePairType(e))},t.setIsInPairConf=function(e){$dispatch(coreUi.changeInPairConf(e))},t.setPairDeviceConfInfo=function(e){$dispatch(coreUi.changePairDeviceConfInfo(e))},t.setNearestDevice=function(e){$dispatch(coreUi.changeNearestDevice(e))},t.setPairConfInfo=function(e){$dispatch(coreUi.changePairConfInfo(e))}},405:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),_=r(h),g=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.loginToUportal=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.refreshTokenCallback=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.setLoginProxy=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.uportalAllonline=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.switchProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.resetProxy=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),a=n,(0,p.default)(r,a)}return(0,_.default)(t,e),t}(coreCommon.Interface);t.default=g},406:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.handlesipconfinfo=t.setloginNotifyFunc=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=(coreLogger.getLogger("model")("model/callService/index"),t.setloginNotifyFunc=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getUportalInstance();case 2:t=e.sent,t.setNotifyFunc(360474,c);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.handlesipconfinfo=function(e){coreCommon.Observer.publish("TempSipConfInfo",e)})},407:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.startLoginDownLoadCaCert=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(3),u=r(c),f=n(142),l=r(f),d=n(2),p=r(d),h=coreLogger.getLogger("login")("caCert");t.startLoginDownLoadCaCert=function(){var e=(0,p.default)(o.default.mark(function e(t){var n,r,a,i,c,f,d,p=t.account,_=t.password,g=t.serverAddress,m=t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("startLoginDownLoadCaCert port is:",m),h.info("startLoginDownLoadCaCert port type is:",void 0===m?"undefined":(0,l.default)(m)),m&&m instanceof String&&(m=parseInt(m)),n={auth_type:0,user_agent:window.CLIENTCONFIG.ISMOBILE?constant.USER_AGENT.MOBILE:"Workplace"===window.CLIENTCONFIG.NEW_APP_NAME?constant.USER_AGENT.WORKPLACEPC:constant.USER_AGENT.PC,user_tiket:"1",auth_info:{user_name:p,password:_},auth_server:{server_type:0,server_url:g,server_port:m,server_version:"V6R6C00"}},r=window.EXEC_PATH,a={file_path:r,server_port:m,server_addr:g},e.next=8,coreTup.getUportalInstance();case 8:return i=e.sent,c=new u.default(function(e,t){i.downLoadCaCert(a,n,function(t){h.info("download ca cert files, ret=",(0,s.default)(t)),e(t)})}),e.next=12,c;case 12:return f=e.sent,d=f.param,e.abrupt("return",d);case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var r=n(409),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.loadUserConfigFromDB=a.loadUserConfigFromDB},409:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.loadUserConfigFromDB=void 0;var a=n(1),o=r(a),i=n(123),s=r(i),c=n(2),u=r(c),f=n(136),l=coreLogger.getLogger("logic")("login");t.loadUserConfigFromDB=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=0,e.next=3,coreSecurity.getPasswordManager();case 3:n=e.sent,coreDb.queryUserConfigList({all:""}).then(function(e){var r={};-1===e.findIndex(function(e){return"confPageShowType"===e.key})&&(l.info("db can not find the value of confPageShowType"),$dispatch(coreUi.changeConfPageShowType(!1))),e.forEach(function(e){if(0===e.key.indexOf("Device.ComCfg")&&(r[e.key]=e.value,t++),0===e.key.indexOf("Device.UICfg")&&coreCwmp.dealWithUICfgParam({paramName:e.key,paramValue:e.value}),"CHRPassword"===e.key){var a=JSON.parse(e.value);a.cipher&&a.salt&&n.setCipherPassword(e.key,a.cipher,a.salt)}if("experienceConfInfo"===e.key){var o=JSON.parse(e.value);o.cipher&&o.salt&&n.setCipherPassword("experienceConfPwd",o.cipher,o.salt),$dispatch(coreUi.changeExperienceConfId(o.confid))}if("isRemindNotNotify"===e.key&&("true"===e.value?$dispatch(coreUi.isNotNotifyChangePassword(!0)):$dispatch(coreUi.isNotNotifyChangePassword(!1))),"isOpenShock"===e.key&&("true"===e.value?$dispatch(coreUi.bOpenShock(!0)):$dispatch(coreUi.bOpenShock(!1))),"isIMRecieveRing"===e.key&&("true"===e.value?$dispatch(coreUi.bIMRecieveRing(!0)):$dispatch(coreUi.bIMRecieveRing(!1))),"isCallCommingRing"===e.key&&("true"===e.value?$dispatch(coreUi.bCallCommingRing(!0)):$dispatch(coreUi.bCallCommingRing(!1))),"checkedLanguage"===e.key&&$dispatch(coreUi.languageChooseValue(2===parseInt(e.value)?1:parseInt(e.value))),"hasOpenPush"===e.key&&("true"===e.value?$dispatch(coreUi.changeHasOpenPush(!0)):$dispatch(coreUi.changeHasOpenPush(!1))),"cmdkey"===e.key){var i=JSON.parse(e.value);void 0!==i[0]&&void 0!==i[1]&&void 0!==i[0].RPCName&&void 0!==i[1].RPCName&&(i[0].RPCName="Download",i[1].RPCName="Upload",$dispatch(coreUi.updateCmdKey(i)))}if("isAutoCollectLogs"===e.key){var s=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.isAutoCollectLogs=s})}if("hasAllowCollectLogs"===e.key){var c=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.hasAllowCollectLogs=c})}if("isAutoAcceptConf"===e.key){var u=coreSetting.stringToBoolean(e.value);(0,f.getMyInfo)().then(function(e){e.isAutoAcceptConf=u})}if("enableDoubleScreen"===e.key){var d=coreSetting.stringToBoolean(e.value);$dispatch(coreUi.changeEnableDoubleScreen(d))}"confPageShowType"===e.key&&(l.info("the value of confPageShowType is",e.value),$dispatch(coreUi.changeConfPageShowType(e.value)))}),t>0&&(0,s.default)(window.CLIENTCONFIG,r)});case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}()},410:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(120),p=r(d),h=n(121),_=r(h),g=function(e){function t(){var e,n,r,a,i=this;(0,l.default)(this,t);for(var c=arguments.length,f=Array(c),d=0;d<c;d++)f[d]=arguments[d];return n=r=(0,p.default)(this,(e=t.__proto__||(0,u.default)(t)).call.apply(e,[this].concat(f))),r.requestIDVerificationCode=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.requestTenantUserList=function(){var e=(0,s.default)(o.default.mark(function e(t){t.phoneNumber,t.verificationCode;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.ssoLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.loginName,t.password,t.tenantid;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.startRefreshMiddleEndToken=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.stopRefreshMiddleEndToken=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)})),r.requestOauthUrl=function(){var e=(0,s.default)(o.default.mark(function e(t){t.company,t.account;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.oAuthLogin=function(){var e=(0,s.default)(o.default.mark(function e(t){t.domain,t.code,t.serverAddress,t.serverPort;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),r.getUrlHost=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e,i)}));return function(t){return e.apply(this,arguments)}}(),a=n,(0,p.default)(r,a)}return(0,_.default)(t,e),t}(coreCommon.Interface);t.default=g},411:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=this,n=l.default.createElement("div",{className:"upgrade-window-content-text-wrap"},l.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_1),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_2),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_8_NOTIFY_LINE_3)));window.confirm(n,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var n=(0,u.default)(s.default.mark(function n(r){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r.ret,a?(coreDb.saveLoginSetting({key:d,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())}function o(e){var t=this,n=l.default.createElement("div",{className:"upgrade-window-content-text-wrap"},l.default.createElement("ul",{className:"upgrade-window-content-text-detail-ul"},l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_1),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_2),l.default.createElement("li",{className:"upgrade-window-content-text-detail-li"},language.EMUI_5_NOTIFY_LINE_3)));window.confirm(n,"EMUI_COME_CALL_NOTIFY_TITLE",!0,{leftButton:language.BTN_ENSURE_TO_SKIP,rightButton:language.BTN_ENSURE_TO_SET}).then(function(){var n=(0,u.default)(s.default.mark(function n(r){var a;return s.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:a=r.ret,a?(coreDb.saveLoginSetting({key:d,value:"1"}),window.webView.goToSystemCloudLinkSetting()):(e+=1,coreDb.saveLoginSetting({key:p,value:e.toString()}));case 2:case"end":return t.stop()}},n,t)}));return function(e){return n.apply(this,arguments)}}())}Object.defineProperty(t,"__esModule",{value:!0}),t.checkHuaweiPhonePushSetting=t.DB_KEY_SKIP_SETTING_COUNT=t.DB_KEY_HAS_SHOW_SETTING_DIALOG=void 0;var i=n(1),s=r(i),c=n(2),u=r(c),f=n(118),l=r(f),d=t.DB_KEY_HAS_SHOW_SETTING_DIALOG="has_show_setting_dialog",p=t.DB_KEY_SKIP_SETTING_COUNT="has_skip_setting_count";t.checkHuaweiPhonePushSetting=function(){coreDb.queryLoginSetting({key:d}).then(function(e){var t="0";isNullOrEmpty(e)||!e.hasOwnProperty("key")||!e.hasOwnProperty("value")||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=e.value),"1"!==t&&coreDb.queryLoginSetting({key:p}).then(function(e){var t=0;isNullOrEmpty(e)||isNullOrEmpty(e.key)||isNullOrEmpty(e.value)||(t=parseInt(e.value)),t<2&&appService.getEMUI().then(function(e){""!==e&&(e.includes("5.")?o(t):a(t))})})})}},412:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.setCmptEvent=t.detectStopServer=t.detectStartServer=t.detectStopClientContinue=t.detectStartClientContinue=t.detectStopClient=t.detectStartClient=t.detectUnInit=t.detectInit=t.checkCertificateOverdue=t.verifyCertificate=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=coreLogger.getLogger("logic")("login/cmpt");t.verifyCertificate=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&c.info("verifyCertificate param error!"),e.next=3,coreTup.getCmptInstance();case 3:return n=e.sent,e.next=6,n.verifyCertificate(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.checkCertificateOverdue=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return"string"!=typeof t&&c.info("checkCertificateOverdue param error!"),e.next=3,coreTup.getCmptInstance();case 3:return n=e.sent,e.next=6,n.checkCertificateOverdue(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectUnInit=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectUnInit();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClient=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.detectStartClient(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClient=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClient();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.detectStartClientContinue(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopClientContinue=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopClientContinue();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.detectStartServer=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.detectStartServer(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.detectStopServer=function(){var e=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return t=e.sent,e.next=5,t.detectStopServer();case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.setCmptEvent=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getCmptInstance();case 2:return n=e.sent,e.next=5,n.setCmptEvent(t);case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},413:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(e){return-1===window.CLIENTCONFIG.MENU_LIST.findIndex(function(t){return t===e})?0:1},a=[{route:"recent",isShow:r("recent"),enabled:1,dataTestid:"recentinfo000123"},{route:"conference",isShow:r("conference"),enabled:1,dataTestid:"conferenceinfo000123"},{route:"contactGroups",isShow:r("contactGroups"),enabled:1,dataTestid:"contactgpinfo000123"},{route:"work",isShow:r("work"),enabled:1,dataTestid:"work000123"}];t.setAppConfigList=function(){if(window.navBarConfiglist=a.concat(),!window.CLIENTCONFIG.USE_IM){var e=window.navBarConfiglist.findIndex(function(e){return"recent"===e.route});window.navBarConfiglist.splice(e,1);var t=window.navBarConfiglist[0];window.navBarConfiglist[1]=window.navBarConfiglist[1],window.navBarConfiglist[0]=t}if(!window.CLIENTCONFIG.USE_MEETING){var n=window.navBarConfiglist.findIndex(function(e){return"conference"===e.route});window.navBarConfiglist.splice(n,1)}};window.navBarConfiglist=a},414:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.sendJoinPairResult=t.receiveJoinPairConf=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(152),u=coreLogger.getLogger("logic")("synergism/server/conf"),f=(t.receiveJoinPairConf=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(u.info("receiveJoinPairConf: id = ",t+", confId = ",n.confId+", confAcs = ",n.confAcs),!(coreCall.getCallCount()>0||coreConf.isInConf())){e.next=5;break}return u.info("receiveJoinPairConf: maxhub device is busy"),f(t,constant.PAIR_CONF_RESULT.BUSY),e.abrupt("return");case 5:return(0,c.toggleChangeConfAcsId)(n.confId),(0,c.toggleChangeConfAcsNum)(n.confAcs),e.next=9,(0,c.toggleChangeConfAcsPas)(n.confPas);case 9:return coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.HAS_INPUT),e.next=12,(0,c.oneKeyEnterConf)(n.confAcs,n.confId,n.confPas,!0);case 12:if(!1!==(r=e.sent)){e.next=16;break}return f(t,constant.PAIR_CONF_RESULT.FAILED),e.abrupt("return");case 16:window.pairId=t;case 17:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.sendJoinPairResult=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.pairId=0,r={description:"pair_join_conf_result",command_rsp:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{result:n,msg:{}}},e.next=4,coreCall.sendUniversalInfo(t,r);case 4:return a=e.sent,u.info("send join conf result command ret = ",a),e.abrupt("return",a.result);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}())},647:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.refreshShareSize=void 0;var a=n(1),o=r(a),i=n(2),s=r(i);t.refreshShareSize=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:-3===t?(n=coreCall.getBigContainerSize(),n={width:n.width,height:n.height-54-74},coreCall.setSvcBFCPVideoRender(n)):-2===t&&(r={lastheight:0,lastwidth:0},$dispatch(coreUi.changeShareScreenWH(r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},648:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.JsInterface=t.unregisterNativeWndEvent=t.registerNativeWndEvent=void 0;var o,i,s=n(123),c=a(s),u=n(4),f=a(u),l=n(1),d=a(l),p=n(69),h=a(p),_=n(2),g=a(_),m=n(165),v=n(699),C=a(v),I=n(207),w=n(152),S=n(194),E=n(208),N=r(E),T=n(186),b=r(T),O=n(250),L=coreLogger.getLogger("conf")("logic/nativeWnd/JsInterface"),A=[],y=(t.registerNativeWndEvent=function(){var e=(0,g.default)(d.default.mark(function e(){var t;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("registerNativeWndEvent"),C.default.setNativeWndNotifyFunc(),A=[],t=coreCommon.Observer.subscribe("handlePageSwitchNotify",y.handlePageSwitchNotify),A.push(t),t=coreCommon.Observer.subscribe("handleModeSwitchNotify",y.handleModeSwitchNotify),A.push(t),t=coreCommon.Observer.subscribe("handleWatchNotify",y.handleWatchNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSetMicVol",y.handleSetMicVolNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSetSpkVol",y.handleSetSpkVolNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSetCamera",y.handleSetCameraNotify),A.push(t),t=coreCommon.Observer.subscribe("handleDial",y.handleDialNotify),A.push(t),t=coreCommon.Observer.subscribe("handleChairman",y.handleChairmanNotify),A.push(t),t=coreCommon.Observer.subscribe("handleConfReleaseChairman",y.handleReleaseChairmanResNotify),A.push(t),t=coreCommon.Observer.subscribe("handleConfRequestChairman",y.handleRequestChairmanResNotify),A.push(t),t=coreCommon.Observer.subscribe("handleHangup",y.handleHangupNotify),A.push(t),t=coreCommon.Observer.subscribe("handleSelectBoxSwitch",y.handleSelectBoxSwitchNotify),A.push(t),t=coreCommon.Observer.subscribe("OnSharingAppEnded",y.onSharingAppEnded),A.push(t),t=coreCommon.Observer.subscribe("handleAddMemberDialog",y.handleAddMemberDialog),A.push(t),t=coreCommon.Observer.subscribe("handleAttendanceDialog",y.handleAttendanceDialog),A.push(t),t=coreCommon.Observer.subscribe("handleShowQos",y.handleShowQos),A.push(t),t=coreCommon.Observer.subscribe("handleQueryUserInfo",y.handleQueryUserInfo),A.push(t),t=coreCommon.Observer.subscribe("handleConfCtrl",y.handleConfCtrl),A.push(t),t=coreCommon.Observer.subscribe("handleRemoveVideo",y.handleRemoveVideo),A.push(t),t=coreCommon.Observer.subscribe("handleConfRecording",y.handleConfRecording),A.push(t),t=coreCommon.Observer.subscribe("handleActiveBidirection",y.handleActiveBidirection),A.push(t),t=coreCommon.Observer.subscribe("handleCPURate",y.handleCPURate),A.push(t),t=coreCommon.Observer.subscribe("handleProgramSharing",y.handleProgramSharing),A.push(t),t=coreCommon.Observer.subscribe("handleShowVideoDevSettings",y.handleShowVideoDevSettings),A.push(t),t=coreCommon.Observer.subscribe("handleUpdateAuxHwnd",y.handleUpdateAuxHwnd),A.push(t),t=coreCommon.Observer.subscribe("handleMemberListMoving",y.handleMemberListMoving),A.push(t),t=coreCommon.Observer.subscribe("handleMemberListFocus",y.handleMemberListFocus),A.push(t),t=coreCommon.Observer.subscribe("handleMemberListWindowStatus",y.handleMemberListWindowStatus),A.push(t),t=coreCommon.Observer.subscribe("handleStartIMChat",y.handleStartIMChat),A.push(t),t=coreCommon.Observer.subscribe("handleNotifyDataIsBigHwnd",y.handleNotifyDataIsBigHwnd),A.push(t),t=coreCommon.Observer.subscribe("handleUserNotActive",y.handleNotifyUserNotActive),A.push(t),t=coreCommon.Observer.subscribe("handleOperateBrowserHwnd",y.handleNotifyOperateBrowserHwnd),A.push(t),t=coreCommon.Observer.subscribe("handleAlertBoxResult",y.handleAlertBoxResult),A.push(t),t=coreCommon.Observer.subscribe("handleStopWatchByNative",y.handleStopWatchByNative),A.push(t),t=coreCommon.Observer.subscribe("handleNativeUserClick",y.handleNativeUserClick),A.push(t),t=coreCommon.Observer.subscribe("handleMonitorNumber",y.handleMonitorNumber),A.push(t),L.info("registerNativeWndEvent JsInterfaceTokens = "+(0,h.default)(A));case 76:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.unregisterNativeWndEvent=function(){var e=(0,g.default)(d.default.mark(function e(){var t,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:for(L.info("unregisterNativeWndEvent"),t=0;t<A.length;t++)n=coreCommon.Observer.unsubscribeToken(A[t]),n?L.debug("unsubscribeToken success token = "+A[t]):L.debug("unsubscribeToken false token = "+A[t]);A=[];case 3:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.JsInterface=(i=o=function e(){(0,f.default)(this,e)},o.handlePageSwitchNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){var n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.pos-1)>=0&&m.SvcAtdManager.handlePageSwitch(n);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleModeSwitchNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){var n,r,a;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&(n=t.layout,r=t.frameHwnd,a=$getState().conf.isSvcConf,n>0&&(a?(L.info("insrte handleModeSwitch to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.handleModeSwitch,{},null,n,r)):N.setViewMode(n,r)));case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleWatchNotify=function(e){if(!window.CLIENTCONFIG.ISBIGWIN){var t=$getState().conf,n=t.svcViewMode,r=t.isSvcBroadcastMode,a=t.isDataConfSharing,o=t.selfRole,i=$getState().call.iSreceivingBFCP;if(r&&!i&&!a&&!o){$dispatch(coreUi.changeIsSvcSelectMode(!1));var s={};return s=(0,c.default)(s,{isSvcSelectMode:!1}),void m.SvcAtdManager.setParam(s)}var u=e.hwnd;if(null===u||0===u)m.SvcAtdManager.handleCancelWatch();else{var f=m.SvcAtdManager.getAttendeeByHwnd(u);m.SvcAtdManager.handleWatch(n,f)}var l=$getState().conf,d=l.svcPreViewMode,p=l.svcOnLineAttendances,h=d||constant.SVC_VIEW_MODE.BIG_SMALL_MODE;m.SvcAtdManager.setPageNum(h,p.length)}},o.handleSetMicVolNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("handleSetMicVolNotify, param = "+(0,h.default)(t)),S.ToolbarManager.setMicVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleSetSpkVolNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("handleSetSpkVolNotify, param = "+(0,h.default)(t)),S.ToolbarManager.setSpkVol(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleSetCameraNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("handleSetCameraNotify, param = "+(0,h.default)(t)),S.ToolbarManager.setCameraStu(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleDialNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("handleDialNotify, param = "+(0,h.default)(t)),e.next=3,S.ToolbarManager.dialClk(t);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleChairmanNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("handleChairmanNotify, param = "+(0,h.default)(t)),S.ToolbarManager.applyOrReleasechairman(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleRequestChairmanResNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("handleRequestChairmanResNotify, res = "+(0,h.default)(t)),S.ToolbarManager.handleRequestChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.onSharingAppEnded=(0,g.default)(d.default.mark(function e(){var t,n;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=(0,T.getShareAppHwnd)(),n=(0,T.getCloseShareDataOperate)(),L.info("The SharingApp handle  is invalidate, Stop Sharing. hasCloseShareDataOperate:",n),n&&window.CLIENTCONFIG.ISBIGWIN||L.info("onSharingAppEnded,  stopShareScreen."),L.info("onSharingAppEnded ：",t),I.NativeInterface.setHightlightShareWnd(t,!1),(0,T.setShareAppHwnd)(0),(0,T.setOldShareAppHwnd)(0),$dispatch(coreUi.changeFirstActiveShareApp(!0));case 9:case"end":return e.stop()}},e,void 0)})),o.handleReleaseChairmanResNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("handleReleaseChairmanResNotify, res = "+(0,h.default)(t)),S.ToolbarManager.handleReleaseChairmanResNotify(t);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleHangupNotify=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("handleHangupNotify, param = "+(0,h.default)(t)),e.next=3,S.ToolbarManager.hangup(t);case 3:coreUi.selectBoxCancelDataNWin(),(0,w.cancleConfMemberlistMessage)();case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleAddMemberDialog=function(){var e=(0,g.default)(d.default.mark(function e(t){var n,r,a,o;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=$getState(),r=n.selectContact.selectcontactisshow,a=!1,isNullOrEmpty(t.move_only)||(a=t.move_only),o={x:t.coordinate.center_x,y:t.coordinate.center_y,w:t.coordinate.width,h:t.coordinate.height},a?r&&(coreUi.selectBoxCancelDataNWin(a),coreUi.initConfSelectBoxAddMember(o)):(L.info("userClick handleAddMemberDialog, param = "+(0,h.default)(t)+",selectcontactisshow = "+r),r?coreUi.selectBoxCancelDataNWin():coreUi.initConfSelectBoxAddMember(o));case 5:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleAttendanceDialog=function(){var e=(0,g.default)(d.default.mark(function e(t){var n,r;return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:L.info("userClick The confmember openorclose process:","recevice to openorclose confmember :",t),n=!1,isNullOrEmpty(t.move_only)||(n=t.move_only),r={x:t.coordinate.left_top_x,y:t.coordinate.left_top_y,w:t.coordinate.width,h:t.coordinate.height,isMove:t.move_enable},(0,w.handleShowMemberList)(r,n),coreUi.hideConfRightMenuLogic();case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleShowQos=function(e){1===e.show?($dispatch(coreUi.changeShowCallMediaInfo(!0)),coreCall.getCallMediaInfoOfNative()):$dispatch(coreUi.changeShowCallMediaInfo(!1))},o.handleQueryUserInfo=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m.SvcAtdManager.getUserInfoByHwnd(t.hwnd);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleConfCtrl=function(e){m.SvcAtdManager.handleConfCtrl(e)},o.handleRemoveVideo=function(e){S.ToolbarManager.removeVideo(e),$getState().conf.isShowMemberListNew&&$dispatch(coreUi.changeIsShowMemberListNew())},o.handleActiveBidirection=function(){var e=(0,g.default)(d.default.mark(function e(t){return d.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return L.info("handleActiveBidirection, param = "+(0,h.default)(t)),e.next=3,coreConf.changeActiveDirection(t.dir);case 3:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),o.handleConfRecording=function(e){L.info("handleConfRecording, param = "+(0,h.default)(e));var t=$getState(),n=t.conf.isReacrd;e.flag&&0===n?(0,w.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_START):e.flag||1!==n||(0,w.cloudRecordRequestFuc)(constant.DATA_CLOUD_RECORD_TYPE.TYPE_RECORD,constant.DATA_CLOUD_RECORD_TYPE.RECORD_END)},o.handleCPURate=function(e){$getState().conf.isSvcConf?m.SvcAtdManager.handleCPURate(e):N.handleCPURate(e)},o.handleProgramSharing=function(e){if(L.info("[maxhub] handleProgramSharing isSelfJoinedDataConf:",b.isSelfJoinedDataConf()),1!=b.isSelfJoinedDataConf()){L.info("handleProgramSharing fail, not in dataconf");var t={dialog_type:1,content_id:"LANG_NATIVE_NOT_IN_DATACONF"};return void I.NativeInterface.showMessageBox(0,t)}(0,O.NotifySharingType)(0,e.type)},o.handleShowVideoDevSettings=function(e){L.info("handleShowVideoDevSettings start"),coreUi.toggleShowAudioSetting()},o.handleMemberListMoving=function(e){L.info("handleMemberListMoving",e),e.is_meet_page_moving?coreIpcMainProcess.startWindowToMemberListMove():coreIpcMainProcess.endWindowToMemberListMove({x:e.coordinate.left_top_x,y:e.coordinate.left_top_y})},o.handleMemberListFocus=function(e){L.debug("handleMemberListFocus",e),e.is_nativewnd_focus&&window.ipcNativeClss.nativeFollowDisplay(e)},o.handleMemberListWindowStatus=function(e){L.info("handleMemberListWindowStatus",e),0===e.nativewnd_size?window.ipcNativeClss.nativeNormalimizeDisplay(e):1===e.nativewnd_size?window.ipcNativeClss.nativeMaxDisplay(e):2===e.nativewnd_size?window.ipcNativeClss.nativeFullScreenDisplay(e):3===e.nativewnd_size&&window.ipcNativeClss.nativeMinimizeDisplay(e)},o.handleStartIMChat=function(e){L.info("handleStartIMChat",e);var t=$getState().call.userInfo,n=$getState().conf.groupId;isNullOrEmpty(n)?isNullOrEmpty(t)?L.error("start chat failed because there is no groupid or userinfo.account!"):(L.info("userClick show contact chat,userinfo = "+handlePhoneNumber(t.account)),coreContact.openContactConversationByConf(t,!0),appService.showMainWindow(!0)):(L.info("userClick show group dialog btn"),coreIm.openGroupConversationByConf({group_id:n},!0),appService.showMainWindow(!0))},o.handleNotifyDataIsBigHwnd=function(e){L.info("handleNotifyDataIsBigHwnd",e),$getState().conf.isSvcConf?(L.info("insert nativeNotifyUpdateDataIsBigHwnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyUpdateDataIsBigHwnd,{},null,e.isBigHwnd)):N.nativeNotifyUpdateDataIsBigHwnd(e.isBigHwnd)},o.handleNotifyUserNotActive=function(e){L.info("handleNotifyUserActive",e);var t=e.isNotActive,n=new coreSetting.AutoLeaveSetting;isNullOrEmpty(t)||(1===t?n.start():n.stop())},o.handleNotifyOperateBrowserHwnd=function(e){L.info("NotifyOperateBrowserHwnd",e);var t=e.cmdShow;9===t?appService.showWindow():6===t&&appService.minimize()},o.handleAlertBoxResult=function(e){L.info("handleAlertBoxResult",e);var t=e.dialogID,n=e.result;"feedback"===t&&1===n&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_DATA_CONF_ERROR,language.SHARING_JOINCONF_FAIL)},o.handleStopWatchByNative=function(e){L.info("handleStopWatchByNative",e),$getState().conf.isSvcConf&&(L.info("handleStopWatchByNative start"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyIsStopWatchSvc,{},null,e.isStop))},o.handleNativeUserClick=function(e){coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_USER_CLICK,params:[e.window_name,e.button_id]})},o.handleMonitorNumber=function(e){L.info("handleMonitorNumber, param= ",(0,h.default)(e)),$dispatch(coreUi.changeMonitorNumber(e.monitor_num))},o.handleUpdateAuxHwnd=function(e){L.info("start bfcphwnd = "+e.bfcphwnd+", isBigwnd = "+e.isBigWnd),$getState().conf.isSvcConf?(L.info("insrte nativeNotifyUpdateBfcpFrameWnd to native svc queue"),coreCommon.TaskQueue.getInstance("nativeSvcQueue").addTask(m.SvcAtdManager.nativeNotifyUpdateBfcpFrameWnd,{},null,e.bfcphwnd,e.isBigWnd)):N.nativeNotifyUpdateBfcpFrameWnd(e.bfcphwnd)},i))},649:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.confInfoMap=void 0;var o=n(3),i=a(o),s=n(1),c=a(s),u=n(69),f=a(u),l=n(2),d=a(l),p=n(123),h=a(p),_=n(135),g=a(_),m=n(4),v=a(m),C=n(5),I=a(C),w=n(165),S=n(402),E=a(S),N=n(701),T=a(N),b=n(356),O=r(b),L=n(703),A=a(L),y=n(186),x=r(y),R=n(287),M=coreLogger.getLogger("confModel")("service"),k=t.confInfoMap={CONF_HANDLE:"confHandle",CONF_SERVER_ID:"confServerId",CALL_ID:"confCallId",CONF_SUBJECT:"confSubject",GROUP_URI:"groupUri",MEDIA_TYPE:"mediaType",CONF_PASSCODE:"confPasscode",VMR_ID:"vmrId",DATA_RANDOM:"dataRandom",AC_TEMP_TOKEN:"acTmpToken",CONF_ACSSCODE:"confAcsscode",CONF_PWD_ENCODE:"confPwdEncode",CONF_ID_INPUT:"confIdInput",CONF_ROLE:"confRole",COMPERE_NUMBER:"compereNumber",IS_SMC_VMR:"isSmcVmr"},P={B_CONNECT_TO_CONF:"bConnectToConf",IS_SMC_FIRST_REQUEST_CHAIRMAN:"isSmcFirstRequestCharimanRest",IS_RECALL:"isRecall",IS_ALREADY_JOIN_CONF:"isAlreadyJoinConf",IS_AVC_MULTIVIEW_BROADCAST:"isAvcMultiViewBroadcast",IS_FIRST_ENTER_CONF:"isFirstEnterConf",IS_USER_END_CONF:"isUserEndConf",IS_NOTIFY_UI_CONF_CONNECTED:"isNotifyUIConfConnected",IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY:"isNeedNotifyUISvcSessionNotify"},D=function(){function e(t){var n=this,r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];(0,v.default)(this,e),this.getUpdatedParticipants=function(){return n.confInfo.updatedParticipants};var a=(new Date).getTime(),o=formatDateYYYYMMDDHHMM(a),i=[];if(this.showModeTaskQueue=coreCommon.TaskQueue.getInstance("showModeTaskQueue"),t&&t.memberList&&t.memberList.length>0){var s=!0,c=!1,u=void 0;try{for(var f,l=(0,g.default)(t.memberList);!(s=(f=l.next()).done);s=!0){var d=f.value,p={number:d.number?d.number:d.bind_no,userInfo:d,role:d.bind_no===t.compereNumber?1:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:d.bind_no===t.selfNumber,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0,type:isNullOrEmpty(d.type)?0:parseInt(d.type)};1===t.memberList.length&&17===t.mediaType&&""===p.number&&(p.number=d.short_phone),1!==t.memberList.length&&""!==t.groupUri&&p.number!==t.selfNumber&&""===p.number&&(p.number=d.short_phone),i.push(p)}}catch(e){c=!0,u=e}finally{try{!s&&l.return&&l.return()}finally{if(c)throw u}}}this.confInfo={confHandle:"",confServerId:"",confCallId:"",mediaType:"",members:i,confPasscode:"",isAllMute:0,numOfParticipant:0,confRole:0,groupUri:"",compereNumber:t?t.compereNumber:"",confSubject:"",startTime:o.time,date:o.date,updatedParticipants:[],recordType:t&&t.recordType||0,vmrId:"",dataRandom:"",acTmpToken:"",confAcsscode:"",confPwdEncode:"",confIdInput:"",isSmcVmr:!1},this.confFlag={bConnectToConf:!1,isRecall:!1,isSmcFirstRequestCharimanRest:!window.isSupportiDo&&$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,isAlreadyJoinConf:!1,isAvcMultiViewBroadcast:!1,isFirstEnterConf:!1,isUserEndConf:!1,isNotifyUIConfConnected:!1,isNeedNotifyUISvcSessionNotify:!1},this.isFirstGetMemberList=!0,this.isCallTransToConf=!1,r&&(this.setConfInfo(k.CONF_PASSCODE,t?t.passcode:""),this.setConfInfo(k.CONF_HANDLE,t?t.confId:""),this.setConfInfo(k.CALL_ID,t?t.callId:""),this.setConfInfo(k.MEDIA_TYPE,t?t.mediaType:""),this.setConfInfo(k.GROUP_URI,t?t.groupUri:""),this.updateConfSubject(t?t.confSubject:"")),this.svc={}}return(0,I.default)(e,[{key:"setIsCallTransToConfTrue",value:function(){this.isCallTransToConf=!0}},{key:"setConfInfo",value:function(e,t){var n={};n[e]=t,e===k.MEDIA_TYPE&&E.default.changeMediaTypeToAudioData()&&(n[e]=17);var r=(0,h.default)({},this.confInfo,n);this.confInfo=r,e!==k.CONF_HANDLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfHanlde",t),e!==k.CONF_SERVER_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfServerId",t,this.getConfInfo(k.VMR_ID)),e!==k.VMR_ID||isNullOrEmpty(t)||coreCommon.Observer.publish("changeVmrId",t),e!==k.CONF_SUBJECT||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfSubject",t),e!==k.CALL_ID||isNullOrEmpty(t)||(coreCommon.CameraControl.getInstance().setCallId(t),coreCommon.SpkControl.getInstance().setCallId(t),coreCommon.MicControl.getInstance().setCallId(t),coreCommon.Observer.publish("changeCallId",t)),e!==k.CONF_ROLE||isNullOrEmpty(t)||coreCommon.Observer.publish("changeConfRole",t),e!==k.GROUP_URI||isNullOrEmpty(t)||coreCommon.Observer.publish("changeGroupUri",t)}},{key:"getConfInfo",value:function(e){return this.confInfo[e]}},{key:"setConfFlag",value:function(e,t){var n={};n[e]=t;var r=(0,h.default)({},this.confFlag,n);this.confFlag=r}},{key:"getConfFlag",value:function(e){return this.confFlag[e]}},{key:"isUserEndConf",value:function(){return this.getConfFlag(P.IS_USER_END_CONF)}},{key:"isVideoConf",value:function(){return coreCommon.isVideoConf(this.getConfInfo(k.MEDIA_TYPE))}},{key:"isDataConf",value:function(){return 0!=(this.getConfInfo(k.MEDIA_TYPE)&constant.CONF_MEDIATYPE.CONF_MEDIATYPE_FLAG_DATA)}},{key:"getSsrcRange",value:function(){return isNullOrEmpty(this.svc)?{}:this.svc.getSsrcRange()}},{key:"getIsSmcFirstRequestCharimanRest",value:function(){return this.getConfFlag(P.IS_SMC_FIRST_REQUEST_CHAIRMAN)}},{key:"setIsSmcFirstRequestCharimanRest",value:function(e){this.setConfFlag(P.IS_SMC_FIRST_REQUEST_CHAIRMAN,e)}},{key:"setIsFirstEnterConf",value:function(e){this.setConfFlag(P.IS_FIRST_ENTER_CONF,e)}},{key:"getIsFirstEnterConf",value:function(){return this.getConfFlag(P.IS_FIRST_ENTER_CONF)}},{key:"getIsRecall",value:function(){return this.getConfFlag(P.IS_RECALL)}},{key:"isMemberListNull",value:function(){return isNullOrEmpty(this.confInfo.members)}},{key:"getIsSvc",value:function(){return!isNullOrEmpty(this.svc)}},{key:"cleanSvc",value:function(){this.svc={}}},{key:"getCurrentConfId",value:function(){return this.confInfo.confServerId}},{key:"setIsAvcMultiViewBroadcast",value:function(e){this.setConfFlag(P.IS_AVC_MULTIVIEW_BROADCAST,e)}},{key:"getIsAvcMultiViewBroadcast",value:function(){return this.getConfFlag(P.IS_AVC_MULTIVIEW_BROADCAST)}},{key:"getCallIdOfConf",value:function(){return this.getConfInfo(k.CALL_ID)}},{key:"getGroupIdOfConf",value:function(){return this.getConfInfo(k.GROUP_URI)}},{key:"utConfCreateStart",value:function(e){coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_CREATE,extraTrackKey:null,params:e})}},{key:"utConfCreateFinish",value:function(e){coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_CREATE,extraTrackKey:null,resultParams:e})}},{key:"utConfCreateOperation",value:function(e){coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_CREATE,params:e})}},{key:"createConf",value:function(){function e(e,n,r,a,o,i,s,c){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u){var l,d,p,h,_,m,v,C,I,w,S,E,N,T,b,O,L,A,y,x,R,D,U,F,G,B,W,V,H,$,Y,q;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l=1,d=1,s&&!0===s.isCloseCameraDe&&(coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),d=0),s&&!0===s.isMuteMicDe&&(coreCommon.MicControl.getInstance().setIsMuteMicDe(),l=0),p=this.confInfo.members.length,this.setConfFlag(P.B_CONNECT_TO_CONF,!1),h=[],_=$getState().conf.hasConFRight,m=$getState().conf.showvmrornot,v=_&&m?15:1,e.next=12,coreAccount.getLoginModel();case 12:for(C=e.sent,I=C.isSupportAS,w=$getState().conf.isCreateUseFixedConfID,S=$getState().conf.IsImGroupCreate,E=m?1:0,M.info("create conf,this mediax_conf_type is",v),N=!0,T=!1,b=void 0,e.prev=21,O=(0,g.default)(this.confInfo.members);!(N=(L=O.next()).done);N=!0)A=L.value,y={number:A.number,name:A.userInfo.name,acount_id:A.userInfo.account,role:A.role,is_mute:0,email:A.userInfo.email,sms:"",is_auto_invite:!A.is_self,type:I?parseInt(A.type):0},h.push(y);e.next=29;break;case 25:e.prev=25,e.t0=e.catch(21),T=!0,b=e.t0;case 29:e.prev=29,e.prev=30,!N&&O.return&&O.return();case 32:if(e.prev=32,!T){e.next=35;break}throw b;case 35:return e.finish(32);case 36:return e.finish(29);case 37:if(x=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),R={create_conf_info:{subject:t,group_uri:n,multi_stream_flag:r,media_type:a,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==x?0:1,user_type:o,num_of_attendee:p,attendee:h,nopassword:i,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:v,ex_config_info:{is_send_notify:0,is_send_sms:0,is_guest_free_pwd:i}}},$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&(R.create_conf_info.time_zone=getDefaultTimeZone(constant.TIME_ZONE_FLAG).toString()),I&&w&&!S&&(R.create_conf_info.vmr_flag=E,R.create_conf_info.vmr_id=u),this.setConfInfo(k.MEDIA_TYPE,a),!this.isVideoConf()){e.next=45;break}return e.next=45,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 45:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(D="0",coreConf.itmeetingCreateConf(D)),e.next=48,coreTup.getConfCtrlInstance();case 48:return U=e.sent,F=this,G=new PromiseObject,U.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===F.getConfInfo(k.CONF_HANDLE)&&G.resolve(e)}),e.next=54,U.createConf(R);case 54:if(B=e.sent,W="*****"+t.substr(4),V=0===R.create_conf_info.record_type?0:1,H=0===i?1:0,!B||0!==B.result){e.next=67;break}M.info("createConf send to tup suc, handle = "+B.param.handle+",subject = "+(isNullOrEmpty(t)?"":t.substr(0,1)+"***")),this.isVideoConf()?this.utConfCreateStart([a,W,l,d,V,H]):this.utConfCreateStart([a,W,l,H]),this.setConfInfo(k.CONF_HANDLE,B.param.handle),this.setConfInfo(k.CONF_ROLE,1),this.updateConfSubject(t),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=72;break;case 67:return this.isVideoConf()?this.utConfCreateOperation([a,W,l,d,V,H,0,B.result]):this.utConfCreateOperation([a,W,l,H,0,B.result]),M.error("create conf failed, result = "+B.result),e.next=71,this.unInit();case 71:return e.abrupt("return",{errorCode:-1});case 72:return e.next=74,G;case 74:if($=e.sent,U.setNotifyFunc(491546,null),!$||!$.param||0!==$.param.ret){e.next=84;break}return $.param.create_conf_result?(Y=$.param.create_conf_result,M.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+Y.conf_id+",conf_role = "+Y.conf_role+",media_type = "+Y.media_type+",len of pas = "+Y.password.length+",handle = "+$.param.handle),this.setConfInfo(k.CONF_ROLE,1),this.setConfInfo(k.CONF_SERVER_ID,Y.conf_id),this.setConfInfo(k.MEDIA_TYPE,Y.media_type),this.setConfInfo(k.CONF_PASSCODE,Y.password)):M.warn("create_conf_result is null, res = "+(0,f.default)($)),q=$.param.create_conf_result,this.utConfCreateFinish([1,q.conf_id]),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,params:[constant.UT_JOIN_CONF_PAGE.UT_JOIN_CONF_PAGE_AFTER_CREATE,q.conf_id]}),e.abrupt("return",{errorCode:0});case 84:return M.info("notify create conf failed, ret = "+$.param.ret+",handle = "+$.param.handle),this.utConfCreateFinish([0,$.param.ret]),e.next=88,U.endConf($.param.handle);case 88:return e.next=90,this.unInit();case 90:return e.abrupt("return",{errorCode:$.param.ret});case 91:case"end":return e.stop()}},e,this,[[21,25,29,37],[30,,32,36]])}));return e}()},{key:"oneKeyEnterConf",value:function(){function e(e,n,r,a){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a){var o,i,s,u=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,f=arguments.length>5&&void 0!==arguments[5]&&arguments[5];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(f&&this.setConfInfo(k.IS_SMC_VMR,!0),u&&!0===u.isCloseCameraDe&&coreCommon.CameraControl.getInstance().setIsCloseCameraDe(),u&&!0===u.isMuteMicDe&&coreCommon.MicControl.getInstance().setIsMuteMicDe(),u&&!0===u.isMuteSpkDe&&coreCommon.SpkControl.getInstance().setIsMuteSpkDe(),u&&!isNullOrEmpty(u.speakerMode)&&coreCommon.SpkControl.getInstance().setSpeakerModeDe(u.speakerMode),O.isInReCall()&&(M.info("oneKeyEnterConf caused by isRecall"),this.setConfFlag(P.IS_RECALL,!0)),!a){e.next=9;break}return e.next=9,coreCommon.CameraControl.getInstance().initSetVideoIndex();case 9:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreConf.itmeetingJoinConf(),e.next=12,T.default.oneKeyEnterConfTup(t,n,r,a,f);case 12:if(o=e.sent,i=o.errorCode,s=o.callId,0!==i){e.next=27;break}if(this.setConfInfo(k.CALL_ID,s),coreCommon.Observer.publish("showVideoPreview"),this.setConfInfo(k.CONF_ACSSCODE,t),this.saveConfPas(r),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),!a){e.next=24;break}return e.next=24,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 24:return e.abrupt("return",!0);case 27:return window.CLIENTCONFIG.ENABLE_IT_MEETING&&coreCommon.Observer.publish("meetingHWstartCallFailed",i),e.next=30,this.unInit();case 30:return e.abrupt("return",!1);case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"saveConfPas",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("saveConfPas"),e.next=3,coreSecurity.encryptKMC(t);case 3:n=e.sent,M.info("save enter conf param for recall,result = ",n.result),n&&0===n.result&&this.setConfInfo(k.CONF_PWD_ENCODE,n.param.CiperText);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSavedRecallInfo",value:function(){var e=this.getConfInfo(k.CONF_SERVER_ID),t=this.getConfInfo(k.IS_SMC_VMR);return isNullOrEmpty(this.getConfInfo(k.CONF_ACSSCODE))||isNullOrEmpty(e)?(M.warn("getSavedRecallInfo no pas"),""):{isVideo:this.isVideoConf(),confid:e,access_code:this.getConfInfo(k.CONF_ACSSCODE),conf_paswd:this.getConfInfo(k.CONF_PWD_ENCODE),call_type:1,isVMR:t}}},{key:"enterConfInConfList",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("enterConfInConfList . confId =",t),this.setConfInfo(k.CONF_SERVER_ID,t),r={page_index:1,page_size:100},r.sub_conf_id=n,r.conf_id=t,e.next=7,this.getConfInfoFromServer(r);case 7:if(!((a=e.sent)&&a.param&&a.param.get_conf_info_result&&a.param.get_conf_info_result.conf_list_info)){e.next=33;break}return o=a.param.get_conf_info_result.conf_list_info,i=o.conf_id,s=o.vmr_id,this.setConfInfo(k.MEDIA_TYPE,o.media_type),this.setConfInfo(k.CONF_SERVER_ID,i),this.setConfInfo(k.VMR_ID,s),this.setConfInfo(k.CONF_ACSSCODE,o.access_number),u=o.chairman_pwd,(""===u||isNaN(u))&&(u=o.general_pwd),t=isNullOrEmpty(s)?i:s,e.next=21,this.oneKeyEnterConf(o.access_number,t,u,this.isVideoConf());case 21:if(!(f=e.sent)){e.next=27;break}return M.info("enterConfInConfList oneKeyEnterConf suc"),e.abrupt("return",!0);case 27:return M.error("enterConfInConfList oneKeyEnterConf fail"),e.next=30,this.unInit();case 30:return e.abrupt("return",!1);case 31:e.next=37;break;case 33:return M.error("enterConfInConfList getConfInfoRes fail"),e.next=36,this.unInit();case 36:return e.abrupt("return",!1);case 37:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterConfByIdOnly",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,l,d,p,h,_,g=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("enterConfByIdOnly . confId =",t),this.setConfInfo(k.CONF_ID_INPUT,t),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,a=new PromiseObject,r.setNotifyFunc(491594,function(e){a.resolve(e)}),e.next=9,r.getConfAuthInfo(t);case 9:if(!(o=e.sent)||0!==o.result){e.next=14;break}M.info("enterConfByIdOnly getConf[Auth]Info send to tup suc"),e.next=18;break;case 14:return M.error("enterConfByIdOnly getConf[Auth]Info send to tup fail,res = "+o.result),e.next=17,this.unInit();case 17:return e.abrupt("return",{errorCode:-1});case 18:return e.next=20,a;case 20:if(i=e.sent,r.setNotifyFunc(491594,null),i&&i.param){e.next=25;break}return M.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.abrupt("return",{errorCode:-2});case 25:if(0===i.param.result){e.next=30;break}return M.info("get[Auth]Info fail, res = "+desensitive((0,f.default)(i))),e.next=29,this.unInit();case 29:return e.abrupt("return",{errorCode:i.param.result});case 30:if(s=i.param.conf_authinfo,u=s.access_number,l=s.hasAccessNumber,d=s.needPassword,p=1===l?u:"",M.info("needPassword = "+d+",hasAccessNumber = "+l),0!==d&&isNullOrEmpty(n)){e.next=46;break}return h="",isNullOrEmpty(n)||(h=n),e.next=38,this.oneKeyEnterConf(p,t,h,!0,g);case 38:if(!(_=e.sent)){e.next=43;break}return e.abrupt("return",{errorCode:0,accessNum:p});case 43:return e.abrupt("return",{errorCode:-3,accessNum:p});case 44:e.next=49;break;case 46:return e.next=48,this.unInit();case 48:return e.abrupt("return",{errorCode:-4,isNeedPwd:!0,accessNum:p});case 49:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCallEndedForOneKeyEnterConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return M.error("callEndedForOne[Key]EnterConf data or data.param is null, = "+(0,f.default)(t)),e.abrupt("return",!1);case 3:if(t.param.call_id===this.getConfInfo(k.CALL_ID)){e.next=6;break}return M.warn("callEndedForOne[Key]EnterConf callid is differ,so return"),e.abrupt("return",!1);case 6:return n=t.param.reason_code,r=t.param.endcall_reason,this.getConfFlag(P.IS_RECALL)||coreCommon.Observer.publish("CallEndedInConf",n,r,this.getConfInfo(k.CALL_ID)),e.next=11,this.unInit();case 11:return window.CLIENTCONFIG.ISBIGWIN&&(4041===n&&(coreConf.NotifyConfNoStart(0),M.info("NotifyConfNoStart")),4042===n&&(coreConf.NotifyConfTermination(0),M.info("NotifyConfTermination"))),O.reCallEnterConf(),coreCall.deleteCallObject(this.getConfInfo(k.CALL_ID)),e.abrupt("return",!0);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"bookConf",value:function(){function e(e,n,r,a,o,i,s,c,u,f){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i,s,u,f,l){var d,p,h,_,m,v,C,I,w,S,E,N,T,b,O,L,A,y,x,R,k,D,U,F,G,B,W;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d=this.confInfo.members.length,this.setConfFlag(P.B_CONNECT_TO_CONF,!1),p=[],e.next=5,coreAccount.getLoginModel();case 5:for(h=e.sent,_=h.isSupportAS,m=$getState().conf.isUseFixedConfID,v=!0,C=!1,I=void 0,e.prev=11,w=(0,g.default)(this.confInfo.members);!(v=(S=w.next()).done);v=!0)E=S.value,N=E.userInfo.mobile,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&N.indexOf("/")>-1&&(T=N.split("/"),N=T[0]),b={number:E.number,name:E.userInfo.name,acount_id:E.userInfo.account,role:E.role,is_mute:0,email:E.userInfo.email,sms:N,is_auto_invite:!0,type:_?parseInt(E.type):0},p.push(b);e.next=19;break;case 15:e.prev=15,e.t0=e.catch(11),C=!0,I=e.t0;case 19:e.prev=19,e.prev=20,!v&&w.return&&w.return();case 22:if(e.prev=22,!C){e.next=25;break}throw I;case 25:return e.finish(22);case 26:return e.finish(19);case 27:return O=parseInt(window.CLIENTCONFIG["Device.ComCfg.Media.priorityRtp"]),L=$getState().conf.hasConFRight,A=$getState().conf.showvmrornot,y=$getState().conf.isBookSendEmail,x=$getState().conf.isBookSendSMS,R=L&&A?15:1,k=A?1:0,M.info("book conf,this mediax_conf_type is",R),D={book_conf_info_uportal:{size:d,subject:t,group_uri:n,multi_stream_flag:r,media_type:a,start_time:i,conf_len:s,language:"2052"===window.langcode?0:1,conf_encrypt_mode:2!==O?0:1,user_type:o,num_of_attendee:d,attendee:p,time_zone:u.toString(),nopassword:f,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:R,ex_config_info:{is_send_notify:y,is_send_sms:x,is_guest_free_pwd:f}}},window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(U="1",coreConf.itmeetingCreateConf(U)),_&&m&&(D.book_conf_info_uportal.vmr_flag=k,D.book_conf_info_uportal.vmr_id=l),e.next=40,coreTup.getConfCtrlInstance();case 40:return F=e.sent,e.next=43,F.bookConf(D);case 43:return G=e.sent,B=0===f?1:0,W=2===this.confInfo.recordType?1:0,G&&0===G.result?(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_BOOK,extraTrackKey:null,params:[a,t,i,s,u.toString(),B,W]}),M.info("bookConf success")):(coreUt.utCustomEvent({eventId:constant.EVENT_ID.UT_CONF_BOOK,params:[a,t,i,s,u.toString(),B,W,0,G.result]}),M.error("bookConf failed, result = "+G.result),window.ToastNew(language.CONFERENCE_BOOK_FAILED,2),window.clickCreateWorking=!1),e.abrupt("return",G);case 48:case"end":return e.stop()}},e,this,[[11,15,19,27],[20,,22,26]])}));return e}()},{key:"p2pTransferConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,l,d,p,h,_,m,v,C,I,w,S,E,N,T,b,O,L;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=this.confInfo.members.length,this.initMemberState(t),r=[],a=$getState().conf.hasConFRight,o=$getState().conf.showvmrornot,i=a&&o?15:1,e.next=8,coreAccount.getLoginModel();case 8:for(s=e.sent,u=s.isSupportAS,l=o?1:0,M.info("book conf,this mediax_conf_type is",i),d=!0,p=!1,h=void 0,e.prev=15,_=(0,g.default)(this.confInfo.members);!(d=(m=_.next()).done);d=!0)v=m.value,C=!0,(v.role||v.number===t.userInfo.number)&&(C=!1),I={number:v.number,name:v.userInfo.name,acount_id:v.userInfo.account,role:v.role,is_mute:0,email:v.userInfo.email,sms:"",is_auto_invite:C,type:u?parseInt(v.type):0},r.push(I);e.next=23;break;case 19:e.prev=19,e.t0=e.catch(15),p=!0,h=e.t0;case 23:e.prev=23,e.prev=24,!d&&_.return&&_.return();case 26:if(e.prev=26,!p){e.next=29;break}throw h;case 29:return e.finish(26);case 30:return e.finish(23);case 31:return w={call_id:t.callId,create_conf_info:{subject:t.confSubject,group_uri:t.groupUri,multi_stream_flag:t.isMultiStream,media_type:t.mediaType,language:"2052"===window.langcode?0:1,user_type:t.userType,num_of_attendee:n,attendee:r,nopassword:t.noPassword,record_type:this.confInfo.recordType,record_aux_stream:1,record_operation_mode:1,mediax_conf_type:i}},u&&$getState().login.isFreeUser&&(w.create_conf_info.vmr_flag=l),e.next=35,coreTup.getConfCtrlInstance();case 35:return S=e.sent,E=this,N=new PromiseObject,S.setNotifyFunc(491546,function(e){e&&e.param&&e.param.handle===E.getConfInfo(k.CONF_HANDLE)&&N.resolve(e)}),e.next=41,S.p2pTransferConf(w);case 41:if(!(T=e.sent)||0!==T.result){e.next=51;break}b="*****"+t.confSubject.substr(4),M.info("p2pTransferConf success, confhandle = "+T.param.conf_handle+",confSubject = "+desensitive(b)),this.confInfo.confHandle=T.param.conf_handle,this.setConfInfo(k.CONF_ROLE,1),this.updateConfSubject(t.confSubject),coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),e.next=53;break;case 51:return M.error("p2pTransferConf failed, result = "+T.result),e.abrupt("return",{errorCode:-1});case 53:return e.next=55,N;case 55:if(O=e.sent,S.setNotifyFunc(491546,null),!O||!O.param||0!==O.param.ret){e.next=62;break}return O.param.create_conf_result?(L=O.param.create_conf_result,M.info("notify create conf success,CONFCTRL_E_EVT_CREATE_CONF_RESULT,conf_id = "+L.conf_id+",conf_role = "+L.conf_role+",media_type = "+L.media_type+",len of pas = "+L.password.length+",handle = "+O.param.handle),this.setConfInfo(k.CONF_ROLE,L.conf_role),this.setConfInfo(k.CONF_SERVER_ID,L.conf_id),this.setConfInfo(k.MEDIA_TYPE,L.media_type),this.setConfInfo(k.CONF_PASSCODE,L.password)):M.warn("create_conf_result is null, res = "+(0,f.default)(O)),e.abrupt("return",{errorCode:0});case 62:return M.info("notify create conf failed, ret = "+O.param.ret),e.abrupt("return",{errorCode:O.param.ret});case 64:case"end":return e.stop()}},e,this,[[15,19,23,31],[24,,26,30]])}));return e}()},{key:"initMemberState",value:function(e){if(M.info("init conf member state for p2p trans to conf"),e.selfInfo){var t=this.confInfo.members.findIndex(function(t){return e.selfInfo.account===t.userInfo.account});-1!==t&&(this.confInfo.members[t].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF)}}},{key:"upgradeConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={conf_handle:this.confInfo.confHandle,add_media:{media_type:16|this.confInfo.mediaType,group_uri:this.confInfo.groupUri}},e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.upgradeConf(t);case 6:if(!(r=e.sent)||0!==r.result){e.next=12;break}return M.info("upgrade conf success"),e.abrupt("return",!0);case 12:M.error("upgrade conf failed, result = "+r.result);case 13:return e.abrupt("return",!1);case 14:case"end":return e.stop()}},e,this)}));return e}()},{key:"endConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.setConfFlag(P.IS_USER_END_CONF,!0),this.getConfFlag(P.B_CONNECT_TO_CONF)){e.next=5;break}return M.info("not connect to conf, request conf control [token] before end conf"),e.next=5,this.requestConfToken();case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(k.CONF_HANDLE))){e.next=37;break}return M.info("endConf confHandle is exsit"),e.next=10,coreTup.getConfCtrlInstance();case 10:return n=e.sent,r=this,a=new PromiseObject,n.setNotifyFunc(491547,function(e){e&&e.param&&e.param.handle===r.getConfInfo(k.CONF_HANDLE)&&a.resolve(e)}),e.next=16,n.endConf(this.getConfInfo(k.CONF_HANDLE));case 16:if(t=e.sent,o=this.getCurrentConfId(),!t||0!==t.result){e.next=32;break}return M.info("endconf send to tup suc"),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,params:[o]}),i=setTimeout(function(){a.resolve({param:{ret:-1}})},3e3),e.next=24,a;case 24:s=e.sent,M.info("endconf result back,res = "+(0,f.default)(s)),clearTimeout(i),i=null,s&&s.param&&0===s.param.ret?(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,resultParams:[1]}),coreConf.getConfInfoFromDb()):coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_END,extraTrackKey:null,resultParams:[0,s.param.ret]}),t=!0,e.next=35;break;case 32:M.info("endconf send to tup fail,errorCode = "+(0,f.default)(t)),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_END,params:[0,t.result]}),t=!1;case 35:e.next=49;break;case 37:if(isNullOrEmpty(this.getConfInfo(k.CALL_ID))){e.next=48;break}return e.next=40,coreTup.getCallInstance();case 40:return u=e.sent,e.next=43,u.endCall(this.getConfInfo(k.CALL_ID));case 43:t=e.sent,M.info("endConf endcall res = "+(0,f.default)(t)),t=!(!t||0!==t.result),e.next=49;break;case 48:M.info("end conf do nothing");case 49:return e.next=51,this.unInit();case 51:return coreCall.deleteCallObject(this.getConfInfo(k.CALL_ID)),t?M.info("end conf success"):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_END,params:[0,t.result]}),M.error("end conf failed, result = "+t.result)),this.timeoutTimer=setTimeout(function(){M.info("endConf 500ms leave dataconf"),window.CLIENTCONFIG.ISMOBILE?x.beLeaveDataConf():x.terminateconf()},500),e.abrupt("return",t);case 55:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfMTnumber",value:function(e){coreCommon.Observer.publish("ConfMTnumber",e.param)}},{key:"handleConfConnected",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return M.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.getConfInfo(k.CONF_HANDLE)===t.param.handle){e.next=6;break}return M.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN,params:["handleConfConnected",1]}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),M.info("handleConfConnected ",t.param.handle),coreCommon.BigwinObserver.publish("OnChangeHasSent",!1),this.setConfFlag(P.B_CONNECT_TO_CONF,!0),this.setConfInfo(k.CALL_ID,t.param.call_id),n=!1,t.param.connect_info&&(r=t.param.connect_info.conf_subject,M.info("conf connected! conf_subject = "+handlePhoneNumber(r.substr(0,3))+handlePhoneNumber(r.substr(3))+",media_type = "+t.param.connect_info.media_type+",is_svc_conf = "+t.param.connect_info.is_svc_conf),this.setConfInfo(k.MEDIA_TYPE,t.param.connect_info.media_type),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=""),this.updateConfSubject(r),n=1===t.param.connect_info.is_svc_conf),!window.isHubEnv){e.next=18;break}if(this.isVideoConf()){e.next=18;break}return M.info("not video conf in maxhub, return confConnected"),e.abrupt("return");case 18:if(!n){e.next=26;break}return M.info("handleConfConnected isSvc = "+n+",current isSvc = "+this.getIsSvc()),a=!1,this.getIsSvc()||(this.svc=new A.default,a=!0),this.svc.changeSsrcRange(t.param.connect_info),a&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=26,this.svc.init(this.getConfInfo(k.CALL_ID));case 26:return!1===this.getConfFlag(P.IS_NOTIFY_UI_CONF_CONNECTED)&&(coreCommon.Observer.publish("ConfConnected",this.isCallTransToConf),this.setConfFlag(P.IS_NOTIFY_UI_CONF_CONNECTED,!0),!0===this.getConfFlag(P.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY)&&coreCommon.Observer.publish("SvcSessionModify")),e.next=29,this.joinConf();case 29:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfInfoNotify",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.param){e.next=3;break}return M.error("handleConfConnected data is null"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.confInfo.confHandle===t.param.handle){e.next=6;break}return M.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 6:if(n=!1,t.param.conf_info?(this.setConfInfo(k.VMR_ID,t.param.conf_info.vmr_id),this.setConfInfo(k.CONF_SERVER_ID,t.param.conf_info.conf_id),this.setConfInfo(k.MEDIA_TYPE,t.param.conf_info.media_type),this.setConfInfo(k.DATA_RANDOM,t.param.conf_info.data_random),this.setConfInfo(k.AC_TEMP_TOKEN,t.param.conf_info.acTmpToken),n=1===t.param.conf_info.is_svc_conf):M.error("handleConfInfoNotify data.param.conf_info is null"+(0,f.default)(t.param.conf_info)),!window.isHubEnv){e.next=12;break}if(this.isVideoConf()){e.next=12;break}return coreCommon.Observer.publish("confInfoNotifyIsNotVideoConf"),e.abrupt("return");case 12:if(window.isHubEnv&&(window.pairId&&0!==window.pairId&&(M.info("send maxhub pair join conf success"),coreConf.sendJoinPairResult({id:window.pairId,result:constant.PAIR_CONF_RESULT.SUCCESS})),M.info("send maxhub join conf success"),coreConf.NotifyMyJoinConf(0,"")),E.default.getEnterDataConfInAdvance()||this.enterDataConf(t),this.getDetailConfInfo(),!n){e.next=23;break}return M.info("handleConfInfoNotify isSvc = "+n+",current isSvc = "+this.getIsSvc()),r=!1,this.getIsSvc()||(this.svc=new A.default,r=!0),this.svc.changeSsrcRange(t.param.conf_info),r&&coreCommon.Observer.publish("changeIsSvcConf"),e.next=23,this.svc.init(t.param.call_id);case 23:!1===this.getConfFlag(P.IS_NOTIFY_UI_CONF_CONNECTED)&&(coreCommon.Observer.publish("ConfConnected",this.isCallTransToConf),this.setConfFlag(P.IS_NOTIFY_UI_CONF_CONNECTED,!0),!0===this.getConfFlag(P.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY)&&coreCommon.Observer.publish("SvcSessionModify")),coreCommon.Observer.publish("ConfInfoNotify");case 25:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSvcSeessionModify",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.svc_lables))return void M.error("handleSvcSeessionModify param is null,param = "+(0,f.default)(t));var t=e.param;if(1!==t.is_svccall)return void M.warn("handleSvcSeessionModify is not svcConf, no need deal");M.info("handleSvcSeessionModify isSvc = true, current isSvc = "+this.getIsSvc());var n=!1;this.getIsSvc()||(this.svc=new A.default,n=!0),this.svc.changeSsrcRange(t,!0),n&&(coreCommon.Observer.publish("changeIsSvcConf"),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&coreCommon.CameraControl.getInstance().resetCameraOrient()),!0===this.getConfFlag(P.IS_NOTIFY_UI_CONF_CONNECTED)?coreCommon.Observer.publish("SvcSessionModify"):this.setConfFlag(P.IS_NEED_NOTIFY_UI_SVC_SESSION_MODIFY,!0)}},{key:"getConfInfoFromServer",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s=this;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new PromiseObject,e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,a=function(e){if(e.param&&e.param.get_conf_info_result&&e.param.get_conf_info_result.conf_list_info){e.param.get_conf_info_result.conf_list_info.conf_id===s.getConfInfo(k.CONF_SERVER_ID)?(M.info("confInfo for getConfInfoFromServer suc"),n.resolve(e)):M.info("confInfo for getConfInfoFromServer wait for next")}else M.error("confInfo for getConfInfoFromServer error"),n.resolve(e)},r.setMultiNotifyFunc(491564,a),e.next=8,r.getConfInfo(t);case 8:return o=e.sent,o&&0===o.result?M.info("getConfInfoFromServer getConfInfo  send to tup suc"):(M.error("getConfInfoFromServer getConfInfo send to tup fail,res = "+o.result),n.resolve(!1)),e.next=12,n;case 12:return i=e.sent,r.getNotifyCallbacks(491564).remove(a),e.abrupt("return",i);case 15:case"end":return e.stop()}},e,this)}));return e}()},{key:"getDetailConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a,o,i,s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(isNullOrEmpty(this.getSavedRecallInfo())||window.isSupportiDo){e.next=3;break}return M.info("no need to get confInfo"),e.abrupt("return");case 3:return t=this.getConfInfo(k.CONF_SERVER_ID),n={page_index:1,page_size:100},n.sub_conf_id="0",n.conf_id=t,e.next=9,this.getConfInfoFromServer(n);case 9:r=e.sent,r&&r.param&&r.param.get_conf_info_result&&r.param.get_conf_info_result.conf_list_info?(a=r.param.get_conf_info_result.conf_list_info,t=a.conf_id,o=a.vmr_id,this.setConfInfo(k.CONF_SERVER_ID,t),this.setConfInfo(k.VMR_ID,o),this.setConfInfo(k.CONF_ACSSCODE,a.access_number),i=a.chairman_pwd,(""===i||isNaN(i))&&(i=a.general_pwd),this.saveConfPas(i),s=a.conf_subject,M.info("handleGetConfInfoRes suc,confSubject = "+(s?s.substr(0,1)+"***":"")),this.updateConfSubject(s)):M.info("handleGetConfInfoRes fail");case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"enterDataConf",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if(isNullOrEmpty(e)){if(this.isDataConf()){M.info("[IT-Meeting] start enter data conf.");var t={};t.confKey=this.getConfInfo(k.CONF_PASSCODE),t.mediaType=this.getConfInfo(k.MEDIA_TYPE),t.confServerId=this.getConfInfo(k.CONF_SERVER_ID),t.confCallId=this.getConfInfo(k.CALL_ID),coreConf.handleSmcEnterDataConf(t)}}else if(window.CLIENTCONFIG.USE_MEETING&&(""!==this.getConfInfo(k.DATA_RANDOM)||this.isDataConf()))if(window.CLIENTCONFIG.ISMOBILE||(M.info(" confinfonotify  PC Logic  "),coreCommon.Observer.publish("OnConfInfoNotify",{})),E.default.getDeployMode()!==constant.MEETING_NET_TYPE.SMC_MEETING){var n=e.param.conf_info;n.getParamType=3,coreConf.joinDataConf(n,this.confInfo.confCallId)}else{var r={};r.confKey=this.getConfInfo(k.CONF_PASSCODE),r.confToken=this.getConfInfo(k.AC_TEMP_TOKEN),r.mediaType=this.getConfInfo(k.MEDIA_TYPE),r.confServerId=this.getConfInfo(k.CONF_SERVER_ID),r.confCallId=this.getConfInfo(k.CALL_ID),coreConf.handleSmcEnterDataConf(r)}}},{key:"handleConfRightResult",value:function(e){if(M.info("handleConfRightResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle)}},{key:"setSpeakerReport",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING){e.next=6;break}return M.info("setSpeakerReport, confHandle = ",this.confInfo.confHandle),e.next=4,coreTup.getConfCtrlInstance();case 4:t=e.sent,t.setSpeakerReport(this.confInfo.confHandle);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfAttendeeListUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(M.info("handleConfAttendeeListUpdate, handle="+t.param.handle+", attendeeNum="+t.param.conf_status.num_of_participant),this.confInfo.confHandle===t.param.handle){e.next=4;break}return M.error("not same conf, confHandle is ",t.param.handle),e.abrupt("return");case 4:0===t.param.conf_status.num_of_participant&&(M.info("handleConfAttendeeListUpdate, clear AttendeeList"),t.param.conf_status.participants=[]),this.confInfo.updatedParticipants=t.param.conf_status.participants,t.param.conf_status.is_all_mute?this.confInfo.isAllMute=1:this.confInfo.isAllMute=0,this.confInfo.numOfParticipant=t.param.conf_status.num_of_participant,this.confInfo.confSubject=t.param.conf_status.subject,coreCommon.Observer.publish("AttendeeListUpdate",t.param.conf_status.participants,t.param.conf_status.subject,!1,t.param.conf_status.is_all_mute,t.param.conf_status.allow_unmute,t.param.conf_status.record_status,t.param.conf_status.record_type);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleBigConfInfo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("BigConfInfoNotify",t);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleVideoWatchResult",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.param||this.confInfo.confHandle===t.param.handle){e.next=3;break}return M.error("handleVideoWatchResult not same conf, ret.handle is = "+t.param.handle+",confInfo.confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:t&&t.param?(0===t.param.operation_rsp_reason?M.error("handleVideoWatchResult fail,hanlde = "+t.param.handle+",operation_rsp_reason = "+t.param.operation_rsp_reason):M.info("handleVideoWatchResult suc,hanlde = "+t.param.handle),coreCommon.Observer.publish("handleVideoWatchRes",t.param.operation_rsp_reason)):M.error("handleVideoWatchResult ret is null or ret.param is null");case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"lockConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("lockAttendee, operator isLock = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.lockConf(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleLockConfResult",value:function(e){if(M.info("handleLockConfResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("lockResult",e)}},{key:"handleConfstateLock",value:function(e){M.info("handleConfstateLock ",e.param.handle),coreCommon.Observer.publish("lockState",e)}},{key:"handup",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("handup, operator isHandup = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.handupAttendee(this.confInfo.confHandle,n,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleHandupAttendeeResult",value:function(e){if(M.info("handleHandupAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("handupResult",e)}},{key:"muteAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.confInfo.members.find(function(e){return e.number===n})||M.error("not conf attendee, numer =",handlePhoneNumber(n)),M.info("muteAttendee, operator ismute = "+t+", attendee = "+handlePhoneNumber(n)),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,e.next=7,r.muteAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,a&&0===a.result?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,params:[t?1:0,1]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE_ATTENDEE,params:[t?1:0,0,a.result]}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMuteAttendeeResult",value:function(e){if(M.info("handleMuteAttendeeResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("MuteAttendeeResult",e)}},{key:"muteConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("muteConf, operator ismute = "+t+", isAllowUnmute = "+n+", confHandle = "+this.confInfo.confHandle),r=new PromiseObject,e.next=4,coreTup.getConfCtrlInstance();case 4:return a=e.sent,o=this,i=function(e){e&&e.param&&e.param.handle!==o.getConfInfo(k.CONF_HANDLE)?M.warn("not same conf, wait for next, confHandle is ",e.param.handle):r.resolve(e)},a.setNotifyFunc(491555,i),e.next=10,a.muteConf(this.confInfo.confHandle,t,n);case 10:if(!(s=e.sent)||0!==s.result){e.next=16;break}coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,params:[this.getCurrentConfId(),t?1:0]}),M.info("muteConf send to tup suc"),e.next=19;break;case 16:return M.error("muteconf send to tup fail, errorcode = "+s.result),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_MUTE,params:[t?1:0]}),e.abrupt("return",{errorCode:-1,to_mute:0===t});case 19:return e.next=21,r;case 21:if(u=e.sent,this.confInfo.isAllMute=u.param.to_mute,!u||!u.param||0!==u.param.ret){e.next=29;break}return coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,resultParams:[1]}),M.info("muteconf callback suc"),e.abrupt("return",{errorCode:0,to_mute:u.param.to_mute});case 29:return M.info("muteconf callback fail,error = "+(0,f.default)(u)),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_MUTE,extraTrackKey:null,resultParams:[0,u.param.ret]}),e.abrupt("return",{errorCode:u.param.ret,to_mute:u.param.to_mute});case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfBroadCastLocal",value:function(e){M.info("handleConfBroadCastLocal ",e.param.handle),coreCommon.Observer.publish("IsBroadcastLocal",e)}},{key:"postponeConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("postponeConf,time = "+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.postponeConfTup(this.getConfInfo(k.CONF_HANDLE),t);case 6:r=e.sent,window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(0,R.itmeetingExtendConf)(t),r&&0===r.result?(M.info("postponeConf suc"),a=this.getCurrentConfId(),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_EXTEND,extraTrackKey:null,params:[a,t]})):(M.info("postponeConf fail"),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_EXTEND,params:[t,0,r.result]}));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"releaseChairman",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("releaseChairman, confHandle = "+this.confInfo.confHandle),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(n=!1,coreConf.itmeetingChairman(n)),e.next=4,coreTup.getConfCtrlInstance();case 4:return r=e.sent,e.next=7,r.releaseChairman(this.confInfo.confHandle,t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReleaseChairmanResult",value:function(e){if(M.info("handleReleaseChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle);$getState().conf.isVideoConf;window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReleaseChairmanResult",e):coreCommon.Observer.publish("handleConfReleaseChairman",e)}},{key:"requestChairman",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("requestChairman, confHandle = "+this.confInfo.confHandle),window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(r=!0,coreConf.itmeetingChairman(r)),e.next=4,coreTup.getConfCtrlInstance();case 4:return a=e.sent,e.next=7,a.requestChairman(this.confInfo.confHandle,t,n);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleReqChairmanResult",value:function(e){if(M.info("handleReqChairmanResult ",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle);!$getState().conf.showqusetchairman||window.CLIENTCONFIG.ISMOBILE||window.CLIENTCONFIG.ISMAC?coreCommon.Observer.publish("ReqChairmanResult",e):coreCommon.Observer.publish("handleConfRequestChairman",e)}},{key:"handleEnterPwdToChairmanResult",value:function(e){if(M.info("smc reqChairman result",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is ",e.param.handle);coreCommon.Observer.publish("EnterPwdToChairmanResult",e)}},{key:"reInviteAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("reInvite attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),n=void 0,r=this.confInfo.members.length,a=-1,e.next=6,coreAccount.getLoginModel();case 6:o=e.sent,i=o.isSupportAS,s=0;case 9:if(!(s<r)){e.next=18;break}if(this.confInfo.members[s].number!==t){e.next=15;break}return this.confInfo.members[s].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,n={number:t,name:this.confInfo.members[s].userInfo.name,acount_id:this.confInfo.members[s].userInfo.account,role:this.confInfo.members[s].role,is_mute:0,email:this.confInfo.members[s].userInfo.email,sms:this.confInfo.members[s].userInfo.sms,is_auto_invite:1,type:i?parseInt(this.confInfo.members[s].type):0},a=s,e.abrupt("break",18);case 15:++s,e.next=9;break;case 18:if(!n){e.next=31;break}return coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),u={num_of_attendee:1,attendee_info:[n]},e.next=23,coreTup.getConfCtrlInstance();case 23:return f=e.sent,e.next=26,f.inviteAttendee(this.confInfo.confHandle,u);case 26:l=e.sent,l&&0===l.result?coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,params:[this.getCurrentConfId()]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_INVITE,params:[0,l.result]}),(isNullOrEmpty(l)||0!==l.result)&&a>=0&&(this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT,coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)),e.next=32;break;case 31:M.error("can not find conf member");case 32:case"end":return e.stop()}},e,this)}));return e}()},{key:"addAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r,a,o,i,s,u,f,l,d,p,_,g,m,v,C,I,S,E,N;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("add attendee size = "+t.length+", confHandle = "+this.confInfo.confHandle),n=[],r=[],e.next=5,coreAccount.getLoginModel();case 5:a=e.sent,o=a.isSupportAS,i=0;case 8:if(!(i<t.length)){e.next=33;break}if(s=t[i],window.isSupportiDo){e.next=24;break}u=!1,f=this.confInfo.members.length,l=0;case 14:if(!(l<f)){e.next=22;break}if(this.confInfo.members[l].number!==s.number){e.next=19;break}return this.confInfo.members[l].state===constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT?(M.info("attendee("+handlePhoneNumber(s.number)+") is quit state in conf, reinvite"),this.confInfo.members[l].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,d={number:s.number,name:this.confInfo.members[l].userInfo.name,acount_id:this.confInfo.members[l].userInfo.account,role:this.confInfo.members[l].role,is_mute:0,email:this.confInfo.members[l].userInfo.email,sms:this.confInfo.members[l].userInfo.sms,is_auto_invite:1,type:o?parseInt(this.confInfo.members[i].type):0},n.push(d)):M.info("attendee("+handlePhoneNumber(s.number)+") is already in conf, do nothing"),u=!0,e.abrupt("break",22);case 19:++l,e.next=14;break;case 22:if(!u){e.next=24;break}return e.abrupt("continue",30);case 24:p={number:s.number,userInfo:s,role:0,is_mute:0,is_deaf:0,state:constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING,hand_state:0,media_type:0,is_self:0,is_speaking:!1,speak_volume:0,participant_id:"",is_broadcast:0},this.confInfo.members.push(p),this.confInfo.numOfParticipant++,s.number===s.bind_no&&r.push(s),_={number:s.number,name:s.name,acount_id:s.account,role:0,is_mute:0,email:s.email,sms:s.sms,is_auto_invite:1,type:o?parseInt(s.type):0},n.push(_);case 30:++i,e.next=8;break;case 33:if(!(n&&n.length>0)){e.next=66;break}window.isSupportiDo||coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0),this.dealAddToGroup(r,this.confInfo.groupUri),g=[],m=!0,v=(0,h.default)([],$getState().conf.memberListInfo),window.CLIENTCONFIG.ENABLE_IT_MEETING&&(v=v.filter(function(e){return e.state!==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT})),C=0;case 41:if(!(C<n.length)){e.next=55;break}m=!0,I=0;case 44:if(!(I<v.length)){e.next=51;break}if(n[C].number.replace("+86","")!==v[I].number.replace("+86","")||v[I].state==constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT){e.next=48;break}return m=!1,e.abrupt("break",51);case 48:I++,e.next=44;break;case 51:m&&g.push(n[C]);case 52:C++,e.next=41;break;case 55:if(!(g.length>0)){e.next=64;break}return S={num_of_attendee:g.length,attendee_info:g},e.next=59,coreTup.getConfCtrlInstance();case 59:return E=e.sent,e.next=62,E.inviteAttendee(this.confInfo.confHandle,S);case 62:N=e.sent,isNullOrEmpty(N)||0!==N.result?(coreUt.utConfOperate(constant.EVENT_ID.UT_CONF_INVITE,[0,N.result]),M.error("invite attendees failed"),"win"===window.CLIENTCONFIG.PLATFORM&&w.SvcAtdManager.alertBox("LANG_NATIVE_INVITE_FAILED",1),"mac"===window.CLIENTCONFIG.PLATFORM&&window.Toast(language.LANG_NATIVE_INVITE_FAILED,4,!1,"pcToast",""),this.updateAttendeesToQuit(t)):(coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_INVITE,extraTrackKey:null,params:[this.getCurrentConfId()]}),M.info("invite attendees succeed"));case 64:e.next=67;break;case 66:M.error("no attendee to invite");case 67:case"end":return e.stop()}},e,this)}));return e}()},{key:"hangupAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("userClick  hangup attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.hangupAttendee(this.confInfo.confHandle,t);case 6:r=e.sent,r&&0===r.result?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HANGUP,params:[1]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_HANGUP,params:[0,r.result]});case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"callAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("call attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.callAttendee(this.confInfo.confHandle,t);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"removeAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("remove attendee = "+handlePhoneNumber(t)+", confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.removeAttendee(this.confInfo.confHandle,t);case 6:return r=e.sent,M.info("bbbbbbbb remove attender",r),e.abrupt("return",r);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"localRemoveAttendee",value:function(e){M.info("localRemoveAttendee attendeeNum ",handlePhoneNumber(e));var t=this.confInfo.members.length,n=null;if(!window.CLIENTCONFIG.ENABLE_IT_MEETING)for(var r=0;r<t;++r)if(this.confInfo.members[r].number===e){n=this.confInfo.members[r],this.confInfo.members.splice(r,1);break}return n}},{key:"updateAttendeesToQuit",value:function(e){for(var t=0;t<e.length;++t)for(var n=e[t],r=this.confInfo.members.length,a=0;a<r;++a)if(this.confInfo.members[a].number===n.number){this.confInfo.members[a].state=constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT;break}coreCommon.Observer.publish("AttendeeListUpdate",this.confInfo.members,this.confInfo.confSubject,!0)}},{key:"handleConfIncoming",value:function(e){if(isNullOrEmpty(e)||isNullOrEmpty(e.param)||isNullOrEmpty(e.param.conf_incoming_ind))return M.error("handleConfIncoming incomingInfo is null, incomingInfo = "+JSON.stringfy(e)),!1;M.info("conf incoming, handle = "+e.param.handle+", caller is "+handlePhoneNumber(e.param.conf_incoming_ind.number)+", mediaType is "+e.param.conf_incoming_ind.media_type),this.setConfInfo(k.CONF_SERVER_ID,e.param.conf_incoming_ind.conf_id),this.setConfInfo(k.CONF_HANDLE,e.param.handle),this.setConfInfo(k.CALL_ID,e.param.call_id),this.setConfInfo(k.GROUP_URI,e.param.conf_incoming_ind.group_uri),this.setConfInfo(k.COMPERE_NUMBER,e.param.conf_incoming_ind.number),this.setConfInfo(k.MEDIA_TYPE,e.param.conf_incoming_ind.media_type);var t=e.param.conf_incoming_ind.subject;!window.isSupportiDo&&isNullOrEmpty(t)&&(t=e.param.conf_incoming_ind.number+language.CONFERENCE_SUBJECT_INFO),M.info("handleConfIncoming subject = "+(t<2?t.substr(0,1)+"***":t.substr(0,1)+"***"+t.substr(-1))),this.updateConfSubject(t);var n={confHandle:this.getConfInfo(k.CONF_HANDLE),confSubject:this.getConfInfo(k.CONF_SUBJECT),compereNumber:this.getConfInfo(k.COMPERE_NUMBER),mediaType:this.getConfInfo(k.MEDIA_TYPE),groupUri:this.getConfInfo(k.GROUP_URI),isVideo:this.isVideoConf()};return coreCommon.Observer.publish("ConfIncoming",n),!0}},{key:"handleConfBeTransferToConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!isNullOrEmpty(t)&&!isNullOrEmpty(t.param)){e.next=3;break}return M.error("handleConfBeTransferToConf data.param error"+(0,f.default)(t)),e.abrupt("return");case 3:if(this.isCallTransToConf&&coreCommon.CameraControl.getInstance().unInit(),coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN,params:["handleConfBeTransferToConf",1]}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),this.setConfInfo(k.CONF_HANDLE,t.param.handle),this.setConfInfo(k.CALL_ID,t.param.call_id),t.param.conf_info?(this.updateConfSubject(t.param.conf_info.subject),this.setConfInfo(k.GROUP_URI,t.param.conf_info.group_uri),this.setConfInfo(k.MEDIA_TYPE,t.param.conf_info.media_type),isNullOrEmpty(this.getConfInfo(k.CONF_PASSCODE))&&this.setConfInfo(k.CONF_PASSCODE,t.param.conf_info.conf_id)):M.warn("handleConfBeTransferToConf data.param.conf_info error"+(0,f.default)(t.param)),!window.isHubEnv||this.getConfInfo(k.IS_VIDEO_CONF)){e.next=12;break}return M.info("not video conf in maxhub, return handleConfBeTransferToConf"),e.abrupt("return");case 12:return e.next=14,this.joinConf();case 14:if(!0!==this.getConfFlag(P.IS_RECALL)){e.next=32;break}if(M.info("start mute speak on recall"),e.t0=window.CLIENTCONFIG.ISMOBILE,!e.t0){e.next=21;break}return e.next=20,window.isSimCardCall();case 20:e.t0=e.sent;case 21:if(!e.t0){e.next=31;break}return M.info("confTransferToConf now is in simcard call"),e.next=25,coreCommon.SpkControl.getInstance().muteSpk(!0,!1);case 25:return e.next=27,coreCall.muteMicAndSpeaker(1,1);case 27:return e.next=29,coreCall.switchAudioChannel(1);case 29:e.next=32;break;case 31:coreCommon.SpkControl.getInstance().muteSpkForIntervel(3700);case 32:E.default.getEnterDataConfInAdvance()&&this.enterDataConf();case 33:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateConfSubject",value:function(e){var t=this.getConfInfo(k.CONF_SUBJECT);isNullOrEmpty(e)||(t=e),isNullOrEmpty(t)&&(t=this.getConfInfo(k.CONF_ACSSCODE)),this.setConfInfo(k.CONF_SUBJECT,t)}},{key:"joinConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.getConfFlag(P.IS_ALREADY_JOIN_CONF)){e.next=3;break}return M.info("already join conf, so return"),e.abrupt("return");case 3:if(this.setConfFlag(P.IS_ALREADY_JOIN_CONF,!0),M.info("join conf start"),O.reCallSuc(),window.webView&&window.webView.setKeepScreenOn(),!this.isVideoConf()){e.next=16;break}return coreCall.newCallObject(this.getConfInfo(k.CALL_ID),1),M.info("joinConf isVideoConf to deal camera"),e.next=12,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 12:return e.next=14,coreCommon.CameraControl.getInstance().resetCameraOrient(!0);case 14:e.next=17;break;case 16:coreCall.newCallObject(this.getConfInfo(k.CALL_ID),0);case 17:coreCommon.MicControl.getInstance().init(),coreCommon.SpkControl.getInstance().init(),M.info("video or video conf open speaker outer : "+window.otherAudioDevicesConnect),!window.otherAudioDevicesConnect&&this.isVideoConf()?coreCommon.SpkControl.getInstance().initSetSpeaker(!0):coreCommon.SpkControl.getInstance().initSetSpeaker(!1),coreCommon.SpkControl.getInstance().cancelSysSpkMute(),this.setConfFlag(P.IS_FIRST_ENTER_CONF,!0);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"rejectConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return M.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return M.info("reject conf, confHandle = "+t),e.next=6,coreTup.getConfCtrlInstance();case 6:return n=e.sent,e.next=9,n.rejectConf(t);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConf",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===this.confInfo.confHandle){e.next=3;break}return M.error("not same conf, confId = "+t+", confHandle = "+this.confInfo.confHandle),e.abrupt("return");case 3:return M.info("accept conf, confHandle = "+t),e.next=6,coreTup.getConfCtrlInstance();case 6:return r=e.sent,e.next=9,r.acceptConf(t,n);case 9:if(a=e.sent,(0,h.default)(a,{groupUri:this.confInfo.groupUri}),!a||0!==a.result){e.next=16;break}if(!n){e.next=15;break}return e.next=15,coreCommon.CameraControl.getInstance().initAfterGetCallId();case 15:coreCommon.SpkControl.getInstance().cancelSysSpkMute();case 16:return e.abrupt("return",a);case 17:case"end":return e.stop()}},e,this)}));return e}()},{key:"leaveConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("leave conf, confHandle = "+this.getConfInfo(k.CONF_HANDLE)+"callId = "+handlePhoneNumber(this.getConfInfo(k.CALL_ID))),$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING||window.isSmcFirstRequest||window.isSupportiDo||this.setConfFlag(P.IS_SMC_FIRST_REQUEST_CHAIRMAN,!0),M.info("leaveMobileDataConf type "+this.getConfInfo(k.MEDIA_TYPE)),e.next=5,x.leaveDataConf(a);case 5:if(t=!1,isNullOrEmpty(this.getConfInfo(k.CONF_HANDLE))){e.next=16;break}return e.next=9,coreTup.getConfCtrlInstance();case 9:return n=e.sent,e.next=12,n.leaveConf(this.confInfo.confHandle);case 12:t=e.sent,M.info("leave conf res "+(0,f.default)(t)),e.next=27;break;case 16:if(isNullOrEmpty(this.getConfInfo(k.CALL_ID))){e.next=26;break}return e.next=19,coreTup.getCallInstance();case 19:return r=e.sent,e.next=22,r.endCall(this.getConfInfo(k.CALL_ID));case 22:t=e.sent,M.info("leaveConf endcall res = "+(0,f.default)(t)),e.next=27;break;case 26:M.info("leave conf do nothing");case 27:if(coreCall.deleteCallObject(this.getConfInfo(k.CALL_ID)),!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING){e.next=37;break}if(0!==t.result){e.next=34;break}return e.next=32,this.unInit();case 32:e.next=35;break;case 34:M.info("hwTupConfCtrlSdk leaveconf fail");case 35:e.next=39;break;case 37:return e.next=39,this.unInit();case 39:return e.abrupt("return",t);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"broadcastAttendee",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("broadcastAttendee, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,n=1===t?n:"",e.next=7,r.broadcastAttendee(this.confInfo.confHandle,t,n);case 7:return a=e.sent,a&&0===a.result?coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,extraTrackKey:null,params:[this.getCurrentConfId(),t?1:0]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_BROADCAST,params:[t?1:0,0,a.result]}),e.abrupt("return",a);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfEnded",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.param.handle===this.getConfInfo(k.CONF_HANDLE)){e.next=3;break}return M.error("not same conf, confId = "+t.param.handle+", confHandle = "+this.getConfInfo(k.CONF_HANDLE)),e.abrupt("return",0);case 3:return M.info("conf ended, confHandle = "+this.getConfInfo(k.CONF_HANDLE)),t&&t.param&&836===t.param.reason&&!isNullOrEmpty(this.getSavedRecallInfo())?coreCall.recallOrHangup(this.getSavedRecallInfo(),!1,""):(O.terminateReCall(),coreCommon.Observer.publish("ConfEnded",t)),coreCall.deleteCallObject(this.getConfInfo(k.CALL_ID)),e.next=8,this.unInit();case 8:return e.abrupt("return",1);case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleConfSpeakerNotify",value:function(e){if(M.info("handleConfSpeakerNotify handle="+e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("ConfSpeakerNotify",e.param.floor_attendee_info)}},{key:"handleTransToConfResult",value:function(e){if(M.info("handleTransToConfResult handle=",e.param.handle),this.confInfo.confHandle!==e.param.handle)return void M.error("not same conf, confHandle is "+e.param.handle);coreCommon.Observer.publish("TransToConfResult",e)}},{key:"updateConfMemberList",value:function(e){this.confInfo.members=e}},{key:"dealAddToGroup",value:function(e,t){if(e.length>0&&""!==this.confInfo.groupUri){for(var n=0,r=0;r<this.confInfo.members.length;r++)""!==this.confInfo.members[r].account&&n++;n+=e.length,n>100?coreCommon.Observer.publish("ExceedGroupMemNum"):coreCommon.Observer.publish("AddToGroupFromConf",e,t)}}},{key:"getConfMemberListContent",value:function(){for(var e=this.confInfo.members,t=e?e.length:0,n=language.NAME+"        "+language.NUMBER+"        "+language.LANG_QOS_STATE+"\r\n",r=n+"---------------------------------------------\r\n",a="",o=0;o<t;++o){var i=e[o].userInfo.name?e[o].userInfo.name:"null",s="null";switch(isNullOrEmpty(e[o].userInfo.number)?isNullOrEmpty(e[o].userInfo.bind_no)||(s=e[o].userInfo.bind_no):s=e[o].userInfo.number,e[o].state){case constant.CONF_AUDIO_STATE.CONF_AUDIO_INVITING:a=language.CONFERENCE_MEMBER_STATE_INVITING;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_INCONF:a=language.STATUS_IN_CONFERENCE;break;case constant.CONF_AUDIO_STATE.CONF_AUDIO_QUIT:a=language.LANG_NATIVE_HANGUP;break;default:a="null"}r+=i+"    "+s+"    "+a+"\r\n"}return r}},{key:"requestConfToken",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t,n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(M.info("request conf [token] ","confHandle:"+this.confInfo.confHandle),!this.confInfo.confRole||!this.confInfo.confPasscode){e.next=11;break}return t="",e.next=5,coreTup.getConfCtrlInstance();case 5:return n=e.sent,e.next=8,n.requestConfCtrlRight(this.confInfo.confHandle,this.confInfo.compereNumber,this.confInfo.confPasscode,t);case 8:return e.abrupt("return",e.sent);case 11:return M.warn("role is not compere or conf passcode is null"),e.abrupt("return");case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"sendWatchSvcRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r,a,o,i,s,u,f,l,d,p,h,_;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&!(t.length<=0)){e.next=3;break}return M.error("sendWatchSvcRequest param error, the attendeeList is empty"),e.abrupt("return",!1);case 3:return e.next=5,coreTup.getConfCtrlInstance();case 5:return r=e.sent,a={user_num:n,conf_handle:this.confInfo.confHandle,svc_watch_attendee:{count:t.length,attendee:t}},e.next=9,r.sendWatchSvcRequest(a);case 9:for(o=e.sent,i=new Array,s=!0,u=!1,f=void 0,e.prev=14,l=(0,g.default)(t);!(s=(d=l.next()).done);s=!0)p=d.value,h=p.number,-1===i.indexOf(h)&&i.push(handlePhoneNumber(h));e.next=22;break;case 18:e.prev=18,e.t0=e.catch(14),u=!0,f=e.t0;case 22:e.prev=22,e.prev=23,!s&&l.return&&l.return();case 25:if(e.prev=25,!u){e.next=28;break}throw f;case 28:return e.finish(25);case 29:return e.finish(22);case 30:return _=i.join(),o&&0===o.result?(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_SVC,params:[1,_,1]}),M.info("sendWatchSvcRequest success",o.result)):(coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_WATCH_SVC,params:[1,_,0,o.result]}),M.info("sendWatchSvcRequest failed",o.result)),e.abrupt("return",o);case 33:case"end":return e.stop()}},e,this,[[14,18,22,30],[23,,25,29]])}));return e}()},{key:"confctrlWatchAttendee",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("confctrlWatchAttendee"),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.confctrlWatchAttendee(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeActiveDirection",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("changeActiviteDirection"),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.changeActiveDirection(this.confInfo.confHandle,t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"cloudRecordRequest",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n){var r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("cloudRecordRequest, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return r=e.sent,e.next=6,r.cloudRecordRequest(this.confInfo.confHandle,t,n);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"confSignRequest",value:function(){function e(e,n,r,a,o,i){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t,n,r,a,o,i){var s;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("confSignRequest, confHandle = "+this.confInfo.confHandle),e.next=3,coreTup.getConfCtrlInstance();case 3:return s=e.sent,e.next=6,s.confSignRequest(this.confInfo.confHandle,t,n,r,a,o,i);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInitDeviceControl",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("unInitDeviceControl"),e.next=3,coreCommon.SpkControl.getInstance().makeSysSpkMute();case 3:coreCommon.CameraControl.getInstance().unInit(),coreCommon.SpkControl.getInstance().unInit(),coreCommon.MicControl.getInstance().unInit();case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleMobileBfcpStatus",value:function(){if(!window.CLIENTCONFIG.ISMOBILE)return void M.info("handleMobileBfcpStatus is no need for pc");M.info("[bfcp] handleMobileBfcpStatus"),$dispatch(coreUi.changeSendBfcp(!1)),$dispatch(coreUi.changeReceiveBfcp(!1))}},{key:"configMsDataConf",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(t){var n,r;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("configMsDataconf "+t),n={conf:{enable_ms_dataconf:t}},e.next=4,coreTup.getCallInstance();case 4:return r=e.sent,e.next=7,r.config(n);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"stopBfcpData",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){var t;return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==$getState().call.iSreceivingBFCP){e.next=7;break}return M.info("stop bfcp call in end call"),$dispatch(coreUi.setBfcpReceiving(!1)),e.next=5,coreTup.getCallInstance();case 5:t=e.sent,t.stopData(this.getConfInfo(k.CALL_ID));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCanvasSocket",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if("mac"!==window.CLIENTCONFIG.PLATFORM){e.next=4;break}return e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:coreCall.closeSvcDataSocket();case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"unInit",value:function(){function e(){return t.apply(this,arguments)}var t=(0,d.default)(c.default.mark(function e(){return c.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("unInit"),this.closeCanvasSocket(),this.handleMobileBfcpStatus(),e.next=5,this.configMsDataConf(1);case 5:this.stopBfcpData(),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING||coreCommon.SpkControl.getInstance().setHandsFree(!1),this.unInitDeviceControl(),window.refreshAtdlistTimer&&(clearInterval(window.refreshAtdlistTimer),window.refreshAtdlistTimer=null);case 9:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new i.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=D},650:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransferConf=t.enterConfByIdOnlyService=t.enterConfInConfListService=t.oneKeyEnterConfService=t.createConf=t.endConf=t.leaveConf=t.setConfNotifyFuncAtomic=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(249),u=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(c),f=coreLogger.getLogger("confModel")("queue"),l=coreCommon.TaskQueue.getInstance("confServiceQueue"),d=coreCommon.TaskOptions.defaultOptions(),p=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("set confctrl service callback func"),e.next=3,coreTup.getCallInstance();case 3:return t=e.sent,t.setMultiNotifyFunc(98311,_),t.setMultiNotifyFunc(98341,w),e.next=8,coreTup.getConfCtrlInstance();case 8:return n=e.sent,n.setNotifyFunc(491539,g),n.setNotifyFunc(491559,m),n.setNotifyFunc(491543,v),n.setNotifyFunc(491540,C),n.setNotifyFunc(491541,I),n.setNotifyFunc(491542,S),e.next=17,u.setConfNotifyFunc();case 17:return e.abrupt("return",coreCommon.ATOMIC_ACTION_RESULT.SUCCESS);case 18:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),h=new coreCommon.AtomicAction("setConfNotifyFunc",p);t.setConfNotifyFuncAtomic=h;var _=(t.leaveConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("leaveConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.leaveConf,d,n,a),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.endConf=function(){var e=(0,s.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("endConf add in queue"),t=new PromiseObject,n=function(e){t.resolve(e)},l.addTask(u.endConf,d,n),e.next=6,t;case 6:return r=e.sent,e.abrupt("return",r);case 8:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.createConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("createConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.createConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.oneKeyEnterConfService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("oneKeyEnterConfService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.oneKeyEnterConfService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfInConfListService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfInConfListService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfInConfListService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.enterConfByIdOnlyService=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("enterConfByIdOnlyService add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.enterConfByIdOnlyService,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.p2pTransferConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f.info("p2pTransferConf add in queue"),n=new PromiseObject,r=function(e){n.resolve(e)},l.addTask(u.p2pTransferConf,d,r,t),e.next=6,n;case 6:return a=e.sent,e.abrupt("return",a);case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),function(e){f.info("handleCallEndedPostConf add in queue"),l.addTask(u.handleCallEndedPostConf,d,null,e)}),g=function(e){f.info("handleConfIncoming add in queue"),l.addTask(u.handleConfIncoming,d,null,e)},m=function(e){f.info("handleTransToConfResult add in queue"),l.addTask(u.handleTransToConfResult,d,null,e)},v=function(e){f.info("handleConfBeTransferToConf add in queue"),l.addTask(u.handleConfBeTransferToConf,d,null,e)},C=function(e){f.info("handleConfConnected add in queue"),l.addTask(u.handleConfConnected,d,null,e)},I=function(e){f.info("handleConfInfoNotify add in queue"),l.addTask(u.handleConfInfoNotify,d,null,e)},w=function(e){f.info("handleSvcSeessionModify add in queue"),l.addTask(u.handleSvcSeessionModify,d,null,e)},S=function(e){f.info("handleConfEnded add in queue"),l.addTask(u.handleConfEnded,d,null,e)}},651:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairStartEndMeeting=t.pairInviteAttendeeNotify=t.pairInviteJoinConf=t.pairCreatHandleAndGetToken=t.pairLinkageConfNotify=t.startPairMeeting=t.handleEndConf=t.pairLinkageConfStateNotify=t.pairCallStateNotify=t.pairSubscribeNotify=t.pairCtrSubscribe=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(152),u=n(404),f=n(194),l=coreLogger.getLogger("logic")("synergism/conference"),d=function(){var e=(0,s.default)(o.default.mark(function e(t,n,r,a){var i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: start request conf ctrl [token], handle="+t+", number="+n),e.next=3,coreTup.getConfCtrlInstance();case 3:return i=e.sent,e.next=6,i.requestConfCtrlRight(t,n,r,a);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),p=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: creat pair conf handle, confId="+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.creatConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: destroy pair conf handle, handle="+t),e.next=3,coreTup.getConfCtrlInstance();case 3:return n=e.sent,e.next=6,n.destroyConfHandle(t);case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),_=(t.pairCtrSubscribe=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request subscribe call state, switch=",t),n=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairSubscribe(n,t);case 4:r=e.sent,0!==r.result?l.info("BLE: request subscribe call state failed, rsp=",r):l.info("BLE: request subscribe call state success");case 6:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairSubscribeNotify=function(e){l.info("BLE: notify, get subscribe result"),0!==e.result&&l.info("BLE: notify, subscribe call state failed")},t.pairCallStateNotify=function(e){var t=e.callstate;l.info("BLE: notify, paired peripherals call state changed, callState=",t);var n=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==n)return void l.info("BLE: no paired peripherals, pair state=",n);var r=$getState().synergismInfo.pairedDeviceConf.callstate;if((0,u.setPairDeviceConfInfo)(e),$getState().synergismInfo.inPairConf)if(constant.PAIR_CALL_STATE.IN_CONFERENCE===t||constant.PAIR_CALL_STATE.ESTABLISHED===t){l.info("BLE: get conf established notify by paired peripherals, call state=",t);var a=$getState().synergismInfo.pairConfInfo.media_type;(0,c.handlePairJoinConf)(a)}else constant.PAIR_CALL_STATE.IDLE===t&&t!==r&&(l.info("BLE: get conf end notify by paired peripherals, old state=",r),v())},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: request open or close conf linkage, confId="+t+", switch="+n),r=$getState().synergismInfo.tokenIndex,e.next=4,coreCall.pairLinkage(r,n,t);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),g=(t.pairLinkageConfStateNotify=function(e){l.info("BLE: notify, linkage conf state changed");var t=$getState().synergismInfo.pairState;if(constant.PAIR_STATE.PAIR_SUCCESS!==t)return void l.info("BLE: no paired peripherals, pair state=",t);$dispatch(coreUi.changePairConfRole(e.ischairman))},function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r={number:n,role:0,is_mute:0,is_auto_invite:1},a={num_of_attendee:1,attendee_info:[r]},e.next=4,coreTup.getConfCtrlInstance();case 4:return i=e.sent,e.next=7,i.inviteAttendee(t,a);case 7:return s=e.sent,e.abrupt("return",s);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),m=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(l.info("BLE: try to join conf failed"),""!==$getState().conf.confHandle&&(h($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle("")),e){var t=$getState().synergismInfo.pairConfInfo,n=_(t.conf_id,0);l.info("BLE: close linkage, ret=",n)}(0,u.setIsInPairConf)(!1),$dispatch(coreUi.changeCallStatus("")),(0,c.handleIsShowJoinButton)(!0),$dispatch(coreUi.changeEnterConfState(!1)),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),coreCommon.showAlert(""+language.PAIR_JOIN_CONF_FAILED)},v=t.handleEndConf=function(){l.info("BLE: start to close conf page"),(0,u.setIsInPairConf)(!1),h($getState().conf.confHandle),$dispatch(coreUi.changeConfHandle("")),f.ToolbarManager.setConfHandle(""),$dispatch(coreUi.changePairConfRole(0)),(0,u.setPairConfInfo)([]),(0,c.handleClosePairConfPage)()},C=function(){var e=(0,s.default)(o.default.mark(function e(t,n){var r,a;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, confId="+t+", isEnd="+n),r=$getState().synergismInfo.tokenIndex,a=void 0,!n){e.next=9;break}return e.next=6,coreCall.pairLinkageEnd(r,t);case 6:a=e.sent,e.next=12;break;case 9:return e.next=11,coreCall.pairLinkageLeave(r,t);case 11:a=e.sent;case 12:return e.abrupt("return",a);case 13:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),I=(t.startPairMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start pair meeting"),(0,u.setPairConfInfo)(t),n=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE===n.callstate||t.conf_id===n.confid){e.next=7;break}return l.info("BLE: paired peripherals is busy, remote conf id =",n.confid),m(!1),e.abrupt("return");case 7:return e.next=9,_(t.conf_id,1);case 9:if(r=e.sent,0===r.result){e.next=14;break}return l.info("BLE: send open linkage request failed, res=",r),m(!1),e.abrupt("return");case 14:l.info("BLE: send open linkage request success");case 15:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairLinkageConfNotify=function(e){l.info("BLE: notify, get open or close linkage result"),0===e.result?(l.info("BLE: open or close linkage with peripherals success"),e.ison&&I($getState().synergismInfo.pairConfInfo)):(l.info("BLE: open or close linkage with peripherals failed"),e.ison&&m(!1))},t.pairCreatHandleAndGetToken=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return l.info("BLE: prepare to invite paired peripherals join meeting, conf id=",t.conf_id),e.next=3,p(t.conf_id);case 3:if(n=e.sent,0===n.result){e.next=8;break}return l.info("BLE: creat conf handle failed, res=",n),m(!0),e.abrupt("return");case 8:return r=n.param.conf_handle,$dispatch(coreUi.changeConfHandle(r)),f.ToolbarManager.setConfHandle(r),l.info("BLE: creat conf handle success, confHandle=",r),a=$getState().myInfo.bind_no,e.next=15,d(r,a,t.general_pwd,t.token);case 15:i=e.sent,0===i.result?((0,u.setIsInPairConf)(!0),l.info("BLE: send get conf ctrl [token] request success")):(l.info("BLE: send get conf ctrl [token] request failed, res=",i),m(!0));case 17:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}());t.pairInviteJoinConf=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r,a,i,s;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: notify, get request conf [token] result, res=",t),n=t.param,0!==n.result){e.next=21;break}if(r=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIR_SUCCESS===r){e.next=7;break}return l.info("BLE: no paired peripherals, pair state=",r),e.abrupt("return");case 7:if(a=$getState().synergismInfo.pairedDeviceConf,constant.PAIR_CALL_STATE.IDLE!==a.callstate){e.next=17;break}return l.info("BLE: paired peripherals is idle, start invite now, handle=",n.handle),i=$getState().synergismInfo.pairedDeviceInfo.sip_number,e.next=13,g(n.handle,i);case 13:s=e.sent,0===s.result?l.info("BLE: send invite request success"):(l.info("BLE: send invite request failed, ret=",s),m(!0)),e.next=19;break;case 17:l.info("BLE: paired peripherals is busy, not invite"),m(!0);case 19:e.next=23;break;case 21:l.info("BLE: get conf [token] failed"),m(!0);case 23:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.pairInviteAttendeeNotify=function(e){0===e.ret?(l.info("BLE: notify, invite attendee success, handle=",e.handle),coreCall.handlePairCallResult()):(l.info("BLE: notify, invite attendee failed, param=",e),m(!0))},t.pairStartEndMeeting=function(){var e=(0,s.default)(o.default.mark(function e(t){var n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(l.info("BLE: start to end or leave meeting, isEnd=",t),$getState().synergismInfo.inPairConf){e.next=4;break}return l.info("BLE: not in pair conf, can not end or leave meeting"),e.abrupt("return");case 4:return n=$getState().synergismInfo.pairConfInfo.conf_id,e.next=7,C(n,t);case 7:r=e.sent,0!==r.result?l.info("BLE: end or leave pair meeting failed, res=",r):(l.info("BLE: end or leave pair meeting success"),v());case 9:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},652:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.closePair=t.getPairConfPasResult=t.joinPairConfNoPas=t.joinPairConf=void 0;var a=n(1),o=r(a),i=n(3),s=r(i),c=n(2),u=r(c),f=n(653),l=n(152),d=n(654),p=coreLogger.getLogger("logic")("synergism/client/conf"),h=null,_=function(e){(0,f.clearCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF),(0,d.endPairWithPeripherals)(e)},g=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new s.default(function(){var e=(0,u.default)(o.default.mark(function e(n,r){var a,i,s,c;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=function(e){p.info("joinPairConfResult: param=",e),h&&clearTimeout(h),constant.PAIR_CONF_RESULT.SUCCESS===e.result?n():r(constant.PAIR_CONF_RESULT.BUSY===e.result?language.PAIR_JOIN_CONF_BUSY:constant.PAIR_CONF_RESULT.INVALID===e.result?language.MAXHUB_INVALID_CONF:language.PAIR_JOIN_CONF_FAILED)},(0,f.setCallbackFuncs)(constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,a),i=void 0,i=""===t.chairman_pwd||isNaN(t.chairman_pwd)?t.general_pwd?t.general_pwd:"":t.chairman_pwd,s={command_seq:constant.PAIR_CONF_COMMAND_SEQ.JOIN_CONF,param:{confId:isNullOrEmpty(t.vmr_id)?t.conf_id:t.vmr_id,confAcs:t.access_number,confPas:i}},p.info("sendJoinPairConf: confId = "+s.param.confId+", confAcs = "+s.param.confAcs),e.next=8,coreCall.sendUniversalInfo($getState().synergismInfo.tokenIndex,s);case 8:c=e.sent,0!==c.result?(p.info("sendJoinPairConf: send command failed, ret=",c),r(language.PAIR_JOIN_CONF_FAILED)):(h&&clearTimeout(h),h=setTimeout(function(){p.info("sendJoinPairConf: wait callback timeout, clear callback function"),r(language.PAIR_JOIN_CONF_FAILED)},1e4));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),m=!1,v=t.joinPairConf=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m){e.next=4;break}return p.info("joinPairConf: joining conf now, don't multiple click"),window.Toast(language.PAIR_JOIN_CONF_MULT,2,null,!1),e.abrupt("return");case 4:m=!0,$dispatch(coreUi.changePairConfInfo(t)),g(t).then(function(){m=!1,window.CLIENTCONFIG.ISMOBILE&&(window.goRoute("joinPairConfSuccess"),(0,d.endPairWithPeripherals)())},function(e){m=!1,_(e)});case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),C=!1;t.joinPairConfNoPas=function(){var e=(0,u.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return p.info("joinPairConfNoPas: start join pair conf no [password]"),e.next=3,(0,l.getConfInfo)(t.conf_id,t.cycle_conf_id);case 3:C=!0;case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.getPairConfPasResult=function(){var e=(0,u.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C&&(p.info("getPairConfPasResult: get pair conf info success, start enter conf"),n=t.get_conf_info_result.conf_list_info,v(n),C=!1);case 1:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.closePair=function(){if(m||C)return void p.info("closePair: joining conf now, return");(0,d.endPairWithPeripherals)(language.PAIR_CLOSED)}},653:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("logic")("synergism/client/info"),a=new Array;t.setCallbackFuncs=function(e,t){r.info("set callback func, command = "+e),a[e]=t},t.clearCallbackFuncs=function(e){r.info("clear callback func, command = "+e),"function"==typeof a[e]&&(a[e]=null)},t.handleClientUniversalInfoNotify=function(e){r.info("handleClientUniversalInfoNotify, param = ",e);var t=JSON.parse(e.info),n=t.event_seq,o=t.command_rsp;n?r.info("unknow event, event_seq = ",n):o&&("function"==typeof a[o]?(a[o](t.param),a[o]=null):r.info("invalid command, command_rsp = ",o))}},654:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.pairClosedNotify=t.endPairWithPeripherals=t.endOldPairAndRepair=t.handlePairClosed=t.sendMakePair=t.queryPairInfo=t.startMakePair=t.startQRCodePair=t.startManualPair=t.startAutoBlePair=t.initTupPairClient=void 0;var a=n(69),o=r(a),i=n(1),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(404),p=n(228),h=coreLogger.getLogger("logic")("synergism/client/pair"),_="",g=void 0,m=void 0,v=void 0,C=function(e){return new l.default(function(t,n){n(e)})},I=function(){var e=$getState().login.account,t="";if(window.CLIENTCONFIG.ISMOBILE)t=window.device.uuid+e;else{t=(window.cwmpLocalIp?window.cwmpLocalIp:window.localIp)+e}_=coreCommon.sha512(t),h.info("getUnicode: creat device unicode success")},w=function(){var e=(0,u.default)(s.default.mark(function e(){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairType(constant.PAIR_TYPE.IDLE)),$dispatch(coreUi.changePairTokenIndex(-1)),(0,d.setPairedDeviceInfo)({}),$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairState(constant.PAIR_STATE.IDLE));case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),S=(t.initTupPairClient=function(){var e=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.pairEnable(1,1);case 2:t=e.sent,h.info("initTupPairClient: enable tup pair ret=",t),I(),w();case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(){window.CLIENTCONFIG.ISMOBILE&&window.confirm(language.FORCE_PAIR_TIPS).then(function(e){e.ret?(h.info("forcePairConfirm: userClick force pair"),window.CLIENTCONFIG.ENABLE_IT_MEETING?O(v,constant.PAIR_TYPE.QRCODE,!0):window.startScanQRCode(language.SCAN_QR_CODE_TIPS,!0)):h.info("forcePairConfirm: userClick cancel force pair")})}),E=function(e){if(h.info("dealPairFailed: reason=",e),e===constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE)return w(),void S();window.CLIENTCONFIG.ISMOBILE&&$getState().synergismInfo.pairType!==constant.PAIR_TYPE.AUTO&&window.Toast(language.PAIRING_FAILED,2,null,!1),w()},N=function(e){var t=e.pair_session_res.id,n=e.pair_session_res.pair_result;if(h.info("dealPairSuccess: [token] id="+t+", device name="+n.device_name+", interval="+n.heartbeat_interval+", ip="+n.ip),$dispatch(coreUi.changePairTokenIndex(t)),(0,d.setPairedDeviceInfo)(n),h.info("dealPairSuccess: change pair state to <pair success>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIR_SUCCESS)),coreSetting.setCurrentCode(""),window.CLIENTCONFIG.ISMOBILE){window.Toast(language.DEVICE_PAIRED_TOAST,2,null,!1);var r=window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING,a=r?"terminalPaired":"main/conference";window.getRoute()&&window.getRoute()!==a&&window.goRoute(a)}},T=(t.startAutoBlePair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a,o,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("startAutoBlePair: start auto ble pair"),n=$getState().synergismInfo.pairState,r=2,t.id!==$getState().synergismInfo.nearestDevice.id?(t.count=1,(0,d.setNearestDevice)(t)):(t.count=t.count<r?t.count+1:r,(0,d.setNearestDevice)(t)),h.info("startAutoBlePair: the nearest device=",t),constant.PAIR_STATE.IDLE!==n){e.next=11;break}$dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),b(t.advertising,constant.PAIR_TYPE.AUTO,!1),e.next=22;break;case 11:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=21;break}if(a=$getState().synergismInfo.pairDevice,!(t.id!==a.id&&t.count>=r||i)){e.next=19;break}return h.info("startAutoBlePair: the nearest peripherals changed, try to change pair device, isOut ="+i+", old device="+a),e.next=17,R();case 17:o=e.sent,o?($dispatch(coreUi.clearPairDeviceInfo()),$dispatch(coreUi.changePairDeviceInfo(t)),b(t.advertising,constant.PAIR_TYPE.AUTO,!1)):h.info("startAutoBlePair: try to change pair peripherals failed");case 19:e.next=22;break;case 21:h.info("startAutoBlePair: in pairing or cancel pairing, quit auto pair");case 22:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startManualPair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("startManualPair: start manual pair, pairCode="+t+", isForce="+r),""!==t){e.next=4;break}return h.info("startManualPair: error, pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return h.info("startManualPair: in pairing or ending pair state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:b(t,constant.PAIR_TYPE.MANUAL,r);case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()),b=(t.startQRCodePair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n,r,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(h.info("startQRCodePair: pairCode="+t+", isForce="+a),""!==t){e.next=4;break}return h.info("startQRCodePair: pair code is null"),e.abrupt("return");case 4:if(n=$getState().synergismInfo.pairState,constant.PAIR_STATE.PAIRING!==n&&constant.PAIR_STATE.CANCEL_PAIRING!==n){e.next=9;break}return h.info("startQRCodePair: in pairing or canceling state, can not start new pair"),coreCommon.showAlert(""+language.IN_PAIRING_OR_ENDING_PAIR_STATE),e.abrupt("return");case 9:if(constant.PAIR_STATE.PAIR_SUCCESS!==n){e.next=13;break}return h.info("startQRCodePair: has paired, close old pair first"),e.next=13,R();case 13:if(window.CLIENTCONFIG.ENABLE_IT_MEETING&&(window.getRoute()&&"main/conference"!==window.getRoute()&&window.goRoute("main/conference"),window.switchToFront()),!window.CLIENTCONFIG.ENABLE_IT_MEETING||!window.pcLoginState()){e.next=32;break}h.info("PC state = "+window.pcLoginState()),e.next=20;break;case 20:return e.next=22,coreCall.callMultiTerminalCheck();case 22:if(r=e.sent,window.requestMultiTerminalPromise=null,!r){e.next=26;break}return e.abrupt("return");case 26:return e.next=28,coreCall.dealSipLoginCheck();case 28:window.requestSipLoginPromise=null,b(t,constant.PAIR_TYPE.QRCODE,a);case 30:e.next=33;break;case 32:b(t,constant.PAIR_TYPE.QRCODE,a);case 33:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.startMakePair=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:h.info("startMakePair: change pair state to <pairing>, pair type=",n+", isForce=",r),$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),A(t).then(function(e){return y(e,r)},function(e){return C(e)}).then(function(e){N(e)},function(e){E(e)});case 4:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),O=function(){var e=(0,u.default)(s.default.mark(function e(t,n,r){return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:$dispatch(coreUi.changePairState(constant.PAIR_STATE.PAIRING)),$dispatch(coreUi.changePairType(n)),y(t,r).then(function(e){N(e)},function(e){E(e)});case 3:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}(),L=function(e){if(0===e.param.result&&0===e.param.pair_info.result_code){var t=e.param.pair_info;v=e.param.pair_info,h.info("queryPairInfoNotify: get peripherals info success, file path="+t.public_key_file+", remain lock time="+t.remain_lock_time+", remain times="+t.remain_times+", remote ip="+t.remote_ip),g(t)}else h.info("queryPairInfoNotify: get peripherals info failed, data=",e),m(constant.MAKE_PAIR_FAILED_REASON.FAILED)},A=t.queryPairInfo=function(){var e=(0,u.default)(s.default.mark(function e(t){var n;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=new l.default(function(){var e=(0,u.default)(s.default.mark(function e(n,r){var a,i,c,u,f,l,d,v,C,w,S,E,N;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return g=n,m=r,e.next=4,coreTup.getUportalInstance();case 4:if(a=e.sent,a.setNotifyFunc(360476,L),i=$getState().login,c=i.isSupportProxy,u=i.proxyAddress,f=i.proxyPort,l=i.euaServer,d=i.account,h.info("[pair] queryPairInfo pairCode:",t),$getState().login.isSupportAS&&(l=(0,p.getUportalApi)().IP.value,h.info("[pair] euaServer isSupportAS env :",l)),l&&""!==l||(h.info("queryPairInfo: the eua server info is null"),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)),v=l.split(":"),C=v[0],w=v[1]?v[1]:8544,h.info("queryPairInfo server:",C),c||(u=null,f=null),""===_&&I(),S=window.cwmpLocalIp?window.cwmpLocalIp:window.localIp,E={uri:C,port:w,pairCode:t,unicode:_,localIp:S,proxyIp:u,proxyPort:f,filePath:window.APP_DATA_PATH,account:d},window.CLIENTCONFIG.ENABLE_IT_MEETING,!0){e.next=23;break}window.webView.getPairInfo((0,o.default)(E)),e.next=27;break;case 23:return e.next=25,a.getPairInfo(C,w,t,_,S,u,f,window.APP_DATA_PATH,d);case 25:N=e.sent,0!==N.result?(h.info("queryPairInfo: send request failed, ret=",N),r(constant.MAKE_PAIR_FAILED_REASON.FAILED)):h.info("queryPairInfo: send request success");case 27:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",n);case 2:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),y=t.sendMakePair=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return r=new l.default(function(){var e=(0,u.default)(s.default.mark(function e(r,a){var o,i,c,u;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return o=function(e){var t=e.param;1===t.is_permit?(h.info("pairResultNotify: make pair success"),r(t)):t.reason===constant.SYNERGISM_FAIL_REASON.USER_NUM_LIMITED?(h.info("pairResultNotify: paired client over limit, support_force=",t.support_force),a(t.support_force?constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_SUPPORT_FORCE:constant.MAKE_PAIR_FAILED_REASON.OVER_LIMIT_AND_UNSUPPORT_FORCE)):(h.info("pairResultNotify: make pair failed, param=",t),a(constant.MAKE_PAIR_FAILED_REASON.FAILED))},e.next=3,coreTup.getCallInstance();case 3:return i=e.sent,i.setNotifyFunc(98658,o),h.info("sendMakePair: isForce=",n),e.next=8,coreCall.makePair($getState().login.account,t.tmpKey,t.public_key_file,t.remote_sip_num,n);case 8:c=e.sent,0!==c.result?(h.info("sendMakePair: send request failed, ret=",c),a(constant.MAKE_PAIR_FAILED_REASON.FAILED)):(u=c.param.id,$dispatch(coreUi.changePairTokenIndex(u)),h.info("sendMakePair: send request success, [token] id=",u));case 10:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}()),e.abrupt("return",r);case 2:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}();window.getPairInfoResult=function(e){if(window.CLIENTCONFIG.ENABLE_IT_MEETING,!1){var t={result_code:e.pair_info_result.result_code,tmpKey:e.pair_info_result.tmpkey,public_key_file:e.pair_info_result.public_key_file,remain_lock_time:e.pair_info_result.remain_lock_time,remain_times:e.pair_info_result.remain_times,remote_sip_num:e.pair_info_result.remote_sip_num,remote_ip:e.pair_info_result.remote_ip},n={result:e.result,pair_info:t};return void L({param:n})}L(e)};var x=t.handlePairClosed=function(){var e=(0,u.default)(s.default.mark(function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("handlePairClosed: deal pair closed"),e.next=3,w();case 3:coreSetting.setIsResultVisible(!1),window.getRoute()&&"terminalPaired"===window.getRoute()&&window.goRoute("main/conference"),window.CLIENTCONFIG.ISMOBILE&&""!==t&&window.Toast(t,2,null,!1);case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),R=(t.endOldPairAndRepair=function(){var e=(0,u.default)(s.default.mark(function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return h.info("endOldPairAndRepair: start to end old pair and repair with peripherals, type="+t+", code=",n),e.next=3,R(language.PAIR_CLOSED);case 3:t===constant.PAIR_TYPE.AUTO||T(n);case 4:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.endPairWithPeripherals=function(){var e=(0,u.default)(s.default.mark(function e(){var t,n,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=$getState().synergismInfo.tokenIndex,h.info("endPairWithPeripherals: [token] index=",t),-1===t){e.next=11;break}return h.info("endPairWithPeripherals: change pair state to <cancel pairing>"),$dispatch(coreUi.changePairState(constant.PAIR_STATE.CANCEL_PAIRING)),e.next=7,coreCall.cancelPair(0,t);case 7:return n=e.sent,h.info("endPairWithPeripherals: send end pair with peripherals request, ret=",n),e.next=11,x(r);case 11:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}());t.pairClosedNotify=function(e){h.info("pairClosedNotify: param=",e),constant.SYNERGISM_FAIL_REASON.SOFT_TERMINAL_INITIATE===e.reason?h.info("pairClosedNotify: the software initiative to close the pair"):x(language.PAIR_CLOSED)}},655:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.delConfInfoFromDb=t.getConfInfoFromDb=t.saveConfInfoToDb=t.changeConfInfoCardState=t.changeConfImmediately=t.toggleVideoConf=t.changeMeetingSubject=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(2),u=r(c),f=(t.changeMeetingSubject=function(e){return $dispatch(coreUi.changeConfSubject(e))},t.toggleVideoConf=function(e){return $dispatch(coreUi.changeMeetingType(e))},t.changeConfImmediately=function(e){return $dispatch(coreUi.toggleConfImmediately(e))},t.changeConfInfoCardState=function(e){return $dispatch(coreUi.toggleConfInfoCard(e))},t.saveConfInfoToDb=function(){var e=(0,u.default)(o.default.mark(function e(t,n){var r,a,i,c,u,l;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"confInfoList"});case 2:return r=e.sent,a=[],isNullOrEmpty(r)||isNullOrEmpty(r.key)||isNullOrEmpty(r.value)?a=[{confName:n,confId:t}]:(i=JSON.parse(r.value),c=f(i,t),c instanceof Array?(a=c,c.length<5?a.unshift({confName:n,confId:t}):(a.pop(),a.unshift({confName:n,confId:t}))):a=[{confName:n,confId:t}]),u=(0,s.default)(a),l={key:"confInfoList",value:u},e.next=9,coreDb.saveLoginSetting(l);case 9:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),t.getConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreDb.queryLoginSetting({key:"confInfoList"});case 2:t=e.sent,isNullOrEmpty(t)||isNullOrEmpty(t.key)||isNullOrEmpty(t.value)||(n=JSON.parse(t.value))instanceof Array&&$dispatch(coreUi.updateLatestConfInfo(n));case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.delConfInfoFromDb=function(){var e=(0,u.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={key:"confInfoList",value:""},e.next=3,coreDb.saveLoginSetting(t);case 3:$dispatch(coreUi.updateLatestConfInfo([]));case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),function(e,t){return e.filter(function(n,r){n.confId===t&&e.splice(r,1)}),e})},69:function(e,t,n){e.exports={default:n(70),__esModule:!0}},694:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}function a(e,t){g&&g.webContents&&g.webContents.send&&g.webContents.send(e,t)}function o(e,t){_.on(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.destroyJsEventForMemberListClass=t.initJsEventForMemberListClass=t.endMove=t.startMove=t.setWindow=t.initWindow=void 0,t.createWebContentsSend=a,t.createIpcMainOn=o;var i=n(1105),s=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(i),c=n(1106),u=(r(c),n(1107)),f=r(u),l=n(1108),d=r(l),p=coreLogger.getLogger("Ipc/logic")("memberList"),h=window.require("electron"),_=h.remote.ipcMain,g=null;t.initWindow=function(){p.info("initWindowToMemberList"),g=null},t.setWindow=function(e){g=e},t.startMove=function(){g&&s.startMove(g)},t.endMove=s.endMove,t.initJsEventForMemberListClass=function(e){e&&(window.CLIENTCONFIG.ISWIN?window.ipcNativeClss=new d.default(e):window.CLIENTCONFIG.ISMAC&&(window.ipcJsClssMac=new f.default(e),window.ipcJsClssMac.init()))},t.destroyJsEventForMemberListClass=function(){window.CLIENTCONFIG.ISWIN||window.CLIENTCONFIG.ISMAC&&(window.ipcJsClssMac.destroy(),window.ipcJsClssMac=null)}},695:function(e,t,n){n(696);var r=n(8).Object;e.exports=function(e){return r.getOwnPropertyNames(e)}},696:function(e,t,n){n(137)("getOwnPropertyNames",function(){return n(697).f})},697:function(e,t,n){e.exports=n(0)(596)},698:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(3),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(1),l=r(f),d=n(2),p=r(d),h=n(4),_=r(h),g=n(5),m=r(g),v=n(207),C=n(165),I=n(194),w=n(329),S=coreLogger.getLogger("conf")("logic/video/AVCNativeManager"),E=function(){function e(){(0,_.default)(this,e),this.needDestroy=!1,this.needDestroyBfcp=!1,this.needCreateRemoteWin=!1,this.needUpdateLocalWinCallId=!1,this.isInCreateBfcp=!1,this.callId=0,this.avcFrameHandles=0,this.localVideoHwnd=0,this.remoteVideoHwnd=0,this.avcBfcpHwnd=0}return(0,m.default)(e,[{key:"getAvcFrameHandles",value:function(){return this.avcFrameHandles}},{key:"getLocalVideoHwnd",value:function(){return this.localVideoHwnd}},{key:"getRemoteVideoHwnd",value:function(){return this.remoteVideoHwnd}},{key:"getAvcBfcpHwnd",value:function(){return this.avcBfcpHwnd}},{key:"initCallInterface",value:function(){function e(e,n,r){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n,r){var a,o,i,s,c;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return S.info("initCallInterface callId = "+t+",mode = "+n+",version = "+r),e.next=3,v.NativeInterface.initNativeScreen(n,r,window.langcode);case 3:if(!((a=e.sent)>0)){e.next=32;break}if(!this.needDestroy){e.next=9;break}return S.info("initCallInterface needDestroy is true"),v.NativeInterface.uninitNativeScreen(a),e.abrupt("return",-1);case 9:if($getState().login.sipLoginOnly?delegate.winHide():delegate.winMinimize(),this.avcFrameHandles=a,o=[{type:0}],0===n&&(o[0].remoteUser=$getState().call.userInfo.name),0!==(i=this.localVideoHwnd)||0===n){e.next=21;break}return e.next=17,v.NativeInterface.createWindows(a,1,0,o);case 17:s=e.sent,S.info("localWnd 41"+s+",this.needUpdateLocalWinCallId = "+this.needUpdateLocalWinCallId),i=s[0].hwnd,this.needUpdateLocalWinCallId&&this.updateLocalwindowCallId(this.callId);case 21:return this.localVideoHwnd=i,i>0&&(S.info("NativeInterface.setLocalWindow"),v.NativeInterface.setLocalWindow(t,i)),c=$getState().conf.isEnterDataConf,C.SvcAtdManager.reportIsDataConf(c,!0),this.updateCameraList(),this.initAvcParams(),this.needCreateRemoteWin&&this.initRemotWindow(this.callId),C.SvcAtdManager.setIsSupportChatNative(a),e.abrupt("return",0);case 32:return S.info("init AVC video native frame failed,please check!"),e.abrupt("return",-1);case 34:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateCameraList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=-1,n=$getState().call.cameraDevicesList,t=-1===a?$getState().setting.camIndex:a,r={},r=(0,u.default)(r,{camera_devices:{camIndex:t,cameraDevicesList:n}}),this.setAvcParam(r);case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"initAvcParams",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r,a,o,i,c,f,d,p,h,_,g,m,v,C,E,N,T,b,O,L,A,y,x,R,M,k,P;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.getCameraDevices();case 2:return t=$getState().conf,n=t.confSubject,r=t.confServerId,a=t.vmrId,o=t.memberListInfo,isNullOrEmpty(a)||(r=a),I.ToolbarManager.setChairmanState(o,!0),isNullOrEmpty(n)&&(n=$getState().call.userInfo.name,isNullOrEmpty(n)&&(n=$getState().call.userInfo.account)),i={set_window_title:{title:n,confID:r}},c=$getState().conf.setPreviewsCount,c>0&&(i=(0,u.default)(i,{set_conf_userinfo:{count:c}})),i=(0,u.default)(i,{vmr_right:!!$getState().conf.showvmrornot}),f=$getState().conf,d=f.isConfMicMute,p=f.currentConfInfo,h=$getState().call,_=h.isOpenCamera,g=h.isMuteMic,m=h.isMuteSpk,v=h.cameraNum,C=h.cameraDevicesList,E=h.spkDevicesList,N=h.micDevicesList,T=$getState().setting,b=T.camIndex,O=T.spkIndex,L=T.micIndex,A=g||d?0:100,m=m?1:0,e.next=17,coreAccount.getLoginModel();case 17:return y=e.sent,i=(0,u.default)(i,{isSupportAS:y.isSupportAS?1:0}),i=(0,u.default)(i,{init_device_state:{isMuteSpk:m,mic_volume:A,camera_on:v>0?_:-1}}),i=(0,u.default)(i,{camera_devices:{camIndex:b,cameraDevicesList:C}}),i=(0,u.default)(i,{mic_devices:{micIndex:L,micDevicesList:N}}),i=(0,u.default)(i,{spk_devices:{spkIndex:O,spkDevicesList:E}}),i=(0,u.default)(i,{set_use_meeting:{use_meeting:window.CLIENTCONFIG.USE_MEETING}}),i=(0,u.default)(i,{general_pwd:p.general_pwd?p.general_pwd:null}),i=(0,u.default)(i,{is_free_user:$getState().login.isFreeUser}),i=(0,u.default)(i,{is_in_conf:""===$getState().conf.confHandle?0:1}),x=$getState().login.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING,R=$getState().login.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING,x?i=(0,u.default)(i,{has_delete_member:0}):R&&(i=(0,u.default)(i,{has_delete_member:1})),M=$getState().myInfo.enableDoubleScreen,i=(0,u.default)(i,{enableDoubleScreen:M}),k=JSON.parse((0,s.default)(i)),void 0!==k.set_window_title&&(P=k.set_window_title.title,k.set_window_title.title=P?P.substr(0,1)+"***":""),k.general_pwd=k.general_pwd?"***":"null",S.info("AVC initAvcParams param = "+(0,s.default)(k)),w.EncoderAdpt.clear(),i=(0,u.default)(i,{calc_cpu_rate:{open:1,duration_ms:5e3}}),e.next=40,this.setAvcParam(i);case 40:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateLocalwindowCallId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("updateLocalwindowCallId",t),n=this.localVideoHwnd,n>0?(S.info("NativeInterface.setLocalWindow"),v.NativeInterface.setLocalWindow(t,n)):(this.needUpdateLocalWinCallId=!0,this.callId=t,S.info("updateLocalwindowCallId need wait local avc win create"));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"initRemotWindow",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n,r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("initRemotWindow",t),!(this.avcFrameHandles>0)){e.next=13;break}if(n=[{type:1}],0!==(r=this.remoteVideoHwnd)){e.next=10;break}return e.next=7,v.NativeInterface.createWindows(this.avcFrameHandles,1,0,n);case 7:a=e.sent,r=a[0].hwnd,S.info("remoteHwnd 69",r,a);case 10:r>0&&(this.remoteVideoHwnd=r,v.NativeInterface.setRemoteWindow(t,r)),e.next=16;break;case 13:this.needCreateRemoteWin=!0,this.callId=t,S.info("initRemotWindow need wait avc win create");case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"initBfcpWindow",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n){var r,a,o,i,s,c,f,d,p=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(S.info("initBfcpWindow"),!(this.avcBfcpHwnd>0)){e.next=4;break}return S.info("AVC bfcp native frame have already created return!"),e.abrupt("return");case 4:if(!this.isInCreateBfcp){e.next=7;break}return S.info("AVC bfcp native frame is in creating return!"),e.abrupt("return");case 7:return this.isInCreateBfcp=!0,r=constant.AVC_VIEW_MODE.BFCP_MODE,e.next=11,v.NativeInterface.initNativeScreen(r,p,window.langcode,!0);case 11:if(!((a=e.sent)>0)){e.next=30;break}if(this.avcBfcpHwnd=a,this.isInCreateBfcp=!1,!$getState().conf.isDataConfSharing){e.next=19;break}return S.info("isDataConfSharing is true  destroy bfcpfHwnd "),this.closeBfcpFrame(),e.abrupt("return");case 19:if(!this.needDestroyBfcp){e.next=23;break}return S.info("initBfcpWindow need destroy bfcpfHwnd"),this.closeBfcpFrame(),e.abrupt("return");case 23:return e.next=25,v.NativeInterface.createWindows(a,1,0,[{type:2}]);case 25:o=e.sent,o&&o.length>0&&(v.NativeInterface.setBFCPWindow(t,o[0].hwnd,n),i=$getState().conf,s=i.confSubject,c=i.confServerId,f=i.vmrId,isNullOrEmpty(f)||(c=f),d=(0,u.default)({},{set_window_title:{title:s,confID:c}}),v.NativeInterface.setParam(d,a),C.SvcAtdManager.setIsSupportChatNative(a)),(!window.CLIENTCONFIG.ISBIGWIN&&!window.CLIENTCONFIG.ISWIN||window.isHubEnv)&&this.switchVideoToMin(),e.next=31;break;case 30:S.error("init bfcp avc win fail");case 31:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeBfcpFrame",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcBfcpHwnd>0?(S.info("closeBfcpFrame close bfcp avc win"),v.NativeInterface.uninitNativeScreen(this.avcBfcpHwnd,!0),this.avcBfcpHwnd=0,this.needDestroyBfcp=!1,this.isInCreateBfcp=!1):this.isInCreateBfcp&&(S.info("closeBfcpFrame need destory bfcp avc win after create"),this.needDestroyBfcp=!0);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"nativeNotifyUpdateBfcpFrameWnd",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:v.NativeInterface.setBFCPWindow($getState().call.callId,t,!1);case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeCallInterface",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.avcFrameHandles>0?(S.info("closeCallInterface close avc win"),appService.showMainWindow(!0),v.NativeInterface.uninitNativeScreen(this.avcFrameHandles),this.avcFrameHandles=0):(this.needDestroy=!0,S.info("closeCallInterface need destory avc win after create")),e.abrupt("return",0);case 2:case"end":return e.stop()}},e,this)}));return e}()},{key:"setAvcParam",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.avcFrameHandles>0&&t&&"{}"!==(0,s.default)(t)&&(S.info("NativeInterface.setParam is avcFrameHandles, avcFrameHandles"),v.NativeInterface.setParam(t,this.avcFrameHandles));case 1:case"end":return e.stop()}},e,this)}));return e}()},{key:"setSubject",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n,r,a,o;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("setSubject confSubject = "),n=$getState().conf,r=n.confServerId,a=n.vmrId,isNullOrEmpty(a)||(r=a),o=(0,u.default)({},{set_window_title:{title:t,confID:r}}),this.setAvcParam(o);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"setConfServerId",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:S.info("setConfServerId confServerId = "+t),n=(0,u.default)({},{set_window_title:{title:$getState().conf.confSubject,confID:t}}),this.setAvcParam(n);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleSwitchToVideo",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){var n;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t===$getState().call.callId){e.next=3;break}return S.error("The callid is not find."),e.abrupt("return");case 3:return S.info("handleSwitchToVideo"),S.info("cwp init initCallInterface handleSwitchToVideo "),e.next=7,this.initCallInterface(t,1,1);case 7:return n=e.sent,this.initRemotWindow(t),e.abrupt("return",n);case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMin",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t,n,r;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return S.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(S.info("switchVideoToMin in avc"),t=$getState().conf,n=t.isShowMinWin,r=t.svcMiniViewMode,!n){e.next=8;break}return window.isDataSharing&&(this.setViewMode(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),S.info("avc switchVideoToMin share owner is self,reSet layout = "+(constant.AVC_VIEW_MODE.MIN_WIN_SINGLE+256))),e.abrupt("return");case 8:0===r&&(r=constant.AVC_VIEW_MODE.MIN_WIN_SINGLE),this.setViewMode(r),S.info("changeIsShowMinWin true 3"),$dispatch(coreUi.changeIsShowMinWin(!0));case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchVideoToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return S.info("AVC video native frame no exist"),e.abrupt("return");case 3:if(S.info("switchVideoToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),S.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"switchAudioToMain",value:function(){function e(){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(){var t;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.avcFrameHandles>0){e.next=3;break}return S.info("AVC audio native frame no exist"),e.abrupt("return");case 3:if(S.info("switchAudioToMain in avc"),t=$getState().conf.isShowMinWin){e.next=7;break}return e.abrupt("return");case 7:this.setViewMode(constant.AVC_VIEW_MODE.AUDIO_MODE),S.info("changeIsShowMinWin false 3"),$dispatch(coreUi.changeIsShowMinWin(!1));case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"setViewMode",value:function(){function e(e,n){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t,n){var r,a;return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=this.avcFrameHandles,n>0&&(r=n),a=0,window.isDataSharing&&(a=256),r>0?(v.NativeInterface.setViewMode(r,t+a),[constant.AVC_VIEW_MODE.MIN_WIN_MIN,constant.AVC_VIEW_MODE.MIN_WIN_SINGLE,constant.AVC_VIEW_MODE.MIN_FLOAT_BIG_ONE].includes(t)&&$dispatch(coreUi.changeConfMiniViewMode(t))):S.info("video frame hwnd is 0,please check!");case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"handleCPURate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,p.default)(l.default.mark(function e(t){return l.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t&&t.cpu&&(S.info("handleCPURate:",w.EncoderAdpt),w.EncoderAdpt.feed(t.cpu,t.version));case 1:case"end":return e.stop()}},e,this)}));return e}()}],[{key:"getPromise",value:function(){var e={};return e.promise=new o.default(function(t,n){e.resolve=t,e.reject=n}),e}}]),e}();t.default=E},699:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i=n(1),s=r(i),c=n(2),u=r(c),f=n(69),l=r(f),d=n(4),p=r(d),h=n(5),_=r(h),g=coreLogger.getLogger("model")("model/nativeWndService/nativeWndService"),m=(o=a=function(){function e(){(0,p.default)(this,e)}return(0,_.default)(e,null,[{key:"handlePageSwitch",value:function(e){g.info("handlePageSwitch,",e.param),coreCommon.Observer.publish("handlePageSwitch",e.param)}},{key:"handleSharingAppEnded",value:function(){coreCommon.Observer.publish("OnSharingAppEnded")}},{key:"handleNotifyNativeDataRenderSize",value:function(e){g.info("handleNotifyNativeDataRenderSize,",e.param),coreCommon.Observer.publish("handleNativeDataRenderSize",e)}},{key:"handleNotifyStartShare",value:function(e){g.info("handleNotifyStartShare",e.param),coreCommon.Observer.publish("OnNativeUserStartDataShare",e)}},{key:"handleNotifyStopShare",value:function(e){g.info("handleNotifyStopShare",e.param),coreCommon.Observer.publish("OnNativeUserStopDataShare",e)}},{key:"handleLeaveConf",value:function(e){g.info("handleLeaveConf"),coreCommon.Observer.publish("OnNativeUserLeaveConf",e)}},{key:"handleEndConf",value:function(e){g.info("handleEndConf"),coreCommon.Observer.publish("OnNativeUserEndConf",e)}},{key:"handleNotifyRequestControl",value:function(e){g.info("handleNotifyRequestControl"),coreCommon.Observer.publish("onNativeNotifyRequestControl",e)}},{key:"handleNotifyReleaseControl",value:function(e){g.info("handleNotifyReleaseControl"),coreCommon.Observer.publish("onNativeNotifyReleaseControl",e)}},{key:"handleNotifyShowConfMember",value:function(e){g.info("handleNotifyShowConfMember"),coreCommon.Observer.publish("onNativeNotifyShowConfMember",e)}},{key:"handleNotifyAddConfMember",value:function(e){g.info("handleNotifyAddConfMember"),coreCommon.Observer.publish("onNativeNotifyAddConfMember",e)}},{key:"handleSetMic",value:function(e){g.info("handleSetMic"),coreCommon.Observer.publish("onNativeNotifySetMic",e)}},{key:"handleSetSpeaker",value:function(e){g.info("handleSetSpeaker"),coreCommon.Observer.publish("onNativeNotifySetSpeaker",e)}},{key:"handleDataFirstFrameRecv",value:function(e){g.info("handleDataFirstFrameRecv start"),coreCommon.Observer.publish("onNativeNotifyDataFirstFrameRecv",e)}},{key:"handleWatchNotify",value:function(e){g.info("handleWatchNotify,",e.param),coreCommon.Observer.publish("handleWatchNotify",e.param)}},{key:"handlePageSwitchNotify",value:function(e){g.info("handlePageSwitchNotify,",e.param),coreCommon.Observer.publish("handlePageSwitchNotify",e.param)}},{key:"handleModeSwitchNotify",value:function(e){g.info("handleModeSwitchNotify,",e.param),coreCommon.Observer.publish("handleModeSwitchNotify",e.param)}},{key:"handleSetMicVol",value:function(e){g.info("handleSetMicVol",e.param),coreCommon.Observer.publish("handleSetMicVol",e.param)}},{key:"handleSetSpkVol",value:function(e){g.info("handleSetSpkVol",e.param),coreCommon.Observer.publish("handleSetSpkVol",e.param)}},{key:"handleSetCamera",value:function(e){g.info("handleSetCamera",e.param),coreCommon.Observer.publish("handleSetCamera",e.param)}},{key:"handleDial",value:function(e){g.info("handleDial",e.param),coreCommon.Observer.publish("handleDial",e.param)}},{key:"handleChairman",value:function(e){g.info("handleChairman",e.param),coreCommon.Observer.publish("handleChairman",e.param)}},{key:"handleHangup",value:function(e){g.info("handleHangup",e.param),coreCommon.Observer.publish("handleHangup",e.param)}},{key:"handleAddMemberDialog",value:function(e){g.info("handleAddMemberDialog",e.param),coreCommon.Observer.publish("handleAddMemberDialog",e.param)}},{key:"handleAttendanceDialog",value:function(e){g.info("handleAttendanceDialog",e.param),coreCommon.Observer.publish("handleAttendanceDialog",e.param)}},{key:"handleShowQos",value:function(e){g.info("handleShowQos",e),coreCommon.Observer.publish("handleShowQos",e.param)}},{key:"handleShowClient",value:function(e){g.info("handleShowClient",e),coreCommon.Observer.publish("onNativeNotifyShowClient",e)}},{key:"handleNotifyPrepareShowRemoteControl",value:function(e){g.info("handleNotifyPrepareShowRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyPrepareRemoteControl",e)}},{key:"handleNotifyChairmanRemoteControl",value:function(e){g.info("handleNotifyChairmanRemoteControl",e),coreCommon.Observer.publish("onNativeNotifyChairmanRemoteControl",e)}},{key:"handleNotifyDataShareQuality",value:function(e){g.info("handleNotifyDataShareQuality ",e),coreCommon.Observer.publish("onNativeNotifyDataShareQuality",e)}},{key:"handleQueryUserInfo",value:function(e){g.info("handleQueryUserInfo "+(0,l.default)(e)),coreCommon.Observer.publish("handleQueryUserInfo",e.param)}},{key:"handleConfCtrl",value:function(e){coreCommon.Observer.publish("handleConfCtrl",e.param)}},{key:"handleCPURate",value:function(e){g.info("handleCPURate "+(0,l.default)(e)),coreCommon.Observer.publish("handleCPURate",e.param)}},{key:"handleActiveBidirection",value:function(e){g.info("handleActiveBidirection "+(0,l.default)(e)),coreCommon.Observer.publish("handleActiveBidirection",e.param)}},{key:"handleRemoveVideo",value:function(e){g.info("handleRemoveVideo "+(0,l.default)(e)),coreCommon.Observer.publish("handleRemoveVideo",e.param)}},{key:"handleConfRecording",value:function(e){g.info("handleConfRecording "+(0,l.default)(e)),coreCommon.Observer.publish("handleConfRecording",e.param)}},{key:"handleProgramSharing",value:function(e){g.info("handleProgramSharing "+(0,l.default)(e)),coreCommon.Observer.publish("handleProgramSharing",e.param)}},{key:"handleNotifyDataIsBigHwnd",value:function(e){g.info("handleNotifyDataIsBigHwnd "+(0,l.default)(e)),coreCommon.Observer.publish("handleNotifyDataIsBigHwnd",e.param)}},{key:"handleShowVideoDevSettings",value:function(e){g.info("handleShowVideoDevSettings "+(0,l.default)(e)),coreCommon.Observer.publish("handleShowVideoDevSettings",e.param)}},{key:"handleMemberListMoving",value:function(e){g.info("handleMemberListMoving"),coreCommon.Observer.publish("handleMemberListMoving",e.param)}},{key:"handleMemberListFocus",value:function(e){g.info("handleMemberListFocus"),coreCommon.Observer.publish("handleMemberListFocus",e.param)}},{key:"handleMemberListWindowStatus",value:function(e){g.info("handleMemberListWindowStatus"),coreCommon.Observer.publish("handleMemberListWindowStatus",e.param)}},{key:"handleStartIMChat",value:function(e){g.info("handleStartIMChat"),coreCommon.Observer.publish("handleStartIMChat",e.param)}},{key:"handleUserNotActive",value:function(e){g.info("handleUserNotActive"),coreCommon.Observer.publish("handleUserNotActive",e.param)}},{key:"handleOperateBrowserHwnd",value:function(e){g.info("handleOperateBrowserHwnd"),coreCommon.Observer.publish("handleOperateBrowserHwnd",e.param)}},{key:"handleAlertBoxResult",value:function(e){g.info("handleAlertBoxResult"),coreCommon.Observer.publish("handleAlertBoxResult",e.param)}},{key:"handleStopWatchByNative",value:function(e){g.info("handleStopWatchByNative"),coreCommon.Observer.publish("handleStopWatchByNative",e.param)}},{key:"handleNativeUserClick",value:function(e){coreCommon.Observer.publish("handleNativeUserClick",e.param)}},{key:"handleMonitorNumber",value:function(e){coreCommon.Observer.publish("handleMonitorNumber",e.param)}},{key:"handleUpdateAuxHwnd",value:function(e){g.info("handleUpdateAuxHwnd "+(0,l.default)(e)),coreCommon.Observer.publish("handleUpdateAuxHwnd",e.param)}},{key:"handleUserCustomMenuClick",value:function(e){g.info("handleUserCustomMenuClick "+(0,l.default)(e)),coreCommon.dispatchModuleEvent("userCustomMenuClick",e.param)}}]),e}(),a.setNativeWndNotifyFunc=(0,u.default)(s.default.mark(function e(){var t;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getNativeWindowInstance();case 2:t=e.sent,t.setNotifyFunc(1,m.handleNotifyNativeDataRenderSize),t.setNotifyFunc(2,m.handleNotifyShowConfMember),t.setNotifyFunc(3,m.handleNotifyAddConfMember),t.setNotifyFunc(4,m.handleNotifyStartShare),t.setNotifyFunc(5,m.handleNotifyRequestControl),t.setNotifyFunc(6,m.handleNotifyReleaseControl),t.setNotifyFunc(9,m.handleLeaveConf),t.setNotifyFunc(10,m.handleEndConf),t.setNotifyFunc(11,m.handleSetMic),t.setNotifyFunc(12,m.handleSetSpeaker),t.setNotifyFunc(13,m.handleSharingAppEnded),t.setNotifyFunc(14,m.handleShowClient),t.setNotifyFunc(15,m.handleNotifyStopShare),t.setNotifyFunc(16,m.handleNotifyPrepareShowRemoteControl),t.setNotifyFunc(17,m.handleNotifyChairmanRemoteControl),t.setNotifyFunc(18,m.handleNotifyDataShareQuality),t.setNotifyFunc(19,m.handleDataFirstFrameRecv),t.setNotifyFunc(21,m.handleProgramSharing),t.setNotifyFunc(22,m.handleNotifyDataIsBigHwnd),t.setNotifyFunc(101,m.handleSetMicVol),t.setNotifyFunc(102,m.handleSetSpkVol),t.setNotifyFunc(103,m.handleSetCamera),t.setNotifyFunc(104,m.handleModeSwitchNotify),t.setNotifyFunc(105,m.handleDial),t.setNotifyFunc(106,m.handlePageSwitchNotify),t.setNotifyFunc(107,m.handleWatchNotify),t.setNotifyFunc(108,m.handleChairman),t.setNotifyFunc(109,m.handleHangup),t.setNotifyFunc(110,m.handleAddMemberDialog),t.setNotifyFunc(111,m.handleAttendanceDialog),t.setNotifyFunc(112,m.handleShowQos),t.setNotifyFunc(113,m.handleQueryUserInfo),t.setNotifyFunc(114,m.handleConfCtrl),t.setNotifyFunc(115,m.handleCPURate),t.setNotifyFunc(116,m.handleActiveBidirection),t.setNotifyFunc(117,m.handleRemoveVideo),t.setNotifyFunc(118,m.handleConfRecording),t.setNotifyFunc(119,m.handleShowVideoDevSettings),t.setNotifyFunc(120,m.handleUpdateAuxHwnd),t.setNotifyFunc(121,m.handleMemberListMoving),t.setNotifyFunc(122,m.handleMemberListFocus),t.setNotifyFunc(123,m.handleMemberListWindowStatus),t.setNotifyFunc(124,m.handleStartIMChat),t.setNotifyFunc(125,m.handleUserNotActive),t.setNotifyFunc(126,m.handleUserCustomMenuClick),t.setNotifyFunc(127,m.handleOperateBrowserHwnd),t.setNotifyFunc(128,m.handleAlertBoxResult),t.setNotifyFunc(129,m.handleStopWatchByNative),t.setNotifyFunc(130,m.handleNativeUserClick),t.setNotifyFunc(131,m.handleMonitorNumber);case 53:case"end":return e.stop()}},e,void 0)})),o);t.default=m},70:function(e,t,n){var r=n(8),a=r.JSON||(r.JSON={stringify:JSON.stringify});e.exports=function(e){return a.stringify.apply(a,arguments)}},700:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(3),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(4),p=r(d),h=n(5),_=r(h),g=n(249),m=n(227),v=n(705),C=r(v),I=n(273),w=n(706),S=r(w),E=n(708),N=r(E),T=coreLogger.getLogger("dataconf")("model"),b=function(){function e(){var t=this;(0,p.default)(this,e),this.setConfCtrlNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getConfCtrlInstance();case 2:n=e.sent,n.setNotifyFunc(491593,t.handleGetDataConfResource);case 4:case"end":return e.stop()}},e,t)})),this.setDataConfNotifyFunc=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("set data confctrl service callback func"),!m.DFConfig.isPc){e.next=21;break}return e.next=4,coreTup.getdataConfInstance();case 4:n=e.sent,n.setNotifyFunc(40001001,t.handleJoinDataConfResult),n.setNotifyFunc(40001002,t.handleEndDataConfResult),n.setNotifyFunc(40001003,t.handleLeaveDataConfResult),n.setNotifyFunc(40001020,t.handlePingCompleteResult),n.setNotifyFunc(40001021,t.handlePingProgressResult),n.setNotifyFunc(40001109,t.handleUserEnterResult),n.setNotifyFunc(40001110,t.handleUserLeaveResult),n.setNotifyFunc(40000130,t.handleStarJoinConf),n.setNotifyFunc(40001010,t.handleFlowControlResult),n.setNotifyFunc(40001051,t.handleNetReportReportResult),n.setNotifyFunc(40001105,t.handleUserPresentChangeResult),n.setNotifyFunc(40001203,t.handleUserPhoneStatusResult),n.setNotifyFunc(40001229,t.handleOnConfMsgPhoneConfInfo),n.setNotifyFunc(40001062,t.handlePingCallback),n.setNotifyFunc(40001063,t.handleNewConfHandle),n.setNotifyFunc(40001233,t.handleNegoCapResult);case 21:case"end":return e.stop()}},e,t)})),this.joinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==n){e.next=2;break}return e.abrupt("return",s.default.reject("joinData params is null"));case 2:return coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,params:[coreConf.getCurrentConfId()]}),e.next=5,coreAccount.getMyInfo();case 5:if(r=e.sent,a=r.bind_no||"",T.info("joinDataConf  start, bind_no is "+handlePhoneNumber(a)+",  sip_num is "+handlePhoneNumber(n.sip_num)),t.dataConfStatus=I.DCONF_STATUS.JOINING,t.confInfo=n,!m.DFConfig.userSipNumberRequestBigParams){e.next=16;break}return e.next=13,t.getSipNumber();case 13:a=e.sent,e.next=17;break;case 16:a=isNullOrEmpty(n.sip_num)?a:n.sip_num;case 17:return t.myBindNo=a,e.next=20,t.requestBigParams(n);case 20:if(null!==(o=e.sent)){e.next=24;break}return t.handleJoinDataFail(),e.abrupt("return");case 24:return t.trackerGetServerIp(o.param.conf_param.server_ip),e.next=27,t.buildJoinParams(o.param,n);case 27:return i=e.sent,t.bigParam=i,m.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWsaveIpParam",{sbcIP:i.conf_param.sbc_server_address,msIP:i.conf_param.server_ip}),t.selfUserUri=i.conf_param.user_uri,e.next=33,t.startJoinDataConf(i);case 33:T.info("start join data conf over");case 34:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.retryJoin=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.dataConfStatus===I.DCONF_STATUS.JOIN_FAIL){e.next=3;break}return T.info("retry join, status is not fail"),e.abrupt("return");case 3:if(!t.confInfo){e.next=8;break}return t.bigParamRequestCount=0,e.abrupt("return",t.joinDataConf(t.confInfo));case 8:T.info("retry join,confInfo is null");case 9:case"end":return e.stop()}},e,t)})),this.retryJoinOnStg=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("retry join on stg"),null!==t.bigParam&&null!==t.bigParam.conf_param){e.next=5;break}return T.info("retry join on stg fail,bigparam is null"),t.handleJoinDataFail(),e.abrupt("return");case 5:m.DFConfig.isMobile?t.bigParam.conf_param.firewallmode=m.DFConfig.firewallType:t.bigParam.firewallmode=m.DFConfig.firewallType,t.startJoinDataConf(t.bigParam);case 7:case"end":return e.stop()}},e,t)})),this.buildStgTunnelJoinData=(0,l.default)(u.default.mark(function e(){var n,r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("build stg tunnel for join data"),m.DFConfig.firewallType=I.DATA_FIREWALL_MODE.STG,e.next=4,coreAccount.getLoginModel();case 4:if(n=e.sent,r=n.stgAccount,void 0===(a=n.stgUri)||""===a||";"===a||";;"===a||";;;"===a){e.next=26;break}return e.next=10,coreSecurity.getPasswordManager();case 10:return o=e.sent,e.next=13,o.getPassword("stgPassword");case 13:return i=e.sent,T.info("building stg tunnel"),e.next=17,coreAccount.buildStgTunnel({stgUri:a,stgAccount:r,stgPassword:i});case 17:if(s=e.sent,s.result){e.next=23;break}return e.next=21,t.handleJoinDataFail();case 21:e.next=24;break;case 23:t.retryJoinOnStg();case 24:e.next=27;break;case 26:t.handleJoinDataFail();case 27:case"end":return e.stop()}},e,t)})),this.trackerGetServerIp=function(e){m.DFConfig.supportBuried&&coreCommon.Observer.publish("OnGetServerIp",e)},this.buildJoinParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r){var a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(m.DFConfig.isPc?(n.firewallmode=m.DFConfig.firewallType,n.servertype=m.DFConfig.serverType(),n.confparam_url=r.conf_uri,n.language="zh-CN",n.stgaddress=m.DFConfig.stgAddresslist,m.DFConfig.isPc&&(isNullOrEmpty(n.conf_param.data_codec_ver)||"1.0"!==n.conf_param.data_codec_ver.toLowerCase())?n.conf_param.option=8388736:n.conf_param.option=8388608,m.DFConfig.useSBC||(n.conf_param.sbc_server_address="")):(n.conf_param.firewallmode=m.DFConfig.firewallType,n.conf_param.bigParamServerAddress=r.conf_uri),a=C.default.cutstr(n.conf_param.conf_name,30),o=C.default.cutstr(n.conf_param.user_name,30),n.conf_param.conf_name=a,n.conf_param.user_name=o,isNullOrEmpty(n.conf_param.user_uri)&&(T.info("user_uri is empty,set myBindNo = "+t.myBindNo),n.conf_param.user_uri=t.myBindNo),n.conf_param.bind_number=n.conf_param.user_uri,t.userBindNum=n.conf_param.bind_number,i=n.conf_param.data_codec_ver,!t.shouldSetCodeccVersion(i)){e.next=15;break}return e.next=12,t.buildCodeccParams();case 12:s=e.sent,m.DFConfig.isPc?n.codec_param=s:n.conf_param.codec_param=s,T.info("set codec param: ",s);case 15:return T.info(" confinfonotify conf_param :  ",{sbc_server_address:n.conf_param.sbc_server_address,server_ip:n.conf_param.server_ip,firemode:m.DFConfig.firewallType,M:n.conf_param.M,T:n.conf_param.T}),e.abrupt("return",n);case 17:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.buildCodeccParams=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreCall.assignBandwidthForData(t.call_id);case 2:return n=e.sent,e.abrupt("return",{encodeVerType:30,maxBitRate:n,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:m.DFConfig.decFr(),maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:m.DFConfig.encFr()});case 4:case"end":return e.stop()}},e,t)})),this.shouldSetCodeccVersion=function(e){var n=!0;return m.DFConfig.isPc&&(isNullOrEmpty(e)?(T.info("data_codec_ver is null"),m.DFConfig.isWin||m.DFConfig.isMac?t.setDataCodeccVersion(5):(t.setDataCodeccVersion(0),n=!1)):(T.info("dataCodecVersion = "+e),"1.0"===e.toLowerCase()?t.setDataCodeccVersion(0):("3.0"===e.toLowerCase()||e.toLowerCase(),t.setDataCodeccVersion(5)))),n},this.requestBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.requestBigParamFromTup(n);case 2:if(r=e.sent,!(r.param&&r.param.conf_param&&r.param.conf_param.conf_id&&""!==r.param.conf_param.conf_id)){e.next=7;break}return e.abrupt("return",r);case 7:if(!(t.bigParamRequestCount>=5)){e.next=12;break}return T.info(" retryGetDataConfBigParams 5 times , stop retry"),e.abrupt("return",null);case 12:return e.next=14,t.requestBigParams(n);case 14:return e.abrupt("return",e.sent);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestBigParamFromTup=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.bigParamRequestCount++,T.info("getDataConfBigParams start times = "+t.bigParamRequestCount),r={conf_id:n.conf_id,conf_url:n.conf_uri,mcu_addr:{server_addr:"",server_port:0},random:n.data_random,passcode:n.passcode,password:n.password,sip_num:t.myBindNo,type:n.getParamType||3},e.next=5,coreTup.getConfCtrlInstance();case 5:return a=e.sent,e.next=8,a.getDataConfBigParam(r);case 8:return o=e.sent,T.info("getDataConfBigParams end times = "+t.bigParamRequestCount),e.abrupt("return",o);case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getSipNumber=(0,l.default)(u.default.mark(function e(){var n,r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return n=e.sent,r=n.sipImpi,T.info("sipImpi = ",r),a=r,isNullOrEmpty(a)||-1!==(o=a.indexOf("@"))&&(a=a.slice(0,o)),e.abrupt("return",a);case 8:case"end":return e.stop()}},e,t)})),this.requestWBToken=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.requestWBToken(n):T.info("requestWBToken shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.advancedSetting=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.advancedSetting(n,r):T.info("advancedSetting shareservice is null");case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setCallId=function(e){T.info("setCallId = ",e),t.call_id=e},this.getSelfAudioNumber=function(){if(""===t.selfAudioNumber)for(var e=(0,g.getUpdatedParticipants)(),n=0;n<e.length;++n){var r=e[n];1===r.is_self&&(t.selfAudioNumber=r.number,T.info("getSelfAudioNumber : "+handlePhoneNumber(t.selfAudioNumber)))}return t.selfAudioNumber},this.getNegoBandwidth=function(){return t.negoBandwidth},this.setDataCodeccVersion=function(e){m.DFConfig.dataCodeccVersion=e,T.info("dataCodeccVersion = "+e)},this.getDataCodeccVersion=function(){return m.DFConfig.dataCodeccVersion},this.startJoinDataConf=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info(" startJoinDataConf"),t.dataConfStatus===I.DCONF_STATUS.JOINING){e.next=4;break}return T.info("current dataConfStatus is"+t.dataConfStatus+", no need join dataconf "),e.abrupt("return");case 4:if(!m.DFConfig.isMobile){e.next=8;break}window.mobileStartJoinDataConf((0,o.default)(n.conf_param)),e.next=23;break;case 8:return e.next=10,coreTup.getCallInstance();case 10:return r=e.sent,r.setStgTunnel(t.call_id,0),e.next=14,coreTup.getdataConfInstance();case 14:return a=e.sent,i="<UserInfo><UserType>2</UserType></UserInfo>",n.conf_param.user_info=i,n.conf_param.user_info_len=i.length,n.conf_param.call_id=t.call_id,e.next=21,a.startjoinconf(n);case 21:s=e.sent,0===s.param.result?T.info("start conf success"):(coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),T.error("start conf failed"));case 23:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setLeftConfCallback=function(e){t.leftDataConfCallback=e},this.getApplist=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService?t.shareService.getApplist():T.error("get applist error:shareservice is null");case 1:case"end":return e.stop()}},e,t)})),this.setDataCodecVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:if(r=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return T.info("setDataCodecVersion, m_confhandle : "+t.m_confHandle),e.next=7,r.setDataCodecVersion(t.m_confHandle,n);case 7:a=e.sent,0!==a.param.result?T.info("setDataCodecVersion failed, result = ",a.result):T.info("setDataCodecVersion success, result = ",a.result),e.next=12;break;case 11:T.error("setDataCodecVersion failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getUserAltId=function(e){return t.memberService?t.memberService.getUserAltId(e):""},this.getMemberNameByUserId=function(e){return t.memberService?t.memberService.getMemberNameByUserId(e):""},this.getBindnoByUserid=function(e){return t.memberService?t.memberService.getBindnoByUserid(e):""},this.getDataShareOwnerBindno=function(){return t.shareService&&""!==t.shareService.shareOwnerUserId?t.getBindnoByUserid(t.shareService.shareOwnerUserId):t.shareService&&t.shareService.wbService&&t.shareService.wbService.m_ownerUserid>0?(T.info("this.shareService.wbService.m_ownerUserid = ",t.shareService.wbService.m_ownerUserid),t.getBindnoByUserid(t.shareService.wbService.m_ownerUserid)):""},this.changeRemoteControl2Other=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle||""===n||null===t.shareService){e.next=4;break}if(0===(r=Number(t.getUserAltId(n)))){e.next=4;break}return e.abrupt("return",t.shareService.changeRemoteControl2Other(r));case 4:return T.error("dataconf setRemoteControl2Other fail ,confhandle : "+t.m_confHandle),e.abrupt("return",!1);case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService?(T.error("dataconf delRemoteControlPrivilege success ,confhandle : "+t.m_confHandle),r=void 0,r=void 0===n||""===n?Number(t.m_user_id):Number(t.getUserAltId(n)),t.shareService.delRemoteControlPrivilege(r)):T.error("dataconf delRemoteControlPrivilege fail ");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&""!==n&&t.shareService&&(r=Number(t.getUserAltId(n)),t.shareService.rejectRemoteControlPrivilege(r));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:0!==t.m_confHandle&&t.shareService&&t.shareService.requestRemoteControlPrivilege();case 1:case"end":return e.stop()}},e,t)})),this.inputWndMsg=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i){var s,c;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(0===t.m_confHandle){e.next=7;break}return e.next=3,coreTup.getdataConfInstance();case 3:return s=e.sent,e.next=6,s.asInputwndmsg(t.m_confHandle,n,r,a,o,i);case 6:c=e.sent;case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),this.leaveconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("dataconf leaveconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=10;break}return T.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),t.shareService.isDataShareStarted=!1,e.next=7,coreTup.getdataConfInstance();case 7:return n=e.sent,e.next=10,n.leaveconf(t.m_confHandle);case 10:case"end":return e.stop()}},e,t)})),this.terminateconf=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("dataconf terminateconf ,confhandle = "+t.m_confHandle),0===t.m_confHandle||0===t.m_confHandle){e.next=13;break}return T.info("leaveconf call id = ",t.call_id),t.stopStgTunnel(),e.next=6,coreTup.getdataConfInstance();case 6:return n=e.sent,e.next=9,n.terminateconf(t.m_confHandle);case 9:return e.next=11,t.releaseConfHandle();case 11:T.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 13:case"end":return e.stop()}},e,t)})),this.setDataShareCanvasSize=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.error("setDataShareCanvasSize ,confhandle = "+t.m_confHandle),0===t.m_confHandle){e.next=6;break}return e.next=4,coreTup.getdataConfInstance();case 4:r=e.sent,r.setDataShareScreenParam(t.m_confHandle,{width:n.width,height:n.height});case 6:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopStgTunnel=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,coreTup.getCallInstance();case 3:n=e.sent,n.setStgTunnel(t.call_id,3);case 5:case"end":return e.stop()}},e,t)})),this.handleFlowControlResult=function(e){T.error("handleFlowControlResult start")},this.handleNetReportReportResult=function(e){T.info("handleNetReportReportResult start")},this.handleUserPresentChangeResult=function(e){T.info("handleUserPresentChangeResult start")},this.handleUserPhoneStatusResult=function(e){T.info("handleUserPhoneStatusResult start")},this.handleOnConfMsgPhoneConfInfo=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISBIGWIN){e.next=2;break}return e.abrupt("return");case 2:if(T.info("handleOnConfMsgPhoneConfInfo data = ",n),!n||!n.param||void 0===n.param.auxtokenresult){e.next=9;break}if(1!==n.param.auxtokenresult){e.next=9;break}return e.next=7,coreTup.getdataConfInstance();case 7:r=e.sent,r.sendNotifyAllUsersCloseSharingTab(t.m_confHandle,t.m_user_id,23);case 9:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleNewConfHandle=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.value1||0!==n.param.value2){e.next=9;break}return T.error("new confhandle success, confhandle : ",n.param.value1),t.m_confHandle=n.param.value1,t.shareService=new S.default(t.m_confHandle,t.call_id),t.shareService.memberService=t.memberService,e.next=7,t.shareService.initShareService();case 7:e.next=10;break;case 9:T.error("new confhandle fail, errcode : ",n.param.value2);case 10:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("handleJoinDataConfResult start"),!n.param.confHandle||0!==n.param.value1){e.next=8;break}return t.m_confHandle=n.param.confHandle,t.setDataConfParams({dataConfHandle:t.m_confHandle}),e.next=6,t.shareService.loadShareComponent();case 6:e.next=11;break;case 8:T.error("handleJoinDataConfResult  joindataconf fail, errcode : "+n.param.value1+"confHandle : "+n.param.confHandle),t.m_confHandle=n.param.confHandle,t.handleJoinDataFail();case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleEndDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("handleEndDataConfResult start"),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=4;break}return T.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 4:t.isCascade?(T.info("PC cascade conf end data conf"),coreConf.actionLeaveConf()):t.beLeaveDataConf();case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleLeaveDataConfResult=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=3;break}return T.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 3:t.isCascade?(T.info("PC cascade conf leave data conf"),coreConf.actionLeaveConf()):(T.info("handleLeaveDataConfResult start"),t.beLeaveDataConf());case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.releaseConfHandle=(0,l.default)(u.default.mark(function e(){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t.m_confHandle>0)){e.next=20;break}return T.info("releaseConfHandle start"),n=t.m_confHandle,t.m_confHandle=0,e.next=6,t.showNativeDataControl(!1);case 6:return e.next=8,t.closeNativeDataSharingWnd();case 8:return e.next=10,coreTup.getdataConfInstance();case 10:r=e.sent,r.releaseDataConfHandle(n),coreCommon.Observer.publish("OnReleaseHandle",{}),coreCommon.dispatchModuleEvent("pluginConfStateNotify",{state:constant.CLK_PLUGIN_CONFLIFECYCLE.END}),coreCommon.Observer.publish("onDataSharingStateChanged",!1),t.shareService=null,t.m_user_id=0,T.info("releaseConfHandle end"),e.next=21;break;case 20:T.info("releaseConfHandle: confHandle is null");case 21:case"end":return e.stop()}},e,t)})),this.getMyNumberfromContact=function(){for(var e=$getState(),t=e.conf.memberListInfo,n=0;n<t.length;n++)if(t[n].is_self)return t[n].number},this.getMyUserId=function(){return t.m_user_id},this.handlePingProgressResult=function(e){T.info("handlePingProgressResult start")},this.handleUserEnterResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:return r=e.sent,e.next=5,coreAccount.getMyInfo();case 5:if(a=e.sent,o=r.sipAccount,i=a.bind_no,T.info("handleUserEnterResult start, sipAccount : "+handlePhoneNumber(o)+", useruri:"+handlePhoneNumber(n.param.user_alt_uri)+",userid:"+n.param.user_alt_id+",myBindNo:"+handlePhoneNumber(i)),!n.param.confHandle||n.param.confHandle===t.m_confHandle){e.next=12;break}return T.error("confhandle is diff,old = "+t.m_confHandle+",new = "+n.param.confHandle),e.abrupt("return");case 12:s=!1,""===n.param.user_alt_uri||i!==n.param.user_alt_uri&&t.getSelfAudioNumber()!==n.param.user_alt_uri&&t.dataResourceUserNumber!==n.param.user_alt_uri&&t.selfUserUri!==n.param.user_alt_uri&&o!==n.param.user_alt_uri||(T.info("self enter"),0===t.m_user_id&&coreCommon.Observer.publish("handleSelfEnterResult",{}),t.m_user_id=n.param.user_alt_id,t.shareService.m_user_id=t.m_user_id,t.dataConfStatus=I.DCONF_STATUS.IN_CONF,s=!0,T.info("handleUserEnterResult setmyuserid : "+n.param.user_alt_id+",user_alt_uri : "+handlePhoneNumber(n.param.user_alt_uri))),t.memberService.addMember(n,s);case 15:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleUserLeaveResult=function(e){if(T.info("handleUserLeaveResult start"),e.param.confHandle&&e.param.confHandle!==t.m_confHandle)return void T.error("confhandle is diff,old = "+t.m_confHandle+",new = "+e.param.confHandle);t.memberService.deleteMember(e),e.param.isSelf=e.param.user_alt_id===t.m_user_id,coreCommon.Observer.publish("dataUserleave",e)},this.handleNegoCapResult=function(){var e=(0,l.default)(u.default.mark(function e(n){var r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("onNegoCapResult data"+(0,o.default)(n)),t.negoBandwidth=n.param.capability.maxbitrate,window.CLIENTCONFIG.ISBIGWIN&&(r=n.param.capability.encodevertype,30===r?3===m.DFConfig.dataCodeccVersion?t.setDataCodeccVersion(3):t.setDataCodeccVersion(5):t.setDataCodeccVersion(0),T.info("use data codecc version ",m.DFConfig.dataCodeccVersion)),T.info("use bandwidth ",t.negoBandwidth);case 4:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.getDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,p,h){var _,g,m;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return _={conf_url:n,conf_id:r,nick_name:a,password:o,number:i,user_id:s,server_ip:c,pin_code:f,participant_id:l,server_type:d,language:p,data_site_bandwidth:h},T.info("getDataConfResource start, params : "),e.next=4,coreTup.getConfCtrlInstance();case 4:return g=e.sent,e.next=7,g.getDataConfResource(_);case 7:return m=e.sent,T.info("getDataConfResource end"),e.abrupt("return",m);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l,d){return e.apply(this,arguments)}}(),this.getDataConfBigParams=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){var f,l,d,p=arguments.length>7&&void 0!==arguments[7]?arguments[7]:3;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return f={conf_id:n,conf_url:r,mcu_addr:a,random:o,passcode:s,password:i,sip_num:c,type:p},T.info("getDataConfBigParams start"),e.next=4,coreTup.getConfCtrlInstance();case 4:return l=e.sent,e.next=7,l.getDataConfBigParam(f);case 7:return d=e.sent,T.info("getDataConfBigParams end"),e.abrupt("return",d);case 10:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.handleGetDataConfResource=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:T.info("handleGetDataConfResource start, new confparams  "),r=n.param.conf_params,a=null,r.ms_address&&(o=r.ms_address.split(":"),a=o.length>0?r.ms_address.split(":")[0]:r.ms_address),T.info("ms_address_without_port",a),T.info("handleGetDataConfResource sip number is :"+handlePhoneNumber(r.number)+", bind_no is :"+handlePhoneNumber(r.bind_number)),1===r.has_data_resource?(r.conf_id&&""!==r.conf_id&&"0"!==r.conf_id&&(t.bigParam.conf_param.conf_id=r.conf_id),t.bigParam.conf_param.M=r.M,t.bigParam.conf_param.T=r.T,r.user_id&&""!==r.user_id&&"0"!==r.user_id&&(t.bigParam.conf_param.user_id=r.user_id),isNullOrEmpty(r.number)||(t.bigParam.conf_param.user_uri=r.number),isNullOrEmpty(r.bind_number)||(t.bigParam.conf_param.bind_number=t.userBindNum),t.dataResourceUserNumber=r.number,t.bigParam.conf_param.server_ip=a,t.startJoinDataConf(t.bigParam),T.info("handleGetDataConfResource end , bigparam : ")):T.info("handleGetDataConfResource fail ");case 7:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleServerTypeForGetResource=function(e,t){var n=m.DFConfig.firewallType===I.DATA_FIREWALL_MODE.STG?1:0;if(m.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING&&e&&t){var r=e.split(";");if(r.length>0)for(var a=0;a<r.length;a++)""!==r[a]&&t.split(":").length>0&&r[a].split(":").length>0&&t.split(":")[0]===r[a].split(":")[0]&&(n=1);n=m.DFConfig.firewallType===I.DATA_FIREWALL_MODE.STG?2:n}return n},this.handleBandwidthForGetResource=(0,l.default)(u.default.mark(function e(){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=0,!(m.DFConfig.deployMode===constant.MEETING_NET_TYPE.SMC_MEETING||m.DFConfig.deployMode===constant.MEETING_NET_TYPE.MEDIAX_MEETING&&t.bigParam&&t.bigParam.conf_param&&t.bigParam.conf_param.server_data_cap)){e.next=5;break}return e.next=4,coreCall.assignBandwidthForData(t.call_id);case 4:n=e.sent;case 5:return e.abrupt("return",n);case 6:case"end":return e.stop()}},e,t)})),this.handlePingCallback=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a,o,i,s,c,f,l,d,p,h,_,g,v,C,I;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("handlePingCallback data start"),!(r=n.param.dst_addr)||""===r){e.next=30;break}if(T.info("handlePingCallback param "),t.isCascade=!0,a=t.confInfo.conf_uri,o=a.indexOf("/",10),o>0&&(a=a.substr(0,o)),i=t.bigParam.conf_param,s=i.conf_id,c="1"===i.user_role?i.host_key:i.part_secure_conf_num,!m.DFConfig.shouldPasscodeBase64()){e.next=15;break}return e.next=14,coreSecurity.encode64(c);case 14:c=e.sent;case 15:return f=i.user_uri,l=i.user_name,d=r,p=i.user_id,h=i.pin_code,_=i.participant_id,g=i.sbc_server_address,v=0,C=t.handleServerTypeForGetResource(g,d),I=t.handleBandwidthForGetResource(),e.next=27,t.getDataConfResource(a,s,l,c,f,p,d,h,_,C,v,I);case 27:T.info("handlePingCallback  getDataConfResource param =",{confUrl:a,confId:s,number:f,userId:p,serverIp:d,participantId:_,serverType:C,language:v,dataSiteBandwidth:I}),e.next=32;break;case 30:T.info("handlePingCallback data error, dst_addr is null stgaddr"),m.DFConfig.stgAddresslist.length>0?(T.info("handlePingCallback  Need2BuildStgTunnel"),t.buildStgTunnelJoinData()):(T.info("handlePingCallback stgaddrlist empty, joindata fail"),t.handleJoinDataFail());case 32:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.handleJoinDataFail=function(){coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN_DATA,extraTrackKey:null,resultParams:[0]}),t.releaseConfHandle(),m.DFConfig.isPc?coreCommon.Observer.publish("OnJoinDataConfFail"):coreCommon.Observer.publish("onMobileJoinDataFail"),t.dataConfStatus=I.DCONF_STATUS.JOIN_FAIL},this.setDataShareScreenGDIEXType=function(){null!==t.shareService&&t.shareService.setDataShareScreenGDIEXType()},this.setCloseShareDataOperate=function(e){if(null!==t.shareService)return t.shareService.setCloseShareDataOperate(e)},this.getCloseShareDataOperate=function(){if(null!==t.shareService)return t.shareService.getCloseShareDataOperate()},this.getStreamInfo=function(){if(null!==t.shareService)return t.shareService.getStreamInfo()},this.isInScreenSharing=function(){return null!==t.shareService&&t.shareService.isInScreenSharing()},this.isSendScreenSharing=function(){return null!==t.shareService&&t.shareService.isSendScreenSharing()},this.resetConfSharingType=function(){if(null!==t.shareService)return t.shareService.resetConfSharingType()},this.setConfSharingType=function(e,n){if(null!==t.shareService)return t.shareService.setConfSharingType(e,n)},this.getDisplayInfo=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.getDisplayInfo());case 4:T.info("get display info share service is null");case 5:case"end":return e.stop()}},e,t)})),this.setDataConfShareRealRect=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService&&(t.shareService.bigwinRealRectLeft=n,t.shareService.bigwinRealRectTop=r,t.shareService.bigwinRealRectRight=a,t.shareService.bigwinRealRectBottom=o);case 1:case"end":return e.stop()}},e,t)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),this.cancelSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.cancelSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setStart=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setStart());case 2:case"end":return e.stop()}},e,t)})),this.setAppShareScreenParam=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setAppShareScreenParam(n,r));case 2:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.setSharingapp=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.setSharingapp(n));case 2:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setDataShareScreenPicQuality=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=10;break}if(30!==n){e.next=6;break}return e.next=4,t.shareService.setDataShareScreenGDIEXType();case 4:e.next=8;break;case 6:return e.next=8,t.shareService.setDataShareScreenPicQuality(n);case 8:e.next=11;break;case 10:T.info("setDataShareScreenPicQuality failed,please check whether conf is dataConf!");case 11:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.showNativeRemoteControl(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.stopWBDoc=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.stopWBDoc();case 1:case"end":return e.stop()}},e,t)})),this.isInWBSharing=function(){return null!==t.shareService&&t.shareService.isInWBSharing()},this.isRecevingWBSharing=function(){return null!==t.shareService&&t.shareService.isRecevingWBSharing()},this.createWBNewDocAndPage=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=2;break}return e.abrupt("return",t.shareService.createWBNewDocAndPage());case 2:case"end":return e.stop()}},e,t)})),this.closeNativeDataSharingWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.closeNativeDataSharingWnd());case 4:T.error("close data window error:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.createNativeDataSharingWnd=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f,l,d,p){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.createNativeDataSharingWnd(n,r,a,o,i,s,c,f,l,d,p);case 3:return e.abrupt("return",e.sent);case 6:T.error("createNativeDataSharingWnd:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c,u,f,l){return e.apply(this,arguments)}}(),this.showNativeDataControl=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=6;break}return e.next=3,t.shareService.showNativeDataControl(n,r,a,o,i,s,c);case 3:return e.abrupt("return",e.sent);case 6:T.error("showNativeDataControl:share service is null");case 7:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s){return e.apply(this,arguments)}}(),this.getIsUsePrimarySize=function(){return null!==t.shareService&&t.shareService.isUsePrimarySize},this.changeIsUsePrimarySize=function(){null!==t.shareService&&(t.shareService.isUsePrimarySize=!t.shareService.isUsePrimarySize)},this.isRemoteControling=function(){return null!==t.shareService&&!0===t.shareService.isInRemoteControlling},this.getRemoteControlUserNum=function(){return t.shareService.remoteControlUserNum||""},this.isDataShareStarted=function(){return!!t.shareService&&t.shareService.isDataShareStarted},this.isReceivingDataShare=function(){return!!t.shareService&&t.shareService.isReceivingDataShare()},this.setDataNegoMaxCap=function(){var e=(0,l.default)(u.default.mark(function e(n,r,a,o,i,s,c,f){var l,d;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:if(l=e.sent,!(t.m_confHandle>0&&t.m_user_id>0)){e.next=11;break}return T.info("setDataNegoMaxCap, m_confhandle : "+t.m_confHandle),e.next=7,l.setDataNegoMaxCap(t.m_confHandle,n,r,a,o,i,s,c,f);case 7:d=e.sent,0!==d.result?T.info("setDataNegoMaxCap failed, result = ",d.result):T.info("setDataNegoMaxCap success, result = ",d.result),e.next=12;break;case 11:T.error("setDataNegoMaxCap failed, m_confhandle : "+t.m_confHandle);case 12:case"end":return e.stop()}},e,t)}));return function(t,n,r,a,o,i,s,c){return e.apply(this,arguments)}}(),this.docShareCompLoadSucCallback=function(e){if(null===t.shareService||!(t.shareService.loadDocSharePromise instanceof s.default))return void T.info("data conf service init error");t.shareService.loadDocSharePromise.timeout(8e3,-1),t.shareService.loadDocSharePromise.then(function(t){T.info("docShareCompLoadSucCallback loadDocSharePromise success ",t),0===t&&e&&"function"==typeof e&&e()})},this.startShare=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",t.shareService.startShare(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isInSendDocSharing=function(){return!!t.shareService&&t.shareService.isInSendDocSharing()},this.isInReceiveDocSharing=function(){return null!==t.shareService&&t.shareService.isInReceiveDocSharing()},this.isRecevingSharing=function(){return null!==t.shareService&&t.shareService.isRecevingSharing()},this.stopDocSharing=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===t.shareService){e.next=5;break}return T.info("docshare stopDocSharing"),e.next=4,t.shareService.stopDocShare();case 4:t.resetConfSharingType();case 5:case"end":return e.stop()}},e,t)})),this.handleShareEnd=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:null!==t.shareService?t.shareService.handleShareEnd(n):T.info("handle share end: share service is null");case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setNativeDataControlStatus=function(e){t.shareService&&t.shareService.setNativeDataControlStatus(e)},this.isConfDataShareLoadSuccess=function(){return null!==t.shareService&&!0===t.shareService.hasLoadDataShareComp},this.getSharingType=function(){return null===t.shareService?(T.info("get sharing type shareService error"),-1):t.shareService.sharingType},this.stopShareScreen=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=3;break}return e.next=3,t.shareService.stopShareScreen();case 3:case"end":return e.stop()}},e,t)})),this.isConfDocShareLoadSuccess=function(){return null!==t.shareService&&t.shareService.loadDocSharePromise instanceof s.default&&"resolved"===t.shareService.loadDocSharePromise.status},this.getDocShareFilePath=function(){return t.shareService?t.shareService.docSharingFilePath:""},this.openDocShareFile=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:!window.CLIENTCONFIG.ISMOBILE&&t.shareService&&(T.info("openDocShareFile called"),t.shareService.openDocShareFile(n));case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isJoiningDataConf=function(){return t.dataConfStatus===I.DCONF_STATUS.JOINING},this.isSelfJoinedDataConf=function(){return t.dataConfStatus===I.DCONF_STATUS.IN_CONF},this.isLeavingDataConf=function(){return t.dataConfStatus===I.DCONF_STATUS.LEAVING},this.getDataConfMemberList=function(){return t.memberService.dataUserList},this.leaveMobileDataConf=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(m.DFConfig.isMobile){T.info("leaveMobileDataConf android start"),e&&1===window.sipCreateLeaveConf?window.sipCreateLeaveConf=2:window.sipCreateLeaveConf=0;var n=$getState().call.callStatus;T.info("callStatus = "+n),"CALL_CONNECTED"===n&&coreConf.isInReCall()&&(T.info("DataConfService.leaveMobileDataConf(): SCREEN_ORIENTATION_PORTRAIT"),window.changeScreenOrientation(constant.SCREEN_ORIENTATION.SCREEN_ORIENTATION_PORTRAIT)),window.showWebView(),window.leaveMobileDataConf(e),coreCommon.Observer.publish("onMobileLeaveDataConf",{}),t.dataConfStatus=I.DCONF_STATUS.LEFT}},this.stopAllShare=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!m.DFConfig.whiteBoardShareEnable||!t.isInWBSharing()){e.next=4;break}return T.info("leaveDataConf stopWBDoc"),e.next=4,t.stopWBDoc();case 4:if(!m.DFConfig.isDocShareEnabled()||!t.isInSendDocSharing()){e.next=8;break}return T.info("leaveDataConf stopDocSharing"),e.next=8,t.stopDocSharing();case 8:if(!t.isInScreenSharing()||t.isReceivingDataShare()){e.next=13;break}return T.info("before stopShareScreen"),e.next=12,t.stopShareScreen();case 12:T.info("after stopShareScreen");case 13:case"end":return e.stop()}},e,t)})),this.leaveDataConf=function(){var e=(0,l.default)(u.default.mark(function e(){var n=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("leave data conf"),t.leaveMobileDataConf(n),e.next=4,t.stopAllShare();case 4:return e.next=6,t.leaveconf();case 6:return e.next=8,t.releaseConfHandle();case 8:T.info("leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 10:case"end":return e.stop()}},e,t)}));return function(){return e.apply(this,arguments)}}(),this.beLeaveDataConf=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("beLeaveDataConf type "),t.leaveMobileDataConf(),e.next=4,t.releaseConfHandle();case 4:T.info("be leave data conf release conf handle finished!"),t.leftDataConfCallback&&t.leftDataConfCallback();case 6:case"end":return e.stop()}},e,t)})),this.handleNativeNotifyResetRenderRect=function(e){T.info("handleNativeNotifyResetRenderRect start"),t.shareService&&t.shareService.handleNativeNotifyResetRenderRect(e)},this.setDataConfParams=function(){var e=(0,l.default)(u.default.mark(function e(n){var r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("setDataConfParams,data ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,T.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.isSelfSharing=function(){return t.shareService&&t.shareService.shareOwnerUserId===t.m_user_id},this.onMobileDataConfCallback=function(e){try{if(T.info("onMobileDataConfCallback receive : ",e.type),"joinDataResult"===e.type)T.info("publish onMobileJoinDataConf"),coreCommon.Observer.publish("onMobileJoinDataConf",{});else if("shareMemberChange"===e.type)T.info("shareMemberChange, userid : "+handlePhoneNumber(e.userid)),coreCommon.Observer.publish("onMobileShareUserIdChange",e.userid,e.username);else if("dataSharingFlag"===e.type)T.info("dataSharingFlag, flag : "+e.status),coreCommon.Observer.publish("onMobileSharingFlagChange",e.status);else if("regetbigparams"===e.type){T.info("regetbigparams, addr : "+e.bestaddr),coreCommon.Observer.publish("onMobileSharingFlagChange",e.bestaddr);var n={param:{dst_addr:""}};n.param={},n.param.dst_addr=e.bestaddr,"stgaddr"===e.bestaddr&&(n.param.dst_addr=t.bigParam.conf_param.stg_server_address),t.handlePingCallback(n)}else"onMobilePingCallback"===e.type?(T.info("onMobilePingCallback"),m.DFConfig.stgAddresslist&&m.DFConfig.stgAddresslist.length>0?(T.info("onMobilePingCallback  Need2BuildStgTunnel"),coreCommon.Observer.publish("OnNeed2BuildStgTunnel",{})):(T.info("onMobilePingCallback stgaddrlist empty, joindata fail"),coreCommon.Observer.publish("onMobileJoinDataFail",{}))):"joinDataFail"===e.type?(T.info("mobile joinDataFail"),coreCommon.Observer.publish("onMobileJoinDataFail",{})):"closecall"===e.type?(T.info("mobile onDataConfClosed leaveConf"),t.isCascade&&coreConf.actionLeaveConf(),m.DFConfig.shouldSendServerInfoNotify()&&coreCommon.Observer.publish("OnMeetingHWreCallTimeOut","call end by server abnormal hangup")):"confMsgOnPhoneEnterInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneEnterInd",e):"confMsgOnPhoneLeaveInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneLeaveInd",e):"confMsgOnPhoneCallAudioStatusInd"===e.type?coreCommon.Observer.publish("confMsgOnPhoneCallAudioStatusInd",e):"confMsgOnPhoneUriInd"===e.type&&coreCommon.Observer.publish("confMsgOnPhoneUriInd",e)}catch(e){T.error("onMobileDataConfCallback exception : ",e)}},this.changeShareMonitorType=function(e){t.shareService?t.shareService.shareMonitorType=e:T.error("changeShareMonitorType ,service is null")},this.setShareAppHwnd=function(e){T.info("set share app hwnd:"+e),t.shareService?t.shareService.shareAppHwnd=e:T.error("set share app error.service is null")},this.getShareAppHwnd=function(){return T.info("get share app hwnd"),t.shareService?t.shareService.shareAppHwnd:0},this.getShareAudio=function(){return T.info("get share audio"),!!t.shareService&&t.shareService.shareAudio},this.setOldShareAppHwnd=function(e){T.info("set old app hwnd:"+e),t.shareService?t.shareService.oldShareAppHwnd=e:T.error("set old app error.service is null")},this.getOldShareAppHwnd=function(){return T.info("get old app hwnd"),t.shareService?t.shareService.oldShareAppHwnd:0},this.setTransparentwindow=function(){var e=(0,l.default)(u.default.mark(function e(n,r){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setTransparentwindow(n,r);case 1:case"end":return e.stop()}},e,t)}));return function(t,n){return e.apply(this,arguments)}}(),this.isRecevingAppshare=function(){return!!t.shareService&&t.shareService.isRecevingAppshare},this.setDataShareVersion=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.shareService&&t.shareService.setDataShareVersion(n);case 1:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var e=(0,l.default)(u.default.mark(function e(n){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinAttach(n));case 4:T.info("attach:share service is null");case 5:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.bfcpWinDetach=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.bfcpWinDetach());case 4:T.info("detach:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.showNativeShareSelectWnd=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.shareService){e.next=4;break}return e.abrupt("return",t.shareService.showNativeShareSelectWnd());case 4:T.info("showNativeShareSelectWnd:share service is null");case 5:case"end":return e.stop()}},e,t)})),this.m_confHandle=0,this.m_user_id=0,this.selfAudioNumber="",this.dataResourceUserNumber="",this.call_id=0,this.isCascade=!1,this.negoBandwidth=0,this.confInfo={acTmpToken:"",conf_id:"",conf_uri:"",data_random:"",dateconf_uri:"",group_uri:"",is_svc_conf:1,media_type:0,password:"",subject:"",svc_lable:[],svc_lable_count:0,vmr_id:"",getParamType:3},this.confInfo=null,this.bigParam={conf_param:{M:1,T:1,access_code:"",cm_address:"",conf_id:"",conf_name:"",crypt_key:"",data_codec_bw:0,data_codec_ver:"",host_key:"",part_secure_conf_num:"",participant_id:"",pin_code:"",sbc_server_address:"",server_data_cap:"",server_ip:"",site_id:"",site_url:"",stg_server_address:"",user_id:"",user_name:"",user_role:8,user_uri:"",option:0,bind_number:""},firewallmode:3,servertype:3,confparam_url:"",language:"",stgaddress:"",codec_param:{encodeVerType:30,maxBitRate:2048,maxDecodeSizeWidth:1920,maxDecodeSizeHeight:1080,maxDecodeFrameRate:30,maxEncodeSizeWidth:1920,maxEncodeSizeHeight:1080,maxEncodeFrameRate:30}},this.bigParam=null,window.onMobileDataConfCallback=this.onMobileDataConfCallback,this.dataConfStatus=I.DCONF_STATUS.NONE,this.bigParamRequestCount=0,this.myBindNo="",this.selfUserUri="",this.userBindNum="",this.shareService=null,this.memberService=new N.default,this.leftDataConfCallback=null}return(0,_.default)(e,[{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.shareService){e.next=3;break}return e.next=3,this.shareService.closeWBTab();case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"componentStatusUpdate",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(t){var n,r;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:return n=e.sent,r="<root><component>"+t+"</component><index>"+this.m_user_id+"</index><sender>"+this.m_user_id+"</sender><status>1</status><src>2</src></root>",T.info("componentStatusUpdate ",r),e.next=7,n.confUpdateParam(this.m_confHandle,"uc_component_status_update",r);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"updateDataShareOwner",value:function(e){this.memberService&&this.memberService.updateDataShareOwner(e)}},{key:"handlePingCompleteResult",value:function(e){T.info("handlePingCompleteResult start")}},{key:"handleStarJoinConf",value:function(e){T.info("handleStarJoinConf")}}]),e}();t.default=b},701:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(2),u=r(c),f=n(3),l=r(f),d=n(4),p=r(d),h=n(5),_=r(h),g=n(402),m=r(g),v=coreLogger.getLogger("conf")("model/confutil"),C=function(){function e(){(0,p.default)(this,e)}return(0,_.default)(e,null,[{key:"getPromise",value:function(){var e={};return e.promise=new l.default(function(t,n){e.resolve=t,e.reject=n}),e}},{key:"oneKeyEnterConfTup",value:function(){function t(e,t,r,a){return n.apply(this,arguments)}var n=(0,u.default)(o.default.mark(function t(n,r,a,i){var c,u,f,l,d,p,h,_,g,C,I=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return o.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return c={errorCode:-1,callId:""},v.info("one[Key]EnterConfTup isVideo: "+i),t.next=4,coreTup.getCallInstance();case 4:if(u=t.sent,!m.default.getInterfaceToOneKeyEnterConf()){t.next=16;break}return f={pstconfparam:{confid:r,access_code:n,conf_paswd:a},call_type:!1===i?0:1},t.next=9,u.oneKeyEnterConf(f);case 9:l=t.sent,d=void 0,d=l&&0===l.result?["oneKeyEnterConf",1]:["oneKeyEnterConf",0,l.result],coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_JOIN,params:d}),l&&0===l.result?(c.errorCode=0,l&&l.param&&l.param.callID&&(c.callId=l.param.callID)):(l&&(c.errorCode=l.result),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_JOIN,extraTrackKey:null,resultParams:[0]}),v.info("one[Key]EnterConf fail, res = "+(0,s.default)(l))),t.next=53;break;case 16:if(p=n+"*"+a+"#",I&&m.default.getDeployMode()===constant.MEETING_NET_TYPE.SMC_MEETING&&(p=n+r+"*"+a),h=e.getPromise(),u.setNotifyFunc(98308,function(e){h.resolve(e)}),_=e.getPromise(),u.setNotifyFunc(98306,function(e){_.resolve(e)}),g=null,!m.default.getInterfaceToStartVipCall()||!i){t.next=29;break}return t.next=26,u.startVipCall(p,i,this.callInfo.addrVip);case 26:g=t.sent,t.next=32;break;case 29:return t.next=31,u.startCall(p,i);case 31:g=t.sent;case 32:if(v.info("start call result = "+g.result),!g||0!==g.result){t.next=37;break}g.param&&(c.callId=g.param.call_id),t.next=40;break;case 37:return g&&(c.errorCode=g.result),u.setNotifyFunc(98308,null),t.abrupt("return",c);case 40:return t.next=42,_.promise;case 42:if(C=t.sent,v.info("CALL_E_EVT_CALL_STARTCALL_RESULT result = "+C.param.result),!C||!C.param||0!==C.param.result){t.next=51;break}return t.next=47,h.promise;case 47:c.errorCode=0,u.setNotifyFunc(98308,null),t.next=53;break;case 51:C&&C.param?c.errorCode=C.param.result:v.error("startCallResult fail ="+(0,s.default)(C)),u.setNotifyFunc(98308,null);case 53:return t.abrupt("return",c);case 54:case"end":return t.stop()}},t,this)}));return t}()}]),e}();t.default=C},702:function(e,t,n){"use strict";function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(1),i=a(o),s=n(2),c=a(s),u=n(4),f=a(u),l=n(5),d=a(l),p=n(650),h=r(p),_=n(249),g=r(_),m=n(186),v=r(m),C=coreLogger.getLogger("reCallModel")("impl"),I=function(){function e(t,n){(0,f.default)(this,e),this.recallTimer=null,this.savedRecallInfo=t,this.reCallTerminateCallBack=n,this.savedRecallConfStateInfo=null}return(0,d.default)(e,[{key:"saveStateBeforeRecall",value:function(){var e=$getState().call,t=e.isMuteMic,n=e.isSpeaker,r=e.isMuteSpk,a=e.isOpenCamera,o=$getState().conf.isConfMicMute,i={isMuteMicRecall:t||o,isMuteSpkRecall:r,isSpeaker:n,isCloseCameraRecall:!a};this.savedRecallConfStateInfo=i}},{key:"startReCall",value:function(){coreCall.changeNoStreamEndcall(0),this.saveStateBeforeRecall(),$dispatch(coreUi.changeIsRecalling(!0));var e=6e4;window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&($dispatch(coreUi.createConfTipMsg([language.READY_TO_RECALL])),e=45e3);var t=this;if(this.recallTimer=setTimeout(function(){window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?C.info("[IT-Meeting] recall more than 30s, stop recall and leave conf"):C.info("recall already keep more than 60s, leave conf"),t.reCallTerminateCallBack()},e),v.isSendScreenSharing()&&window.CLIENTCONFIG.ISWIN){$getState().login.sipLoginOnly?coreConf.getSvcAtdManager().alertBox("LOW_BW_END_SHARE",0,1):alert(language.LOW_BW_END_SHARE)}this.startReToConf()}},{key:"startReToConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return C.info("startReToConf"),t=!1,$getState().conf.isStartScreenShare&&window.CLIENTCONFIG.ENABLE_IT_MEETING&&!window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t=!0,window.sipCreateLeaveConf=1),e.next=5,h.leaveConf(t);case 5:C.info("leave conf suc"),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.changesvcRecallorNot(!0)),$dispatch(coreUi.changeSvcNativeToJS({})),this.reCallEnterConf();case 10:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallEnterConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t,n,r,a,o,s,c;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreAccount.getLoginModel();case 2:if(t=e.sent,n=t.isSipRegSuc()){e.next=7;break}return C.error("reCallEnterConf,is not Registered, can not recall"),e.abrupt("return");case 7:return e.next=9,coreSecurity.decryptKMC(this.savedRecallInfo.conf_paswd);case 9:return r=e.sent,C.info("decryptKMC suc"),a=r&&r.param&&r.param.PlainText||"",o={isCloseCameraDe:this.savedRecallConfStateInfo.isCloseCameraRecall,isMuteMicDe:1===this.savedRecallConfStateInfo.isMuteMicRecall,isMuteSpkDe:this.savedRecallConfStateInfo.isMuteSpkRecall,speakerMode:this.savedRecallConfStateInfo.isSpeaker?1:0},s={confAcs:this.savedRecallInfo.access_code,confId:this.savedRecallInfo.confid,confPwd:a,isVideo:this.savedRecallInfo.isVideo,deviceSet:o,isVMR:this.savedRecallInfo.isVMR},e.next=16,h.oneKeyEnterConfService(s);case 16:c=e.sent,c?C.info("startReToConf suc"):(C.error("startReToConf fail, need to startReToConf again"),g.isInConf()||this.startReToConf());case 18:case"end":return e.stop()}},e,this)}));return e}()},{key:"terminateReCall",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("terminateReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallTerminate",value:function(){function e(){return t.apply(this,arguments)}var t=(0,c.default)(i.default.mark(function e(){var t;return i.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:C.info("reCallTerminate"),window.CLIENTCONFIG.ENABLE_IT_MEETING?window.itWeLinkNotifyCallEnded(0,language.THE_CALL_FAILED_CALL_ENDED):alert(language.THE_CALL_FAILED_CALL_ENDED),window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING&&(t="60s No Stream",coreConf.meetingHWreCallTimeOut(t)),coreConf.actionLeaveConf(),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1));case 6:case"end":return e.stop()}},e,this)}));return e}()},{key:"reCallSucToStopReCall",value:function(){C.info("reCallSucToStopReCall"),clearInterval(this.recallTimer),$dispatch(coreUi.changeIsRecalling(!1))}}]),e}();t.default=I},703:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("conf/svc")("model"),p=function(){function e(){(0,u.default)(this,e),this.ssrcRange={min:0,max:24},this.needChangeSSRC=!1,this.isInited=!1}return(0,l.default)(e,[{key:"getSsrcRange",value:function(){return this.ssrcRange}},{key:"init",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isInited){e.next=3;break}return d.info("already init,so return"),e.abrupt("return");case 3:return d.info("svc init,callId = "+handlePhoneNumber(t)),this.isInited=!0,this.callId=t,window.hasDealAttendeeUpdateEvent=0,e.next=9,this.changeBandMode();case 9:return e.next=11,this.setResolution();case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeBandMode",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.CLIENTCONFIG.ISBIGWIN){e.next=3;break}return d.info("changeBandMode is no need for bigwin"),e.abrupt("return");case 3:return d.info("changeBandMode start"),e.next=6,coreCall.getBasicBandInfo(this.callId);case 6:t=e.sent,d.info("svcModeBand is ",t),t>0&&t<1024?($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.LOW_BAND)),window.CLIENTCONFIG.ISWIN?$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.PIC_IN_PIC_MODE)):$dispatch(coreUi.changeConfViewMode(constant.SVC_VIEW_MODE.BIG_SMALL_MODE))):t<2048&&t>=1024&&($dispatch(coreUi.changeSvcBandMode(constant.SVC_BAND_MODE.MIDDLE_BAND)),$dispatch(coreUi.changeMaxSizeForPage(constant.SVC_MAX_SIZE_FOR_PAGE.LOW_BS_MAX_SIZE)));case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"setResolution",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("svc setResolution start"),window.CLIENTCONFIG.ISMOBILE?coreConf.getSvcAttendanceManager().setMobileMaxEncodeResolution(this.callId):coreConf.getSvcAttendanceManager().setDesktopMaxEncodeResolution(),e.next=4,coreConf.getSvcAttendanceManager().setMaxWatchResolutionByLevelId(this.callId);case 4:case"end":return e.stop()}},e,this)}));return e}()},{key:"changeSsrcRange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.needChangeSSRC)return void d.info("already needChangeSSRC, so return");t&&(this.needChangeSSRC=!0);var n={min:0,max:24};if(isNullOrEmpty(e.svc_lable)||(n={min:e.svc_lable[0],max:e.svc_lable[1]}),isNullOrEmpty(e.svc_lables)||(n={min:e.svc_lables[0],max:e.svc_lables[1]}),n.min>=n.max){var r=n.max;n.max=n.min,n.min=r}d.info("ssrcRange min is "+n.min+",max is "+n.max),this.ssrcRange=n,coreCommon.Observer.publish("changeSsrcRange",n)}}]),e}();t.default=p},704:function(e,t){t.endianness=function(){return"LE"},t.hostname=function(){return"undefined"!=typeof location?location.hostname:""},t.loadavg=function(){return[]},t.uptime=function(){return 0},t.freemem=function(){return Number.MAX_VALUE},t.totalmem=function(){return Number.MAX_VALUE},t.cpus=function(){return[]},t.type=function(){return"Browser"},t.release=function(){return"undefined"!=typeof navigator?navigator.appVersion:""},t.networkInterfaces=t.getNetworkInterfaces=function(){return{}},t.arch=function(){return"javascript"},t.platform=function(){return"browser"},t.tmpdir=t.tmpDir=function(){return"/tmp"},t.EOL="\n",t.homedir=function(){return"/"}},705:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,null,[{key:"cutstr",value:function(e,t){var n=0,r=0,a=String();r=e.length;for(var o=0;o<r;o++){var i=e.charAt(o);if(n++,escape(i).length>4&&n++,a=a.concat(i),n>=t)return a=a.concat("...")}if(n<t)return e}}]),e}();t.default=c},706:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i,s=n(142),c=r(s),u=n(3),f=r(u),l=n(69),d=r(l),p=n(1),h=r(p),_=n(2),g=r(_),m=n(4),v=r(m),C=n(5),I=r(C),w=n(707),S=r(w),E=n(208),N=(function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);t.default=e}(E),n(165)),T=n(227),b=n(273),O=coreLogger.getLogger("dataconf")("model"),L=(o=a=function(){function e(t,n){(0,v.default)(this,e),i.call(this),this.m_confHandle=t,this.callId=n,this.m_user_id=0,this.loadDocSharePromise=new PromiseObject,this.hasLoadDataShareComp=!1,this.isInRemoteControlling=!1,this.isUnderRemoteControlling=!1,this.remoteControlUserNum="",this.shareOwnerUserId="",this.m_component=0,this.isDataShareStarted=!1,this.isUsePrimarySize=!1,this.m_dspageid=0,this.m_dsdocid=0,this.m_pagewidth=0,this.m_pageheight=0,this.docSharingDocID=0,this.wbService=null,this.isRecevingAppshare=!1,this.docSharingFilePath="",this.bigwinRealRectLeft=0,this.bigwinRealRectRight=0,this.bigwinRealRectTop=0,this.bigwinRealRectBottom=0,this.sharingType=constant.ConfSharingType.None,this.isStoppingSharing=!1,this.memberService=null,this.hasCloseShareDataOperate=!1,this.shareAudio=!1,this.shareMonitorType=0,this.oldShareAppHwnd=0,this.shareAppHwnd=0,this.isSupportShareStrategy=!1}return(0,I.default)(e,[{key:"isRecevingWBSharing",value:function(){return this.isInWBSharing()&&this.wbService.m_ownerUserid!==this.m_user_id}},{key:"isRecevingDocSharing",value:function(){return this.isInDocSharing()&&this.docSharingDocID!==this.m_dsdocid}},{key:"isRecevingScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId!==this.m_user_id}},{key:"isSendScreenSharing",value:function(){return this.isInScreenSharing()&&this.shareOwnerUserId===this.m_user_id}},{key:"isRecevingSharing",value:function(){return this.isRecevingWBSharing()||this.isRecevingDocSharing()||this.isRecevingScreenSharing()}},{key:"closeWBTab",value:function(){function e(){return t.apply(this,arguments)}var t=(0,g.default)(h.default.mark(function e(){var t;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreTup.getdataConfInstance();case 2:return t=e.sent,e.next=5,t.sendNotifyAllUsersCloseSharingTab(this.m_confHandle,this.m_user_id,25);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"BeStopedWBDoc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,g.default)(h.default.mark(function e(){var t,n,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null===this.wbService){e.next=13;break}if(t=this.wbService,!0!==t.m_isChairman){e.next=11;break}return n=t.m_docid,r=t.m_confHandle,this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),e.next=9,S.default.deleteWBDoc(this.confHandle,n);case 9:e.next=13;break;case 11:this.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"dealInviteUserWBSharing",value:function(){function e(){return t.apply(this,arguments)}var t=(0,g.default)(h.default.mark(function e(){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("be invited to start WB share"),coreCommon.Observer.publish("OnDealInviteUserWBSharing");case 2:case"end":return e.stop()}},e,this)}));return e}()}]),e}(),i=function(){var e=this;this.initShareService=(0,g.default)(h.default.mark(function t(){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.registerTupNotify();case 2:case"end":return t.stop()}},t,e)})),this.registerTupNotify=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("[share] registerTupNotify"),t.next=3,coreTup.getdataConfInstance();case 3:n=t.sent,n.setNotifyFunc(40001009,e.handleLoadComponentResult),n.setNotifyFunc(40001031,e.loadComponentReturn),n.setNotifyFunc(40002111,e.onAsOnScreenData),n.setNotifyFunc(40002166,e.onAsScreenDataToBfcpData),n.setNotifyFunc(40002112,e.onAsOnScreenSizeChange),n.setNotifyFunc(40002115,e.onAsOnScreenKeyFrameRecv),n.setNotifyFunc(40001215,e.handledevcapable),n.setNotifyFunc(40001008,e.handleUserMessageUpdateResult),n.setNotifyFunc(40002167,e.handleApplistResult),n.setNotifyFunc(40002201,e.handleDocShareDocNew),n.setNotifyFunc(40002206,e.handleDsCurrentPage),n.setNotifyFunc(40002801,e.handleWBOnNewDoc),n.setNotifyFunc(40002802,e.handleWBOnDeleteDoc),n.setNotifyFunc(40002805,e.handleWBOnCurrentPageInd),n.setNotifyFunc(40002806,e.handleWBOnCurrentPage),n.setNotifyFunc(40002205,e.handleDsCurrentPageInd),n.setNotifyFunc(40003e3,e.handleOperateTokenResult),n.setNotifyFunc(40002121,e.onAsOnSharingState),n.setNotifyFunc(40002122,e.onAsOnSharingSession),n.setNotifyFunc(40002162,e.handleDisplayInfoResult),n.setNotifyFunc(40002163,e.handleDecodeBfcpSuccessInDataConf),n.setNotifyFunc(40002151,e.handleSharingUserDefineMsg),n.setNotifyFunc(40002123,e.handlePrivilegeState);case 27:case"end":return t.stop()}},t,e)})),this.onAsOnScreenData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void O.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenData",t):void O.info("data share has stoped")},this.onAsScreenDataToBfcpData=function(t){return t.param.confHandle&&t.param.confHandle!==e.m_confHandle?void O.error("onAsScreenDataToBfcpData confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle):e.isDataShareStarted?void coreCommon.Observer.publish("OnScreenDataToBfcpData",t):void O.info("onAsScreenDataToBfcpData share has stoped")},this.onAsOnScreenSizeChange=function(t){if(t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void O.error("confhandle is diff,old = "+e.m_confHandle+",new = "+t.param.confHandle);coreCommon.Observer.publish("OnSharingScreenSizeChange",t)},this.onAsOnScreenKeyFrameRecv=function(t){e.setDataConfParams({keyframerecv:1}),coreCommon.Observer.publish("onReceivedScreenKeyFrame",t),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,extraTrackKey:null,resultParams:[],isTrackTimeCosts:!0})},this.handledevcapable=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:r=JSON.parse((0,d.default)(n)),void 0!==r.param.m_phone_user_name&&(a=r.param.m_phone_user_name,r.param.m_phone_user_name=handlePhoneNumber(a)),r.param.m_binding_nid&&(o=r.param.m_binding_nid,r.param.m_binding_nid=handlePhoneNumber(o)),r.param.m_nDeviceID&&(i=r.param.m_nDeviceID,r.param.m_nDeviceID=handlePhoneNumber(i)),r.param.m_uri&&(s=r.param.m_uri,r.param.m_uri=handlePhoneNumber(s)),O.info("handledevcapable,data = ",r);case 6:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleUserMessageUpdateResult=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(O.info("handleUserMessageUpdateResult start",n),!n.param||"uc_component_status_update"!==n.param.msg_name){t.next=19;break}if(r=new DOMParser,!(a=n.param.msg)){t.next=19;break}if(o=r.parseFromString(a,"text/xml"),i=parseInt(o.getElementsByTagName("status")[0].childNodes[0].nodeValue),s=parseInt(o.getElementsByTagName("component")[0].childNodes[0].nodeValue),O.info("handleUserMessageUpdateResult status: "+i+" component: "+s),0!==i||0!==s){t.next=12;break}return O.info("webclient send 00,ignore"),t.abrupt("return");case 12:return t.next=14,coreTup.getNativeWindowInstance();case 14:c=t.sent,c.updateComponentStatus(s,i),e.m_component=s,u={component:s,status:i},coreCommon.Observer.publish("updateComponentStatus",u);case 19:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleApplistResult=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:coreCommon.Observer.publish("applistResult",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDocShareDocNew=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.info("DocShare handleDocShareDocNew ",n),coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:2}),e.docSharingDocID!==n.param.value1&&e.isExistAnySharing()&&coreCommon.Observer.publish("onCloseAllSharing",{});case 3:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.isExistAnySharing=function(){return!0===e.isInWBSharing()||e.isInDocSharing()||e.isInScreenSharing()},this.isInWBSharing=function(){return null!==e.wbService&&(e.wbService.m_docid>0&&e.wbService.m_pageid>0&&e.wbService.m_ownerUserid>0)},this.isInDocSharing=function(){return e.m_dsdocid>0&&e.m_dspageid>0},this.isInScreenSharing=function(){return e.shareOwnerUserId>0&&!0===e.isDataShareStarted},this.isInSendDocSharing=function(){return O.info("isInSendDocSharing docSharingDocID = ",e.docSharingDocID),0!==e.docSharingDocID&&e.docSharingDocID===e.m_dsdocid},this.isInReceiveDocSharing=function(){return 0===e.docSharingDocID&&0!==e.m_dsdocid},this.handleDsCurrentPageInd=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(T.DFConfig.isDocShareEnabled()){t.next=3;break}return O.info("handleDsCurrentPageInd doc share unenable"),t.abrupt("return");case 3:if(O.info("handleDsCurrentPageInd: ",n),e.m_component===b.IID_COMPONENT.DS){t.next=6;break}return t.abrupt("return");case 6:if(!n.param){t.next=14;break}return t.next=9,coreTup.getdataConfInstance();case 9:if(r=t.sent,0===n.param.value1||0===n.param.value2){t.next=13;break}return t.next=13,r.dsSetCurrentPage(e.m_confHandle,b.IID_COMPONENT.DS,n.param.value1,n.param.value2,0);case 13:0===n.param.value1&&(e.m_dsdocid=0,e.m_dspageid=0,a={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",a));case 14:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDsCurrentPage=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(T.DFConfig.isDocShareEnabled()){t.next=3;break}return O.info("handleDsCurrentPage doc share unenable"),t.abrupt("return");case 3:return O.info("handleDsCurrentPage: ",n),t.next=6,coreTup.getNativeWindowInstance();case 6:r=t.sent,r.setDsCurrentPage(n.param.confHandle,n.param.value1,n.param.value2),e.m_dsdocid=n.param.value1,e.m_dspageid=n.param.value2,a={docid:n.param.value1,pageid:n.param.value2,issender:e.m_dsdocid===e.docSharingDocID},coreCommon.Observer.publish("onShowNativeDSPage",a);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnNewDoc=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleWBOnNewDoc ",n);case 1:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnDeleteDoc=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPageInd=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(O.info("handleWBOnCurrentPageInd ",n),!(n.param.value1>0&&n.param.value2>0)){t.next=4;break}return t.next=4,e.setWBLocalCurrentPageLocal(n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=6;break}return O.info("setWBLocalCurrentPageLocal wbService not null"),e.wbService.m_docid=n.param.value1,e.wbService.m_pageid=n.param.value2,t.next=6,e.wbService.setWBLocalCurrentPageLocal();case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleWBOnCurrentPage=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.info("handleWBOnCurrentPage ",n),null!==e.wbService&&(e.wbService.m_isChairman?coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!0}):coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!0}));case 2:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopWBDoc=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(null===e.wbService){t.next=16;break}if(!0!==e.wbService.m_isChairman){t.next=12;break}return n=e.wbService.m_docid,r=e.wbService.m_confHandle,e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageChairman",{isopen:!1}),t.next=8,e.requestWBToken(!1);case 8:return t.next=10,S.default.deleteWBDoc(e.m_confHandle,n);case 10:t.next=14;break;case 12:e.wbService=null,coreCommon.Observer.publish("onShowNativeWBPageAttendee",{isopen:!1});case 14:coreCommon.Observer.publish("OnScreenSharingStateChange",0),e.shareAudio=!1;case 16:case"end":return t.stop()}},t,e)})),this.requestWBToken=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("requestWBTok isAdd ",n),t.next=3,coreTup.getdataConfInstance();case 3:return r=t.sent,t.next=6,r.asSetOperateToken(e.m_confHandle,e.m_user_id,!0===n?constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD:constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.WHITE_BOARD_SHARE);case 6:a=t.sent,O.info("requestWBTok ret ",a);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.advancedSetting=function(){var t=(0,g.default)(h.default.mark(function t(n,r){var a,o,i,s,c;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,1!=n){t.next=12;break}return O.info("advancedSetting setShareAudio true"),t.next=7,a.setShareAudio(e.m_confHandle,1);case 7:o=t.sent,e.shareAudio=!0,O.info("advancedSetting setShareAudio result:",(0,d.default)(o)),t.next=18;break;case 12:return O.info("advancedSetting setShareAudio false"),t.next=15,a.setShareAudio(e.m_confHandle,0);case 15:i=t.sent,e.shareAudio=!1,O.info("advancedSetting setShareAudio result:",(0,d.default)(i));case 18:if(1!=r){t.next=26;break}return O.info("advancedSetting setShareStrategy 1"),t.next=22,a.setShareStrategy(e.m_confHandle,1);case 22:s=t.sent,O.info("advancedSetting setShareStrategy result:",(0,d.default)(s)),t.next=31;break;case 26:return O.info("advancedSetting setShareStrategy 0"),t.next=29,a.setShareStrategy(e.m_confHandle,0);case 29:c=t.sent,O.info("advancedSetting setShareStrategy result:",(0,d.default)(c));case 31:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.componentStatusUpdate=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,a="<root><component>"+n+"</component><index>"+e.m_user_id+"</index><sender>"+e.m_user_id+"</sender><status>1</status><src>2</src></root>",O.info("componentStatusUpdate ",a),t.next=7,r.confUpdateParam(e.m_confHandle,"uc_component_status_update",a);case 7:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.resetConfSharingType=function(){e.sharingType=constant.ConfSharingType.None,e.docSharingFilePath=""},this.setConfSharingType=function(t,n){switch(O.info("setConfSharingType share type: "+t+"  file path: "+n),e.docSharingFilePath="",t){case 0:e.sharingType=constant.ConfSharingType.Program;break;case 1:e.sharingType=constant.ConfSharingType.Document,e.docSharingFilePath=n;break;case 2:e.sharingType=constant.ConfSharingType.Desktop;break;default:e.sharingType=constant.ConfSharingType.None}},this.getStreamInfo=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,r=null,!(e.m_user_id>0)){t.next=10;break}return t.next=7,n.getStreamInfo(e.m_confHandle);case 7:r=t.sent,t.next=11;break;case 10:O.error("getStreamInfo failed, confHandle : "+e.m_confHandle);case 11:return t.abrupt("return",r);case 12:case"end":return t.stop()}},t,e)})),this.asStart=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info(" asStart"),t.next=3,coreTup.getdataConfInstance();case 3:r=t.sent,r.asSetSharetype(e.m_confHandle,0),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(O.info("setDataShareRealRect start11"),r.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):O.info("setDataShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom),e.setDataShareScreenGDIEXType(),r.setDataCodecVersion(e.m_confHandle,T.DFConfig.dataCodeccVersion),r.asStart(e.m_confHandle),coreCommon.Observer.publish("OnSharingSessionStart",n);case 10:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareScreenGDIEXType=(0,g.default)(h.default.mark(function t(){var n,r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=10;break}return t.next=3,coreTup.getdataConfInstance();case 3:return n=t.sent,r=T.DFConfig.captureType(),O.info("setDataShareScreenGDIEXType,type = "+r),t.next=8,n.setDataShareScreenCaptureType(e.m_confHandle,r);case 8:a=t.sent,O.info("setDataShareScreenGDIType,ret = ",a);case 10:case"end":return t.stop()}},t,e)})),this.setDataShareScreenPicQuality=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(e.m_confHandle>0)){t.next=6;break}return O.info("setDataShareScreenPicQuality success, val : "+n),t.next=4,coreTup.getdataConfInstance();case 4:r=t.sent,r.setDataShareScreenPicQuality(e.m_confHandle,n);case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startShare=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=36;break}return t.next=6,e.componentStatusUpdate(constant.ConfSharingType.Desktop);case 6:return t.next=8,coreTup.getCallInstance();case 8:return a=t.sent,a.setStgTunnel(e.callId,1),e.setCloseShareDataOperate(!1),O.info("startShareScreen start, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id),t.next=14,r.setDataCodecVersion(e.m_confHandle,T.DFConfig.dataCodeccVersion);case 14:return t.next=16,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.ADD,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 16:if(o=t.sent,O.info("asSetOperate done"),!o||!o.param||void 0===o.param.result){t.next=32;break}if(0!==o.param.result){t.next=23;break}O.info("asSetOperate sucess"),t.next=30;break;case 23:if(103!==o.param.result){t.next=29;break}return t.next=26,r.asSetOwner(1,e.m_confHandle,e.m_user_id);case 26:O.info("asSetOwner ret done"),t.next=30;break;case 29:O.info("asSetOperate result"+o.param.result);case 30:t.next=33;break;case 32:O.error("asSetOperate fail "+(0,d.default)(o));case 33:30===n?r.setDataShareScreenPicQuality(e.m_confHandle,n):r.setDataShareScreenCaptureType(e.m_confHandle,T.DFConfig.captureType()),t.next=38;break;case 36:coreCommon.Observer.publish("OnStartShareFailed"),O.error("startShareScreen failed, confHandle : "+e.m_confHandle+",m_user_id:"+e.m_user_id);case 38:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.stopShareScreen=(0,g.default)(h.default.mark(function t(){var n,r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.info("stopShareScreen isStoppingSharing = "+e.isStoppingSharing),n=0;case 2:if(!(e.isStoppingSharing&&n<10)){t.next=8;break}return t.next=5,sleep(300);case 5:n++,t.next=2;break;case 8:return e.isStoppingSharing=!0,t.next=11,coreTup.getdataConfInstance();case 11:if(r=t.sent,!(e.m_user_id>0)){t.next=48;break}if(O.info("stopShareScreen start, confHandle : "+e.m_confHandle),!0===window.isByShareState){t.next=21;break}return t.next=17,r.asStop(e.m_confHandle);case 17:return t.next=19,e.stopDocShare();case 19:t.next=23;break;case 21:window.isByShareState=!1,O.info("set by share state false");case 23:return t.next=25,r.asSetOperateToken(e.m_confHandle,e.m_user_id,constant.DATA_CONF_SHARE_OPERATE_TYPE.DELETE,constant.DATA_CONF_SHARE_TOKEN_TYPE.SCREEN_SHARE);case 25:if(a=t.sent,O.info("release asSetOperateTok done"),!a||!a.param){t.next=41;break}if(0!==a.param.result){t.next=32;break}O.error("asSetOperateTok success "),t.next=39;break;case 32:if(103!==a.param.result){t.next=38;break}return t.next=35,r.asSetOwner(0,e.m_confHandle,e.m_user_id);case 35:O.info("release asSetOwner ret done"),t.next=39;break;case 38:O.error("asSetOperateTok err ",a);case 39:t.next=42;break;case 41:O.error("asSetOperateTok fail ",a);case 42:return t.next=44,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 44:O.info("stopShareScreen operate over"),coreCommon.Observer.publish("onStopShareFinished"),t.next=50;break;case 48:window.isByShareState=!1,O.error("stopShareScreen failed, confHandle : "+e.m_confHandle);case 50:e.isStoppingSharing=!1,e.shareAudio=!1;case 52:case"end":return t.stop()}},t,e)})),this.setShareType=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return O.info("setShareType start, confHandle : "+e.m_confHandle),t.next=7,r.asSetSharetype(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?O.info("setShareType failed, result = ",a.result):O.info("setShareType success, result = ",a.result),t.next=12;break;case 11:O.error("setShareType failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingDisplay=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return O.info("setSharingDisplay, confHandle, "+e.m_confHandle+", index = "+n),t.next=7,r.asSetSharingDisplay(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?O.info("setSharingDisplay failed, result = ",a.result):O.info("setSharingDisplay success, result = ",a.result),t.next=12;break;case 11:O.error("setSharingDisplay failed, confHandle : "+e.m_confHandle+", index = "+n);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setTransparentwindow=function(){var t=(0,g.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return O.info("setTransparentwindow start, m_congetDisplayInfofhandle : "+e.m_confHandle),t.next=7,a.asSetTransparentwindow(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.param.result?O.info("setTransparentwindow failed, res = ",o):O.info("setTransparentwindow success"),t.next=12;break;case 11:O.error("setTransparentwindow failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setAppShareScreenParam=function(){var t=(0,g.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(a=t.sent,!(e.m_user_id>0)){t.next=11;break}return O.info("setAppShareScreenParam start, confHandle : "+e.m_confHandle),t.next=7,a.setAppShareScreenParam(e.m_confHandle,n,r);case 7:o=t.sent,0!==o.result?O.info("setAppShareScreenParam failed, result = ",o.result):O.info("setAppShareScreenParam success, result = ",o.result),t.next=12;break;case 11:O.error("setAppShareScreenParam failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.setDataShareVersion=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return O.info("setDataShareVersion, confHandle : "+e.m_confHandle),t.next=7,r.setDataShareVersion(e.m_confHandle,n);case 7:a=t.sent,0!==a.result?O.info("setDataShareVersion failed, result = ",a.result):O.info("setDataShareVersion success, result = ",a.result),t.next=12;break;case 11:O.error("setDataShareVersion failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.cancelSharingapp=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,O.info("cancelSharingapp start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,r.asSetSharingapp(e.m_confHandle,n,0);case 6:a=t.sent,0!==a.result?O.info("cancelSharingapp failed, result = ",a.result):O.info("cancelSharingapp success, result = ",a.result);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setSharingapp=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,O.info("startShareScreen start, confHandle : "+e.m_confHandle+",appwnd:"+n),t.next=6,coreTup.getNativeWindowInstance();case 6:return a=t.sent,t.next=9,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:b.NATIVE_DATA_PARAMTYPE.SET_APP_BG_COLOR});case 9:return t.next=11,r.asSetSharingapp(e.m_confHandle,n,1);case 11:o=t.sent,0!==o.result?O.info("setSharingapp failed, result = ",o.result):O.info("setSharingapp success, result = ",o.result);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setStart=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,O.info("setStart start, confHandle : "+e.m_confHandle),e.setDataShareScreenGDIEXType(),t.next=7,n.asStart(e.m_confHandle);case 7:r=t.sent,0!==r.result?O.info("setStart failed, result = ",r.result):O.info("setStart success, result = ",r.result);case 9:case"end":return t.stop()}},t,e)})),this.setDataConfShareRealRect=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:n=t.sent,e.m_user_id>0&&(O.info("setDataConfShareRealRect, confHandle : "+e.m_confHandle),window.CLIENTCONFIG.ISBIGWIN&&e.bigwinRealRectBottom>0?(O.info("setDataConfShareRealRect start11"),n.setDataShareRealRect(e.m_confHandle,e.bigwinRealRectLeft,e.bigwinRealRectTop,e.bigwinRealRectRight,e.bigwinRealRectBottom)):O.info("setDataConfShareRealRect start11 error, bottom : "+e.bigwinRealRectBottom));case 4:case"end":return t.stop()}},t,e)})),this.handleOperateTokenResult=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(O.info("[BOM][debug] data: ",n),2===n.param.msg_type&&1===n.param.token_type&&4294967293===n.param.user_id?(r={param:{user_alt_uri:n.param.user_id,user_alt_id:n.param.user_id,user_name:"BFCP_USER"}},e.memberService.addMember(r,!1),$dispatch(coreUi.changeShareCapShowNameTips(!1))):3===n.param.msg_type&&1===n.param.token_type&&4294967293===n.param.user_id?(a={param:{user_alt_id:n.param.user_id}},$dispatch(coreUi.changeShareCapShowNameTips(!0))):2===n.param.msg_type&&4294967293!==n.param.user_id&&$dispatch(coreUi.changeShareCapShowNameTips(!0)),O.info("[BOM} isShowNameTips = "+$getState().conf.isShowNameTips),1!==n.param.token_type||1!==n.param.msg_type||0===n.param.result){t.next=8;break}coreCommon.Observer.publish("onRequestOperateTokenFail"),O.info("request data tok failed, stop share"),t.next=67;break;case 8:if(0!==n.param.token_type||2!==n.param.msg_type||0!==n.param.user_type){t.next=14;break}O.info("recv bfcp data from dataConf, callid: ",e.callId),coreCommon.Observer.publish("BFCPDecodeSuc",e.callId,!0),e.handleDataToBfcpStart(),t.next=67;break;case 14:if(0!==n.param.token_type||3!==n.param.msg_type||0!==n.param.user_type){t.next=19;break}coreCommon.Observer.publish("BFCPDataStopRec",!0),e.handleDataToBfcpStop(),t.next=67;break;case 19:if(2!==n.param.token_type){t.next=67;break}if(1!==n.param.msg_type){t.next=24;break}0===n.param.result?(O.info("whiteboard tok request success"),e.createWBNewDocAndPage()):O.info("whiteboard tok request failed"),t.next=67;break;case 24:if(2!==n.param.msg_type||0!==n.param.result){t.next=58;break}if(!(n.param.user_id>0)){t.next=55;break}return O.info("whiteboard tok owner flag, userid :",n.param.user_id),t.next=29,e.stopDocShare();case 29:if(!e.isInScreenSharing()){t.next=36;break}return O.info("stop prev share when recv WB token"),o={},o.param={},o.param.value2=0,t.next=36,e.screenDataShareEnded(o);case 36:if(null!==e.wbService){t.next=48;break}if(coreCommon.Observer.publish("onDataSharingStateChanged",!0),n.param.user_id!==e.m_user_id){t.next=43;break}return t.next=41,e.createWBNewDocAndPage();case 41:t.next=48;break;case 43:O.info("whiteboard receive"),coreCommon.Observer.publish("onReceiveWhiteBoardShare"),e.wbService=new S.default,e.wbService.m_confHandle=e.m_confHandle,e.wbService.m_isChairman=!1;case 48:null!==e.wbService&&(e.wbService.m_ownerUserid=n.param.user_id,O.info("wbService m_ownerUserid ",e.wbService.m_ownerUserid)),i=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):"",coreCommon.Observer.publish("onMacRecvWhiteBoardOrDoc",{type:b.IID_COMPONENT.WB,name:i}),coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!0),f.default.resolve().then((0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=null!==e.wbService?e.memberService.getBindnoByUserid(e.wbService.m_ownerUserid):"")){t.next=7;break}return t.next=5,coreContact.queryUserInfoByKeyWord({keyWord:n});case 5:r=t.sent,coreCommon.dispatchModuleEvent("pluginDataSharingPersonChangedNotify",{sharerName:i,shareAccount:r.show_account});case 7:case"end":return t.stop()}},t,e)}))),t.next=56;break;case 55:O.info("whiteboard tok owner flag fail,userid==0");case 56:t.next=67;break;case 58:if(3!==n.param.msg_type||0!==n.param.result){t.next=67;break}if(O.info("whiteboard tok release "),null===e.wbService){t.next=67;break}return coreCommon.dispatchModuleEvent("pluginWhiteBoardSharingStateChangedNotify",!1),t.next=64,e.BeStopedWBDoc();case 64:coreCommon.Observer.publish("onDataSharingStateChanged",!1),s=$getState().conf,c=s.svcViewMode,u=s.maxSizeForPage,c===constant.SVC_VIEW_MODE.DIVIDE_MODE&&window.CLIENTCONFIG.ISWIN&&u!==N.SvcAtdManager.getMaxSizeForPage(c)&&($dispatch(coreUi.changeMaxSizeForPage(N.SvcAtdManager.getMaxSizeForPage(c))),N.SvcAtdManager.RedrawVideoMain());case 67:O.info("receive operate result = "+n.param.result);case 68:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.createWBNewDocAndPage=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("createWBNewDocAndPage start"),t.next=3,e.prepareWBSharing();case 3:return t.next=5,new S.default;case 5:return e.wbService=t.sent,t.next=8,e.wbService.createWBNewDocAndPage(e.m_confHandle);case 8:return n=t.sent,!1===n&&(e.wbService=null),t.abrupt("return",n);case 11:case"end":return t.stop()}},t,e)})),this.prepareWBSharing=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,r="<LoadedCom><LoadedCom>512</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.COMPONENT_IID.IID_COMPONENT_WB);case 8:case"end":return t.stop()}},t,e)})),this.prepareDocSharing=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return n=t.sent,r="<LoadedCom><LoadedCom>1</LoadedCom></LoadedCom>",t.next=6,n.confUpdateParam(e.m_confHandle,"Param_UpdateLoadedCom",r);case 6:return t.next=8,e.componentStatusUpdate(constant.COMPONENT_IID.IID_COMPONENT_DS);case 8:case"end":return t.stop()}},t,e)})),this.setDocShareCurrentPage=function(){var t=(0,g.default)(h.default.mark(function t(n,r,a){var o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n<0||r<0)){t.next=3;break}return O.info("DocShare set cur page param error!"),t.abrupt("return");case 3:return t.next=5,coreTup.getdataConfInstance();case 5:return o=t.sent,t.next=8,o.docShareGetPageIdByPageNo(e.m_confHandle,n,r);case 8:return i=t.sent,t.next=11,o.docShareSetCurPage(e.m_confHandle,n,i.param.pageNo,a?1:0);case 11:s=t.sent,O.info("tup_conf_ds_set_current_page res : ",s);case 13:case"end":return t.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.stopDocShare=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(O.info("stopDocShare start "),!(e.m_dsdocid>0)){t.next=16;break}if(!e.isInSendDocSharing()){t.next=11;break}return O.info("stopDocShare sender docshare"),t.next=6,coreTup.getdataConfInstance();case 6:return n=t.sent,t.next=9,n.docShareStop(e.m_confHandle,e.docSharingDocID);case 9:t.next=12;break;case 11:O.info("stopDocShare receiver docshare");case 12:e.docSharingDocID=0,e.m_dsdocid=0,r={docid:0,pageid:0},coreCommon.Observer.publish("onShowNativeDSPage",r);case 16:O.info("stopDocShare end");case 17:case"end":return t.stop()}},t,e)})),this.onAsOnSharingSession=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return O.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(O.info("onAsOnSharing[Session] , data : ",desensitive(n)),O.info("[BOM]onAsOnSharing[Session] this.m_user_id = "+e.m_user_id+", data.param.user_id = "+n.param.user_id),!n.param.user_id){t.next=37;break}return t.next=8,coreTup.getNativeWindowInstance();case 8:r=t.sent,r.updateComponentStatus(2,1),a=e.memberService.dataUserList,o="",i=0;case 13:if(!(i<a.length)){t.next=23;break}if(!a[i].user_id||a[i].user_id!==n.param.user_id){t.next=20;break}return o=a[i].user_num,s=n.param.user_id===e.m_user_id,e.shareOwnerUserId=n.param.user_id,coreCommon.Observer.publish("OnShareOwnerChange",{userNum:o,isSelf:s}),t.abrupt("break",23);case 20:i++,t.next=13;break;case 23:if(n.param.user_id!==e.m_user_id){t.next=35;break}if(!(e.shareAppHwnd>0)){t.next=31;break}O.info("onAsOnSharing[Session], setShareType and getApplist"),e.setShareType(1),e.getDisplayInfo(),e.getApplist(),t.next=33;break;case 31:return t.next=33,e.asStart(n);case 33:t.next=37;break;case 35:coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),O.info("onAsOnSharing[Session] asstart fail");case 37:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.onAsOnSharingState=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i,s;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!n.param.confHandle||n.param.confHandle===e.m_confHandle){t.next=3;break}return O.error("confhandle is diff,old = "+e.m_confHandle+",new = "+n.param.confHandle),t.abrupt("return");case 3:if(O.info("[BOM]onAsOnSharingState , data : ",n),r=1===n.param.annoForbidden,a=1===n.param.controlForbidden,0===T.DFConfig.dataCodeccVersion&&(a=!1,r=!1),$dispatch(coreUi.changeShareCapAnnoForbidden(r)),$dispatch(coreUi.changeShareCapControlForbidden(a)),1!==n.param.value2){t.next=44;break}if(O.info("[BOM]onAsOnSharingState 他人发起屏幕共享收到的通知"),O.info("isDataSharing false 7"),e.isRecevingAppshare=1===n.param.value1,0===n.param.value1?(O.info("[BOM]onAsOnSharingState 屏幕共享"),coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!1,type:"screenShare",state:1}),o=coreConf.getCurrentConfId(),coreUt.utEventStart({eventId:constant.EVENT_ID.UT_CONF_DESKTOP_SHARE_FIRST_FRAME,extraTrackKey:null,params:[o]})):1===n.param.value1&&(O.info("[BOM]onAsOnSharingState 程序共享"),coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!1,type:"docShare",state:1})),window.isDataSharing=!1,!T.DFConfig.sendAnnotationEnable||n.param.annostate!==b.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=21;break}return O.info("onAsOnSharingState annostate, receive annotation"),e.setDataConfParamsInQueue({annostate:1}),t.abrupt("return");case 21:if(!T.DFConfig.sendAnnotationEnable||0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=25;break}return O.info("onAsOnSharingState annostate,annotation stop"),e.setDataConfParamsInQueue({annostate:0}),t.abrupt("return");case 25:return e.isDataShareStarted=!0,O.info("onAsOnSharingState , receive datashare"),t.next=29,coreTup.getCallInstance();case 29:if(i=t.sent,i.setStgTunnel(e.callId,2),null===e.wbService){t.next=34;break}return t.next=34,e.stopWBDoc();case 34:if(!e.isInSendDocSharing()&&!e.isInReceiveDocSharing()){t.next=38;break}return t.next=37,e.stopDocShare();case 37:e.resetConfSharingType();case 38:coreCommon.Observer.publish("OnShareingStart",n),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),s=e.memberService.getMemberNameByUserId(e.shareOwnerUserId),coreCommon.Observer.publish("OnRemoteScreenShare",s),t.next=68;break;case 44:if(2!==n.param.value2){t.next=67;break}if(O.info("[BOM]onAsOnSharingState 本人发起桌面共享和程序共享"),0===n.param.value1?coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!0,type:"screenShare",state:1}):1===n.param.value1&&coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",{isself:!0,type:"docShare",state:1}),coreUt.utEventFinish({eventId:constant.EVENT_ID.UT_CONF_DATA_SHARE,extraTrackKey:null,resultParams:[1],isTrackTimeCosts:!0}),O.info("onAsOnSharingState , start datashare"),!T.DFConfig.sendAnnotationEnable||n.param.annostate!==b.IID_COMPONENT.WB||!0!==e.isDataShareStarted){t.next=56;break}return O.info("onAsOnSharingState , self receive annotation"),t.next=53,e.setDataConfParamsInQueue({annostate:1});case 53:return t.abrupt("return");case 56:if(!T.DFConfig.sendAnnotationEnable||0!==n.param.annostate||!0!==e.isDataShareStarted){t.next=60;break}return O.info("onAsOnSharingState , self stop annotation"),e.setDataConfParamsInQueue({annostate:0}),t.abrupt("return");case 60:e.isDataShareStarted=!0,O.info("isDataSharing true 4"),window.isDataSharing=!0,coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),coreCommon.Observer.publish("OnSshareScreenOper",0),t.next=68;break;case 67:0===n.param.value2?e.isInScreenSharing()?(O.info("[BOM]onAsOnSharingState screenDataShareEnded"),e.screenDataShareEnded(n)):O.info("onAsOnSharingState prepare stop,but not isInScreenSharing,isDataShareStarted:"+e.isDataShareStarted):O.error("sharing state error");case 68:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataConfParamsInQueue=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:r=coreCommon.TaskQueue.getInstance(T.DFConfig.moduleName),a=coreCommon.TaskOptions.defaultOptions(),a.proxy=e,r.addTask(e.setDataConfParams,a,null,n);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.screenDataShareEnded=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("onAsOnSharingState , stop datashare"),n.isself=e.m_user_id===e.shareOwnerUserId,e.isDataShareStarted=!1,e.isRecevingAppshare=!1,e.shareOwnerUserId="",window.isByShareState=!0,O.info("set by share state true"),coreCommon.Observer.publish("OnShareingEnd",n),r={isself:n.isself,type:0===n.param.value1?"screenShare":"docShare",state:0},coreCommon.dispatchModuleEvent("pluginScreenSharingStateChangedNotify",r),coreCommon.Observer.publish("OnScreenSharingStateChange",n.param.value2),t.next=13,coreTup.getdataConfInstance();case 13:a=t.sent,O.info("start notify all user close sharing tab"),a.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id),O.info("notify all user close sharing tab finished");case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDataToBfcpStart=(0,g.default)(h.default.mark(function t(){var n,r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!T.DFConfig.supportDataToBfcp){t.next=15;break}return O.info("data to bfcp info"),n=!1,r="",coreCommon.Observer.publish("OnShareOwnerChange",{userNum:r,isSelf:n}),coreCommon.Observer.publish("ChangeFirstActiveShareApp",!0),t.next=8,coreTup.getCallInstance();case 8:a=t.sent,a.setStgTunnel(e.callId,2),e.isDataShareStarted=!0,coreCommon.Observer.publish("OnShareingStart","to bfcp"),coreCommon.Observer.publish("OnScreenSharingStateChange",1),o={param:{width:1920,height:1080}},coreCommon.Observer.publish("OnSharingScreenSizeChange",o);case 15:case"end":return t.stop()}},t,e)})),this.handleDataToBfcpStop=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!T.DFConfig.supportDataToBfcp){t.next=11;break}return O.info("bfcp toke release"),n={isself:!1},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",n),coreCommon.Observer.publish("OnScreenSharingStateChange",0),t.next=9,coreTup.getdataConfInstance();case 9:r=t.sent,r.sendNotifyAllUsersCloseSharingTab(e.m_confHandle,e.m_user_id);case 11:case"end":return t.stop()}},t,e)})),this.handleShareEnd=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!1!==(r=n===e.shareOwnerUserId)){t.next=4;break}return O.info("user not sharing, ignore share end request. user id = "+n),t.abrupt("return");case 4:a={isself:n===e.m_user_id,param:{value2:0}},e.isDataShareStarted=!1,e.shareOwnerUserId="",coreCommon.Observer.publish("OnShareingEnd",a),coreCommon.Observer.publish("OnScreenSharingStateChange",a.param.value2);case 9:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleLoadComponentResult=function(e){0===e.param.result&&O.info("send load component success")},this.loadComponentReturn=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isSupportShareStrategy=!1,O.info("[BOM][share] loadComponentReturn "+(0,d.default)(n)),n.param.value2!==b.IID_COMPONENT.DS){t.next=11;break}return t.next=5,coreTup.getdataConfInstance();case 5:r=t.sent,r.dsSetBgcolor(4294967295,n.param.confHandle,1),r.dsSetDispmode(n.param.confHandle,1,0),r.dsSetCanvasSize(n.param.confHandle,1,1,{cx:1682,cy:961}),t.next=38;break;case 11:if(n.param.value2!==b.IID_COMPONENT.WB){t.next=29;break}return t.next=14,coreTup.getNativeWindowInstance();case 14:return a=t.sent,t.next=17,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:2});case 17:return t.next=19,a.controlWhiteBoard({confhandle:e.m_confHandle,paramtype:5});case 19:return t.next=21,coreTup.getdataConfInstance();case 21:return o=t.sent,o.dsSetDispmode(n.param.confHandle,512,0),t.next=25,e.regCustomerType(e.m_confHandle,b.IID_COMPONENT.AS);case 25:return t.next=27,e.initAnnotationResource(e.m_confHandle,b.IID_COMPONENT.AS,window.VIDEO_DEFAULT_IMG);case 27:t.next=38;break;case 29:if(n.param.value2!==b.IID_COMPONENT.AS){t.next=38;break}return e.hasLoadDataShareComp=!0,O.info("datashare component load success"),coreCommon.Observer.publish("OnJoinDataConf",n),t.next=35,coreTup.getdataConfInstance();case 35:i=t.sent,i.setDynaicAnnoBackGroundParam(e.m_confHandle),2===n.param.data&&(O.info("isSupportShareStrategy true"),e.isSupportShareStrategy=!0,e.setDataConfParamsInQueue({isSupportShareStrategy:!0}));case 38:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.openDocShareFile=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return O.info("DocShare openDocShareFile param error , ",void 0===n?"undefined":(0,c.default)(n),",filepath:",n),t.abrupt("return");case 3:return t.next=5,e.prepareDocSharing();case 5:return r=t.sent,O.info("DocShare openDocShareFile ret1 =",r),t.next=9,e.startDocSharing(n);case 9:return a=t.sent,O.info("DocShare openDocShareFile ret2 =",a),t.next=13,e.setDocShareCurrentPage(e.docSharingDocID,0,!0);case 13:o=t.sent,O.info("DocShare openDocShareFile ret3 =",o),e.isInScreenSharing()&&(O.info("sendStopScreenShareUserDefineMsg"),e.sendStopScreenShareUserDefineMsg()),e.isInWBSharing()&&(O.info("sendStopWhiteBoardUserDefineMsg"),e.sendStopWhiteBoardUserDefineMsg());case 17:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.startDocSharing=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if("string"==typeof n&&""!==n){t.next=3;break}return O.info("open doc share file param error!"),t.abrupt("return");case 3:return t.next=5,coreTup.getdataConfInstance();case 5:return r=t.sent,t.next=8,r.docShareOpenFile(e.m_confHandle,n);case 8:a=t.sent,O.info("tup_conf_ds_open res : ",a),coreCommon.Observer.publish("docShareOpenResultNotify",a.param.result),e.docSharingDocID=a.param.docId,O.info(" set docSharingDocID = ",e.docSharingDocID);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handlePrivilegeState=function(t){if(O.info("handlePrivilegeState start ",t),t.param.confHandle&&t.param.confHandle!==e.m_confHandle)return void O.error("confhandle is error,old = "+e.m_confHandle+",new = "+t.param.confHandle);if(t.param.user_id&&1===t.param.value1){var n=function(){var n=e.memberService.dataUserList;e:for(var r=0;r<n.length;r++){var a=function(r){if(n[r].user_id&&n[r].user_num&&n[r].user_id===t.param.user_id){var a=e.memberService.getBindnoByUserid(e.shareOwnerUserId);return O.info("shareOwnerUserId = ",e.shareOwnerUserId),(O.info("my user id = ",e.m_user_id),O.info("currentDataMem[i].user_id = ",n[r].user_id),1===t.param.value2?f.default.resolve().then((0,g.default)(h.default.mark(function t(){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:n[r].user_num});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginGetRemoteControlPrivilegeNotify",{userName:a.name,userAccount:a.show_account});case 4:case"end":return e.stop()}},t,e)}))):0===t.param.value2&&f.default.resolve().then((0,g.default)(h.default.mark(function t(){var a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreContact.queryUserInfoByKeyWord({keyWord:n[r].user_num});case 2:a=e.sent,coreCommon.dispatchModuleEvent("pluginDelRemoteControlPrivilegeNotify",{userName:a.name,userAccount:a.show_account});case 4:case"end":return e.stop()}},t,e)}))),e.m_user_id===t.param.user_id)?(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",O.info("handlePrivilegeState getRemoteControlPrivilege1")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!0,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=n[r].user_num,O.info("handlePrivilegeState getRemoteControlPrivilege2 ")),{v:{v:void 0}}):e.shareOwnerUserId!==e.m_user_id?(!0===e.isInRemoteControlling&&1===t.param.value2&&(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:a,isself:!0}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=""),4===t.param.value2&&(coreCommon.Observer.publish("OnBeRejectedRemoteControlPrivilege",{usernum:n[r].user_num}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum=""),"break"):(0===t.param.value2?(coreCommon.Observer.publish("OnDelRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!1,e.remoteControlUserNum="",O.info("handlePrivilegeState OnDelRemoteControlPrivilege3")):1===t.param.value2&&(coreCommon.Observer.publish("OnRemoteControlPrivilege",{usernum:n[r].user_num,isself:!1}),e.isInRemoteControlling=!1,e.isUnderRemoteControlling=!0,e.remoteControlUserNum=n[r].user_num,O.info("handlePrivilegeState OnRemoteControlPrivilege4 ")),3===t.param.value2&&(coreCommon.Observer.publish("OnRequestRemoteControlPrivilege",{usernum:n[r].user_num}),O.info("handlePrivilegeState OnRequestRemoteControlPrivilege ")),"break")}}(r);switch(a){case"break":break e;default:if("object"===(void 0===a?"undefined":(0,c.default)(a)))return a.v}}}();if("object"===(void 0===n?"undefined":(0,c.default)(n)))return n.v}},this.handleDisplayInfoResult=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a,o,i,s,c,u;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:for(O.info("handleDisplayInfoResult, data = ",n),r=0,a=1,o=0,i=n.param.value1,s=n.param.pdisplay_info,c=0;c<i;c++)0!==s[c].bPrimaryMonitor?r=s[c].dwIndex:a=s[c].dwIndex;return o=1===e.shareMonitorType?r:a,O.info("shareMonitorType = "+e.shareMonitorType+", selectedIndex = "+o),t.next=11,coreTup.getdataConfInstance();case 11:u=t.sent,u.asSetSharingDisplay(e.m_confHandle,o);case 13:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleDecodeBfcpSuccessInDataConf=function(){var t=(0,g.default)(h.default.mark(function t(n){return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:O.info("handleDecodeBfcpSuccessInDataConf = ",n),T.DFConfig.supportDataToBfcp&&coreCommon.Observer.publish("OnSharingScreenSizeChange",n);case 2:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.sendStopScreenShareUserDefineMsg=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("sendStopScreenShareUserDefineMsg start"),t.next=3,coreTup.getdataConfInstance();case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.sendStopWhiteBoardUserDefineMsg=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("sendStopWhiteBoardUserDefineMsg start"),t.next=3,coreTup.getdataConfInstance();case 3:if(n=t.sent,isNullOrEmpty(e.shareOwnerUserId)){t.next=7;break}return t.next=7,n.asSendUserDataUInt(e.m_confHandle,constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB,e.shareOwnerUserId,e.m_user_id);case 7:case"end":return t.stop()}},t,e)})),this.handleSharingUserDefineMsg=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:O.info("handleSharingUserDefineMsg, data = ",n),r=n.param.value1,a=n.param.userId,t.t0=r,t.next=t.t0===constant.UserDefineType.CONF_INVITE_USER_DATA_SHARING?6:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP?8:t.t0===constant.UserDefineType.CONF_END_INVITE_USER_DATA_SHARING?10:t.t0===constant.UserDefineType.AS_NOTICE_INVITE_USER_WB_SHARING?12:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_USER_STOP_ACK?14:t.t0===constant.UserDefineType.AS_NOTICE_SHARING_WB_USER_STOP_TAB?15:19;break;case 6:return e.dealInviteUserDataSharing(a),t.abrupt("break",20);case 8:return e.stopShareScreen(),t.abrupt("break",20);case 10:return e.stopShareScreen(!0),t.abrupt("break",20);case 12:return e.dealInviteUserWBSharing(),t.abrupt("break",20);case 14:return t.abrupt("break",20);case 15:return O.info("whiteboard tok release "),e.stopWBDoc(),e.closeWBTab(),t.abrupt("break",20);case 19:return t.abrupt("break",20);case 20:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.dealInviteUserDataSharing=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:r=t.sent,r.asSendUserDataUInt(e.m_confHandle,6,n,e.m_user_id);case 4:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setDataShareRealRect=function(){var t=(0,g.default)(h.default.mark(function t(n,r,a,o){var i;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("setDataShareRealRect  start"),t.next=3,coreTup.getdataConfInstance();case 3:return i=t.sent,t.next=6,i.setDataShareRealRect(e.m_confHandle,n,r,a,o);case 6:case"end":return t.stop()}},t,e)}));return function(e,n,r,a){return t.apply(this,arguments)}}(),this.createNativeDataSharingWnd=function(){var t=(0,g.default)(h.default.mark(function t(n,r,a,o,i,s,c,u,f,l,d){var p,_,g,m,v,C;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("createNativeDataSharingWnd  start1"),t.next=3,coreTup.getNativeWindowInstance();case 3:return p=t.sent,_=0,g=0,m=null!==e.wbService?e.memberService.getMemberNameByUserId(e.wbService.m_ownerUserid):s,null!==e.wbService?(_=null!==e.wbService?e.wbService.m_docid:0,g=null!==e.wbService?e.wbService.m_pageid:0):0!==e.m_dsdocid&&(_=e.m_dsdocid,g=e.m_dspageid,d=b.IID_COMPONENT.DS),v=0!==e.m_dsdocid&&e.m_dsdocid===e.docSharingDocID,C="2052"===window.langcode?window.CLIENTCONFIG.NEW_APP_CHINEASE_NAME:window.CLIENTCONFIG.NEW_APP_NAME,t.next=12,p.createDataConfFrameWnd(n,r,a,e.m_confHandle,m,o,i,c,window.langcode,window.CLIENTCONFIG.ISBIGWIN,u,f,e.m_user_id,l,d,_,g,v,e.isRecevingAppshare,C,$getState().conf.isAnnoForbidden,$getState().conf.isControlForbidden,$getState().conf.isShowNameTips);case 12:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s,c,u,f,l){return t.apply(this,arguments)}}(),this.closeNativeDataSharingWnd=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.DFConfig.isWinBase){e.next=5;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:n=e.sent,n.DestroyDataConfFrameWnd();case 5:case"end":return e.stop()}},t,e)})),this.setNativeDataControlStatus=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!T.DFConfig.isWinBase){e.next=5;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:r=e.sent,r.setDataConfRemoteControlStatus(n);case 5:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.handleNativeNotifyResetRenderRect=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("handleNativeNotifyResetRenderRect,data = ",n),t.next=3,coreTup.getdataConfInstance();case 3:r=t.sent,r.setDataShareScreenParam(e.m_confHandle,{width:n.param.width,height:n.param.height});case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.setNativeBigwinOriginShowRect=function(){var t=(0,g.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(n>0&&r>0)){e.next=8;break}return e.next=3,coreTup.getNativeWindowInstance();case 3:return a=e.sent,e.next=6,a.setBigwinOriginShowRect(n,r);case 6:o=e.sent,O.info("setNativeBigwinOriginShowRect,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.showNativeDataControl=function(){var t=(0,g.default)(h.default.mark(function t(n,r,a,o,i,s,c){var u,f,l,d,p;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return u=null===e.wbService?0:e.wbService.m_docid,f=null===e.wbService?0:e.wbService.m_pageid,l=e.sharingType===constant.ConfSharingType.Program,t.next=5,coreTup.getNativeWindowInstance();case 5:return d=t.sent,t.next=8,d.showNativeDataControl(e.m_confHandle,n,r,window.langcode,l,a,o,i,e.m_user_id,s,c,u,f);case 8:p=t.sent,O.info("showNativeDataControl,ret = ",p);case 10:case"end":return t.stop()}},t,e)}));return function(e,n,r,a,o,i,s){return t.apply(this,arguments)}}(),this.showNativeRemoteControl=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("showNativeRemoteControl,data "),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.showNativeRemoteControl(n);case 6:a=e.sent,O.info("showNativeRemoteControl,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.regCustomerType=function(){var t=(0,g.default)(h.default.mark(function t(n,r){var a,o;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("regCustomerType start"),e.next=3,coreTup.getdataConfInstance();case 3:return a=e.sent,e.next=6,a.regCustomerType(n,r);case 6:o=e.sent,O.info("regCustomerType,ret = ",o);case 8:case"end":return e.stop()}},t,e)}));return function(e,n){return t.apply(this,arguments)}}(),this.initAnnotationResource=function(){var t=(0,g.default)(h.default.mark(function t(n,r,a){var o,i;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("initAnnotationResource start"),e.next=3,coreTup.getdataConfInstance();case 3:return o=e.sent,e.next=6,o.initAnnotationResource(n,r,a);case 6:i=e.sent,O.info("initAnnotationResource,ret = ",i);case 8:case"end":return e.stop()}},t,e)}));return function(e,n,r){return t.apply(this,arguments)}}(),this.bfcpWinAttach=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(r=t.sent,!(e.m_user_id>0)){t.next=11;break}return O.info("bfcpWinAttach, confHandle : "+e.m_confHandle),t.next=7,r.bfcpWinAttach(e.m_confHandle,n);case 7:a=t.sent,O.info("bfcpWinAttach result: ",a),t.next=12;break;case 11:O.error("bfcpWinAttach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.bfcpWinDetach=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_user_id>0)){t.next=11;break}return O.info("bfcpWinDetach, confHandle : "+e.m_confHandle),t.next=7,n.bfcpWinDetach(e.m_confHandle);case 7:r=t.sent,0!==r.result?O.info("bfcpWinDetach failed, result = ",r.result):O.info("bfcpWinDetach success, result = ",r.result),t.next=12;break;case 11:O.error("bfcpWinDetach failed, confHandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.changeRemoteControl2Other=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("dataconf setRemoteControl2Other success ,confhandle : "+e.m_confHandle+",useraltid : "+n),t.next=3,coreTup.getdataConfInstance();case 3:return r=t.sent,t.next=6,r.asSetPrivilege(e.m_confHandle,n,1,1);case 6:return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_AWARD_PRIVILEGE]}),t.abrupt("return",!0);case 8:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.delRemoteControlPrivilege=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,0);case 5:n===e.m_user_id?coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_RELEASE_PRIVILEGE]}):coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_FETCH_BACK_PRIVILEGE]});case 6:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.rejectRemoteControlPrivilege=function(){var t=(0,g.default)(h.default.mark(function t(n){var r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:return r=t.sent,t.next=5,r.asSetPrivilege(e.m_confHandle,n,1,4);case 5:case"end":return t.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.requestRemoteControlPrivilege=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return coreUt.utConfOperate({eventId:constant.EVENT_ID.UT_CONF_REMOTE_CONTROL,params:[constant.UT_CONF_REMOTE_CONTROL_TYPE.UT_CONF_REMOTE_CONTROL_TYPE_REQUEST_PRIVILEGE]}),t.next=3,coreTup.getdataConfInstance();case 3:return n=t.sent,t.next=6,n.asRequestPrivilege(e.m_confHandle,1);case 6:case"end":return t.stop()}},t,e)})),this.isReceivingDataShare=function(){return!0===e.isDataShareStarted&&e.m_user_id!==e.shareOwnerUserId},this.setDataConfParams=function(){var t=(0,g.default)(h.default.mark(function t(n){var r,a;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("setDataConfParams,data ",n),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.setDataConfParams(n);case 6:a=e.sent,O.info("setDataConfParams,ret = ",a);case 8:case"end":return e.stop()}},t,e)}));return function(e){return t.apply(this,arguments)}}(),this.loadShareComponent=(0,g.default)(h.default.mark(function t(){var n;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return O.info("handleJoinDataConfResult loadComponent start"),t.next=3,coreTup.getdataConfInstance(0);case 3:return n=t.sent,t.next=6,n.loadComponent(e.m_confHandle,b.IID_COMPONENT.DS|b.IID_COMPONENT.AS|b.IID_COMPONENT.WB);case 6:O.info("handleJoinDataConfResult loadComponent end");case 7:case"end":return t.stop()}},t,e)})),this.setCloseShareDataOperate=function(t){e.hasCloseShareDataOperate=t},this.getCloseShareDataOperate=function(){return e.hasCloseShareDataOperate},this.getDisplayInfo=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return O.info("getDisplayInfo, m_confhandle, "+e.m_confHandle),t.next=7,n.asGetDisplayInfo(e.m_confHandle);case 7:r=t.sent,0!==r.result?O.info("getDisplayInfo failed, result = ",r.result):O.info("getDisplayInfo success, result = ",r.result),t.next=12;break;case 11:O.error("getDisplayInfo failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.getApplist=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,coreTup.getdataConfInstance();case 2:if(n=t.sent,!(e.m_confHandle>0&&e.m_user_id>0)){t.next=11;break}return O.info("getApplist start, m_confhandle : "+e.m_confHandle),t.next=7,n.asGetApplist(e.m_confHandle);case 7:r=t.sent,0!==r.param.result?O.info("getApplist failed, result = ",r):O.info("getApplist success, result = ",r),t.next=12;break;case 11:O.error("getApplist failed, m_confhandle : "+e.m_confHandle);case 12:case"end":return t.stop()}},t,e)})),this.showNativeShareSelectWnd=(0,g.default)(h.default.mark(function t(){var n,r;return h.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return O.info("showNativeShareSelectWnd start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.showNativeShareSelectWnd();case 6:r=e.sent,O.info("showNativeShareSelectWnd,ret = ",r);case 8:case"end":return e.stop()}},t,e)}))},o);t.default=L},707:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a,o,i=n(1),s=r(i),c=n(2),u=r(c),f=n(4),l=r(f),d=coreLogger.getLogger("dataconf")("model"),p=(o=a=function e(){var t=this;(0,l.default)(this,e),this.createWBNewDocAndPage=function(){var e=(0,u.default)(s.default.mark(function e(n){var r,a,o;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("createWBNewDocAndPage start"),t.m_confHandle=n,e.next=4,coreTup.getNativeWindowInstance();case 4:return r=e.sent,e.next=7,r.controlWhiteBoard({confhandle:t.m_confHandle,paramtype:0});case 7:if(a=e.sent,d.info("createWBNewDoc docRet",a),!(a.param.docid>0&&a.param.pageid)){e.next=19;break}return t.m_docid=a.param.docid,t.m_pageid=a.param.pageid,e.next=14,r.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!0,paramtype:1});case 14:return o=e.sent,t.m_isChairman=!0,e.abrupt("return",!0);case 19:return d.info("createWBNewDoc fail, ret : ",a.param.result),e.abrupt("return",!1);case 21:case"end":return e.stop()}},e,t)}));return function(t){return e.apply(this,arguments)}}(),this.setWBLocalCurrentPageLocal=(0,u.default)(s.default.mark(function e(){var n,r;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("setWBLocalCurrentPageLocal start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return n=e.sent,e.next=6,n.controlWhiteBoard({confhandle:t.m_confHandle,docid:t.m_docid,pageid:t.m_pageid,issync:!1,paramtype:1});case 6:r=e.sent,0!==r.param.result&&d.info("setWBLocalCurrentPageLocal fail, ret : ",r.param.result);case 8:case"end":return e.stop()}},e,t)})),this.m_docid=0,this.m_pageid=0,this.m_confHandle=0,this.m_isChairman=!1,this.m_ownerUserid=0},a.deleteWBDoc=function(){var e=(0,u.default)(s.default.mark(function e(t,n){var r,a;return s.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("deleteWBDoc start"),e.next=3,coreTup.getNativeWindowInstance();case 3:return r=e.sent,e.next=6,r.controlWhiteBoard({confhandle:t,docid:n,paramtype:4});case 6:a=e.sent,0!==a.param.result&&d.info("deleteWBDoc fail, ret : ",a.param.result);case 8:case"end":return e.stop()}},e,void 0)}));return function(t,n){return e.apply(this,arguments)}}(),o);t.default=p},708:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(4),a=function(e){return e&&e.__esModule?e:{default:e}}(r),o=function e(){var t=this;(0,a.default)(this,e),this.addMember=function(e,n){for(var r=t.dataUserList,a=!1,o=0;o<r.length;o++)if(r[o].user_id&&r[o].user_id===e.param.user_alt_id){a=!0;break}if(!a&&"phnagt"!==e.param.user_name&&0!==e.param.user_alt_id){var i={user_num:e.param.user_alt_uri,user_id:e.param.user_alt_id,user_name:e.param.user_name,is_self:n,is_share:!1,device_type:e.param.device_type};t.dataUserList.push(i)}},this.deleteMember=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e.param.user_alt_id){n.splice(r,1);break}},this.updateDataShareOwner=function(e){for(var n=0;n<t.dataUserList.length;n++)t.dataUserList[n].is_share=t.dataUserList[n].user_num===e},this.getBindnoByUserid=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_num.toString();return""},this.getMemberNameByUserId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_id===e)return n[r].user_name;return""},this.getUserAltId=function(e){for(var n=t.dataUserList,r=0;r<n.length;r++)if(n[r].user_num===e)return n[r].user_id.toString();return""},this.dataUserList=[]};t.default=o},709:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.rejectConf=t.confIncoming=t.svcSeessionModify=t.confInfoNotify=t.changeIsSvcConf=t.handleJoinConf=t.callToConfFail=t.p2pToJoinConf=t.callToConfStart=t.accpetConfSuc=t.acceptConfStart=t.clearAfterConfEnd=t.closeConfPage=t.showConfOutPage=t.closeLoadingPage=t.showLoadingPage=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(710),u=r(c),f=coreLogger.getLogger("UIConf")("index"),l=null;t.showLoadingPage=function(){null===l?(f.info("showLoadingPage new confUICtrl"),l=new u.default,l.showLoadingPage()):f.error("showLoadingPage confUICtrl is exsit")},t.closeLoadingPage=function(){null===l?f.error("closeLoadingPage, confUICtrl is not exsit"):(l.closeLoadingPage(),f.info("closeLoadingPage, set confUICtrl null"),l=null)},t.showConfOutPage=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";null===l?(f.info("showConfPage new confUICtrl"),l=new u.default,l.showConfOutPage(e,t,n,r)):f.error("showConfPage confUICtrl is exsit")},t.closeConfPage=function(e,t,n,r){l?l.closeConfPage(e,t,n,r):f.error("closeConfPage confUICtrl is no exsit")},t.clearAfterConfEnd=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];l?(l.clearAfterConfEnd(e,t,n,r),f.info("clearAfterConfEnd set confUICtrl null"),l=null):f.error("clearAfterConfEnd confUICtrl is no exsit")},t.acceptConfStart=function(){l?l.acceptConfStart():f.error("acceptConfStart, confUICtrl is not exsit")},t.accpetConfSuc=function(){l?l.accpetConfSuc():f.error("accpetConfSuc, confUICtrl is not exsit")},t.callToConfStart=function(e){null===l?(f.info("callToConfStart new confUICtrl"),l=new u.default,l.callToConfStart(e)):f.error("callToConfStart confUICtrl is exsit")},t.p2pToJoinConf=function(){if(null===l){var e=-1!==$getState().call.callStatus.indexOf("VIDEO");f.info("p2pToJoinConf new confUICtrl, isVideo = "+e),l=new u.default(e),l.p2pToJoinConf()}else f.info("p2pToJoinConf confUICtrl is exsit, is active call to conf"),l.p2pToJoinConf()},t.callToConfFail=function(e){l?(l.callToConfFail(e),f.info("callToConfFail set confUICtrl null"),l=null):f.error("callToConfFail confUICtrl is no exsit")},t.handleJoinConf=function(){l?l.handleJoinConf():f.error("handleJoinConf confUICtrl is not exist")},t.changeIsSvcConf=function(){l?l.changeIsSvcConf():f.error("changeIsSvcConf confUICtrl is not exist")},t.confInfoNotify=function(){var e=(0,s.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=5;break}return e.next=3,l.confInfoNotify();case 3:e.next=6;break;case 5:f.error("confInfoNotify confUICtrl is not exist");case 6:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.svcSeessionModify=function(){l?l.svcSeessionModify():f.error("svcSeessionModify confUICtrl is not exist")},t.confIncoming=function(){var e=(0,s.default)(o.default.mark(function e(t){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==l){e.next=7;break}return f.info("confInComing new confUICtrl"),l=new u.default,e.next=5,l.confIncoming(t);case 5:e.next=8;break;case 7:f.error("confInComing confUICtrl is exsit");case 8:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.rejectConf=function(e){l?(l.rejectConf(e),f.info("reject conf set confUICtrl null"),l=null):f.error("reject conf confUICtrl is no exsit")}},710:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=n(711),p=r(d),h=n(712),_=r(h),g=n(713),m=r(g),v=n(714),C=r(v),I=n(715),w=r(I),S=n(716),E=r(S),N=n(717),T=r(N),b=n(720),O=r(b),L=n(194),A=n(655),y=n(358),x=coreLogger.getLogger("UIConf")("impl"),R=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];(0,u.default)(this,e),this.myStatusCtrl=window.CLIENTCONFIG.USE_IM?new p.default:null,this.upgradeCtrl=new m.default,this.userTrack=window.CLIENTCONFIG.ISBIGWIN?new _.default:null,this.sipLoginOnlyCtrl=$getState().login.sipLoginOnly?new C.default:null,this.confTempCtrl=isNullOrEmpty($getState().conf.confTempAcsAccount)?null:new w.default,this.platformCtrl=window.CLIENTCONFIG.ISMOBILE?new O.default:window.CLIENTCONFIG.ISMAC?new E.default:new T.default,this.filename=window.CLIENTCONFIG.ISMOBILE?"":"tempFile.txt",this.isVideo=t}return(0,l.default)(e,[{key:"changeIsSvcConf",value:function(){x.info("changeIsSvcConf"),this.platformCtrl.changeIsSvcConf()}},{key:"confIncoming",value:function(){function e(e){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(t){var n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return x.info("confIncoming"),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),$dispatch(coreUi.clearCallInfo()),$dispatch(coreUi.changeCallStatus("CALL_INCOMING")),n={isShow:!0,isUpdateToVideo:!1,callerName:t.confSubject,callerDepartment:"",callerNumber:t.compereNumber,callId:t.confHandle,confId:t.confHandle,callAccount:"",isVideo:t.isVideo?1:0,mediaType:t.mediaType,callType:t.isVideo?1:0},""===n.callerName&&(n.callerName=n.callerNumber),this.platformCtrl.confIncoming(t.isVideo),coreUi.showCallNotify(n),coreUi.incommingRing("In",!0),e.next=11,coreCall.callPermissionCheck(1===n.callType,!1);case 11:window.requestPermissionPromise&&(window.requestPermissionPromise=null);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showLoadingPage",value:function(){x.info("showLoadingPage"),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0))}},{key:"closeLoadingPage",value:function(){x.info("closeLoadingPage"),this.setIsInConf(!1),$dispatch(coreUi.changeEnterConfState(!1))}},{key:"showConfOutPage",value:function(e,t,n,r){x.info("showConfOutPage, isVideo = "+e+",isCreateConf = "+t+",confSubject isNullOrEmpty = "+isNullOrEmpty(n)+",confAcs isNullOrEmpty = "+isNullOrEmpty(r)),this.setIsInConf(!0),$dispatch(coreUi.changeEnterConfState(!0)),isNullOrEmpty(n)?($dispatch(coreUi.changeUserInfo({number:r})),$dispatch(coreUi.changeCallNum(r))):$dispatch(coreUi.changeConfSubject(n)),this.userTrack&&this.userTrack.init(),this.myStatusCtrl&&this.myStatusCtrl.changeInConf(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.goMainPage(),e?this.showVideoOutPage():this.showCallOutPage(),this.showConfOutTip(e,t)}},{key:"callToConfStart",value:function(e){x.info("callToConfStart, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.changeScreenState("middle"),$dispatch(coreUi.changeMeetingType(!1)),e?$dispatch(coreUi.changeCallStatus("VIDEO_TRANSTO_CONF")):$dispatch(coreUi.changeCallStatus("CALL_TRANSTO_CONF"))}},{key:"p2pToJoinConf",value:function(){var e=coreConf.getIsVideoConf();x.info("p2pToJoinConf, isVideoConf = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConf(),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),this.hideDataShareButton(),e?this.showVideoConnectedPage():this.showCallConnectedPage(),this.dealSvcMemberList()}},{key:"callToConfFail",value:function(e){x.info("callToConfFail, errorCode = "+e),this.myStatusCtrl&&this.myStatusCtrl.callToConfFail();var t=$getState().call.callStatus,n="CALL_CONNECTED";"VIDEO_TRANSTO_CONF"===t&&(x.info("conf create result: transto video conf"),n="VIDEO_CONNECTED"),x.info("changeCallStatus",n),$dispatch(coreUi.changeCallStatus(n)),this.platformCtrl.callToConfFail(e,n),$dispatch(coreUi.clearConfInfo()),coreCall.resumeScreenStateWhenCallOrConfEnd()}},{key:"acceptConfStart",value:function(e){x.info("acceptConfStart"),coreUi.stopRing(),coreCall.changeScreenState("middle"),this.platformCtrl.acceptConfStart(),$getState().common.isShowModal?coreUi.hideModal():$getState().common.isShowPop?window.hideAlert&&window.hideAlert():$getState().common.isShowNotifyModal&&$dispatch(coreUi.hideNotifyModal());var t=$getState().notify.callNotify;t.isShow=!1,t.isUpdateToVideo=!1,coreUi.showCallNotify(t),this.platformCtrl.acceptConfStart(e)}},{key:"accpetConfSuc",value:function(){x.info("accpetConfSuc"),this.setIsInConf(!0)}},{key:"rejectConf",value:function(e){if(x.info("rejectConf,confhandle = "+e),coreUi.closeCallNotify(e),coreUi.stopRing(),coreCall.getCallCount()<=0&&$dispatch(coreUi.changeCallStatus("")),this.myStatusCtrl&&this.myStatusCtrl.revert(),coreCall.getCallCount()>0)return void x.info("dealAfterReject has been calling");this.platformCtrl.rejectConf(),$dispatch(coreUi.clearConfInfo())}},{key:"confInfoNotify",value:function(){var e=coreConf.getIsVideoConf();x.info("confInfoNotify, isVideoConf = "+e),this.saveConfInfo(),this.platformCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){x.info("svcSeessionModify"),this.platformCtrl.svcSeessionModify()}},{key:"handleJoinConf",value:function(){var e=$getState().call.callStatus,t=coreConf.getIsVideoConf();x.info("handleJoinConf,isVideoConf = "+t+",callStatus  = "+e),coreCall.setTransferFlagHandle(!1,"confTransferToConf"),coreConf.getIsRecall()||this.startTime(),this.hideDataShareButton(),t?(this.showVideoConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinVideoConf()):(this.showCallConnectedPage(),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.joinAudioConf()),this.stopRing(),this.closeConfNotify(),this.dealSvcMemberList()}},{key:"closeConfPage",value:function(e,t,n,r){var a=!(arguments.length>4&&void 0!==arguments[4])||arguments[4];x.info("closeConfPage, isUserActive = "+e+",isEndConf = "+t+",reasonCode = "+n+",exitTip = "+r),this.sipLoginOnlyCtrl&&this.sipLoginOnlyCtrl.dragSetDisable(),coreAccount.getLoginModel().then(function(e){e.sipLoginOnly=!1}),this.myStatusCtrl&&this.myStatusCtrl.revert(),this.sipLoginOnlyCtrl?this.platformCtrl.closeConfPage(e,t,""):this.platformCtrl.closeConfPage(e,t,"main/conference"),this.clearConfOutTip(),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("")),$dispatch(coreUi.changeEnterConfState(!1));var o=this;setTimeout(function(){a&&o.platformCtrl.showExitConfTip(n,r)},500),"extra"===$getState().call.screenState&&(delegate.resumeShow(!1),delegate.winMinimize()),coreCall.resumeScreenStateWhenCallOrConfEnd();var i=$getState().conf.confHandle;coreUi.closeCallNotify(i),coreUi.stopRing()}},{key:"clearAfterConfEnd",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];x.info("clearAfterConfEnd isUserActive = "+e+",isEndConf = "+t+",reason = "+n+",isCallEnded = "+r),this.userTrack&&this.userTrack.confEnd(e,n,r),this.sipLoginOnlyCtrl&&(this.confTempCtrl?this.confTempCtrl.confEndLogout(e,t):this.sipLoginOnlyCtrl.confEndLogout()),this.platformCtrl.notifyPluginLogout(),e&&t&&this.recordConfErrorTip(),this.clearData(e),!this.sipLoginOnlyCtrl&&e&&t&&setTimeout(function(){coreConf.getConfList()},2e3),this.upgradeCtrl.checkAndStart()}},{key:"changeMediaType",value:function(e){x.info("changeMediaType ,old isVideo = "+this.isVideo+",new isVideo = "+e),$dispatch(coreUi.changeMeetingType(e)),this.isVideo&&!e&&(this.isVideo=!1,this.platformCtrl.changeVideoToAudio()),!this.isVideo&&e&&(this.isVideo=!0,this.platformCtrl.changeAudioToVideo())}},{key:"showCallOutPage",value:function(){x.info("showCallOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_OUT")),this.changeMediaType(!1),this.platformCtrl.showCallOutPage()}},{key:"showVideoOutPage",value:function(){x.info("showVideoOutPage"),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_OUT")),this.changeMediaType(!0),this.platformCtrl.showVideoOutPage()}},{key:"showCallConnectedPage",value:function(){x.info("showCallConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!0)),$dispatch(coreUi.changeCallStatus("CALL_CONNECTED")),this.changeMediaType(!1),this.platformCtrl.showCallConnectedPage(),this.clearConfOutTip()}},{key:"showVideoConnectedPage",value:function(){x.info("showVideoConnectedPage"),this.setIsInConf(!0),$dispatch(coreUi.changeCallToolBarShowStatus(!1)),$dispatch(coreUi.changeCallStatus("VIDEO_CONNECTED")),this.changeMediaType(!0),this.platformCtrl.showVideoConnectedPage(),this.clearConfOutTip()}},{key:"clearConfOutTip",value:function(){x.info("clearConfOutTip"),$dispatch(coreUi.createConfTipMsg([]))}},{key:"hideDataShareButton",value:function(){x.info("hideDataShareButton isInDataConf = "+coreConf.getIsDataConf()+",deploymode = "+$getState().login.deployMode),coreConf.getIsDataConf()&&$getState().login.deployMode!==constant.MEETING_NET_TYPE.SMC_MEETING&&(x.info("is dataconf hideDataShareButton true"),$dispatch(coreUi.hideDataShareButton(!0)))}},{key:"stopRing",value:function(){x.info("stopRing"),coreUi.stopRing()}},{key:"closeConfNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_HANDLE);x.info("closeConfNotify hanlde = "+e),coreUi.closeCallNotify(e)}},{key:"dealSvcMemberList",value:function(){x.info("dealSvcMemberList"),this.platformCtrl.dealMemberList()}},{key:"showConfOutTip",value:function(e,t){x.info("showConfOutTip, isVideo = "+e+",isCreateConf = "+t);var n="";n=t?e?language.CREATE_CONFERENCE:language.CREATE_VIOCE_CONFERENCE:language.METTING,$dispatch(coreUi.createConfTipMsg([n]))}},{key:"clearData",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];x.info("clearData, isUserActive = "+e),e&&(window.isUserActiveClose=!0),this.setIsInConf(!1),this.cancleConfMemberlistMessage(),L.ToolbarManager.clearParam(),this.clearRecordInfoHandle(),this.changeStatusOfConference(!0),this.recoredOldPwd(""),$dispatch(coreUi.changCurrentPageInfo({currentPage:0,totalPage:1})),$dispatch(coreUi.setDataSharingFlag(!1)),$dispatch(coreUi.clearPhoneAddrInfo()),$dispatch(coreUi.clearEnterConfInfo()),$dispatch(coreUi.clearBuriedData()),$dispatch(coreUi.clearCallInfo()),coreCall.resetCallInfo(),$dispatch(coreUi.clearConfInfo()),x.info("clearData, clearConfInfo"),coreUi.changeConfAcsStateEntrance(constant.JOIN_CONF_PASSWORD_INPUT_STATE.UNKNOWN),x.info("clearData, changeConfAcsState"),isNullOrEmpty(this.filename)||(x.info("clearData, this.filename not nullOrEmpty"),appService.deleteFile(window.LOG_PATH,this.filename)),this.clearTaskQueue()}},{key:"recordConfErrorTip",value:function(){var e=$getState().conf,t=e.isShowRecordType,n=e.scheduserName,r=e.haveRecorded;x.info("recordConfErrorTip,isShowRecordType:",t);var a=$getState().myInfo.name,o=null;""!==n&&1===t&&1===r?(a===n?o="VIEW_MEETING_RECORDINGS":a!==n&&(o="VIEW_THE_CONFERENCE_RECORDING_FILE"),this.showErrorMsgBox(o)):""===n&&1===t&&1===r&&(o="VIEW_MEETING_RECORDING_FILE_ADMIN",this.showErrorMsgBox(o))}},{key:"showErrorMsgBox",value:function(e){x.info("showErrorMsgBox,errorTitle:",e),this.platformCtrl.showErrorMsgBox(e)}},{key:"clearTaskQueue",value:function(){x.info("clearTaskQueue MODULE_CONFERENCE"),coreCommon.TaskQueue.getInstance("MODULE_CONFERENCE").clear()}},{key:"setIsInConf",value:function(e){e?x.info("setIsInConf isInconf true, need grayed join or createconf button"):x.info("setIsInConf isInConf false, need active join or createconf button"),$dispatch(coreUi.changeIsShowJoinButton(!e))}},{key:"startTime",value:function(){var e=(new Date).getTime();return e=parseInt(e/1e3),x.info("call start time =",e),$dispatch(coreUi.changetime(e)),e}},{key:"saveConfInfo",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(x.info("saveConfInfo"),t=$getState().conf.confSubject,n=$getState().conf.confIdInput,!t||!n){e.next=6;break}return e.next=6,(0,A.saveConfInfoToDb)(n,t);case 6:$dispatch(coreUi.changeConfIdInput(""));case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"clearRecordInfoHandle",value:function(){x.info("clearRecordInfoHandle"),(0,y.clearRecordInfoLogic)()}},{key:"changeStatusOfConference",value:function(e){x.info("changeStatusOfConference, IsleaveConf = "+e),$dispatch(coreUi.changeStatusOfConf(e))}},{key:"recoredOldPwd",value:function(e){x.info("recoredOldPwd"),$dispatch(coreUi.recoredOldPassword(e))}},{key:"cancleConfMemberlistMessage",value:function(){x.info("cancleConfMemberlistMessage"),$getState().conf.showqusetchairman&&$dispatch(coreUi.showqusetchairman());var e=$getState().conf.showRepChairmanError;e&&(x.info("showRepChairmanErrorbool",e),$dispatch(coreUi.showRepChairmanError()))}}]),e}();t.default=R},711:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("myStatusCtrl"),u=function(){function e(){(0,o.default)(this,e),this.isChangedInConf=!1,this.isReverted=!1,this.oldStatus=constant.ONLINE_STATUS.ONLINE,this.oldStatusDesc=""}return(0,s.default)(e,[{key:"changeInConf",value:function(){if(window.isOffline)return void c.info("changeInConf is offline, so return");if(this.isChangedInConf)return void c.info("already changedInConf,so return");this.isChangedInConf=!0;var e=$getState(),t=e.contactGroups.contact_status_map,n=e.myInfo,r=n.account,a=n.statusDesc;this.oldStatus=t[r]&&t[r].status,this.oldStatusDesc=a,c.info("enter conf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",changeInConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting")}},{key:"callToConf",value:function(){return window.isOffline?void c.info("callToConf is offline, so return"):this.isChangedInConf?void c.info("already callToConf,so return"):(this.isChangedInConf=!0,this.oldStatus=$getState().call.oldStatus,this.oldStatusDesc=$getState().call.oldStatusDesc,c.info("callToConf saveOldStatus = "+this.oldStatus+",desc = "+this.oldStatusDesc+",callToConf busy status = "+constant.ONLINE_STATUS.BUSY+",desc:","In meeting"),void this.changeStatus(constant.ONLINE_STATUS.BUSY,"In meeting"))}},{key:"callToConfFail",value:function(){this.changeStatus(constant.ONLINE_STATUS.BUSY,"Calling")}},{key:"revert",value:function(){return window.isOffline?void c.info("revert is offline, so return"):this.isReverted?void c.info("already reverted, so return"):this.isChangedInConf?(this.isReverted=!0,c.info("leave conf restorestatus,status = "+this.oldStatus+",desc = "+this.oldStatusDesc),void(this.oldStatus!==constant.ONLINE_STATUS.OFFLINE&&this.changeStatus(this.oldStatus,this.oldStatusDesc))):void c.info("is not save status,no need to revert, so return")}},{key:"changeStatus",value:function(e,t){window.CLIENTCONFIG.ENABLE_IT_MEETING&&window.webView&&(e===constant.ONLINE_STATUS.BUSY?window.webView.setTalkingState():window.webView.cancelTalkingState()),coreAccount.publishStatus({status:e,desc:t})}}]),e}();t.default=u},712:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(287),u=coreLogger.getLogger("UIConf")("UserTrack"),f=function(){function e(){(0,o.default)(this,e),this.inited=!1}return(0,s.default)(e,[{key:"init",value:function(){if(this.inited)return void u.warn("already inited,so return");coreConf.setServerIp(""),coreUi.showSearchPanel(!1),$dispatch(coreUi.changeHasSentState(!1)),this.inited=!0}},{key:"confEnd",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];window.CLIENTCONFIG.ENABLE_IT_MEETING&&(0,c.meetingHWLeaveConf)();var r=$getState().call.timer;if(window.CLIENTCONFIG.ISBIGWIN)if(n)coreConf.NotifyJoinConfFailedEx(0),$getState().bigwinBuried.buried.postHasSent||(coreConf.buriedJoinConfFailed(),$dispatch(coreUi.changeHasSentState(!0)));else if(e){coreConf.buriedNormalEnd(0,!0,r)}else if(0===t){coreConf.buriedNormalEnd(1,!1,r)}else coreConf.buriedUnormalEnd(t,r)}}]),e}();t.default=f},713:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("UIConf")("UpgradeCtrl"),p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"checkAndStart",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("checkAndStart"),e.next=3,coreAccount.getLoginModel();case 3:t=e.sent,t.isPortalUpgrade?coreAccount.reStartUpgrade():(coreCwmp.checkUpdateConfig(),coreCwmp.restartUpgrade());case 5:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=p},714:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(4),u=r(c),f=n(5),l=r(f),d=coreLogger.getLogger("UIConf")("sipLoginOnlyCtrl"),p=function(){function e(){(0,u.default)(this,e)}return(0,l.default)(e,[{key:"goMainPage",value:function(){d.info("goMainPage"),window.CLIENTCONFIG.ISMOBILE||window.goRoute("main")}},{key:"joinVideoConf",value:function(){d.info("sip only joinVideoConf"),window.CLIENTCONFIG.ISWIN&&(delegate.winHide(),appService.hideTrayClickShowMain())}},{key:"joinAudioConf",value:function(){d.info("joinAudioConf"),window.CLIENTCONFIG.ISWIN?(delegate.winHide(),appService.hideTrayClickShowMain()):appService.showMainWindow(!0)}},{key:"dragSetDisable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetDisable())}},{key:"dragSetEnable",value:function(){d.info("confEnded siploginonly go login page,resize bug need drag disable"),coreCommon.isPc()&&$dispatch(coreUi.dragSetEnable())}},{key:"confEndLogout",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confEndLogout"),e.next=3,coreAccount.clearResumeService();case 3:return e.next=5,coreAccount.stopResume("confEndLogout");case 5:return e.next=7,coreAccount.sipserverDeregister();case 7:return e.next=9,coreAccount.clearnsipinfo();case 9:if(!window.CLIENTCONFIG.ISMOBILE){e.next=13;break}setTimeout(function(){window.goRoute("loginCtn")},500),e.next=17;break;case 13:return e.next=15,coreAccount.deRegisterService({shouldUninitDb:!1});case 15:t=this,setTimeout(function(){window.goRoute("login"),t.dragSetEnable()},500);case 17:case"end":return e.stop()}},e,this)}));return e}()}]),e}();t.default=p},715:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("confTempCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confEndLogout",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];c.info("confEndLogout,isUserActive = "+e+",isEndConf = "+t),e&&t?setTimeout(function(){delegate.logout(!0,!0)},3e3):delegate.logout(!0,!0)}}]),e}();t.default=u},716:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(69),o=r(a),i=n(123),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=n(119),p=r(d),h=n(4),_=r(h),g=n(5),m=r(g),v=n(120),C=r(v),I=n(121),w=r(I),S=n(330),E=r(S),N=n(248),T=coreLogger.getLogger("UIConf")("macCtrl"),b=function(e){function t(){(0,_.default)(this,t);var e=(0,C.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.isVideoOutPageExisted=!1,e}return(0,w.default)(t,e),(0,m.default)(t,[{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("showVideoOutPage"),this.isVideoOutPageExisted=!0,t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=7,coreCall.setLocalVideoRender(t);case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(){T.info("closeConfPage"),$dispatch(coreUi.changeShowPcConfInfoFlag(!1))}},{key:"showUnDecodeMask",value:function(){T.info("showUnDecodeMask");var e=this;this.timerNoDecodeSuc=setTimeout(function(){$dispatch(coreUi.setIsDecodeSuc()),clearTimeout(e.timerNoDecodeSuc)},3e3)}},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSvc=coreConf.getIsSvcConf(),T.info("showVideoConnectedPage isSvcConf = "+this.isSvc),!this.isSvc){e.next=7;break}return e.next=5,this.showSvcConfPage();case 5:e.next=9;break;case 7:return e.next=9,this.showAvcConfPage();case 9:case"end":return e.stop()}},e,this)}));return e}()},{key:"showAvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(T.info("showAvcConfPage in"),this.showUnDecodeMask(),!this.isVideoOutPageExisted){e.next=14;break}return t=coreCall.getBigContainerSize(),t=coreCall.calcRealVideoSize({width:16,height:9},t),$dispatch(coreUi.changeBigWinStyle(t)),e.next=8,coreCall.setRemoteVideoRender(t);case 8:return n={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(n)),e.next=12,coreCall.setVideoWH(!1,n);case 12:e.next=23;break;case 14:return r=coreCall.getBigContainerSize(),r=coreCall.calcRealVideoSize({width:16,height:9},r),$dispatch(coreUi.changeBigWinStyle(r)),e.next=19,coreCall.setRemoteVideoRender(r);case 19:return a={height:constant.VIDEO_SMALL_SIZE.HEIGHT,width:constant.VIDEO_SMALL_SIZE.WIDTH},$dispatch(coreUi.changeSmallWinStyle(a)),e.next=23,coreCall.setLocalVideoRender(a);case 23:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e){T.info("callToConfFail errorTitle = "+e),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e])}},{key:"changeIsSvcConf",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.isSvc){e.next=3;break}return T.info("changeIsSvcConf is already svc, so return"),e.abrupt("return");case 3:return T.info("changeIsSvcConf to svc"),this.isSvc=!0,e.next=7,this.showSvcConfPage();case 7:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("showSvcConfPage"),e.next=3,coreCall.closeAllSvcRemoteSocket();case 3:return e.next=5,coreCall.closeSvcDataSocket();case 5:$dispatch(coreUi.changeSvcOnLineAttendances([])),$dispatch(coreUi.changeSvcShowAttendances([])),$getState().conf.svcRecallorNot||N.SvcAttendanceManager.setSvcLocalRender();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(u.default.mark(function e(){var t,n,r,a,i,c,f;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return T.info("svcSeessionModify"),t=coreConf.getSsrcRange(),e.next=4,coreCall.closeAllSvcRemoteSocket();case 4:n=(0,s.default)([],$getState().conf.svcShowAttendances),r=new Array,a=0;case 7:if(!(a<n.length)){e.next=17;break}if(1!==n[a].is_self){e.next=10;break}return e.abrupt("continue",14);case 10:for(i=t.max;r.indexOf(i)>=0;)i--;n[a].ssrc=i,r.push(i);case 14:a++,e.next=7;break;case 17:if(c=$getState().conf.svcBigPicInfo,c.hasOwnProperty("ssrc")&&(f=(0,s.default)([],c),f.ssrc=t.min,$dispatch(coreUi.changeSvcBigPicInfo(f))),T.info("handleSvcSeessionModify,newSsrcList is "+(0,o.default)(r)),$dispatch(coreUi.changeUsedSvcSSRCList(r)),$dispatch(coreUi.changeSvcShowAttendances(n)),!($getState().conf.svcOnLineAttendances.length>1)){e.next=25;break}return e.next=25,coreConf.getSvcAttendanceManager().sendWatchSvcRequest(n);case 25:return e.next=27,coreConf.getSvcAttendanceManager().setSvcVideoRender(n);case 27:case"end":return e.stop()}},e,this)}));return e}()},{key:"showErrorMsgBox",value:function(e){T.info("showErrorMsgBox, errorTitle = "+e),alert(language[e])}},{key:"showExitConfTip",value:function(e,t){if(T.info("showExitConfTip reasonCode = "+e+",errorTitle = "+t),0!==e){if(7===e)return;coreCommon.isNeedQuickFeedback(t)?window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t)}}}]),t}(E.default);t.default=b},717:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(69),s=r(i),c=n(123),u=r(c),f=n(2),l=r(f),d=n(119),p=r(d),h=n(4),_=r(h),g=n(5),m=r(g),v=n(120),C=r(v),I=n(121),w=r(I),S=n(208),E=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(S),N=n(194),T=n(165),b=n(718),O=r(b),L=n(719),A=r(L),y=n(330),x=r(y),R=n(226),M=coreLogger.getLogger("UIConf")("winCtrl"),k=function(e){function t(){(0,_.default)(this,t);var e=(0,C.default)(this,(t.__proto__||(0,p.default)(t)).call(this));return e.showVideoPreview=function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);M.info("showVideoPreview, call_id = "+handlePhoneNumber(e)),E.updateLocalwindowCallId(callId)},e.bigWinCtrl=window.CLIENTCONFIG.ISBIGWIN?new O.default:null,e.maxHubCtrl=window.isHubEnv?new A.default:null,e}return(0,w.default)(t,e),(0,m.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?M.info("unRegisterNotify success index = "+this.notifyIndex):M.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!this.bigWinCtrl){e.next=4;break}M.warn("showVideoOutPage no need for bigwin"),e.next=12;break;case 4:return M.info("showVideoOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,u.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),r=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),M.info("showVideoOutPage init avc initCallInterface, call_id = "+r+"set_window_title = "+(0,s.default)(n)),e.next=12,E.initCallInterface(r,1,1);case 12:case"end":return e.stop()}},e,this)}));return e}()},{key:"showCallOutPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n,r;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.changeCallToolBarShowStatus(!1)),!this.bigWinCtrl){e.next=5;break}M.warn("showCallOutPage no need for bigwin"),e.next=13;break;case 5:return M.info("showCallOutPage"),t={set_window_title:{title:$getState().call.userInfo.name}},n=(0,u.default)({},t),n.set_window_title.title=handlePhoneNumber(n.set_window_title.title),M.info("showCallOutPage init avc initCallInterface, set_window_title = ",n),r=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),e.next=13,E.initCallInterface(r,0,1);case 13:case"end":return e.stop()}},e,this)}));return e}()},{key:"showVideoConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(this.isSvc=coreConf.getIsSvcConf(),M.info("showVideoConnectedPage isSvcConf = "+this.isSvc),!this.isSvc){e.next=6;break}this.showSvcConfPage(),e.next=8;break;case 6:return e.next=8,this.showAvcConfPage();case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"showCallConnectedPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if($dispatch(coreUi.changeCallToolBarShowStatus(!1)),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),M.info("showCallConnectedPage audio callId  = "+handlePhoneNumber(t)),!E.isAvcNativeExsit()){e.next=7;break}E.updateLocalwindowCallId(t),e.next=11;break;case 7:return window.isCreatingAVCFrame=!0,e.next=10,E.initCallInterface(t,constant.AVC_VIEW_MODE.AUDIO_MODE,constant.SVC_VERSION_FLAG.BASE);case 10:window.isCreatingAVCFrame=!1;case 11:case"end":return e.stop()}},e,this)}));return e}()},{key:"showAvcConfPage",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),M.info("showAvcConfPage avc callId  = "+handlePhoneNumber(t)),n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_SUBJECT),!E.isAvcNativeExsit()){e.next=10;break}E.updateLocalwindowCallId(t),E.setViewMode(constant.AVC_VIEW_MODE.VIDEO_MODE),E.setSubject(n),E.initRemotWindow(t),e.next=16;break;case 10:return window.isCreatingAVCFrame=!0,e.next=13,E.initCallInterface(t,constant.AVC_VIEW_MODE.VIDEO_MODE,constant.SVC_VERSION_FLAG.BASE);case 13:return e.next=15,coreConf.initRemotWindow(t);case 15:window.isCreatingAVCFrame=!1;case 16:case"end":return e.stop()}},e,this)}));return e}()},{key:"callToConfFail",value:function(e,t){N.ToolbarManager.setConfHandle(""),T.SvcAtdManager.isNativeUIExsit()?(M.info("callToConfFail handlePlatformMessageBox1 isVideo"),coreCommon.isNeedQuickFeedback(e)?T.SvcAtdManager.alertBox(e+language.FEEDBACK_MESSAGE_TIPS,2,0,"feedback",language.FEEDBACK):T.SvcAtdManager.alertBox(e,2)):(M.info("callToConfFail handlePlatformMessageBox2 "),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e]))}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=coreConf.getSsrcRange(),M.info("svcSeessionModify,ssrcRange min is "+t.min+",max is "+t.max),coreConf.getSvcAtdManager().handleSvcSsrcModify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"showSvcConfPage",value:function(){this.confConnectedSvc();var e=this.getSvcViewMode(),t=this.getSvcVersionFlag(),n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);if(M.info("showSvcConfPage svcViewMode = "+e+",svcVersionFlag = "+t+"callId = "+handlePhoneNumber(n)),window.isCreatingAVCFrame)var r=0,a=setInterval(function(){window.isCreatingAVCFrame?++r>50&&(clearInterval(a),M.info("showSvcConfPage initVideoFrame in creatting AVCFrame time = "+100*r+",please check!!!"),T.SvcAtdManager.initVideoFrame(n,e,t)):(clearInterval(a),M.info("showSvcConfPage initVideoFrame after create AVCFrame time = "+100*r),T.SvcAtdManager.initVideoFrame(n,e,t))},100);else M.info("showSvcConfPage window.isCreatingAVCFrame = "+window.isCreatingAVCFrame),T.SvcAtdManager.initVideoFrame(n,e,t)}},{key:"changeIsSvcConf",value:function(){if(this.isSvc)return void M.info("changeIsSvcConf is already svc, so return");M.info("changeIsSvcConf to svc"),this.isSvc=!0,this.showSvcConfPage()}},{key:"changeVideoToAudio",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return M.info("changeVideoToAudio"),t=$getState().conf.isShowMemberListNew,t&&$dispatch(coreUi.changeIsShowMemberListNew()),T.SvcAtdManager.closeVideoFrame(),T.SvcAtdManager.closeBfcpFrame(),E.closeBfcpFrame(),e.next=8,E.setViewMode(constant.AVC_VIEW_MODE.AUDIO_MODE);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"confConnectedSvc",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:M.info("confConnectedSvc"),t=coreConf.getSsrcRange(),n={ssrc:t.min},$dispatch(coreUi.changeSvcBigPicInfo(n)),coreConf.getIsRecall()&&T.SvcAtdManager.handleSvcSsrcModify(t);case 5:case"end":return e.stop()}},e,this)}));return e}()},{key:"closeConfPage",value:function(e,t){M.info("closeConfPage"),e||(0,R.notifyNativeLeaveConf)(),E.closeCallInterface(),T.SvcAtdManager.closeVideoFrame(),T.SvcAtdManager.closeBfcpFrame(),T.SvcAtdManager.clear(),this.bigWinCtrl&&this.bigWinCtrl.NotifyMyLeaveConf(0),this.maxHubCtrl&&this.maxHubCtrl.NotifyMyLeaveConf(0),$dispatch(coreUi.changeShowPcConfInfoFlag(!1))}},{key:"showExitConfTip",value:function(e,t){if(M.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),0!==e){if(7===e)return;coreCommon.isNeedQuickFeedback(t)?window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t,2)}}},{key:"notifyPluginLogout",value:function(){M.info("notifyPluginLogout"),this.bigWinCtrl&&this.bigWinCtrl.commonLogOut()}},{key:"showErrorMsgBox",value:function(e){T.SvcAtdManager.isNativeUIExsit()?(M.info("showErrorMsgBox isNative"),T.SvcAtdManager.alertBox(e,2)):(M.info("showErrorMsgBox isJS"),alert(language[e]))}},{key:"dealMemberList",value:function(){function e(){return t.apply(this,arguments)}var t=(0,l.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(M.info("dealMemberList"),this.bigWinCtrl){e.next=8;break}if(!((t=$getState().conf.memberListInfo)&&t.length>0)||coreConf.isMemberListNull()){e.next=8;break}return M.info("handleSvcAtdList in confConnected, memberNum = "+t.length),n=this.sortByTime(t),e.next=8,T.SvcAtdManager.handleSvcAtdList(n);case 8:case"end":return e.stop()}},e,this)}));return e}()},{key:"getSvcViewMode",value:function(){return M.info("getSvcViewMode"),this.bigWinCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:this.maxHubCtrl?constant.SVC_VIEW_MODE.DIVIDE_MODE:constant.SVC_VIEW_MODE.BIG_SMALL_MODE}},{key:"getSvcVersionFlag",value:function(){return M.info("getSvcVersionFlag"),this.bigWinCtrl?constant.SVC_VERSION_FLAG.BIG:(this.maxHubCtrl,constant.SVC_VERSION_FLAG.BASE)}},{key:"sortByTime",value:function(e){M.info("sortByTime");var t=$getState().conf.svcOnLineAttendances;if(0===t.length)return e;for(var n=new Array,r=new Array,a=0;a<t.length;a++){for(var o=t[a],i=0;i<e.length;i++){var s=e[i];s.number!==o.number||5!==s.state||this.isInArray3(n,o.number)||r.push(s)}n.push(o.number)}for(var c=0;c<e.length;c++){var u=e[c];5===u.state&&n.indexOf(u.number)<0&&(r.push(u),n.push(u.number))}for(var f=0;f<e.length;f++){var l=e[f];n.indexOf(l.number)<0&&(r.push(l),n.push(l.number))}return r}},{key:"isInArray3",value:function(e,t){if(M.info("isInArray3"),e.indexOf&&"function"==typeof e.indexOf){if(e.indexOf(t)>=0)return!0}return!1}}]),t}(x.default);t.default=k},718:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(250),u=(coreLogger.getLogger("UIConf")("BigWinCtrl"),function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){(0,c.NotifyMyLeaveConf)(e)}},{key:"commonLogOut",value:function(){window.bigWinCommonLogOut()}}]),e}());t.default=u},719:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(250),u=coreLogger.getLogger("UIConf")("MaxHubCtrl"),f=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"NotifyMyLeaveConf",value:function(e){u.info("NotifyMyLeaveConf rst = "+e),(0,c.NotifyMyLeaveConf)(e)}}]),e}();t.default=f},720:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(1),o=r(a),i=n(2),s=r(i),c=n(119),u=r(c),f=n(4),l=r(f),d=n(5),p=r(d),h=n(120),_=r(h),g=n(121),m=r(g),v=n(721),C=r(v),I=n(330),w=r(I),S=coreLogger.getLogger("UIConf")("mobileCtrl"),E=function(e){function t(){(0,l.default)(this,t);var e=(0,_.default)(this,(t.__proto__||(0,u.default)(t)).call(this));return e.showVideoPreview=function(){var t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),n=coreConf.getIsSvcConf();S.info("showVideoPreview, call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),window.callStatusChangeNotify(t,"VIDEO_OUT",!1,!0,n,e.isPairConf)},e.iTMeetingCtrl=window.CLIENTCONFIG.ENABLE_IT_MEETING?new C.default:null,e.isPairConf=$getState().synergismInfo.inPairConf?1:0,e.isSvc=!1,e.notifyIndex="",e.registerNotify(),e}return(0,m.default)(t,e),(0,p.default)(t,[{key:"registerNotify",value:function(){this.notifyIndex=coreCommon.Observer.subscribe("showVideoPreview",this.showVideoPreview)}},{key:"unRegisterNotify",value:function(){coreCommon.Observer.unsubscribeToken(this.notifyIndex)?S.info("unRegisterNotify success index = "+this.notifyIndex):S.error("unRegisterNotify fail index = "+this.notifyIndex)}},{key:"showVideoOutPage",value:function(){S.info("showVideoOutPage"),this.goCallMainRoute()}},{key:"showCallOutPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),t=coreConf.getIsSvcConf();S.info("showCallOutPage, call_id = "+handlePhoneNumber(e)),window.callStatusChangeNotify(e,"CALL_OUT",!1,!0,t,this.isPairConf),this.goCallMainRoute()}},{key:"goCallMainRoute",value:function(){var e=window.getRoute();S.info("goCallMainRoute currentPage = "+e),"callMain"!==e&&"mConfMemberPage"!==e&&window.goRoute("callMain")}},{key:"callToConfFail",value:function(e,t){var n=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),r=coreConf.getIsSvcConf();S.info("callToConfFail errorTitle = "+e+",newCallStatus = "+t+",call_id = "+handlePhoneNumber(n)+",isSvcConf = "+r),this.iTMeetingCtrl&&window.callOrConfEnded(),window.callStatusChangeNotify(n,t,!0,!0,r,this.isPairConf);var a=window.getRoute();"callMain"!==a&&"mConfMemberPage"!==a||(S.info("callToConfFail produceCallMemberList"),coreCall.produceCallMemberList()),coreCommon.isNeedQuickFeedback(e)?window.confirm(e+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(t){t.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,e)}):alert(language[e])}},{key:"confIncoming",value:function(e){var t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),n=coreConf.getIsSvcConf();S.info("confIncoming isVideo = "+e+",call_id = "+handlePhoneNumber(t)+",isSvcConf = "+n),this.iTMeetingCtrl&&window.switchToFront(),window.webView&&(e&&window.webView.initCallVideo(),window.webView.setFrontToLock()),this.goCallMainRoute(),window.callStatusChangeNotify(t,"CALL_INCOMING",!0,!0,n,this.isPairConf)}},{key:"changeAudioToVideo",value:function(){S.info("changeAudioToVideo"),window.webView&&window.webView.initCallVideo()}},{key:"changeVideoToAudio",value:function(){S.info("changeVideoToAudio"),window.webView&&window.webView.unInitCallVideo()}},{key:"showCallConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID),t=coreConf.getIsSvcConf();S.info("showCallConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+t),window.callStatusChangeNotify(e,"CALL_CONNECTED",!0,!0,t,this.isPairConf),this.goCallMainRoute()}},{key:"showVideoConnectedPage",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);this.isSvc=coreConf.getIsSvcConf(),S.info("showVideoConnectedPage call_id = "+handlePhoneNumber(e)+",isSvcConf = "+this.isSvc),this.recordDeviceOrient(),window.isSvcToNative(this.isSvc,e,!1),window.callStatusChangeNotify(e,"VIDEO_CONNECTED",!1,!0,this.isSvc,this.isPairConf),this.goCallMainRoute()}},{key:"recordDeviceOrient",value:function(){if(coreConf.getIsSvcConf())return void S.info("recordDeviceOrient no need for svcconf, so return");coreConf.getIsRecall()||S.info("recordDeviceOrient no need for not in recall,so return"),S.info("recordDeviceOrient");var e=$getState().call.deviceOrient;$dispatch(coreUi.recordMobileOrientChange(e))}},{key:"changeIsSvcConf",value:function(){if(this.isSvc)return void S.info("changeIsSvcConf is already svc, so return");var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CALL_ID);S.info("changeIsSvcConf to svc, call_id = "+handlePhoneNumber(e)+",this.isSvc = "+this.isSvc),this.isSvc=!0,window.isSvcToNative(this.isSvc,e,!0)}},{key:"confInfoNotify",value:function(){S.info("confInfoNotify"),this.iTMeetingCtrl&&this.iTMeetingCtrl.confInfoNotify()}},{key:"svcSeessionModify",value:function(){function e(){return t.apply(this,arguments)}var t=(0,s.default)(o.default.mark(function e(){var t,n;return o.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=$getState().conf.svcNativeToJS,S.info("svcSeessionModify =",t),isNullOrEmpty(t)?(n=$getState().conf.svcMobileConfHandles,!isNullOrEmpty(n.remoteLargeViewIdx)&&isNullOrEmpty(t)&&(S.info("SvcNativeToJS then handlessrc -1;"),coreConf.handleSSRCURL(-1))):window.multiStreamPageInfoChangeNotify(t);case 3:case"end":return e.stop()}},e,this)}));return e}()},{key:"acceptConfStart",value:function(e){S.info("acceptConfStart isVideoType =",e),window.webView&&1===e&&window.webView.initCallVideo()}},{key:"rejectConf",value:function(){S.info("rejectConf"),window.webView&&window.webView.releaseFrontToLock(),window.callOrConfEnded(),"callMain"===window.getRoute()&&(S.info("mobile end conf"),history.back())}},{key:"closeConfPage",value:function(e,t,n){var r=$getState().conf.isSvcConf?1:0,a=$getState().call.callId;S.info("closeConfPage isUserActive = "+e+",isEndConf = "+t+",isSvcConf = "+r+",call_id = "+handlePhoneNumber(a)+",backPage = "+n),window.callOrConfEnded();var o=$getState().call.callStatus;if("VIDEO_OUT"!==o&&"VIDEO_CONNECTED"!==o||window.callStatusChangeNotify(a,"VIDEO_END",!1,!0,r,this.isPairConf),this.iTMeetingCtrl)this.iTMeetingCtrl.closeConfPage(e,t);else{"loginCtn"!==window.getRoute()&&(isNullOrEmpty(n)||window.goRoute(n,!0))}this.unRegisterNotify()}},{key:"showExitConfTip",value:function(e,t){if(S.info("showExitConfTip reasonCode = "+e+",exitTip = "+t),this.iTMeetingCtrl)this.iTMeetingCtrl.showExitConfTip(e,t);else{if(7===e)return;0===e?window.ToastNew(t,2):coreCommon.isNeedQuickFeedback(t)?window.CLIENTCONFIG.ENABLE_IT_MEETING||window.confirm(t+language.FEEDBACK_MESSAGE_TIPS,{rightButton:language.FEEDBACK}).then(function(e){e.ret&&coreCommon.quickSubmitFeedback(constant.QUICK_FEEDBACK_KEYWORDS.JOIN_CONF_ERROR,t)}):alert(t)}}},{key:"notifyPluginLogout",value:function(){S.info("notifyPluginLogout"),this.iTMeetingCtrl&&this.iTMeetingCtrl.endConfLogout()}},{key:"showErrorMsgBox",value:function(e){S.info("showErrorMsgBox errorTitle = "+e),alert(language[e])}}]),t}(w.default);t.default=E},721:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=n(722),u=r(c),f=coreLogger.getLogger("UIConf")("ITMeetingCtrl"),l=function(){function e(){(0,o.default)(this,e),this.hWITMeeting=window.CLIENTCONFIG.IS_LINK_IT_SMC_MEETING?new u.default:null,this.callOutTimer=0,this.isSwitchedToBackMode=!1}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){var e=coreConf.getInfoOfConf(coreConf.getConfInfoMap().CONF_SERVER_ID);e&&(window.confConnectInfo?window.confConnectInfo[e]||(window.confConnectInfo[e]=1):(window.confConnectInfo={},window.confConnectInfo[e]=1)),f.info("confConnected is confid :"+e),this.hWITMeeting&&this.hWITMeeting.confInfoNotify()}},{key:"closeConfPage",value:function(e,t){if(f.info("closeConfPage isUserActive  = "+e+",isEndConf = "+t),this.hWITMeeting)window.changeScreenOrientation(constant.SCREEN_ORIENTATION.SCREEN_ORIENTATION_PORTRAIT),window.switchToBackMode(),this.isSwitchedToBackMode=!0;else{var n=!0;window.requestPermissionPromise&&(n=!1,window.requestPermissionPromise.resolve(!1)),window.goRoute("main/conference"),n&&(e&&t||!e)&&(window.switchToBackMode(),this.isSwitchedToBackMode=!0)}}},{key:"showExitConfTip",value:function(e,t){f.info("showExitConfTip reasonCode  = "+e+",exitTip = "+t),this.isSwitchedToBackMode?window.itWeLinkNotifyCallEnded(e,t):0===e?window.ToastNew(t,2):alert(t)}},{key:"endConfLogout",value:function(){f.info("endConfLogout"),this.hWITMeeting&&this.hWITMeeting.endConfLogout()}}]),e}();t.default=l},722:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(4),o=r(a),i=n(5),s=r(i),c=coreLogger.getLogger("UIConf")("HWITMeetingCtrl"),u=function(){function e(){(0,o.default)(this,e)}return(0,s.default)(e,[{key:"confInfoNotify",value:function(){c.info("confInfoNotify");$getState().call.callStatus,coreConf.getIsSvcConf()}},{key:"endConfLogout",value:function(){c.info("[IT-Meeting] leave conf, dologout"),delegate.doLogout(constant.LOGOUT_TYPE.LOGOUT)}}]),e}();t.default=u},723:function(e,t,n){"use strict";function r(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"__esModule",{value:!0}),t.p2pTransToConfCreateGroup=t.confTransToConfRefreshRecent=t.acceptConfRefreshRecent=t.confInComingRefreshRecent=t.createConfToRefreshRecent=void 0;var a=n(123),o=r(a),i=n(129),s=r(i),c=n(1),u=r(c),f=n(2),l=r(f),d=coreLogger.getLogger("conf")("iMctrl"),p=(t.createConfToRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(t){return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=3,p(t.group_id,!1,!0);case 3:e.next=7;break;case 5:return e.next=7,p(t.group_id,!1,!0);case 7:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}(),t.confInComingRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return d.info("confInComingRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),e.next=4,p(t,!1,!0);case 4:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.acceptConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("acceptConfRefreshRecent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=5;break}return e.next=5,p(t,!0,!0);case 5:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.confTransToConfRefreshRecent=function(){var e=(0,l.default)(u.default.mark(function e(){var t;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("be trans to conf, refresh recent"),t=coreConf.getInfoOfConf(coreConf.getConfInfoMap().GROUP_URI),window.CLIENTCONFIG.ISMOBILE){e.next=7;break}return e.next=5,p(t,!0,!0,!0);case 5:e.next=9;break;case 7:return e.next=9,p(t,!1,!0,!0);case 9:case"end":return e.stop()}},e,void 0)}));return function(){return e.apply(this,arguments)}}(),t.p2pTransToConfCreateGroup=function(){var e=(0,l.default)(u.default.mark(function e(t,n,r,a){var o,i,c,f,l;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(o=h(t,n,r,a),i=o.groupMemList,c=o.groupNumList,f=o.totalGroupList,l="",!window.CLIENTCONFIG.USE_IM){e.next=15;break}return e.next=5,_(i,f);case 5:if(l=e.sent,c&&c>0&&(d.info("add number to group"),coreGroup.addGroupPhoneMemberService({groupId:l,phoneList:[].concat((0,s.default)(c))})),!l){e.next=15;break}if(window.CLIENTCONFIG.ISMOBILE){e.next=13;break}return e.next=11,p(l,!0,!0,!0);case 11:e.next=15;break;case 13:return e.next=15,p(l,!1,!0,!0);case 15:return e.abrupt("return",l);case 16:case"end":return e.stop()}},e,void 0)}));return function(t,n,r,a){return e.apply(this,arguments)}}(),function(){var e=(0,l.default)(u.default.mark(function e(t,n,r){var a,o,i,s=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(d.info("refresh recent by groupid: "+t),window.CLIENTCONFIG.USE_IM){e.next=3;break}return e.abrupt("return");case 3:if(!t){e.next=15;break}if(!r){e.next=12;break}return e.next=7,coreIm.createGroupConversation({group_id:t},!1,!0);case 7:a=e.sent,o=a.recent,i=a.group,coreIm.refreshRecentList(o),o.unread_num>0&&$dispatch(coreUi.changeHasUnreadMsg(!0));case 12:if(!n){e.next=15;break}return e.next=15,coreIm.openGroupConversationByConf({group_id:t},!1,!s);case 15:case"end":return e.stop()}},e,void 0)}));return function(t,n,r){return e.apply(this,arguments)}}()),h=function(e,t,n,r){for(var a=[],i=[],s=[],c=0;c<e.length;c++)e[c].number===e[c].bind_no&&e[c].account!==n.account&&e[c].account!==t.account?a.push((0,o.default)({},e[c])):i.push({phone:e[c].number}),e[c].account!==n.account&&e[c].account!==t.account&&s.push((0,o.default)({},e[c]));if(n.bind_no===r){-1===a.findIndex(function(e){return e.account===n.account})&&a.push((0,o.default)({},n))}else i.push({phone:r});return s.push((0,o.default)({},n)),{groupMemList:a,groupNumList:i,totalGroupList:s}},_=function(){var e=(0,l.default)(u.default.mark(function e(t){var n;return u.default.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,coreGroup.createDiscussionGroup({list:t});case 2:if(!(n=e.sent)||!n.group_id){e.next=8;break}return d.info("p2p trans to conf create discuss group successed: ",n.group_id),e.abrupt("return",n.group_id);case 8:return d.info("p2p trans to conf create discuss group failed"),e.abrupt("return","");case 10:case"end":return e.stop()}},e,void 0)}));return function(t){return e.apply(this,arguments)}}()},724:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=coreLogger.getLogger("conf")("errorInConf");t.getCallEndedErrorTip=function(e,t){r.info("getCallEndedErrorTitle, reasonCode = "+e+",endcall_reason = "+t);return 404===e?language.ENTER_CONF_NO_FOUND:490===e?language.CONF_TIME_CONFLICT:4041===e?language.IT_CONF_NOT_STARTED:4042===e?language.IT_CONF_ENDED:t.indexOf("ConferenceIsLock")>-1?language.LANG_NATIVE_MEETING_LOCKED:t.indexOf("ServerError_allocate seat resource")>-1?language.CONF_RESOURCE_NULL:t.indexOf("11081006")>-1?language.PASSWORD_NOT_CORRECT:t.indexOf("11071058")>-1?language.VMR_MEETING_HAS_NOT_BEEN_HOLD_YET:language.ENTER_CONF_FAIL},t.getEnterConfByIdOnlyTip=function(e){r.info("getEnterConfByIdOnlyTip errorCode = "+e);return 11017===e?language.CONF_NOT_EXIST:-2===e?language.ENTER_CONF_FAIL:isNullOrEmpty(language[constant.AS_ERRORCODE_LOG_INFO[e]])?language.CONF_GET_AUTH_INFO_FAILED:language[constant.AS_ERRORCODE_LOG_INFO[e]]},t.getCreateConfFailTitle=function(e){r.info("getCreateConfFailTitle errorCode = "+e);return 285212898===e?language.CREATE_CONF_FAILED_REASON1:285212899===e?language.CREATE_CONF_FAILED_REASON2:285212900===e?language.CREATE_CONF_FAILED_REASON3:285212901===e?language.CREATE_CONF_FAILED_REASON4:3===e?language.CONFERENCE_CREATE_FAILED_BEACASE_OF_NETWORK:11047===e||11196===e?language.RECORDING_CONFERENCE_FUNCTION_IS_NOT_ENABLED:11085===e||11136===e||11071005===e?language.CONF_TIME_CONFLICT:795===e?language.INSUFFICIENT_RECORD_RESOURCES:50331819===e?language.RECORDING_VENUE_IS_NOT_INCLUDED:isNullOrEmpty(language[constant.AS_ERRORCODE_LOG_INFO[e]])?language.CONFERENCE_CREATE_FAILED:language[constant.AS_ERRORCODE_LOG_INFO[e]]},t.CREATE_CONF_ERR={SUCCESS:{code:0,msg:"成功"},OUT_MEMBER_LIMIT:{code:4001,msg:"与会人数超过最大限制"},MEMBER_EMPTY:{code:4002,msg:"与会人数为空，不能创建会议"},MULTI_DEVICE_LOGIN:{code:4003,msg:"有其他设备登录该账户，不能创建/加入会议"},OFFLINE:{code:4004,msg:"离线状态，不能创建/加入会议"},SIP_FAIL:{code:4005,msg:"协议注册失败"},EXIST_CONF:{code:4006,msg:"已经存在一路会议，不能创建/加入"},EXIST_CALL:{code:4007,msg:"已经存在一路呼叫，不能创建/加入"},EXIST_SIM_CALL:{code:4008,msg:"正在通话中"},PERMSSION_REJECT:{code:4009,msg:"移动端没有权限不能创建会议"},NET_2G:{code:4010,msg:"2G网络下不支持视频通话"},USER_CANCEL:{code:4011,msg:"3g/4g下用户取消创建会议"}}},725:function(e,t,n){"use strict";function r(e,t){c&&c.webContents&&c.webContents.send&&c.webContents.send(e,t)}function a(e,t){s.on(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createWebContentsSend=r,t.createIpcMainOn=a;var o=coreLogger.getLogger("Ipc/logic")("selectBox"),i=window.require("electron"),s=i.remote.ipcMain,c=null;t.initWindow=function(){o.info("initWindowToSelectBox"),c=null},t.setWindow=function(e){c=e}},726:function(e,t,n){"use strict";function r(e,t){c&&c.webContents&&c.webContents.send&&c.webContents.send(e,t)}function a(e,t){s.on(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createWebContentsSend=r,t.createIpcMainOn=a;var o=coreLogger.getLogger("Ipc/logic")("memberList"),i=window.require("electron"),s=i.remote.ipcMain,c=null;t.initWindow=function(){o.info("initWindowToAudioSetting"),c=null},t.setWindow=function(e){c=e}},727:function(e,t,n){"use strict";function r(e,t){c&&c.webContents&&c.webContents.send&&c.webContents.send(e,t)}function a(e,t){s.on(e,t)}Object.defineProperty(t,"__esModule",{value:!0}),t.createWebContentsSend=r,t.createIpcMainOn=a;var o=coreLogger.getLogger("Ipc/logic")("memberList"),i=window.require("electron"),s=i.remote.ipcMain,c=null;t.initWindow=function(){o.info("initWindowToAudioSetting"),c=null},t.setWindow=function(e){c=e}},879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mainIpcUpdateMaxhubProps=t.mainIpcUpdateDragChangeProps=t.mainIpcUpdateLanguageChangeProps=t.mainIpcUpdateMemberListDialogPorps=t.mainIpcUpdateMemberListRightMenuPorps=t.mainIpcUpdateMemberListActionBarPorps=t.mainIpcUpdateMemberListSpokePorps=t.mainIpcUpdateMemberListDataPorps=t.mainIpcUpdateMemberListWarpPorps=t.mainIpcUpdateMemberListHeaderPorps=void 0;var r=n(694),a=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(r);t.mainIpcUpdateMemberListHeaderPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_HEADER_PROPS,e)},t.mainIpcUpdateMemberListWarpPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_WARP_PROPS,e)},t.mainIpcUpdateMemberListDataPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_DATA_PROPS,e)},t.mainIpcUpdateMemberListSpokePorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_SPOKE_PROPS,e)},t.mainIpcUpdateMemberListActionBarPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_ACTION_BAR_PROPS,e)},t.mainIpcUpdateMemberListRightMenuPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_RIGHT_MENU_PROPS,e)},t.mainIpcUpdateMemberListDialogPorps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_DIALOG_PROPS,e)},t.mainIpcUpdateLanguageChangeProps=function(){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_LANG_PROPS)},t.mainIpcUpdateDragChangeProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_DRAG_PROPS,e)},t.mainIpcUpdateMaxhubProps=function(e){return a.createWebContentsSend(ipcConstant.IPC_MEMBER_LIST_TYPE.UPDATE_MAXHUB_PROPS,e)}}});